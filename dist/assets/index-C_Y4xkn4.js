var xT=Object.defineProperty;var IT=(e,t,n)=>t in e?xT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Qt=(e,t,n)=>IT(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ul(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function AT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var R2={exports:{}},If={},$2={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bl=Symbol.for("react.element"),CT=Symbol.for("react.portal"),TT=Symbol.for("react.fragment"),kT=Symbol.for("react.strict_mode"),RT=Symbol.for("react.profiler"),$T=Symbol.for("react.provider"),OT=Symbol.for("react.context"),PT=Symbol.for("react.forward_ref"),NT=Symbol.for("react.suspense"),DT=Symbol.for("react.memo"),UT=Symbol.for("react.lazy"),gw=Symbol.iterator;function BT(e){return e===null||typeof e!="object"?null:(e=gw&&e[gw]||e["@@iterator"],typeof e=="function"?e:null)}var O2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P2=Object.assign,N2={};function Pa(e,t,n){this.props=e,this.context=t,this.refs=N2,this.updater=n||O2}Pa.prototype.isReactComponent={};Pa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Pa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function D2(){}D2.prototype=Pa.prototype;function sy(e,t,n){this.props=e,this.context=t,this.refs=N2,this.updater=n||O2}var oy=sy.prototype=new D2;oy.constructor=sy;P2(oy,Pa.prototype);oy.isPureReactComponent=!0;var mw=Array.isArray,U2=Object.prototype.hasOwnProperty,ay={current:null},B2={key:!0,ref:!0,__self:!0,__source:!0};function L2(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)U2.call(t,r)&&!B2.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Bl,type:e,key:s,ref:o,props:i,_owner:ay.current}}function LT(e,t){return{$$typeof:Bl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cy(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bl}function FT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var yw=/\/+/g;function kh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?FT(""+e.key):t.toString(36)}function rd(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Bl:case CT:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+kh(o,0):r,mw(i)?(n="",e!=null&&(n=e.replace(yw,"$&/")+"/"),rd(i,t,n,"",function(l){return l})):i!=null&&(cy(i)&&(i=LT(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(yw,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",mw(e))for(var a=0;a<e.length;a++){s=e[a];var c=r+kh(s,a);o+=rd(s,t,n,c,i)}else if(c=BT(e),typeof c=="function")for(e=c.call(e),a=0;!(s=e.next()).done;)s=s.value,c=r+kh(s,a++),o+=rd(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function uu(e,t,n){if(e==null)return e;var r=[],i=0;return rd(e,r,"","",function(s){return t.call(n,s,i++)}),r}function jT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var nn={current:null},id={transition:null},MT={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:id,ReactCurrentOwner:ay};function F2(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:uu,forEach:function(e,t,n){uu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return uu(e,function(){t++}),t},toArray:function(e){return uu(e,function(t){return t})||[]},only:function(e){if(!cy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};he.Component=Pa;he.Fragment=TT;he.Profiler=RT;he.PureComponent=sy;he.StrictMode=kT;he.Suspense=NT;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MT;he.act=F2;he.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=P2({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=ay.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)U2.call(t,c)&&!B2.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Bl,type:e.type,key:i,ref:s,props:r,_owner:o}};he.createContext=function(e){return e={$$typeof:OT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$T,_context:e},e.Consumer=e};he.createElement=L2;he.createFactory=function(e){var t=L2.bind(null,e);return t.type=e,t};he.createRef=function(){return{current:null}};he.forwardRef=function(e){return{$$typeof:PT,render:e}};he.isValidElement=cy;he.lazy=function(e){return{$$typeof:UT,_payload:{_status:-1,_result:e},_init:jT}};he.memo=function(e,t){return{$$typeof:DT,type:e,compare:t===void 0?null:t}};he.startTransition=function(e){var t=id.transition;id.transition={};try{e()}finally{id.transition=t}};he.unstable_act=F2;he.useCallback=function(e,t){return nn.current.useCallback(e,t)};he.useContext=function(e){return nn.current.useContext(e)};he.useDebugValue=function(){};he.useDeferredValue=function(e){return nn.current.useDeferredValue(e)};he.useEffect=function(e,t){return nn.current.useEffect(e,t)};he.useId=function(){return nn.current.useId()};he.useImperativeHandle=function(e,t,n){return nn.current.useImperativeHandle(e,t,n)};he.useInsertionEffect=function(e,t){return nn.current.useInsertionEffect(e,t)};he.useLayoutEffect=function(e,t){return nn.current.useLayoutEffect(e,t)};he.useMemo=function(e,t){return nn.current.useMemo(e,t)};he.useReducer=function(e,t,n){return nn.current.useReducer(e,t,n)};he.useRef=function(e){return nn.current.useRef(e)};he.useState=function(e){return nn.current.useState(e)};he.useSyncExternalStore=function(e,t,n){return nn.current.useSyncExternalStore(e,t,n)};he.useTransition=function(){return nn.current.useTransition()};he.version="18.3.1";$2.exports=he;var H=$2.exports;const zT=Ul(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HT=H,qT=Symbol.for("react.element"),VT=Symbol.for("react.fragment"),GT=Object.prototype.hasOwnProperty,WT=HT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KT={key:!0,ref:!0,__self:!0,__source:!0};function j2(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)GT.call(t,r)&&!KT.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:qT,type:e,key:s,ref:o,props:i,_owner:WT.current}}If.Fragment=VT;If.jsx=j2;If.jsxs=j2;R2.exports=If;var _=R2.exports,Zp={},M2={exports:{}},Ln={},z2={exports:{}},H2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,$){var P=R.length;R.push($);e:for(;0<P;){var M=P-1>>>1,W=R[M];if(0<i(W,$))R[M]=$,R[P]=W,P=M;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var $=R[0],P=R.pop();if(P!==$){R[0]=P;e:for(var M=0,W=R.length,ee=W>>>1;M<ee;){var Q=2*(M+1)-1,te=R[Q],se=Q+1,ue=R[se];if(0>i(te,P))se<W&&0>i(ue,te)?(R[M]=ue,R[se]=P,M=se):(R[M]=te,R[Q]=P,M=Q);else if(se<W&&0>i(ue,P))R[M]=ue,R[se]=P,M=se;else break e}}return $}function i(R,$){var P=R.sortIndex-$.sortIndex;return P!==0?P:R.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,f=3,h=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(R){for(var $=n(l);$!==null;){if($.callback===null)r(l);else if($.startTime<=R)r(l),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(l)}}function A(R){if(g=!1,E(R),!p)if(n(c)!==null)p=!0,x(T);else{var $=n(l);$!==null&&O(A,$.startTime-R)}}function T(R,$){p=!1,g&&(g=!1,m(L),L=-1),h=!0;var P=f;try{for(E($),d=n(c);d!==null&&(!(d.expirationTime>$)||R&&!B());){var M=d.callback;if(typeof M=="function"){d.callback=null,f=d.priorityLevel;var W=M(d.expirationTime<=$);$=e.unstable_now(),typeof W=="function"?d.callback=W:d===n(c)&&r(c),E($)}else r(c);d=n(c)}if(d!==null)var ee=!0;else{var Q=n(l);Q!==null&&O(A,Q.startTime-$),ee=!1}return ee}finally{d=null,f=P,h=!1}}var D=!1,j=null,L=-1,C=5,U=-1;function B(){return!(e.unstable_now()-U<C)}function F(){if(j!==null){var R=e.unstable_now();U=R;var $=!0;try{$=j(!0,R)}finally{$?q():(D=!1,j=null)}}else D=!1}var q;if(typeof w=="function")q=function(){w(F)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,S=G.port2;G.port1.onmessage=F,q=function(){S.postMessage(null)}}else q=function(){v(F,0)};function x(R){j=R,D||(D=!0,q())}function O(R,$){L=v(function(){R(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,x(T))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var P=f;f=$;try{return R()}finally{f=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,$){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var P=f;f=R;try{return $()}finally{f=P}},e.unstable_scheduleCallback=function(R,$,P){var M=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?M+P:M):P=M,R){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=P+W,R={id:u++,callback:$,priorityLevel:R,startTime:P,expirationTime:W,sortIndex:-1},P>M?(R.sortIndex=P,t(l,R),n(c)===null&&R===n(l)&&(g?(m(L),L=-1):g=!0,O(A,P-M))):(R.sortIndex=W,t(c,R),p||h||(p=!0,x(T))),R},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(R){var $=f;return function(){var P=f;f=$;try{return R.apply(this,arguments)}finally{f=P}}}})(H2);z2.exports=H2;var QT=z2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT=H,Un=QT;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var q2=new Set,nl={};function ao(e,t){_a(e,t),_a(e+"Capture",t)}function _a(e,t){for(nl[e]=t,e=0;e<t.length;e++)q2.add(t[e])}var mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eg=Object.prototype.hasOwnProperty,XT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ww={},vw={};function JT(e){return eg.call(vw,e)?!0:eg.call(ww,e)?!1:XT.test(e)?vw[e]=!0:(ww[e]=!0,!1)}function ZT(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ek(e,t,n,r){if(t===null||typeof t>"u"||ZT(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function rn(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ot[e]=new rn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ot[t]=new rn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ot[e]=new rn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ot[e]=new rn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ot[e]=new rn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ot[e]=new rn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ot[e]=new rn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ot[e]=new rn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ot[e]=new rn(e,5,!1,e.toLowerCase(),null,!1,!1)});var ly=/[\-:]([a-z])/g;function uy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ly,uy);Ot[t]=new rn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ly,uy);Ot[t]=new rn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ly,uy);Ot[t]=new rn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ot[e]=new rn(e,1,!1,e.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ot[e]=new rn(e,1,!1,e.toLowerCase(),null,!0,!0)});function dy(e,t,n,r){var i=Ot.hasOwnProperty(t)?Ot[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ek(t,n,i,r)&&(n=null),r||i===null?JT(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var xi=YT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,du=Symbol.for("react.element"),Yo=Symbol.for("react.portal"),Xo=Symbol.for("react.fragment"),fy=Symbol.for("react.strict_mode"),tg=Symbol.for("react.profiler"),V2=Symbol.for("react.provider"),G2=Symbol.for("react.context"),hy=Symbol.for("react.forward_ref"),ng=Symbol.for("react.suspense"),rg=Symbol.for("react.suspense_list"),py=Symbol.for("react.memo"),ji=Symbol.for("react.lazy"),W2=Symbol.for("react.offscreen"),bw=Symbol.iterator;function Ja(e){return e===null||typeof e!="object"?null:(e=bw&&e[bw]||e["@@iterator"],typeof e=="function"?e:null)}var Qe=Object.assign,Rh;function Ac(e){if(Rh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Rh=t&&t[1]||""}return`
`+Rh+e}var $h=!1;function Oh(e,t){if(!e||$h)return"";$h=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{$h=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ac(e):""}function tk(e){switch(e.tag){case 5:return Ac(e.type);case 16:return Ac("Lazy");case 13:return Ac("Suspense");case 19:return Ac("SuspenseList");case 0:case 2:case 15:return e=Oh(e.type,!1),e;case 11:return e=Oh(e.type.render,!1),e;case 1:return e=Oh(e.type,!0),e;default:return""}}function ig(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xo:return"Fragment";case Yo:return"Portal";case tg:return"Profiler";case fy:return"StrictMode";case ng:return"Suspense";case rg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case G2:return(e.displayName||"Context")+".Consumer";case V2:return(e._context.displayName||"Context")+".Provider";case hy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case py:return t=e.displayName||null,t!==null?t:ig(e.type)||"Memo";case ji:t=e._payload,e=e._init;try{return ig(e(t))}catch{}}return null}function nk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ig(t);case 8:return t===fy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ls(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function K2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rk(e){var t=K2(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fu(e){e._valueTracker||(e._valueTracker=rk(e))}function Q2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K2(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Pd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sg(e,t){var n=t.checked;return Qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ew(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ls(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Y2(e,t){t=t.checked,t!=null&&dy(e,"checked",t,!1)}function og(e,t){Y2(e,t);var n=ls(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ag(e,t.type,n):t.hasOwnProperty("defaultValue")&&ag(e,t.type,ls(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _w(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ag(e,t,n){(t!=="number"||Pd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Cc=Array.isArray;function ua(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ls(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function cg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return Qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Sw(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(X(92));if(Cc(n)){if(1<n.length)throw Error(X(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ls(n)}}function X2(e,t){var n=ls(t.value),r=ls(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function xw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function J2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?J2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hu,Z2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hu=hu||document.createElement("div"),hu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Bc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ik=["Webkit","ms","Moz","O"];Object.keys(Bc).forEach(function(e){ik.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Bc[t]=Bc[e]})});function e_(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Bc.hasOwnProperty(e)&&Bc[e]?(""+t).trim():t+"px"}function t_(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=e_(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var sk=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ug(e,t){if(t){if(sk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function dg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fg=null;function gy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hg=null,da=null,fa=null;function Iw(e){if(e=jl(e)){if(typeof hg!="function")throw Error(X(280));var t=e.stateNode;t&&(t=Rf(t),hg(e.stateNode,e.type,t))}}function n_(e){da?fa?fa.push(e):fa=[e]:da=e}function r_(){if(da){var e=da,t=fa;if(fa=da=null,Iw(e),t)for(e=0;e<t.length;e++)Iw(t[e])}}function i_(e,t){return e(t)}function s_(){}var Ph=!1;function o_(e,t,n){if(Ph)return e(t,n);Ph=!0;try{return i_(e,t,n)}finally{Ph=!1,(da!==null||fa!==null)&&(s_(),r_())}}function il(e,t){var n=e.stateNode;if(n===null)return null;var r=Rf(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(X(231,t,typeof n));return n}var pg=!1;if(mi)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){pg=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{pg=!1}function ok(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Lc=!1,Nd=null,Dd=!1,gg=null,ak={onError:function(e){Lc=!0,Nd=e}};function ck(e,t,n,r,i,s,o,a,c){Lc=!1,Nd=null,ok.apply(ak,arguments)}function lk(e,t,n,r,i,s,o,a,c){if(ck.apply(this,arguments),Lc){if(Lc){var l=Nd;Lc=!1,Nd=null}else throw Error(X(198));Dd||(Dd=!0,gg=l)}}function co(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function a_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Aw(e){if(co(e)!==e)throw Error(X(188))}function uk(e){var t=e.alternate;if(!t){if(t=co(e),t===null)throw Error(X(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Aw(i),e;if(s===r)return Aw(i),t;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?e:t}function c_(e){return e=uk(e),e!==null?l_(e):null}function l_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=l_(e);if(t!==null)return t;e=e.sibling}return null}var u_=Un.unstable_scheduleCallback,Cw=Un.unstable_cancelCallback,dk=Un.unstable_shouldYield,fk=Un.unstable_requestPaint,tt=Un.unstable_now,hk=Un.unstable_getCurrentPriorityLevel,my=Un.unstable_ImmediatePriority,d_=Un.unstable_UserBlockingPriority,Ud=Un.unstable_NormalPriority,pk=Un.unstable_LowPriority,f_=Un.unstable_IdlePriority,Af=null,Mr=null;function gk(e){if(Mr&&typeof Mr.onCommitFiberRoot=="function")try{Mr.onCommitFiberRoot(Af,e,void 0,(e.current.flags&128)===128)}catch{}}var wr=Math.clz32?Math.clz32:wk,mk=Math.log,yk=Math.LN2;function wk(e){return e>>>=0,e===0?32:31-(mk(e)/yk|0)|0}var pu=64,gu=4194304;function Tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Tc(a):(s&=o,s!==0&&(r=Tc(s)))}else o=n&~i,o!==0?r=Tc(o):s!==0&&(r=Tc(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-wr(t),i=1<<n,r|=e[n],t&=~i;return r}function vk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bk(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-wr(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=vk(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}function mg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function h_(){var e=pu;return pu<<=1,!(pu&4194240)&&(pu=64),e}function Nh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ll(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wr(t),e[t]=n}function Ek(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-wr(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function yy(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-wr(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ie=0;function p_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var g_,wy,m_,y_,w_,yg=!1,mu=[],Zi=null,es=null,ts=null,sl=new Map,ol=new Map,Gi=[],_k="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tw(e,t){switch(e){case"focusin":case"focusout":Zi=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":sl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(t.pointerId)}}function ec(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=jl(t),t!==null&&wy(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Sk(e,t,n,r,i){switch(t){case"focusin":return Zi=ec(Zi,e,t,n,r,i),!0;case"dragenter":return es=ec(es,e,t,n,r,i),!0;case"mouseover":return ts=ec(ts,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return sl.set(s,ec(sl.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ol.set(s,ec(ol.get(s)||null,e,t,n,r,i)),!0}return!1}function v_(e){var t=Ds(e.target);if(t!==null){var n=co(t);if(n!==null){if(t=n.tag,t===13){if(t=a_(n),t!==null){e.blockedOn=t,w_(e.priority,function(){m_(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=wg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fg=r,n.target.dispatchEvent(r),fg=null}else return t=jl(n),t!==null&&wy(t),e.blockedOn=n,!1;t.shift()}return!0}function kw(e,t,n){sd(e)&&n.delete(t)}function xk(){yg=!1,Zi!==null&&sd(Zi)&&(Zi=null),es!==null&&sd(es)&&(es=null),ts!==null&&sd(ts)&&(ts=null),sl.forEach(kw),ol.forEach(kw)}function tc(e,t){e.blockedOn===t&&(e.blockedOn=null,yg||(yg=!0,Un.unstable_scheduleCallback(Un.unstable_NormalPriority,xk)))}function al(e){function t(i){return tc(i,e)}if(0<mu.length){tc(mu[0],e);for(var n=1;n<mu.length;n++){var r=mu[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Zi!==null&&tc(Zi,e),es!==null&&tc(es,e),ts!==null&&tc(ts,e),sl.forEach(t),ol.forEach(t),n=0;n<Gi.length;n++)r=Gi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Gi.length&&(n=Gi[0],n.blockedOn===null);)v_(n),n.blockedOn===null&&Gi.shift()}var ha=xi.ReactCurrentBatchConfig,Ld=!0;function Ik(e,t,n,r){var i=Ie,s=ha.transition;ha.transition=null;try{Ie=1,vy(e,t,n,r)}finally{Ie=i,ha.transition=s}}function Ak(e,t,n,r){var i=Ie,s=ha.transition;ha.transition=null;try{Ie=4,vy(e,t,n,r)}finally{Ie=i,ha.transition=s}}function vy(e,t,n,r){if(Ld){var i=wg(e,t,n,r);if(i===null)qh(e,t,r,Fd,n),Tw(e,r);else if(Sk(i,e,t,n,r))r.stopPropagation();else if(Tw(e,r),t&4&&-1<_k.indexOf(e)){for(;i!==null;){var s=jl(i);if(s!==null&&g_(s),s=wg(e,t,n,r),s===null&&qh(e,t,r,Fd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else qh(e,t,r,null,n)}}var Fd=null;function wg(e,t,n,r){if(Fd=null,e=gy(r),e=Ds(e),e!==null)if(t=co(e),t===null)e=null;else if(n=t.tag,n===13){if(e=a_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fd=e,null}function b_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hk()){case my:return 1;case d_:return 4;case Ud:case pk:return 16;case f_:return 536870912;default:return 16}default:return 16}}var Qi=null,by=null,od=null;function E_(){if(od)return od;var e,t=by,n=t.length,r,i="value"in Qi?Qi.value:Qi.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return od=i.slice(e,1<r?1-r:void 0)}function ad(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function yu(){return!0}function Rw(){return!1}function Fn(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yu:Rw,this.isPropagationStopped=Rw,this}return Qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yu)},persist:function(){},isPersistent:yu}),t}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ey=Fn(Na),Fl=Qe({},Na,{view:0,detail:0}),Ck=Fn(Fl),Dh,Uh,nc,Cf=Qe({},Fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_y,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nc&&(nc&&e.type==="mousemove"?(Dh=e.screenX-nc.screenX,Uh=e.screenY-nc.screenY):Uh=Dh=0,nc=e),Dh)},movementY:function(e){return"movementY"in e?e.movementY:Uh}}),$w=Fn(Cf),Tk=Qe({},Cf,{dataTransfer:0}),kk=Fn(Tk),Rk=Qe({},Fl,{relatedTarget:0}),Bh=Fn(Rk),$k=Qe({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),Ok=Fn($k),Pk=Qe({},Na,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nk=Fn(Pk),Dk=Qe({},Na,{data:0}),Ow=Fn(Dk),Uk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lk[e])?!!t[e]:!1}function _y(){return Fk}var jk=Qe({},Fl,{key:function(e){if(e.key){var t=Uk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ad(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_y,charCode:function(e){return e.type==="keypress"?ad(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ad(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Mk=Fn(jk),zk=Qe({},Cf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pw=Fn(zk),Hk=Qe({},Fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_y}),qk=Fn(Hk),Vk=Qe({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gk=Fn(Vk),Wk=Qe({},Cf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kk=Fn(Wk),Qk=[9,13,27,32],Sy=mi&&"CompositionEvent"in window,Fc=null;mi&&"documentMode"in document&&(Fc=document.documentMode);var Yk=mi&&"TextEvent"in window&&!Fc,__=mi&&(!Sy||Fc&&8<Fc&&11>=Fc),Nw=" ",Dw=!1;function S_(e,t){switch(e){case"keyup":return Qk.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Jo=!1;function Xk(e,t){switch(e){case"compositionend":return x_(t);case"keypress":return t.which!==32?null:(Dw=!0,Nw);case"textInput":return e=t.data,e===Nw&&Dw?null:e;default:return null}}function Jk(e,t){if(Jo)return e==="compositionend"||!Sy&&S_(e,t)?(e=E_(),od=by=Qi=null,Jo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return __&&t.locale!=="ko"?null:t.data;default:return null}}var Zk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zk[e.type]:t==="textarea"}function I_(e,t,n,r){n_(r),t=jd(t,"onChange"),0<t.length&&(n=new Ey("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var jc=null,cl=null;function eR(e){U_(e,0)}function Tf(e){var t=ta(e);if(Q2(t))return e}function tR(e,t){if(e==="change")return t}var A_=!1;if(mi){var Lh;if(mi){var Fh="oninput"in document;if(!Fh){var Bw=document.createElement("div");Bw.setAttribute("oninput","return;"),Fh=typeof Bw.oninput=="function"}Lh=Fh}else Lh=!1;A_=Lh&&(!document.documentMode||9<document.documentMode)}function Lw(){jc&&(jc.detachEvent("onpropertychange",C_),cl=jc=null)}function C_(e){if(e.propertyName==="value"&&Tf(cl)){var t=[];I_(t,cl,e,gy(e)),o_(eR,t)}}function nR(e,t,n){e==="focusin"?(Lw(),jc=t,cl=n,jc.attachEvent("onpropertychange",C_)):e==="focusout"&&Lw()}function rR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tf(cl)}function iR(e,t){if(e==="click")return Tf(t)}function sR(e,t){if(e==="input"||e==="change")return Tf(t)}function oR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Er=typeof Object.is=="function"?Object.is:oR;function ll(e,t){if(Er(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!eg.call(t,i)||!Er(e[i],t[i]))return!1}return!0}function Fw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jw(e,t){var n=Fw(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fw(n)}}function T_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?T_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function k_(){for(var e=window,t=Pd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Pd(e.document)}return t}function xy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function aR(e){var t=k_(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&T_(n.ownerDocument.documentElement,n)){if(r!==null&&xy(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=jw(n,s);var o=jw(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cR=mi&&"documentMode"in document&&11>=document.documentMode,Zo=null,vg=null,Mc=null,bg=!1;function Mw(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bg||Zo==null||Zo!==Pd(r)||(r=Zo,"selectionStart"in r&&xy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mc&&ll(Mc,r)||(Mc=r,r=jd(vg,"onSelect"),0<r.length&&(t=new Ey("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Zo)))}function wu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ea={animationend:wu("Animation","AnimationEnd"),animationiteration:wu("Animation","AnimationIteration"),animationstart:wu("Animation","AnimationStart"),transitionend:wu("Transition","TransitionEnd")},jh={},R_={};mi&&(R_=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function kf(e){if(jh[e])return jh[e];if(!ea[e])return e;var t=ea[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in R_)return jh[e]=t[n];return e}var $_=kf("animationend"),O_=kf("animationiteration"),P_=kf("animationstart"),N_=kf("transitionend"),D_=new Map,zw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(e,t){D_.set(e,t),ao(t,[e])}for(var Mh=0;Mh<zw.length;Mh++){var zh=zw[Mh],lR=zh.toLowerCase(),uR=zh[0].toUpperCase()+zh.slice(1);fs(lR,"on"+uR)}fs($_,"onAnimationEnd");fs(O_,"onAnimationIteration");fs(P_,"onAnimationStart");fs("dblclick","onDoubleClick");fs("focusin","onFocus");fs("focusout","onBlur");fs(N_,"onTransitionEnd");_a("onMouseEnter",["mouseout","mouseover"]);_a("onMouseLeave",["mouseout","mouseover"]);_a("onPointerEnter",["pointerout","pointerover"]);_a("onPointerLeave",["pointerout","pointerover"]);ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dR=new Set("cancel close invalid load scroll toggle".split(" ").concat(kc));function Hw(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,lk(r,t,void 0,e),e.currentTarget=null}function U_(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Hw(i,a,l),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Hw(i,a,l),s=c}}}if(Dd)throw e=gg,Dd=!1,gg=null,e}function Le(e,t){var n=t[Ig];n===void 0&&(n=t[Ig]=new Set);var r=e+"__bubble";n.has(r)||(B_(t,e,2,!1),n.add(r))}function Hh(e,t,n){var r=0;t&&(r|=4),B_(n,e,r,t)}var vu="_reactListening"+Math.random().toString(36).slice(2);function ul(e){if(!e[vu]){e[vu]=!0,q2.forEach(function(n){n!=="selectionchange"&&(dR.has(n)||Hh(n,!1,e),Hh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vu]||(t[vu]=!0,Hh("selectionchange",!1,t))}}function B_(e,t,n,r){switch(b_(t)){case 1:var i=Ik;break;case 4:i=Ak;break;default:i=vy}n=i.bind(null,t,n,e),i=void 0,!pg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qh(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ds(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}o_(function(){var l=s,u=gy(n),d=[];e:{var f=D_.get(e);if(f!==void 0){var h=Ey,p=e;switch(e){case"keypress":if(ad(n)===0)break e;case"keydown":case"keyup":h=Mk;break;case"focusin":p="focus",h=Bh;break;case"focusout":p="blur",h=Bh;break;case"beforeblur":case"afterblur":h=Bh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=$w;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=kk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=qk;break;case $_:case O_:case P_:h=Ok;break;case N_:h=Gk;break;case"scroll":h=Ck;break;case"wheel":h=Kk;break;case"copy":case"cut":case"paste":h=Nk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Pw}var g=(t&4)!==0,v=!g&&e==="scroll",m=g?f!==null?f+"Capture":null:f;g=[];for(var w=l,E;w!==null;){E=w;var A=E.stateNode;if(E.tag===5&&A!==null&&(E=A,m!==null&&(A=il(w,m),A!=null&&g.push(dl(w,A,E)))),v)break;w=w.return}0<g.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==fg&&(p=n.relatedTarget||n.fromElement)&&(Ds(p)||p[yi]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Ds(p):null,p!==null&&(v=co(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(g=$w,A="onMouseLeave",m="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(g=Pw,A="onPointerLeave",m="onPointerEnter",w="pointer"),v=h==null?f:ta(h),E=p==null?f:ta(p),f=new g(A,w+"leave",h,n,u),f.target=v,f.relatedTarget=E,A=null,Ds(u)===l&&(g=new g(m,w+"enter",p,n,u),g.target=E,g.relatedTarget=v,A=g),v=A,h&&p)t:{for(g=h,m=p,w=0,E=g;E;E=Eo(E))w++;for(E=0,A=m;A;A=Eo(A))E++;for(;0<w-E;)g=Eo(g),w--;for(;0<E-w;)m=Eo(m),E--;for(;w--;){if(g===m||m!==null&&g===m.alternate)break t;g=Eo(g),m=Eo(m)}g=null}else g=null;h!==null&&qw(d,f,h,g,!1),p!==null&&v!==null&&qw(d,v,p,g,!0)}}e:{if(f=l?ta(l):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var T=tR;else if(Uw(f))if(A_)T=sR;else{T=rR;var D=nR}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=iR);if(T&&(T=T(e,l))){I_(d,T,n,u);break e}D&&D(e,f,l),e==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&ag(f,"number",f.value)}switch(D=l?ta(l):window,e){case"focusin":(Uw(D)||D.contentEditable==="true")&&(Zo=D,vg=l,Mc=null);break;case"focusout":Mc=vg=Zo=null;break;case"mousedown":bg=!0;break;case"contextmenu":case"mouseup":case"dragend":bg=!1,Mw(d,n,u);break;case"selectionchange":if(cR)break;case"keydown":case"keyup":Mw(d,n,u)}var j;if(Sy)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Jo?S_(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(__&&n.locale!=="ko"&&(Jo||L!=="onCompositionStart"?L==="onCompositionEnd"&&Jo&&(j=E_()):(Qi=u,by="value"in Qi?Qi.value:Qi.textContent,Jo=!0)),D=jd(l,L),0<D.length&&(L=new Ow(L,e,null,n,u),d.push({event:L,listeners:D}),j?L.data=j:(j=x_(n),j!==null&&(L.data=j)))),(j=Yk?Xk(e,n):Jk(e,n))&&(l=jd(l,"onBeforeInput"),0<l.length&&(u=new Ow("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=j))}U_(d,t)})}function dl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jd(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=il(e,n),s!=null&&r.unshift(dl(e,s,i)),s=il(e,t),s!=null&&r.push(dl(e,s,i))),e=e.return}return r}function Eo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function qw(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=il(n,s),c!=null&&o.unshift(dl(n,c,a))):i||(c=il(n,s),c!=null&&o.push(dl(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var fR=/\r\n?/g,hR=/\u0000|\uFFFD/g;function Vw(e){return(typeof e=="string"?e:""+e).replace(fR,`
`).replace(hR,"")}function bu(e,t,n){if(t=Vw(t),Vw(e)!==t&&n)throw Error(X(425))}function Md(){}var Eg=null,_g=null;function Sg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xg=typeof setTimeout=="function"?setTimeout:void 0,pR=typeof clearTimeout=="function"?clearTimeout:void 0,Gw=typeof Promise=="function"?Promise:void 0,gR=typeof queueMicrotask=="function"?queueMicrotask:typeof Gw<"u"?function(e){return Gw.resolve(null).then(e).catch(mR)}:xg;function mR(e){setTimeout(function(){throw e})}function Vh(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),al(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);al(t)}function ns(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ww(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Da=Math.random().toString(36).slice(2),Br="__reactFiber$"+Da,fl="__reactProps$"+Da,yi="__reactContainer$"+Da,Ig="__reactEvents$"+Da,yR="__reactListeners$"+Da,wR="__reactHandles$"+Da;function Ds(e){var t=e[Br];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yi]||n[Br]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ww(e);e!==null;){if(n=e[Br])return n;e=Ww(e)}return t}e=n,n=e.parentNode}return null}function jl(e){return e=e[Br]||e[yi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ta(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function Rf(e){return e[fl]||null}var Ag=[],na=-1;function hs(e){return{current:e}}function Me(e){0>na||(e.current=Ag[na],Ag[na]=null,na--)}function De(e,t){na++,Ag[na]=e.current,e.current=t}var us={},Wt=hs(us),yn=hs(!1),Gs=us;function Sa(e,t){var n=e.type.contextTypes;if(!n)return us;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function wn(e){return e=e.childContextTypes,e!=null}function zd(){Me(yn),Me(Wt)}function Kw(e,t,n){if(Wt.current!==us)throw Error(X(168));De(Wt,t),De(yn,n)}function L_(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(X(108,nk(e)||"Unknown",i));return Qe({},n,r)}function Hd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||us,Gs=Wt.current,De(Wt,e),De(yn,yn.current),!0}function Qw(e,t,n){var r=e.stateNode;if(!r)throw Error(X(169));n?(e=L_(e,t,Gs),r.__reactInternalMemoizedMergedChildContext=e,Me(yn),Me(Wt),De(Wt,e)):Me(yn),De(yn,n)}var oi=null,$f=!1,Gh=!1;function F_(e){oi===null?oi=[e]:oi.push(e)}function vR(e){$f=!0,F_(e)}function ps(){if(!Gh&&oi!==null){Gh=!0;var e=0,t=Ie;try{var n=oi;for(Ie=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}oi=null,$f=!1}catch(i){throw oi!==null&&(oi=oi.slice(e+1)),u_(my,ps),i}finally{Ie=t,Gh=!1}}return null}var ra=[],ia=0,qd=null,Vd=0,Kn=[],Qn=0,Ws=null,li=1,ui="";function Ts(e,t){ra[ia++]=Vd,ra[ia++]=qd,qd=e,Vd=t}function j_(e,t,n){Kn[Qn++]=li,Kn[Qn++]=ui,Kn[Qn++]=Ws,Ws=e;var r=li;e=ui;var i=32-wr(r)-1;r&=~(1<<i),n+=1;var s=32-wr(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,li=1<<32-wr(t)+i|n<<i|r,ui=s+e}else li=1<<s|n<<i|r,ui=e}function Iy(e){e.return!==null&&(Ts(e,1),j_(e,1,0))}function Ay(e){for(;e===qd;)qd=ra[--ia],ra[ia]=null,Vd=ra[--ia],ra[ia]=null;for(;e===Ws;)Ws=Kn[--Qn],Kn[Qn]=null,ui=Kn[--Qn],Kn[Qn]=null,li=Kn[--Qn],Kn[Qn]=null}var Dn=null,Pn=null,Ve=!1,mr=null;function M_(e,t){var n=Yn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Yw(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dn=e,Pn=ns(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dn=e,Pn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ws!==null?{id:li,overflow:ui}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Yn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dn=e,Pn=null,!0):!1;default:return!1}}function Cg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Tg(e){if(Ve){var t=Pn;if(t){var n=t;if(!Yw(e,t)){if(Cg(e))throw Error(X(418));t=ns(n.nextSibling);var r=Dn;t&&Yw(e,t)?M_(r,n):(e.flags=e.flags&-4097|2,Ve=!1,Dn=e)}}else{if(Cg(e))throw Error(X(418));e.flags=e.flags&-4097|2,Ve=!1,Dn=e}}}function Xw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dn=e}function Eu(e){if(e!==Dn)return!1;if(!Ve)return Xw(e),Ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Sg(e.type,e.memoizedProps)),t&&(t=Pn)){if(Cg(e))throw z_(),Error(X(418));for(;t;)M_(e,t),t=ns(t.nextSibling)}if(Xw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Pn=ns(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Pn=null}}else Pn=Dn?ns(e.stateNode.nextSibling):null;return!0}function z_(){for(var e=Pn;e;)e=ns(e.nextSibling)}function xa(){Pn=Dn=null,Ve=!1}function Cy(e){mr===null?mr=[e]:mr.push(e)}var bR=xi.ReactCurrentBatchConfig;function rc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,e))}return e}function _u(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jw(e){var t=e._init;return t(e._payload)}function H_(e){function t(m,w){if(e){var E=m.deletions;E===null?(m.deletions=[w],m.flags|=16):E.push(w)}}function n(m,w){if(!e)return null;for(;w!==null;)t(m,w),w=w.sibling;return null}function r(m,w){for(m=new Map;w!==null;)w.key!==null?m.set(w.key,w):m.set(w.index,w),w=w.sibling;return m}function i(m,w){return m=os(m,w),m.index=0,m.sibling=null,m}function s(m,w,E){return m.index=E,e?(E=m.alternate,E!==null?(E=E.index,E<w?(m.flags|=2,w):E):(m.flags|=2,w)):(m.flags|=1048576,w)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,w,E,A){return w===null||w.tag!==6?(w=Zh(E,m.mode,A),w.return=m,w):(w=i(w,E),w.return=m,w)}function c(m,w,E,A){var T=E.type;return T===Xo?u(m,w,E.props.children,A,E.key):w!==null&&(w.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ji&&Jw(T)===w.type)?(A=i(w,E.props),A.ref=rc(m,w,E),A.return=m,A):(A=pd(E.type,E.key,E.props,null,m.mode,A),A.ref=rc(m,w,E),A.return=m,A)}function l(m,w,E,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=ep(E,m.mode,A),w.return=m,w):(w=i(w,E.children||[]),w.return=m,w)}function u(m,w,E,A,T){return w===null||w.tag!==7?(w=qs(E,m.mode,A,T),w.return=m,w):(w=i(w,E),w.return=m,w)}function d(m,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Zh(""+w,m.mode,E),w.return=m,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case du:return E=pd(w.type,w.key,w.props,null,m.mode,E),E.ref=rc(m,null,w),E.return=m,E;case Yo:return w=ep(w,m.mode,E),w.return=m,w;case ji:var A=w._init;return d(m,A(w._payload),E)}if(Cc(w)||Ja(w))return w=qs(w,m.mode,E,null),w.return=m,w;_u(m,w)}return null}function f(m,w,E,A){var T=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return T!==null?null:a(m,w,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case du:return E.key===T?c(m,w,E,A):null;case Yo:return E.key===T?l(m,w,E,A):null;case ji:return T=E._init,f(m,w,T(E._payload),A)}if(Cc(E)||Ja(E))return T!==null?null:u(m,w,E,A,null);_u(m,E)}return null}function h(m,w,E,A,T){if(typeof A=="string"&&A!==""||typeof A=="number")return m=m.get(E)||null,a(w,m,""+A,T);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case du:return m=m.get(A.key===null?E:A.key)||null,c(w,m,A,T);case Yo:return m=m.get(A.key===null?E:A.key)||null,l(w,m,A,T);case ji:var D=A._init;return h(m,w,E,D(A._payload),T)}if(Cc(A)||Ja(A))return m=m.get(E)||null,u(w,m,A,T,null);_u(w,A)}return null}function p(m,w,E,A){for(var T=null,D=null,j=w,L=w=0,C=null;j!==null&&L<E.length;L++){j.index>L?(C=j,j=null):C=j.sibling;var U=f(m,j,E[L],A);if(U===null){j===null&&(j=C);break}e&&j&&U.alternate===null&&t(m,j),w=s(U,w,L),D===null?T=U:D.sibling=U,D=U,j=C}if(L===E.length)return n(m,j),Ve&&Ts(m,L),T;if(j===null){for(;L<E.length;L++)j=d(m,E[L],A),j!==null&&(w=s(j,w,L),D===null?T=j:D.sibling=j,D=j);return Ve&&Ts(m,L),T}for(j=r(m,j);L<E.length;L++)C=h(j,m,L,E[L],A),C!==null&&(e&&C.alternate!==null&&j.delete(C.key===null?L:C.key),w=s(C,w,L),D===null?T=C:D.sibling=C,D=C);return e&&j.forEach(function(B){return t(m,B)}),Ve&&Ts(m,L),T}function g(m,w,E,A){var T=Ja(E);if(typeof T!="function")throw Error(X(150));if(E=T.call(E),E==null)throw Error(X(151));for(var D=T=null,j=w,L=w=0,C=null,U=E.next();j!==null&&!U.done;L++,U=E.next()){j.index>L?(C=j,j=null):C=j.sibling;var B=f(m,j,U.value,A);if(B===null){j===null&&(j=C);break}e&&j&&B.alternate===null&&t(m,j),w=s(B,w,L),D===null?T=B:D.sibling=B,D=B,j=C}if(U.done)return n(m,j),Ve&&Ts(m,L),T;if(j===null){for(;!U.done;L++,U=E.next())U=d(m,U.value,A),U!==null&&(w=s(U,w,L),D===null?T=U:D.sibling=U,D=U);return Ve&&Ts(m,L),T}for(j=r(m,j);!U.done;L++,U=E.next())U=h(j,m,L,U.value,A),U!==null&&(e&&U.alternate!==null&&j.delete(U.key===null?L:U.key),w=s(U,w,L),D===null?T=U:D.sibling=U,D=U);return e&&j.forEach(function(F){return t(m,F)}),Ve&&Ts(m,L),T}function v(m,w,E,A){if(typeof E=="object"&&E!==null&&E.type===Xo&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case du:e:{for(var T=E.key,D=w;D!==null;){if(D.key===T){if(T=E.type,T===Xo){if(D.tag===7){n(m,D.sibling),w=i(D,E.props.children),w.return=m,m=w;break e}}else if(D.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ji&&Jw(T)===D.type){n(m,D.sibling),w=i(D,E.props),w.ref=rc(m,D,E),w.return=m,m=w;break e}n(m,D);break}else t(m,D);D=D.sibling}E.type===Xo?(w=qs(E.props.children,m.mode,A,E.key),w.return=m,m=w):(A=pd(E.type,E.key,E.props,null,m.mode,A),A.ref=rc(m,w,E),A.return=m,m=A)}return o(m);case Yo:e:{for(D=E.key;w!==null;){if(w.key===D)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(m,w.sibling),w=i(w,E.children||[]),w.return=m,m=w;break e}else{n(m,w);break}else t(m,w);w=w.sibling}w=ep(E,m.mode,A),w.return=m,m=w}return o(m);case ji:return D=E._init,v(m,w,D(E._payload),A)}if(Cc(E))return p(m,w,E,A);if(Ja(E))return g(m,w,E,A);_u(m,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(m,w.sibling),w=i(w,E),w.return=m,m=w):(n(m,w),w=Zh(E,m.mode,A),w.return=m,m=w),o(m)):n(m,w)}return v}var Ia=H_(!0),q_=H_(!1),Gd=hs(null),Wd=null,sa=null,Ty=null;function ky(){Ty=sa=Wd=null}function Ry(e){var t=Gd.current;Me(Gd),e._currentValue=t}function kg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function pa(e,t){Wd=e,Ty=sa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gn=!0),e.firstContext=null)}function Zn(e){var t=e._currentValue;if(Ty!==e)if(e={context:e,memoizedValue:t,next:null},sa===null){if(Wd===null)throw Error(X(308));sa=e,Wd.dependencies={lanes:0,firstContext:e}}else sa=sa.next=e;return t}var Us=null;function $y(e){Us===null?Us=[e]:Us.push(e)}function V_(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,$y(t)):(n.next=i.next,i.next=n),t.interleaved=n,wi(e,r)}function wi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mi=!1;function Oy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,wi(e,n)}return i=r.interleaved,i===null?(t.next=t,$y(r)):(t.next=i.next,i.next=t),r.interleaved=t,wi(e,n)}function cd(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yy(e,n)}}function Zw(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Kd(e,t,n,r){var i=e.updateQueue;Mi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,u=l=c=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(f=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Qe({},d,f);break e;case 2:Mi=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=h,c=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Qs|=o,e.lanes=o,e.memoizedState=d}}function e1(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var Ml={},zr=hs(Ml),hl=hs(Ml),pl=hs(Ml);function Bs(e){if(e===Ml)throw Error(X(174));return e}function Py(e,t){switch(De(pl,t),De(hl,e),De(zr,Ml),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lg(t,e)}Me(zr),De(zr,t)}function Aa(){Me(zr),Me(hl),Me(pl)}function W_(e){Bs(pl.current);var t=Bs(zr.current),n=lg(t,e.type);t!==n&&(De(hl,e),De(zr,n))}function Ny(e){hl.current===e&&(Me(zr),Me(hl))}var Ge=hs(0);function Qd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wh=[];function Dy(){for(var e=0;e<Wh.length;e++)Wh[e]._workInProgressVersionPrimary=null;Wh.length=0}var ld=xi.ReactCurrentDispatcher,Kh=xi.ReactCurrentBatchConfig,Ks=0,We=null,ht=null,bt=null,Yd=!1,zc=!1,gl=0,ER=0;function Ut(){throw Error(X(321))}function Uy(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Er(e[n],t[n]))return!1;return!0}function By(e,t,n,r,i,s){if(Ks=s,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ld.current=e===null||e.memoizedState===null?IR:AR,e=n(r,i),zc){s=0;do{if(zc=!1,gl=0,25<=s)throw Error(X(301));s+=1,bt=ht=null,t.updateQueue=null,ld.current=CR,e=n(r,i)}while(zc)}if(ld.current=Xd,t=ht!==null&&ht.next!==null,Ks=0,bt=ht=We=null,Yd=!1,t)throw Error(X(300));return e}function Ly(){var e=gl!==0;return gl=0,e}function Or(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?We.memoizedState=bt=e:bt=bt.next=e,bt}function er(){if(ht===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=ht.next;var t=bt===null?We.memoizedState:bt.next;if(t!==null)bt=t,ht=e;else{if(e===null)throw Error(X(310));ht=e,e={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},bt===null?We.memoizedState=bt=e:bt=bt.next=e}return bt}function ml(e,t){return typeof t=="function"?t(e):t}function Qh(e){var t=er(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=ht,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,l=s;do{var u=l.lane;if((Ks&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,We.lanes|=u,Qs|=u}l=l.next}while(l!==null&&l!==s);c===null?o=r:c.next=a,Er(r,t.memoizedState)||(gn=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,We.lanes|=s,Qs|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Yh(e){var t=er(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Er(s,t.memoizedState)||(gn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function K_(){}function Q_(e,t){var n=We,r=er(),i=t(),s=!Er(r.memoizedState,i);if(s&&(r.memoizedState=i,gn=!0),r=r.queue,Fy(J_.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||bt!==null&&bt.memoizedState.tag&1){if(n.flags|=2048,yl(9,X_.bind(null,n,r,i,t),void 0,null),St===null)throw Error(X(349));Ks&30||Y_(n,t,i)}return i}function Y_(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function X_(e,t,n,r){t.value=n,t.getSnapshot=r,Z_(t)&&eS(e)}function J_(e,t,n){return n(function(){Z_(t)&&eS(e)})}function Z_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Er(e,n)}catch{return!0}}function eS(e){var t=wi(e,1);t!==null&&vr(t,e,1,-1)}function t1(e){var t=Or();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:e},t.queue=e,e=e.dispatch=xR.bind(null,We,e),[t.memoizedState,e]}function yl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function tS(){return er().memoizedState}function ud(e,t,n,r){var i=Or();We.flags|=e,i.memoizedState=yl(1|t,n,void 0,r===void 0?null:r)}function Of(e,t,n,r){var i=er();r=r===void 0?null:r;var s=void 0;if(ht!==null){var o=ht.memoizedState;if(s=o.destroy,r!==null&&Uy(r,o.deps)){i.memoizedState=yl(t,n,s,r);return}}We.flags|=e,i.memoizedState=yl(1|t,n,s,r)}function n1(e,t){return ud(8390656,8,e,t)}function Fy(e,t){return Of(2048,8,e,t)}function nS(e,t){return Of(4,2,e,t)}function rS(e,t){return Of(4,4,e,t)}function iS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sS(e,t,n){return n=n!=null?n.concat([e]):null,Of(4,4,iS.bind(null,t,e),n)}function jy(){}function oS(e,t){var n=er();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Uy(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function aS(e,t){var n=er();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Uy(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function cS(e,t,n){return Ks&21?(Er(n,t)||(n=h_(),We.lanes|=n,Qs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gn=!0),e.memoizedState=n)}function _R(e,t){var n=Ie;Ie=n!==0&&4>n?n:4,e(!0);var r=Kh.transition;Kh.transition={};try{e(!1),t()}finally{Ie=n,Kh.transition=r}}function lS(){return er().memoizedState}function SR(e,t,n){var r=ss(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uS(e))dS(t,n);else if(n=V_(e,t,n,r),n!==null){var i=Zt();vr(n,e,r,i),fS(n,t,r)}}function xR(e,t,n){var r=ss(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uS(e))dS(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Er(a,o)){var c=t.interleaved;c===null?(i.next=i,$y(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=V_(e,t,i,r),n!==null&&(i=Zt(),vr(n,e,r,i),fS(n,t,r))}}function uS(e){var t=e.alternate;return e===We||t!==null&&t===We}function dS(e,t){zc=Yd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fS(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yy(e,n)}}var Xd={readContext:Zn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},IR={readContext:Zn,useCallback:function(e,t){return Or().memoizedState=[e,t===void 0?null:t],e},useContext:Zn,useEffect:n1,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ud(4194308,4,iS.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ud(4194308,4,e,t)},useInsertionEffect:function(e,t){return ud(4,2,e,t)},useMemo:function(e,t){var n=Or();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Or();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=SR.bind(null,We,e),[r.memoizedState,e]},useRef:function(e){var t=Or();return e={current:e},t.memoizedState=e},useState:t1,useDebugValue:jy,useDeferredValue:function(e){return Or().memoizedState=e},useTransition:function(){var e=t1(!1),t=e[0];return e=_R.bind(null,e[1]),Or().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=We,i=Or();if(Ve){if(n===void 0)throw Error(X(407));n=n()}else{if(n=t(),St===null)throw Error(X(349));Ks&30||Y_(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,n1(J_.bind(null,r,s,e),[e]),r.flags|=2048,yl(9,X_.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Or(),t=St.identifierPrefix;if(Ve){var n=ui,r=li;n=(r&~(1<<32-wr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=gl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ER++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},AR={readContext:Zn,useCallback:oS,useContext:Zn,useEffect:Fy,useImperativeHandle:sS,useInsertionEffect:nS,useLayoutEffect:rS,useMemo:aS,useReducer:Qh,useRef:tS,useState:function(){return Qh(ml)},useDebugValue:jy,useDeferredValue:function(e){var t=er();return cS(t,ht.memoizedState,e)},useTransition:function(){var e=Qh(ml)[0],t=er().memoizedState;return[e,t]},useMutableSource:K_,useSyncExternalStore:Q_,useId:lS,unstable_isNewReconciler:!1},CR={readContext:Zn,useCallback:oS,useContext:Zn,useEffect:Fy,useImperativeHandle:sS,useInsertionEffect:nS,useLayoutEffect:rS,useMemo:aS,useReducer:Yh,useRef:tS,useState:function(){return Yh(ml)},useDebugValue:jy,useDeferredValue:function(e){var t=er();return ht===null?t.memoizedState=e:cS(t,ht.memoizedState,e)},useTransition:function(){var e=Yh(ml)[0],t=er().memoizedState;return[e,t]},useMutableSource:K_,useSyncExternalStore:Q_,useId:lS,unstable_isNewReconciler:!1};function pr(e,t){if(e&&e.defaultProps){t=Qe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Rg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Qe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Pf={isMounted:function(e){return(e=e._reactInternals)?co(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zt(),i=ss(e),s=fi(r,i);s.payload=t,n!=null&&(s.callback=n),t=rs(e,s,i),t!==null&&(vr(t,e,i,r),cd(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zt(),i=ss(e),s=fi(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=rs(e,s,i),t!==null&&(vr(t,e,i,r),cd(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zt(),r=ss(e),i=fi(n,r);i.tag=2,t!=null&&(i.callback=t),t=rs(e,i,r),t!==null&&(vr(t,e,r,n),cd(t,e,r))}};function r1(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!ll(n,r)||!ll(i,s):!0}function hS(e,t,n){var r=!1,i=us,s=t.contextType;return typeof s=="object"&&s!==null?s=Zn(s):(i=wn(t)?Gs:Wt.current,r=t.contextTypes,s=(r=r!=null)?Sa(e,i):us),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Pf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function i1(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Pf.enqueueReplaceState(t,t.state,null)}function $g(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Oy(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Zn(s):(s=wn(t)?Gs:Wt.current,i.context=Sa(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Rg(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Pf.enqueueReplaceState(i,i.state,null),Kd(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ca(e,t){try{var n="",r=t;do n+=tk(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Xh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Og(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var TR=typeof WeakMap=="function"?WeakMap:Map;function pS(e,t,n){n=fi(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zd||(Zd=!0,zg=r),Og(e,t)},n}function gS(e,t,n){n=fi(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Og(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Og(e,t),typeof r!="function"&&(is===null?is=new Set([this]):is.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function s1(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new TR;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=zR.bind(null,e,t,n),t.then(e,e))}function o1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function a1(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=fi(-1,1),t.tag=2,rs(n,t,1))),n.lanes|=1),e)}var kR=xi.ReactCurrentOwner,gn=!1;function Yt(e,t,n,r){t.child=e===null?q_(t,null,n,r):Ia(t,e.child,n,r)}function c1(e,t,n,r,i){n=n.render;var s=t.ref;return pa(t,i),r=By(e,t,n,r,s,i),n=Ly(),e!==null&&!gn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,vi(e,t,i)):(Ve&&n&&Iy(t),t.flags|=1,Yt(e,t,r,i),t.child)}function l1(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Ky(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,mS(e,t,s,r,i)):(e=pd(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ll,n(o,r)&&e.ref===t.ref)return vi(e,t,i)}return t.flags|=1,e=os(s,r),e.ref=t.ref,e.return=t,t.child=e}function mS(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(ll(s,r)&&e.ref===t.ref)if(gn=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(gn=!0);else return t.lanes=e.lanes,vi(e,t,i)}return Pg(e,t,n,r,i)}function yS(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(aa,kn),kn|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,De(aa,kn),kn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,De(aa,kn),kn|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,De(aa,kn),kn|=r;return Yt(e,t,i,n),t.child}function wS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Pg(e,t,n,r,i){var s=wn(n)?Gs:Wt.current;return s=Sa(t,s),pa(t,i),n=By(e,t,n,r,s,i),r=Ly(),e!==null&&!gn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,vi(e,t,i)):(Ve&&r&&Iy(t),t.flags|=1,Yt(e,t,n,i),t.child)}function u1(e,t,n,r,i){if(wn(n)){var s=!0;Hd(t)}else s=!1;if(pa(t,i),t.stateNode===null)dd(e,t),hS(t,n,r),$g(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Zn(l):(l=wn(n)?Gs:Wt.current,l=Sa(t,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&i1(t,o,r,l),Mi=!1;var f=t.memoizedState;o.state=f,Kd(t,r,o,i),c=t.memoizedState,a!==r||f!==c||yn.current||Mi?(typeof u=="function"&&(Rg(t,n,u,r),c=t.memoizedState),(a=Mi||r1(t,n,a,r,f,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,G_(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:pr(t.type,a),o.props=l,d=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Zn(c):(c=wn(n)?Gs:Wt.current,c=Sa(t,c));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&i1(t,o,r,c),Mi=!1,f=t.memoizedState,o.state=f,Kd(t,r,o,i);var p=t.memoizedState;a!==d||f!==p||yn.current||Mi?(typeof h=="function"&&(Rg(t,n,h,r),p=t.memoizedState),(l=Mi||r1(t,n,l,r,f,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ng(e,t,n,r,s,i)}function Ng(e,t,n,r,i,s){wS(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Qw(t,n,!1),vi(e,t,s);r=t.stateNode,kR.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ia(t,e.child,null,s),t.child=Ia(t,null,a,s)):Yt(e,t,a,s),t.memoizedState=r.state,i&&Qw(t,n,!0),t.child}function vS(e){var t=e.stateNode;t.pendingContext?Kw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kw(e,t.context,!1),Py(e,t.containerInfo)}function d1(e,t,n,r,i){return xa(),Cy(i),t.flags|=256,Yt(e,t,n,r),t.child}var Dg={dehydrated:null,treeContext:null,retryLane:0};function Ug(e){return{baseLanes:e,cachePool:null,transitions:null}}function bS(e,t,n){var r=t.pendingProps,i=Ge.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),De(Ge,i&1),e===null)return Tg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Uf(o,r,0,null),e=qs(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ug(n),t.memoizedState=Dg,e):My(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return RR(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=os(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=os(a,s):(s=qs(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?Ug(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Dg,r}return s=e.child,e=s.sibling,r=os(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function My(e,t){return t=Uf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Su(e,t,n,r){return r!==null&&Cy(r),Ia(t,e.child,null,n),e=My(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function RR(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Xh(Error(X(422))),Su(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Uf({mode:"visible",children:r.children},i,0,null),s=qs(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ia(t,e.child,null,o),t.child.memoizedState=Ug(o),t.memoizedState=Dg,s);if(!(t.mode&1))return Su(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(X(419)),r=Xh(s,r,void 0),Su(e,t,o,r)}if(a=(o&e.childLanes)!==0,gn||a){if(r=St,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,wi(e,i),vr(r,e,i,-1))}return Wy(),r=Xh(Error(X(421))),Su(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=HR.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Pn=ns(i.nextSibling),Dn=t,Ve=!0,mr=null,e!==null&&(Kn[Qn++]=li,Kn[Qn++]=ui,Kn[Qn++]=Ws,li=e.id,ui=e.overflow,Ws=t),t=My(t,r.children),t.flags|=4096,t)}function f1(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),kg(e.return,t,n)}function Jh(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function ES(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Yt(e,t,r.children,n),r=Ge.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&f1(e,n,t);else if(e.tag===19)f1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(De(Ge,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Qd(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Jh(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Qd(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Jh(t,!0,n,null,s);break;case"together":Jh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function dd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Qs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,n=os(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=os(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function $R(e,t,n){switch(t.tag){case 3:vS(t),xa();break;case 5:W_(t);break;case 1:wn(t.type)&&Hd(t);break;case 4:Py(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;De(Gd,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(De(Ge,Ge.current&1),t.flags|=128,null):n&t.child.childLanes?bS(e,t,n):(De(Ge,Ge.current&1),e=vi(e,t,n),e!==null?e.sibling:null);De(Ge,Ge.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return ES(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),De(Ge,Ge.current),r)break;return null;case 22:case 23:return t.lanes=0,yS(e,t,n)}return vi(e,t,n)}var _S,Bg,SS,xS;_S=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bg=function(){};SS=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Bs(zr.current);var s=null;switch(n){case"input":i=sg(e,i),r=sg(e,r),s=[];break;case"select":i=Qe({},i,{value:void 0}),r=Qe({},r,{value:void 0}),s=[];break;case"textarea":i=cg(e,i),r=cg(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Md)}ug(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(nl.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(nl.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Le("scroll",e),s||a===c||(s=[])):(s=s||[]).push(l,c))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};xS=function(e,t,n,r){n!==r&&(t.flags|=4)};function ic(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function OR(e,t,n){var r=t.pendingProps;switch(Ay(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(t),null;case 1:return wn(t.type)&&zd(),Bt(t),null;case 3:return r=t.stateNode,Aa(),Me(yn),Me(Wt),Dy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Eu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,mr!==null&&(Vg(mr),mr=null))),Bg(e,t),Bt(t),null;case 5:Ny(t);var i=Bs(pl.current);if(n=t.type,e!==null&&t.stateNode!=null)SS(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(X(166));return Bt(t),null}if(e=Bs(zr.current),Eu(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Br]=t,r[fl]=s,e=(t.mode&1)!==0,n){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(i=0;i<kc.length;i++)Le(kc[i],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Ew(r,s),Le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Le("invalid",r);break;case"textarea":Sw(r,s),Le("invalid",r)}ug(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&bu(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&bu(r.textContent,a,e),i=["children",""+a]):nl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Le("scroll",r)}switch(n){case"input":fu(r),_w(r,s,!0);break;case"textarea":fu(r),xw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Md)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=J2(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Br]=t,e[fl]=r,_S(e,t,!1,!1),t.stateNode=e;e:{switch(o=dg(n,r),n){case"dialog":Le("cancel",e),Le("close",e),i=r;break;case"iframe":case"object":case"embed":Le("load",e),i=r;break;case"video":case"audio":for(i=0;i<kc.length;i++)Le(kc[i],e);i=r;break;case"source":Le("error",e),i=r;break;case"img":case"image":case"link":Le("error",e),Le("load",e),i=r;break;case"details":Le("toggle",e),i=r;break;case"input":Ew(e,r),i=sg(e,r),Le("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Qe({},r,{value:void 0}),Le("invalid",e);break;case"textarea":Sw(e,r),i=cg(e,r),Le("invalid",e);break;default:i=r}ug(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?t_(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Z2(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&rl(e,c):typeof c=="number"&&rl(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(nl.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Le("scroll",e):c!=null&&dy(e,s,c,o))}switch(n){case"input":fu(e),_w(e,r,!1);break;case"textarea":fu(e),xw(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ls(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ua(e,!!r.multiple,s,!1):r.defaultValue!=null&&ua(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Md)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bt(t),null;case 6:if(e&&t.stateNode!=null)xS(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(X(166));if(n=Bs(pl.current),Bs(zr.current),Eu(t)){if(r=t.stateNode,n=t.memoizedProps,r[Br]=t,(s=r.nodeValue!==n)&&(e=Dn,e!==null))switch(e.tag){case 3:bu(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bu(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Br]=t,t.stateNode=r}return Bt(t),null;case 13:if(Me(Ge),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ve&&Pn!==null&&t.mode&1&&!(t.flags&128))z_(),xa(),t.flags|=98560,s=!1;else if(s=Eu(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(X(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[Br]=t}else xa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bt(t),s=!1}else mr!==null&&(Vg(mr),mr=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ge.current&1?gt===0&&(gt=3):Wy())),t.updateQueue!==null&&(t.flags|=4),Bt(t),null);case 4:return Aa(),Bg(e,t),e===null&&ul(t.stateNode.containerInfo),Bt(t),null;case 10:return Ry(t.type._context),Bt(t),null;case 17:return wn(t.type)&&zd(),Bt(t),null;case 19:if(Me(Ge),s=t.memoizedState,s===null)return Bt(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)ic(s,!1);else{if(gt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Qd(e),o!==null){for(t.flags|=128,ic(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return De(Ge,Ge.current&1|2),t.child}e=e.sibling}s.tail!==null&&tt()>Ta&&(t.flags|=128,r=!0,ic(s,!1),t.lanes=4194304)}else{if(!r)if(e=Qd(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ic(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ve)return Bt(t),null}else 2*tt()-s.renderingStartTime>Ta&&n!==1073741824&&(t.flags|=128,r=!0,ic(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=tt(),t.sibling=null,n=Ge.current,De(Ge,r?n&1|2:n&1),t):(Bt(t),null);case 22:case 23:return Gy(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?kn&1073741824&&(Bt(t),t.subtreeFlags&6&&(t.flags|=8192)):Bt(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function PR(e,t){switch(Ay(t),t.tag){case 1:return wn(t.type)&&zd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Aa(),Me(yn),Me(Wt),Dy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ny(t),null;case 13:if(Me(Ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));xa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Me(Ge),null;case 4:return Aa(),null;case 10:return Ry(t.type._context),null;case 22:case 23:return Gy(),null;case 24:return null;default:return null}}var xu=!1,Gt=!1,NR=typeof WeakSet=="function"?WeakSet:Set,re=null;function oa(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(e,t,r)}else n.current=null}function Lg(e,t,n){try{n()}catch(r){Ze(e,t,r)}}var h1=!1;function DR(e,t){if(Eg=Ld,e=k_(),xy(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=e,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++l===i&&(a=o),f===s&&++u===r&&(c=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(_g={focusedElem:e,selectionRange:n},Ld=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,m=t.stateNode,w=m.getSnapshotBeforeUpdate(t.elementType===t.type?g:pr(t.type,g),v);m.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(A){Ze(t,t.return,A)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return p=h1,h1=!1,p}function Hc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Lg(t,n,s)}i=i.next}while(i!==r)}}function Nf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Fg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function IS(e){var t=e.alternate;t!==null&&(e.alternate=null,IS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Br],delete t[fl],delete t[Ig],delete t[yR],delete t[wR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function AS(e){return e.tag===5||e.tag===3||e.tag===4}function p1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||AS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Md));else if(r!==4&&(e=e.child,e!==null))for(jg(e,t,n),e=e.sibling;e!==null;)jg(e,t,n),e=e.sibling}function Mg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Mg(e,t,n),e=e.sibling;e!==null;)Mg(e,t,n),e=e.sibling}var kt=null,gr=!1;function Ci(e,t,n){for(n=n.child;n!==null;)CS(e,t,n),n=n.sibling}function CS(e,t,n){if(Mr&&typeof Mr.onCommitFiberUnmount=="function")try{Mr.onCommitFiberUnmount(Af,n)}catch{}switch(n.tag){case 5:Gt||oa(n,t);case 6:var r=kt,i=gr;kt=null,Ci(e,t,n),kt=r,gr=i,kt!==null&&(gr?(e=kt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):kt.removeChild(n.stateNode));break;case 18:kt!==null&&(gr?(e=kt,n=n.stateNode,e.nodeType===8?Vh(e.parentNode,n):e.nodeType===1&&Vh(e,n),al(e)):Vh(kt,n.stateNode));break;case 4:r=kt,i=gr,kt=n.stateNode.containerInfo,gr=!0,Ci(e,t,n),kt=r,gr=i;break;case 0:case 11:case 14:case 15:if(!Gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Lg(n,t,o),i=i.next}while(i!==r)}Ci(e,t,n);break;case 1:if(!Gt&&(oa(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ze(n,t,a)}Ci(e,t,n);break;case 21:Ci(e,t,n);break;case 22:n.mode&1?(Gt=(r=Gt)||n.memoizedState!==null,Ci(e,t,n),Gt=r):Ci(e,t,n);break;default:Ci(e,t,n)}}function g1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new NR),t.forEach(function(r){var i=qR.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ar(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:kt=a.stateNode,gr=!1;break e;case 3:kt=a.stateNode.containerInfo,gr=!0;break e;case 4:kt=a.stateNode.containerInfo,gr=!0;break e}a=a.return}if(kt===null)throw Error(X(160));CS(s,o,i),kt=null,gr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){Ze(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)TS(t,e),t=t.sibling}function TS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ar(t,e),Ir(e),r&4){try{Hc(3,e,e.return),Nf(3,e)}catch(g){Ze(e,e.return,g)}try{Hc(5,e,e.return)}catch(g){Ze(e,e.return,g)}}break;case 1:ar(t,e),Ir(e),r&512&&n!==null&&oa(n,n.return);break;case 5:if(ar(t,e),Ir(e),r&512&&n!==null&&oa(n,n.return),e.flags&32){var i=e.stateNode;try{rl(i,"")}catch(g){Ze(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Y2(i,s),dg(a,o);var l=dg(a,s);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?t_(i,d):u==="dangerouslySetInnerHTML"?Z2(i,d):u==="children"?rl(i,d):dy(i,u,d,l)}switch(a){case"input":og(i,s);break;case"textarea":X2(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?ua(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?ua(i,!!s.multiple,s.defaultValue,!0):ua(i,!!s.multiple,s.multiple?[]:"",!1))}i[fl]=s}catch(g){Ze(e,e.return,g)}}break;case 6:if(ar(t,e),Ir(e),r&4){if(e.stateNode===null)throw Error(X(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Ze(e,e.return,g)}}break;case 3:if(ar(t,e),Ir(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{al(t.containerInfo)}catch(g){Ze(e,e.return,g)}break;case 4:ar(t,e),Ir(e);break;case 13:ar(t,e),Ir(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(qy=tt())),r&4&&g1(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Gt=(l=Gt)||u,ar(t,e),Gt=l):ar(t,e),Ir(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!u&&e.mode&1)for(re=e,u=e.child;u!==null;){for(d=re=u;re!==null;){switch(f=re,h=f.child,f.tag){case 0:case 11:case 14:case 15:Hc(4,f,f.return);break;case 1:oa(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Ze(r,n,g)}}break;case 5:oa(f,f.return);break;case 22:if(f.memoizedState!==null){y1(d);continue}}h!==null?(h.return=f,re=h):y1(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=e_("display",o))}catch(g){Ze(e,e.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Ze(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ar(t,e),Ir(e),r&4&&g1(e);break;case 21:break;default:ar(t,e),Ir(e)}}function Ir(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(AS(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rl(i,""),r.flags&=-33);var s=p1(e);Mg(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=p1(e);jg(e,a,o);break;default:throw Error(X(161))}}catch(c){Ze(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function UR(e,t,n){re=e,kS(e)}function kS(e,t,n){for(var r=(e.mode&1)!==0;re!==null;){var i=re,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||xu;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Gt;a=xu;var l=Gt;if(xu=o,(Gt=c)&&!l)for(re=i;re!==null;)o=re,c=o.child,o.tag===22&&o.memoizedState!==null?w1(i):c!==null?(c.return=o,re=c):w1(i);for(;s!==null;)re=s,kS(s),s=s.sibling;re=i,xu=a,Gt=l}m1(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,re=s):m1(e)}}function m1(e){for(;re!==null;){var t=re;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Gt||Nf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Gt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:pr(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&e1(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}e1(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&al(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Gt||t.flags&512&&Fg(t)}catch(f){Ze(t,t.return,f)}}if(t===e){re=null;break}if(n=t.sibling,n!==null){n.return=t.return,re=n;break}re=t.return}}function y1(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var n=t.sibling;if(n!==null){n.return=t.return,re=n;break}re=t.return}}function w1(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Nf(4,t)}catch(c){Ze(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){Ze(t,i,c)}}var s=t.return;try{Fg(t)}catch(c){Ze(t,s,c)}break;case 5:var o=t.return;try{Fg(t)}catch(c){Ze(t,o,c)}}}catch(c){Ze(t,t.return,c)}if(t===e){re=null;break}var a=t.sibling;if(a!==null){a.return=t.return,re=a;break}re=t.return}}var BR=Math.ceil,Jd=xi.ReactCurrentDispatcher,zy=xi.ReactCurrentOwner,Jn=xi.ReactCurrentBatchConfig,ye=0,St=null,st=null,$t=0,kn=0,aa=hs(0),gt=0,wl=null,Qs=0,Df=0,Hy=0,qc=null,pn=null,qy=0,Ta=1/0,si=null,Zd=!1,zg=null,is=null,Iu=!1,Yi=null,ef=0,Vc=0,Hg=null,fd=-1,hd=0;function Zt(){return ye&6?tt():fd!==-1?fd:fd=tt()}function ss(e){return e.mode&1?ye&2&&$t!==0?$t&-$t:bR.transition!==null?(hd===0&&(hd=h_()),hd):(e=Ie,e!==0||(e=window.event,e=e===void 0?16:b_(e.type)),e):1}function vr(e,t,n,r){if(50<Vc)throw Vc=0,Hg=null,Error(X(185));Ll(e,n,r),(!(ye&2)||e!==St)&&(e===St&&(!(ye&2)&&(Df|=n),gt===4&&Wi(e,$t)),vn(e,r),n===1&&ye===0&&!(t.mode&1)&&(Ta=tt()+500,$f&&ps()))}function vn(e,t){var n=e.callbackNode;bk(e,t);var r=Bd(e,e===St?$t:0);if(r===0)n!==null&&Cw(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Cw(n),t===1)e.tag===0?vR(v1.bind(null,e)):F_(v1.bind(null,e)),gR(function(){!(ye&6)&&ps()}),n=null;else{switch(p_(r)){case 1:n=my;break;case 4:n=d_;break;case 16:n=Ud;break;case 536870912:n=f_;break;default:n=Ud}n=BS(n,RS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function RS(e,t){if(fd=-1,hd=0,ye&6)throw Error(X(327));var n=e.callbackNode;if(ga()&&e.callbackNode!==n)return null;var r=Bd(e,e===St?$t:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=tf(e,r);else{t=r;var i=ye;ye|=2;var s=OS();(St!==e||$t!==t)&&(si=null,Ta=tt()+500,Hs(e,t));do try{jR();break}catch(a){$S(e,a)}while(!0);ky(),Jd.current=s,ye=i,st!==null?t=0:(St=null,$t=0,t=gt)}if(t!==0){if(t===2&&(i=mg(e),i!==0&&(r=i,t=qg(e,i))),t===1)throw n=wl,Hs(e,0),Wi(e,r),vn(e,tt()),n;if(t===6)Wi(e,r);else{if(i=e.current.alternate,!(r&30)&&!LR(i)&&(t=tf(e,r),t===2&&(s=mg(e),s!==0&&(r=s,t=qg(e,s))),t===1))throw n=wl,Hs(e,0),Wi(e,r),vn(e,tt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(X(345));case 2:ks(e,pn,si);break;case 3:if(Wi(e,r),(r&130023424)===r&&(t=qy+500-tt(),10<t)){if(Bd(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Zt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=xg(ks.bind(null,e,pn,si),t);break}ks(e,pn,si);break;case 4:if(Wi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-wr(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BR(r/1960))-r,10<r){e.timeoutHandle=xg(ks.bind(null,e,pn,si),r);break}ks(e,pn,si);break;case 5:ks(e,pn,si);break;default:throw Error(X(329))}}}return vn(e,tt()),e.callbackNode===n?RS.bind(null,e):null}function qg(e,t){var n=qc;return e.current.memoizedState.isDehydrated&&(Hs(e,t).flags|=256),e=tf(e,t),e!==2&&(t=pn,pn=n,t!==null&&Vg(t)),e}function Vg(e){pn===null?pn=e:pn.push.apply(pn,e)}function LR(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Er(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wi(e,t){for(t&=~Hy,t&=~Df,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-wr(t),r=1<<n;e[n]=-1,t&=~r}}function v1(e){if(ye&6)throw Error(X(327));ga();var t=Bd(e,0);if(!(t&1))return vn(e,tt()),null;var n=tf(e,t);if(e.tag!==0&&n===2){var r=mg(e);r!==0&&(t=r,n=qg(e,r))}if(n===1)throw n=wl,Hs(e,0),Wi(e,t),vn(e,tt()),n;if(n===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ks(e,pn,si),vn(e,tt()),null}function Vy(e,t){var n=ye;ye|=1;try{return e(t)}finally{ye=n,ye===0&&(Ta=tt()+500,$f&&ps())}}function Ys(e){Yi!==null&&Yi.tag===0&&!(ye&6)&&ga();var t=ye;ye|=1;var n=Jn.transition,r=Ie;try{if(Jn.transition=null,Ie=1,e)return e()}finally{Ie=r,Jn.transition=n,ye=t,!(ye&6)&&ps()}}function Gy(){kn=aa.current,Me(aa)}function Hs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,pR(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(Ay(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zd();break;case 3:Aa(),Me(yn),Me(Wt),Dy();break;case 5:Ny(r);break;case 4:Aa();break;case 13:Me(Ge);break;case 19:Me(Ge);break;case 10:Ry(r.type._context);break;case 22:case 23:Gy()}n=n.return}if(St=e,st=e=os(e.current,null),$t=kn=t,gt=0,wl=null,Hy=Df=Qs=0,pn=qc=null,Us!==null){for(t=0;t<Us.length;t++)if(n=Us[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Us=null}return e}function $S(e,t){do{var n=st;try{if(ky(),ld.current=Xd,Yd){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Yd=!1}if(Ks=0,bt=ht=We=null,zc=!1,gl=0,zy.current=null,n===null||n.return===null){gt=1,wl=t,st=null;break}e:{var s=e,o=n.return,a=n,c=t;if(t=$t,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=o1(o);if(h!==null){h.flags&=-257,a1(h,o,a,s,t),h.mode&1&&s1(s,l,t),t=h,c=l;var p=t.updateQueue;if(p===null){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}else{if(!(t&1)){s1(s,l,t),Wy();break e}c=Error(X(426))}}else if(Ve&&a.mode&1){var v=o1(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),a1(v,o,a,s,t),Cy(Ca(c,a));break e}}s=c=Ca(c,a),gt!==4&&(gt=2),qc===null?qc=[s]:qc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=pS(s,c,t);Zw(s,m);break e;case 1:a=c;var w=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(is===null||!is.has(E)))){s.flags|=65536,t&=-t,s.lanes|=t;var A=gS(s,a,t);Zw(s,A);break e}}s=s.return}while(s!==null)}NS(n)}catch(T){t=T,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function OS(){var e=Jd.current;return Jd.current=Xd,e===null?Xd:e}function Wy(){(gt===0||gt===3||gt===2)&&(gt=4),St===null||!(Qs&268435455)&&!(Df&268435455)||Wi(St,$t)}function tf(e,t){var n=ye;ye|=2;var r=OS();(St!==e||$t!==t)&&(si=null,Hs(e,t));do try{FR();break}catch(i){$S(e,i)}while(!0);if(ky(),ye=n,Jd.current=r,st!==null)throw Error(X(261));return St=null,$t=0,gt}function FR(){for(;st!==null;)PS(st)}function jR(){for(;st!==null&&!dk();)PS(st)}function PS(e){var t=US(e.alternate,e,kn);e.memoizedProps=e.pendingProps,t===null?NS(e):st=t,zy.current=null}function NS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=PR(n,t),n!==null){n.flags&=32767,st=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gt=6,st=null;return}}else if(n=OR(n,t,kn),n!==null){st=n;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);gt===0&&(gt=5)}function ks(e,t,n){var r=Ie,i=Jn.transition;try{Jn.transition=null,Ie=1,MR(e,t,n,r)}finally{Jn.transition=i,Ie=r}return null}function MR(e,t,n,r){do ga();while(Yi!==null);if(ye&6)throw Error(X(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Ek(e,s),e===St&&(st=St=null,$t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Iu||(Iu=!0,BS(Ud,function(){return ga(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Jn.transition,Jn.transition=null;var o=Ie;Ie=1;var a=ye;ye|=4,zy.current=null,DR(e,n),TS(n,e),aR(_g),Ld=!!Eg,_g=Eg=null,e.current=n,UR(n),fk(),ye=a,Ie=o,Jn.transition=s}else e.current=n;if(Iu&&(Iu=!1,Yi=e,ef=i),s=e.pendingLanes,s===0&&(is=null),gk(n.stateNode),vn(e,tt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zd)throw Zd=!1,e=zg,zg=null,e;return ef&1&&e.tag!==0&&ga(),s=e.pendingLanes,s&1?e===Hg?Vc++:(Vc=0,Hg=e):Vc=0,ps(),null}function ga(){if(Yi!==null){var e=p_(ef),t=Jn.transition,n=Ie;try{if(Jn.transition=null,Ie=16>e?16:e,Yi===null)var r=!1;else{if(e=Yi,Yi=null,ef=0,ye&6)throw Error(X(331));var i=ye;for(ye|=4,re=e.current;re!==null;){var s=re,o=s.child;if(re.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(re=l;re!==null;){var u=re;switch(u.tag){case 0:case 11:case 15:Hc(8,u,s)}var d=u.child;if(d!==null)d.return=u,re=d;else for(;re!==null;){u=re;var f=u.sibling,h=u.return;if(IS(u),u===l){re=null;break}if(f!==null){f.return=h,re=f;break}re=h}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}re=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,re=o;else e:for(;re!==null;){if(s=re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Hc(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,re=m;break e}re=s.return}}var w=e.current;for(re=w;re!==null;){o=re;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,re=E;else e:for(o=w;re!==null;){if(a=re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Nf(9,a)}}catch(T){Ze(a,a.return,T)}if(a===o){re=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,re=A;break e}re=a.return}}if(ye=i,ps(),Mr&&typeof Mr.onPostCommitFiberRoot=="function")try{Mr.onPostCommitFiberRoot(Af,e)}catch{}r=!0}return r}finally{Ie=n,Jn.transition=t}}return!1}function b1(e,t,n){t=Ca(n,t),t=pS(e,t,1),e=rs(e,t,1),t=Zt(),e!==null&&(Ll(e,1,t),vn(e,t))}function Ze(e,t,n){if(e.tag===3)b1(e,e,n);else for(;t!==null;){if(t.tag===3){b1(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(is===null||!is.has(r))){e=Ca(n,e),e=gS(t,e,1),t=rs(t,e,1),e=Zt(),t!==null&&(Ll(t,1,e),vn(t,e));break}}t=t.return}}function zR(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Zt(),e.pingedLanes|=e.suspendedLanes&n,St===e&&($t&n)===n&&(gt===4||gt===3&&($t&130023424)===$t&&500>tt()-qy?Hs(e,0):Hy|=n),vn(e,t)}function DS(e,t){t===0&&(e.mode&1?(t=gu,gu<<=1,!(gu&130023424)&&(gu=4194304)):t=1);var n=Zt();e=wi(e,t),e!==null&&(Ll(e,t,n),vn(e,n))}function HR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),DS(e,n)}function qR(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(t),DS(e,n)}var US;US=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||yn.current)gn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return gn=!1,$R(e,t,n);gn=!!(e.flags&131072)}else gn=!1,Ve&&t.flags&1048576&&j_(t,Vd,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;dd(e,t),e=t.pendingProps;var i=Sa(t,Wt.current);pa(t,n),i=By(null,t,r,e,i,n);var s=Ly();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wn(r)?(s=!0,Hd(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Oy(t),i.updater=Pf,t.stateNode=i,i._reactInternals=t,$g(t,r,e,n),t=Ng(null,t,r,!0,s,n)):(t.tag=0,Ve&&s&&Iy(t),Yt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(dd(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=GR(r),e=pr(r,e),i){case 0:t=Pg(null,t,r,e,n);break e;case 1:t=u1(null,t,r,e,n);break e;case 11:t=c1(null,t,r,e,n);break e;case 14:t=l1(null,t,r,pr(r.type,e),n);break e}throw Error(X(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pr(r,i),Pg(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pr(r,i),u1(e,t,r,i,n);case 3:e:{if(vS(t),e===null)throw Error(X(387));r=t.pendingProps,s=t.memoizedState,i=s.element,G_(e,t),Kd(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Ca(Error(X(423)),t),t=d1(e,t,r,n,i);break e}else if(r!==i){i=Ca(Error(X(424)),t),t=d1(e,t,r,n,i);break e}else for(Pn=ns(t.stateNode.containerInfo.firstChild),Dn=t,Ve=!0,mr=null,n=q_(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xa(),r===i){t=vi(e,t,n);break e}Yt(e,t,r,n)}t=t.child}return t;case 5:return W_(t),e===null&&Tg(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Sg(r,i)?o=null:s!==null&&Sg(r,s)&&(t.flags|=32),wS(e,t),Yt(e,t,o,n),t.child;case 6:return e===null&&Tg(t),null;case 13:return bS(e,t,n);case 4:return Py(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ia(t,null,r,n):Yt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pr(r,i),c1(e,t,r,i,n);case 7:return Yt(e,t,t.pendingProps,n),t.child;case 8:return Yt(e,t,t.pendingProps.children,n),t.child;case 12:return Yt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,De(Gd,r._currentValue),r._currentValue=o,s!==null)if(Er(s.value,o)){if(s.children===i.children&&!yn.current){t=vi(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=fi(-1,n&-n),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),kg(s.return,n,t),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(X(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),kg(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Yt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,pa(t,n),i=Zn(i),r=r(i),t.flags|=1,Yt(e,t,r,n),t.child;case 14:return r=t.type,i=pr(r,t.pendingProps),i=pr(r.type,i),l1(e,t,r,i,n);case 15:return mS(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pr(r,i),dd(e,t),t.tag=1,wn(r)?(e=!0,Hd(t)):e=!1,pa(t,n),hS(t,r,i),$g(t,r,i,n),Ng(null,t,r,!0,e,n);case 19:return ES(e,t,n);case 22:return yS(e,t,n)}throw Error(X(156,t.tag))};function BS(e,t){return u_(e,t)}function VR(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(e,t,n,r){return new VR(e,t,n,r)}function Ky(e){return e=e.prototype,!(!e||!e.isReactComponent)}function GR(e){if(typeof e=="function")return Ky(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hy)return 11;if(e===py)return 14}return 2}function os(e,t){var n=e.alternate;return n===null?(n=Yn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function pd(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")Ky(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Xo:return qs(n.children,i,s,t);case fy:o=8,i|=8;break;case tg:return e=Yn(12,n,t,i|2),e.elementType=tg,e.lanes=s,e;case ng:return e=Yn(13,n,t,i),e.elementType=ng,e.lanes=s,e;case rg:return e=Yn(19,n,t,i),e.elementType=rg,e.lanes=s,e;case W2:return Uf(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case V2:o=10;break e;case G2:o=9;break e;case hy:o=11;break e;case py:o=14;break e;case ji:o=16,r=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=Yn(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function qs(e,t,n,r){return e=Yn(7,e,r,t),e.lanes=n,e}function Uf(e,t,n,r){return e=Yn(22,e,r,t),e.elementType=W2,e.lanes=n,e.stateNode={isHidden:!1},e}function Zh(e,t,n){return e=Yn(6,e,null,t),e.lanes=n,e}function ep(e,t,n){return t=Yn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function WR(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nh(0),this.expirationTimes=Nh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Qy(e,t,n,r,i,s,o,a,c){return e=new WR(e,t,n,a,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Yn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oy(s),e}function KR(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function LS(e){if(!e)return us;e=e._reactInternals;e:{if(co(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var n=e.type;if(wn(n))return L_(e,n,t)}return t}function FS(e,t,n,r,i,s,o,a,c){return e=Qy(n,r,!0,e,i,s,o,a,c),e.context=LS(null),n=e.current,r=Zt(),i=ss(n),s=fi(r,i),s.callback=t??null,rs(n,s,i),e.current.lanes=i,Ll(e,i,r),vn(e,r),e}function Bf(e,t,n,r){var i=t.current,s=Zt(),o=ss(i);return n=LS(n),t.context===null?t.context=n:t.pendingContext=n,t=fi(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=rs(i,t,o),e!==null&&(vr(e,i,o,s),cd(e,i,o)),o}function nf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function E1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Yy(e,t){E1(e,t),(e=e.alternate)&&E1(e,t)}function QR(){return null}var jS=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xy(e){this._internalRoot=e}Lf.prototype.render=Xy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));Bf(e,t,null,null)};Lf.prototype.unmount=Xy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ys(function(){Bf(null,e,null,null)}),t[yi]=null}};function Lf(e){this._internalRoot=e}Lf.prototype.unstable_scheduleHydration=function(e){if(e){var t=y_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Gi.length&&t!==0&&t<Gi[n].priority;n++);Gi.splice(n,0,e),n===0&&v_(e)}};function Jy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ff(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _1(){}function YR(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=nf(o);s.call(l)}}var o=FS(t,r,e,0,null,!1,!1,"",_1);return e._reactRootContainer=o,e[yi]=o.current,ul(e.nodeType===8?e.parentNode:e),Ys(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=nf(c);a.call(l)}}var c=Qy(e,0,!1,null,null,!1,!1,"",_1);return e._reactRootContainer=c,e[yi]=c.current,ul(e.nodeType===8?e.parentNode:e),Ys(function(){Bf(t,c,n,r)}),c}function jf(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=nf(o);a.call(c)}}Bf(t,o,e,i)}else o=YR(n,t,e,i,r);return nf(o)}g_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Tc(t.pendingLanes);n!==0&&(yy(t,n|1),vn(t,tt()),!(ye&6)&&(Ta=tt()+500,ps()))}break;case 13:Ys(function(){var r=wi(e,1);if(r!==null){var i=Zt();vr(r,e,1,i)}}),Yy(e,1)}};wy=function(e){if(e.tag===13){var t=wi(e,134217728);if(t!==null){var n=Zt();vr(t,e,134217728,n)}Yy(e,134217728)}};m_=function(e){if(e.tag===13){var t=ss(e),n=wi(e,t);if(n!==null){var r=Zt();vr(n,e,t,r)}Yy(e,t)}};y_=function(){return Ie};w_=function(e,t){var n=Ie;try{return Ie=e,t()}finally{Ie=n}};hg=function(e,t,n){switch(t){case"input":if(og(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Rf(r);if(!i)throw Error(X(90));Q2(r),og(r,i)}}}break;case"textarea":X2(e,n);break;case"select":t=n.value,t!=null&&ua(e,!!n.multiple,t,!1)}};i_=Vy;s_=Ys;var XR={usingClientEntryPoint:!1,Events:[jl,ta,Rf,n_,r_,Vy]},sc={findFiberByHostInstance:Ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JR={bundleType:sc.bundleType,version:sc.version,rendererPackageName:sc.rendererPackageName,rendererConfig:sc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=c_(e),e===null?null:e.stateNode},findFiberByHostInstance:sc.findFiberByHostInstance||QR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Au.isDisabled&&Au.supportsFiber)try{Af=Au.inject(JR),Mr=Au}catch{}}Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XR;Ln.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jy(t))throw Error(X(200));return KR(e,t,null,n)};Ln.createRoot=function(e,t){if(!Jy(e))throw Error(X(299));var n=!1,r="",i=jS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Qy(e,1,!1,null,null,n,!1,r,i),e[yi]=t.current,ul(e.nodeType===8?e.parentNode:e),new Xy(t)};Ln.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=c_(t),e=e===null?null:e.stateNode,e};Ln.flushSync=function(e){return Ys(e)};Ln.hydrate=function(e,t,n){if(!Ff(t))throw Error(X(200));return jf(null,e,t,!0,n)};Ln.hydrateRoot=function(e,t,n){if(!Jy(e))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=jS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=FS(t,null,e,1,n??null,i,!1,s,o),e[yi]=t.current,ul(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Lf(t)};Ln.render=function(e,t,n){if(!Ff(t))throw Error(X(200));return jf(null,e,t,!1,n)};Ln.unmountComponentAtNode=function(e){if(!Ff(e))throw Error(X(40));return e._reactRootContainer?(Ys(function(){jf(null,null,e,!1,function(){e._reactRootContainer=null,e[yi]=null})}),!0):!1};Ln.unstable_batchedUpdates=Vy;Ln.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ff(n))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return jf(e,t,n,!1,r)};Ln.version="18.3.1-next-f1338f8080-20240426";function MS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MS)}catch(e){console.error(e)}}MS(),M2.exports=Ln;var ZR=M2.exports,S1=ZR;Zp.createRoot=S1.createRoot,Zp.hydrateRoot=S1.hydrateRoot;var Zy={};Object.defineProperty(Zy,"__esModule",{value:!0});Zy.parse=o$;Zy.serialize=a$;const e$=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t$=/^[\u0021-\u003A\u003C-\u007E]*$/,n$=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r$=/^[\u0020-\u003A\u003D-\u007E]*$/,i$=Object.prototype.toString,s$=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function o$(e,t){const n=new s$,r=e.length;if(r<2)return n;const i=(t==null?void 0:t.decode)||c$;let s=0;do{const o=e.indexOf("=",s);if(o===-1)break;const a=e.indexOf(";",s),c=a===-1?r:a;if(o>c){s=e.lastIndexOf(";",o-1)+1;continue}const l=x1(e,s,o),u=I1(e,o,l),d=e.slice(l,u);if(n[d]===void 0){let f=x1(e,o+1,c),h=I1(e,c,f);const p=i(e.slice(f,h));n[d]=p}s=c+1}while(s<r);return n}function x1(e,t,n){do{const r=e.charCodeAt(t);if(r!==32&&r!==9)return t}while(++t<n);return n}function I1(e,t,n){for(;t>n;){const r=e.charCodeAt(--t);if(r!==32&&r!==9)return t+1}return n}function a$(e,t,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!e$.test(e))throw new TypeError(`argument name is invalid: ${e}`);const i=r(t);if(!t$.test(i))throw new TypeError(`argument val is invalid: ${t}`);let s=e+"="+i;if(!n)return s;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);s+="; Max-Age="+n.maxAge}if(n.domain){if(!n$.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);s+="; Domain="+n.domain}if(n.path){if(!r$.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);s+="; Path="+n.path}if(n.expires){if(!l$(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.partitioned&&(s+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return s}function c$(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function l$(e){return i$.call(e)==="[object Date]"}var A1="popstate";function u$(e={}){function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return Gg("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:vl(i)}return f$(t,n,null,e)}function Ke(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Gr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function d$(){return Math.random().toString(36).substring(2,10)}function C1(e,t){return{usr:e.state,key:e.key,idx:t}}function Gg(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ua(t):t,state:n,key:t&&t.key||r||d$()}}function vl({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ua(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function f$(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",c=null,l=u();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let v=u(),m=v==null?null:v-l;l=v,c&&c({action:a,location:g.location,delta:m})}function f(v,m){a="PUSH";let w=Gg(g.location,v,m);l=u()+1;let E=C1(w,l),A=g.createHref(w);try{o.pushState(E,"",A)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(A)}s&&c&&c({action:a,location:g.location,delta:1})}function h(v,m){a="REPLACE";let w=Gg(g.location,v,m);l=u();let E=C1(w,l),A=g.createHref(w);o.replaceState(E,"",A),s&&c&&c({action:a,location:g.location,delta:0})}function p(v){return h$(v)}let g={get action(){return a},get location(){return e(i,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(A1,d),c=v,()=>{i.removeEventListener(A1,d),c=null}},createHref(v){return t(i,v)},createURL:p,encodeLocation(v){let m=p(v);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:h,go(v){return o.go(v)}};return g}function h$(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ke(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:vl(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function zS(e,t,n="/"){return p$(e,t,n,!1)}function p$(e,t,n,r){let i=typeof t=="string"?Ua(t):t,s=bi(i.pathname||"/",n);if(s==null)return null;let o=HS(e);g$(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=A$(s);a=x$(o[c],l,r)}return a}function HS(e,t=[],n=[],r=""){let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Ke(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let l=hi([r,c.relativePath]),u=n.concat(c);s.children&&s.children.length>0&&(Ke(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),HS(s.children,t,u,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:_$(l,s.index),routesMeta:u})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of qS(s.path))i(s,o,c)}),t}function qS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=qS(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>e.startsWith("/")&&c===""?"/":c)}function g$(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:S$(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var m$=/^:[\w-]+$/,y$=3,w$=2,v$=1,b$=10,E$=-2,T1=e=>e==="*";function _$(e,t){let n=e.split("/"),r=n.length;return n.some(T1)&&(r+=E$),t&&(r+=w$),n.filter(i=>!T1(i)).reduce((i,s)=>i+(m$.test(s)?y$:s===""?v$:b$),r)}function S$(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function x$(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=s==="/"?t:t.slice(s.length)||"/",d=rf({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),f=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=rf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:hi([s,d.pathname]),pathnameBase:R$(hi([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=hi([s,d.pathnameBase]))}return o}function rf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=I$(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,{paramName:u,isOptional:d},f)=>{if(u==="*"){let p=a[f]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const h=a[f];return d&&!h?l[u]=void 0:l[u]=(h||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function I$(e,t=!1,n=!0){Gr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function A$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Gr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function bi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function C$(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Ua(e):e;return{pathname:n?n.startsWith("/")?n:T$(n,t):t,search:$$(r),hash:O$(i)}}function T$(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function tp(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function k$(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function VS(e){let t=k$(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function GS(e,t,n,r=!1){let i;typeof e=="string"?i=Ua(e):(i={...e},Ke(!i.pathname||!i.pathname.includes("?"),tp("?","pathname","search",i)),Ke(!i.pathname||!i.pathname.includes("#"),tp("#","pathname","hash",i)),Ke(!i.search||!i.search.includes("#"),tp("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?t[d]:"/"}let c=C$(i,a),l=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}var hi=e=>e.join("/").replace(/\/\/+/g,"/"),R$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,O$=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function P$(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var WS=["POST","PUT","PATCH","DELETE"];new Set(WS);var N$=["GET",...WS];new Set(N$);var Ba=H.createContext(null);Ba.displayName="DataRouter";var Mf=H.createContext(null);Mf.displayName="DataRouterState";var KS=H.createContext({isTransitioning:!1});KS.displayName="ViewTransition";var D$=H.createContext(new Map);D$.displayName="Fetchers";var U$=H.createContext(null);U$.displayName="Await";var Yr=H.createContext(null);Yr.displayName="Navigation";var zl=H.createContext(null);zl.displayName="Location";var Ii=H.createContext({outlet:null,matches:[],isDataRoute:!1});Ii.displayName="Route";var e0=H.createContext(null);e0.displayName="RouteError";function B$(e,{relative:t}={}){Ke(Hl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=H.useContext(Yr),{hash:i,pathname:s,search:o}=ql(e,{relative:t}),a=s;return n!=="/"&&(a=s==="/"?n:hi([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Hl(){return H.useContext(zl)!=null}function gs(){return Ke(Hl(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(zl).location}var QS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function YS(e){H.useContext(Yr).static||H.useLayoutEffect(e)}function L$(){let{isDataRoute:e}=H.useContext(Ii);return e?X$():F$()}function F$(){Ke(Hl(),"useNavigate() may be used only in the context of a <Router> component.");let e=H.useContext(Ba),{basename:t,navigator:n}=H.useContext(Yr),{matches:r}=H.useContext(Ii),{pathname:i}=gs(),s=JSON.stringify(VS(r)),o=H.useRef(!1);return YS(()=>{o.current=!0}),H.useCallback((c,l={})=>{if(Gr(o.current,QS),!o.current)return;if(typeof c=="number"){n.go(c);return}let u=GS(c,JSON.parse(s),i,l.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:hi([t,u.pathname])),(l.replace?n.replace:n.push)(u,l.state,l)},[t,n,s,i,e])}H.createContext(null);function ql(e,{relative:t}={}){let{matches:n}=H.useContext(Ii),{pathname:r}=gs(),i=JSON.stringify(VS(n));return H.useMemo(()=>GS(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function j$(e,t){return XS(e,t)}function XS(e,t,n,r){var m;Ke(Hl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=H.useContext(Yr),{matches:s}=H.useContext(Ii),o=s[s.length-1],a=o?o.params:{},c=o?o.pathname:"/",l=o?o.pathnameBase:"/",u=o&&o.route;{let w=u&&u.path||"";JS(c,!u||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let d=gs(),f;if(t){let w=typeof t=="string"?Ua(t):t;Ke(l==="/"||((m=w.pathname)==null?void 0:m.startsWith(l)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${w.pathname}" was given in the \`location\` prop.`),f=w}else f=d;let h=f.pathname||"/",p=h;if(l!=="/"){let w=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let g=zS(e,{pathname:p});Gr(u||g!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Gr(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=V$(g&&g.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:hi([l,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:hi([l,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return t&&v?H.createElement(zl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},v):v}function M$(){let e=Y$(),t=P$(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=H.createElement(H.Fragment,null,H.createElement("p",null," Hey developer "),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:s},"ErrorBoundary")," or"," ",H.createElement("code",{style:s},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},t),n?H.createElement("pre",{style:i},n):null,o)}var z$=H.createElement(M$,null),H$=class extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?H.createElement(Ii.Provider,{value:this.props.routeContext},H.createElement(e0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function q$({routeContext:e,match:t,children:n}){let r=H.useContext(Ba);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(Ii.Provider,{value:e},n)}function V$(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n==null?void 0:n.errors;if(s!=null){let c=i.findIndex(l=>l.route.id&&(s==null?void 0:s[l.route.id])!==void 0);Ke(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,a=-1;if(n)for(let c=0;c<i.length;c++){let l=i[c];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(a=c),l.route.id){let{loaderData:u,errors:d}=n,f=l.route.loader&&!u.hasOwnProperty(l.route.id)&&(!d||d[l.route.id]===void 0);if(l.route.lazy||f){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((c,l,u)=>{let d,f=!1,h=null,p=null;n&&(d=s&&l.route.id?s[l.route.id]:void 0,h=l.route.errorElement||z$,o&&(a<0&&u===0?(JS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,p=null):a===u&&(f=!0,p=l.route.hydrateFallbackElement||null)));let g=t.concat(i.slice(0,u+1)),v=()=>{let m;return d?m=h:f?m=p:l.route.Component?m=H.createElement(l.route.Component,null):l.route.element?m=l.route.element:m=c,H.createElement(q$,{match:l,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:m})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?H.createElement(H$,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):v()},null)}function t0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G$(e){let t=H.useContext(Ba);return Ke(t,t0(e)),t}function W$(e){let t=H.useContext(Mf);return Ke(t,t0(e)),t}function K$(e){let t=H.useContext(Ii);return Ke(t,t0(e)),t}function n0(e){let t=K$(e),n=t.matches[t.matches.length-1];return Ke(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function Q$(){return n0("useRouteId")}function Y$(){var r;let e=H.useContext(e0),t=W$("useRouteError"),n=n0("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function X$(){let{router:e}=G$("useNavigate"),t=n0("useNavigate"),n=H.useRef(!1);return YS(()=>{n.current=!0}),H.useCallback(async(i,s={})=>{Gr(n.current,QS),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var k1={};function JS(e,t,n){!t&&!k1[e]&&(k1[e]=!0,Gr(!1,n))}H.memo(J$);function J$({routes:e,future:t,state:n}){return XS(e,void 0,n,t)}function Fi(e){Ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Z$({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Ke(!Hl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=H.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Ua(n));let{pathname:c="/",search:l="",hash:u="",state:d=null,key:f="default"}=n,h=H.useMemo(()=>{let p=bi(c,o);return p==null?null:{location:{pathname:p,search:l,hash:u,state:d,key:f},navigationType:r}},[o,c,l,u,d,f,r]);return Gr(h!=null,`<Router basename="${o}"> is not able to match the URL "${c}${l}${u}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:H.createElement(Yr.Provider,{value:a},H.createElement(zl.Provider,{children:t,value:h}))}function eO({children:e,location:t}){return j$(Wg(e),t)}function Wg(e,t=[]){let n=[];return H.Children.forEach(e,(r,i)=>{if(!H.isValidElement(r))return;let s=[...t,i];if(r.type===H.Fragment){n.push.apply(n,Wg(r.props.children,s));return}Ke(r.type===Fi,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ke(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Wg(r.props.children,s)),n.push(o)}),n}var gd="get",md="application/x-www-form-urlencoded";function zf(e){return e!=null&&typeof e.tagName=="string"}function tO(e){return zf(e)&&e.tagName.toLowerCase()==="button"}function nO(e){return zf(e)&&e.tagName.toLowerCase()==="form"}function rO(e){return zf(e)&&e.tagName.toLowerCase()==="input"}function iO(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function sO(e,t){return e.button===0&&(!t||t==="_self")&&!iO(e)}var Cu=null;function oO(){if(Cu===null)try{new FormData(document.createElement("form"),0),Cu=!1}catch{Cu=!0}return Cu}var aO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function np(e){return e!=null&&!aO.has(e)?(Gr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${md}"`),null):e}function cO(e,t){let n,r,i,s,o;if(nO(e)){let a=e.getAttribute("action");r=a?bi(a,t):null,n=e.getAttribute("method")||gd,i=np(e.getAttribute("enctype"))||md,s=new FormData(e)}else if(tO(e)||rO(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||a.getAttribute("action");if(r=c?bi(c,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||gd,i=np(e.getAttribute("formenctype"))||np(a.getAttribute("enctype"))||md,s=new FormData(a,e),!oO()){let{name:l,type:u,value:d}=e;if(u==="image"){let f=l?`${l}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else l&&s.append(l,d)}}else{if(zf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=gd,r=null,i=md,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function r0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function lO(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uO(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function dO(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await lO(s,n);return o.links?o.links():[]}return[]}));return gO(r.flat(1).filter(uO).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function R1(e,t,n,r,i,s){let o=(c,l)=>n[l]?c.route.id!==n[l].route.id:!0,a=(c,l)=>{var u;return n[l].pathname!==c.pathname||((u=n[l].route.path)==null?void 0:u.endsWith("*"))&&n[l].params["*"]!==c.params["*"]};return s==="assets"?t.filter((c,l)=>o(c,l)||a(c,l)):s==="data"?t.filter((c,l)=>{var d;let u=r.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,l)||a(c,l))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function fO(e,t,{includeHydrateFallback:n}={}){return hO(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function hO(e){return[...new Set(e)]}function pO(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function gO(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(pO(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mO=new Set([100,101,204,205]);function yO(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&bi(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function ZS(){let e=H.useContext(Ba);return r0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function wO(){let e=H.useContext(Mf);return r0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var i0=H.createContext(void 0);i0.displayName="FrameworkContext";function ex(){let e=H.useContext(i0);return r0(e,"You must render this element inside a <HydratedRouter> element"),e}function vO(e,t){let n=H.useContext(i0),[r,i]=H.useState(!1),[s,o]=H.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=t,f=H.useRef(null);H.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let g=m=>{m.forEach(w=>{o(w.isIntersecting)})},v=new IntersectionObserver(g,{threshold:.5});return f.current&&v.observe(f.current),()=>{v.disconnect()}}},[e]),H.useEffect(()=>{if(r){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[r]);let h=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,f,{}]:[s,f,{onFocus:oc(a,h),onBlur:oc(c,p),onMouseEnter:oc(l,h),onMouseLeave:oc(u,p),onTouchStart:oc(d,h)}]:[!1,f,{}]}function oc(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function bO({page:e,...t}){let{router:n}=ZS(),r=H.useMemo(()=>zS(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?H.createElement(_O,{page:e,matches:r,...t}):null}function EO(e){let{manifest:t,routeModules:n}=ex(),[r,i]=H.useState([]);return H.useEffect(()=>{let s=!1;return dO(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function _O({page:e,matches:t,...n}){let r=gs(),{manifest:i,routeModules:s}=ex(),{basename:o}=ZS(),{loaderData:a,matches:c}=wO(),l=H.useMemo(()=>R1(e,t,c,i,r,"data"),[e,t,c,i,r]),u=H.useMemo(()=>R1(e,t,c,i,r,"assets"),[e,t,c,i,r]),d=H.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let p=new Set,g=!1;if(t.forEach(m=>{var E;let w=i.routes[m.route.id];!w||!w.hasLoader||(!l.some(A=>A.route.id===m.route.id)&&m.route.id in a&&((E=s[m.route.id])!=null&&E.shouldRevalidate)||w.hasClientLoader?g=!0:p.add(m.route.id))}),p.size===0)return[];let v=yO(e,o);return g&&p.size>0&&v.searchParams.set("_routes",t.filter(m=>p.has(m.route.id)).map(m=>m.route.id).join(",")),[v.pathname+v.search]},[o,a,r,i,l,t,e,s]),f=H.useMemo(()=>fO(u,i),[u,i]),h=EO(u);return H.createElement(H.Fragment,null,d.map(p=>H.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),f.map(p=>H.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),h.map(({key:p,link:g})=>H.createElement("link",{key:p,...g})))}function SO(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var tx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tx&&(window.__reactRouterVersion="7.6.3")}catch{}function xO({basename:e,children:t,window:n}){let r=H.useRef();r.current==null&&(r.current=u$({window:n,v5Compat:!0}));let i=r.current,[s,o]=H.useState({action:i.action,location:i.location}),a=H.useCallback(c=>{H.startTransition(()=>o(c))},[o]);return H.useLayoutEffect(()=>i.listen(a),[i,a]),H.createElement(Z$,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var nx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qt=H.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:c,to:l,preventScrollReset:u,viewTransition:d,...f},h){let{basename:p}=H.useContext(Yr),g=typeof l=="string"&&nx.test(l),v,m=!1;if(typeof l=="string"&&g&&(v=l,tx))try{let C=new URL(window.location.href),U=l.startsWith("//")?new URL(C.protocol+l):new URL(l),B=bi(U.pathname,p);U.origin===C.origin&&B!=null?l=B+U.search+U.hash:m=!0}catch{Gr(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=B$(l,{relative:i}),[E,A,T]=vO(r,f),D=TO(l,{replace:o,state:a,target:c,preventScrollReset:u,relative:i,viewTransition:d});function j(C){t&&t(C),C.defaultPrevented||D(C)}let L=H.createElement("a",{...f,...T,href:v||w,onClick:m||s?t:j,ref:SO(h,A),target:c,"data-discover":!g&&n==="render"?"true":void 0});return E&&!g?H.createElement(H.Fragment,null,L,H.createElement(bO,{page:w})):L});qt.displayName="Link";var IO=H.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:c,...l},u){let d=ql(o,{relative:l.relative}),f=gs(),h=H.useContext(Mf),{navigator:p,basename:g}=H.useContext(Yr),v=h!=null&&PO(d)&&a===!0,m=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,w=f.pathname,E=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(w=w.toLowerCase(),E=E?E.toLowerCase():null,m=m.toLowerCase()),E&&g&&(E=bi(E,g)||E);const A=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let T=w===m||!i&&w.startsWith(m)&&w.charAt(A)==="/",D=E!=null&&(E===m||!i&&E.startsWith(m)&&E.charAt(m.length)==="/"),j={isActive:T,isPending:D,isTransitioning:v},L=T?t:void 0,C;typeof r=="function"?C=r(j):C=[r,T?"active":null,D?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let U=typeof s=="function"?s(j):s;return H.createElement(qt,{...l,"aria-current":L,className:C,ref:u,style:U,to:o,viewTransition:a},typeof c=="function"?c(j):c)});IO.displayName="NavLink";var AO=H.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=gd,action:a,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,...f},h)=>{let p=$O(),g=OO(a,{relative:l}),v=o.toLowerCase()==="get"?"get":"post",m=typeof a=="string"&&nx.test(a),w=E=>{if(c&&c(E),E.defaultPrevented)return;E.preventDefault();let A=E.nativeEvent.submitter,T=(A==null?void 0:A.getAttribute("formmethod"))||o;p(A||E.currentTarget,{fetcherKey:t,method:T,navigate:n,replace:i,state:s,relative:l,preventScrollReset:u,viewTransition:d})};return H.createElement("form",{ref:h,method:v,action:g,onSubmit:r?c:w,...f,"data-discover":!m&&e==="render"?"true":void 0})});AO.displayName="Form";function CO(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rx(e){let t=H.useContext(Ba);return Ke(t,CO(e)),t}function TO(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=L$(),c=gs(),l=ql(e,{relative:s});return H.useCallback(u=>{if(sO(u,t)){u.preventDefault();let d=n!==void 0?n:vl(c)===vl(l);a(e,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[c,a,l,n,r,t,e,i,s,o])}var kO=0,RO=()=>`__${String(++kO)}__`;function $O(){let{router:e}=rx("useSubmit"),{basename:t}=H.useContext(Yr),n=Q$();return H.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:c,body:l}=cO(r,t);if(i.navigate===!1){let u=i.fetcherKey||RO();await e.fetch(u,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function OO(e,{relative:t}={}){let{basename:n}=H.useContext(Yr),r=H.useContext(Ii);Ke(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...ql(e||".",{relative:t})},o=gs();if(e==null){s.search=o.search;let a=new URLSearchParams(s.search),c=a.getAll("index");if(c.some(u=>u==="")){a.delete("index"),c.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();s.search=u?`?${u}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:hi([n,s.pathname])),vl(s)}function PO(e,t={}){let n=H.useContext(KS);Ke(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=rx("useViewTransitionState"),i=ql(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=bi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=bi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return rf(i.pathname,o)!=null||rf(i.pathname,s)!=null}[...mO];function NO(){const e=gs();return _.jsx("header",{className:"header",children:_.jsxs("div",{className:"header-content",children:[_.jsx(qt,{to:"/",className:"logo",children:" Flow NFT Demo"}),_.jsxs("nav",{className:"nav",children:[_.jsx(qt,{to:"/",className:`nav-link ${e.pathname==="/"?"active":""}`,children:"Home"}),_.jsx(qt,{to:"/demo",className:`nav-link ${e.pathname==="/demo"?"active":""}`,children:"Flow Demo"}),_.jsx(qt,{to:"/quotes",className:`nav-link ${e.pathname==="/quotes"||e.pathname==="/quote-generator"?"active":""}`,children:"Quote Generator"}),_.jsx(qt,{to:"/gallery",className:`nav-link ${e.pathname==="/gallery"||e.pathname==="/nft-gallery"?"active":""}`,children:"NFT Gallery"}),_.jsx(qt,{to:"/about",className:`nav-link ${e.pathname==="/about"?"active":""}`,children:"About"})]})]})})}function DO(){return _.jsx("footer",{className:"footer",children:_.jsxs("div",{className:"footer-content",children:[_.jsxs("div",{className:"footer-links",children:[_.jsx("a",{href:"https://flow.com",target:"_blank",rel:"noopener noreferrer",className:"footer-link",children:"Flow Blockchain"}),_.jsx("a",{href:"https://github.com/onflow/fcl-js",target:"_blank",rel:"noopener noreferrer",className:"footer-link",children:"FCL Documentation"}),_.jsx("a",{href:"https://developers.flow.com",target:"_blank",rel:"noopener noreferrer",className:"footer-link",children:"Developer Portal"}),_.jsx("a",{href:"https://testnet.flowscan.org",target:"_blank",rel:"noopener noreferrer",className:"footer-link",children:"Testnet Explorer"})]}),_.jsx("p",{children:"Built with  for the Flow ecosystem "})]})})}function UO(){return _.jsxs("div",{className:"page",children:[_.jsxs("div",{className:"hero",children:[_.jsx("h1",{children:" Quote NFT Generator"}),_.jsx("p",{children:"A modern Flow blockchain dApp showcasing wallet integration, smart contract interaction, and unique NFT artwork generation. Perfect for learning Flow development and hackathon demonstrations."}),_.jsx(qt,{to:"/demo",className:"btn btn-primary",children:"Try Live Demo "})]}),_.jsxs("div",{className:"cards-grid",children:[_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Wallet Connection"}),_.jsx("p",{children:"Connect your Flow wallet using FCL (Flow Client Library) with support for multiple authentication methods and wallet providers."}),_.jsx(qt,{to:"/demo",className:"btn btn-outline",children:"Connect Wallet"})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Blockchain Interaction"}),_.jsx("p",{children:"Query real-time blockchain data including block heights, timestamps, and account balances directly from Flow testnet."}),_.jsx(qt,{to:"/demo",className:"btn btn-outline",children:"Test Blockchain"})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Unique NFT Artwork"}),_.jsx("p",{children:"Generate inspirational quotes with algorithmically created unique artwork. Each quote gets its own distinctive visual design perfect for NFTs!"}),_.jsx(qt,{to:"/quotes",className:"btn btn-outline",children:"Create NFT Art"})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" NFT Gallery"}),_.jsx("p",{children:"View and manage your complete Quote NFT collection. Browse your minted NFTs, share favorites, and download artwork from your personal gallery."}),_.jsx(qt,{to:"/gallery",className:"btn btn-outline",children:"View Gallery"})]})]}),_.jsxs("div",{style:{marginTop:"3rem",textAlign:"center"},children:[_.jsx("h2",{children:" New Feature: AI-Generated NFT Artwork"}),_.jsxs("div",{className:"card",style:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)",marginBottom:"2rem",border:"2px solid rgba(102, 126, 234, 0.2)"},children:[_.jsx("h3",{children:" Algorithmic Art Generation"}),_.jsxs("p",{style:{fontSize:"1.1rem",lineHeight:"1.6"},children:["Each generated quote now comes with completely ",_.jsx("strong",{children:"unique SVG artwork"})," created algorithmically based on the quote content. The same quote will always generate the same artwork, ensuring authenticity and making each NFT truly one-of-a-kind!"]}),_.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"1.5rem",flexWrap:"wrap"},children:[_.jsx(qt,{to:"/quotes",className:"btn btn-primary",children:" Try Art Generator"}),_.jsx(qt,{to:"/gallery",className:"btn btn-secondary",children:" View Gallery"}),_.jsx(qt,{to:"/about",className:"btn btn-outline",children:" Learn More"})]})]}),_.jsx("h2",{children:"Why Flow Blockchain?"}),_.jsxs("div",{className:"cards-grid",children:[_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Fast & Efficient"}),_.jsx("p",{children:"Flow's unique multi-role architecture enables fast finality and low transaction costs, perfect for NFT minting."})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Developer Friendly"}),_.jsx("p",{children:"Cadence smart contract language is designed for safety and clarity, making NFT development secure."})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Production Ready"}),_.jsx("p",{children:"Powering NBA Top Shot and other major NFT applications with millions of users and transactions."})]})]})]}),_.jsxs("div",{style:{marginTop:"3rem"},children:[_.jsx("h2",{children:" What Makes This Special"}),_.jsxs("div",{className:"cards-grid",children:[_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Generative Art"}),_.jsx("p",{children:"Every quote generates unique visual artwork using algorithmic design. Colors, patterns, and decorations are mathematically derived from the quote content."})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Deterministic Creation"}),_.jsx("p",{children:"The same quote will always produce identical artwork, ensuring consistency and making the art verifiably tied to the content."})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Export Ready"}),_.jsx("p",{children:"Generated artwork can be downloaded as high-quality SVG files, perfect for minting as NFTs on the blockchain."})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Modern UI/UX"}),_.jsx("p",{children:"Beautiful, responsive interface with smooth animations and professional design that works perfectly on all devices."})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Collection Management"}),_.jsx("p",{children:"Comprehensive NFT gallery to view, organize, and manage your Quote NFT collection with detailed metadata and sharing capabilities."})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Full Blockchain Integration"}),_.jsx("p",{children:"Complete Flow blockchain integration with wallet connection, smart contract interaction, and real-time NFT minting and querying."})]})]})]})]})}let yd=null;const BO=e=>{yd=e};let $e=function(e){return e[e.debug=5]="debug",e[e.info=4]="info",e[e.log=3]="log",e[e.warn=2]="warn",e[e.error=1]="error",e}({});const LO=e=>{const{title:t,message:n}=e;return[`
    %c${t}
    ============================

    ${n}

    ============================
    `.replace(/\n[^\S\r\n]+/g,`
`).trim(),"font-weight:bold;font-family:monospace;"]},we=async e=>{var a;const{title:t,message:n,level:r,always:i}=e,s=await((a=yd==null?void 0:yd())==null?void 0:a.get("logger.level"))??$e.warn;if(!i&&s<r)return;const o=LO({title:t,message:n});switch(r){case $e.debug:console.debug(...o);break;case $e.info:console.info(...o);break;case $e.warn:console.warn(...o);break;case $e.error:console.error(...o);break;default:console.log(...o)}};we.deprecate=e=>{const{pkg:t,subject:n,transition:r,level:i=$e.warn,message:s="",callback:o=null}=e,a=l=>l.charAt(0).toUpperCase()+l.slice(1),c=()=>we({title:`${t?t+" ":""}Deprecation Notice`,message:`
      ${n?`${a(n)} is deprecated and will cease to work in future releases${t?" of "+t:""}.`:""}${s?`
`+s:""}${r?`
You can learn more (including a guide on common transition paths) here: ${r}`:""}
    `.trim(),level:i});return typeof o=="function"?async function(){return await c(),await o(...arguments)}:c()};function V(e,t){var s,o,a;if(!e){const c=new Error(`INVARIANT ${t}`);c.stack=(a=(o=(s=c.stack)==null?void 0:s.split(`
`))==null?void 0:o.filter(l=>!/at invariant/.test(l)))==null?void 0:a.join(`
`);for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw console.error(`

---

`,c,`

`,...r,`

---

`),c}}let Tu;const FO=new Uint8Array(16);function jO(){if(!Tu&&(Tu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Tu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Tu(FO)}const Tt=[];for(let e=0;e<256;++e)Tt.push((e+256).toString(16).slice(1));function MO(e,t=0){return Tt[e[t+0]]+Tt[e[t+1]]+Tt[e[t+2]]+Tt[e[t+3]]+"-"+Tt[e[t+4]]+Tt[e[t+5]]+"-"+Tt[e[t+6]]+Tt[e[t+7]]+"-"+Tt[e[t+8]]+Tt[e[t+9]]+"-"+Tt[e[t+10]]+Tt[e[t+11]]+Tt[e[t+12]]+Tt[e[t+13]]+Tt[e[t+14]]+Tt[e[t+15]]}const zO=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),$1={randomUUID:zO};function s0(e,t,n){if($1.randomUUID&&!e)return $1.randomUUID();e=e||{};const r=e.random||(e.rng||jO)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,MO(r)}var Ae=function(e){return e.UNKNOWN="UNKNOWN",e.SCRIPT="SCRIPT",e.TRANSACTION="TRANSACTION",e.GET_TRANSACTION_STATUS="GET_TRANSACTION_STATUS",e.GET_ACCOUNT="GET_ACCOUNT",e.GET_EVENTS="GET_EVENTS",e.PING="PING",e.GET_TRANSACTION="GET_TRANSACTION",e.GET_BLOCK="GET_BLOCK",e.GET_BLOCK_HEADER="GET_BLOCK_HEADER",e.GET_COLLECTION="GET_COLLECTION",e.GET_NETWORK_PARAMETERS="GET_NETWORK_PARAMETERS",e.SUBSCRIBE_EVENTS="SUBSCRIBE_EVENTS",e.GET_NODE_VERSION_INFO="GET_NODE_VERSION_INFO",e}({}),Vl=function(e){return e.BAD="BAD",e.OK="OK",e}({}),bl=function(e){return e.AUTHORIZER="authorizer",e.PAYER="payer",e.PROPOSER="proposer",e}({}),Hf=function(e){return e.ARGUMENT="ARGUMENT",e.ACCOUNT="ACCOUNT",e}({}),O1=function(e){return e[e.UNKNOWN_ERROR=-1]="UNKNOWN_ERROR",e[e.TX_VALIDATION_ERROR=1e3]="TX_VALIDATION_ERROR",e[e.INVALID_TX_BYTE_SIZE_ERROR=1001]="INVALID_TX_BYTE_SIZE_ERROR",e[e.INVALID_REFERENCE_BLOCK_ERROR=1002]="INVALID_REFERENCE_BLOCK_ERROR",e[e.EXPIRED_TRANSACTION_ERROR=1003]="EXPIRED_TRANSACTION_ERROR",e[e.INVALID_SCRIPT_ERROR=1004]="INVALID_SCRIPT_ERROR",e[e.INVALID_GAS_LIMIT_ERROR=1005]="INVALID_GAS_LIMIT_ERROR",e[e.INVALID_PROPOSAL_SIGNATURE_ERROR=1006]="INVALID_PROPOSAL_SIGNATURE_ERROR",e[e.INVALID_PROPOSAL_SEQ_NUMBER_ERROR=1007]="INVALID_PROPOSAL_SEQ_NUMBER_ERROR",e[e.INVALID_PAYLOAD_SIGNATURE_ERROR=1008]="INVALID_PAYLOAD_SIGNATURE_ERROR",e[e.INVALID_ENVELOPE_SIGNATURE_ERROR=1009]="INVALID_ENVELOPE_SIGNATURE_ERROR",e[e.FVM_INTERNAL_ERROR=1050]="FVM_INTERNAL_ERROR",e[e.VALUE_ERROR=1051]="VALUE_ERROR",e[e.INVALID_ARGUMENT_ERROR=1052]="INVALID_ARGUMENT_ERROR",e[e.INVALID_ADDRESS_ERROR=1053]="INVALID_ADDRESS_ERROR",e[e.INVALID_LOCATION_ERROR=1054]="INVALID_LOCATION_ERROR",e[e.ACCOUNT_AUTHORIZATION_ERROR=1055]="ACCOUNT_AUTHORIZATION_ERROR",e[e.OPERATION_AUTHORIZATION_ERROR=1056]="OPERATION_AUTHORIZATION_ERROR",e[e.OPERATION_NOT_SUPPORTED_ERROR=1057]="OPERATION_NOT_SUPPORTED_ERROR",e[e.BLOCK_HEIGHT_OUT_OF_RANGE_ERROR=1058]="BLOCK_HEIGHT_OUT_OF_RANGE_ERROR",e[e.EXECUTION_ERROR=1100]="EXECUTION_ERROR",e[e.CADENCE_RUNTIME_ERROR=1101]="CADENCE_RUNTIME_ERROR",e[e.ENCODING_UNSUPPORTED_VALUE=1102]="ENCODING_UNSUPPORTED_VALUE",e[e.STORAGE_CAPACITY_EXCEEDED=1103]="STORAGE_CAPACITY_EXCEEDED",e[e.GAS_LIMIT_EXCEEDED_ERROR=1104]="GAS_LIMIT_EXCEEDED_ERROR",e[e.EVENT_LIMIT_EXCEEDED_ERROR=1105]="EVENT_LIMIT_EXCEEDED_ERROR",e[e.LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR=1106]="LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR",e[e.STATE_KEY_SIZE_LIMIT_ERROR=1107]="STATE_KEY_SIZE_LIMIT_ERROR",e[e.STATE_VALUE_SIZE_LIMIT_ERROR=1108]="STATE_VALUE_SIZE_LIMIT_ERROR",e[e.TRANSACTION_FEE_DEDUCTION_FAILED_ERROR=1109]="TRANSACTION_FEE_DEDUCTION_FAILED_ERROR",e[e.COMPUTATION_LIMIT_EXCEEDED_ERROR=1110]="COMPUTATION_LIMIT_EXCEEDED_ERROR",e[e.MEMORY_LIMIT_EXCEEDED_ERROR=1111]="MEMORY_LIMIT_EXCEEDED_ERROR",e[e.COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE=1112]="COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE",e[e.SCRIPT_EXECUTION_TIMED_OUT_ERROR=1113]="SCRIPT_EXECUTION_TIMED_OUT_ERROR",e[e.SCRIPT_EXECUTION_CANCELLED_ERROR=1114]="SCRIPT_EXECUTION_CANCELLED_ERROR",e[e.EVENT_ENCODING_ERROR=1115]="EVENT_ENCODING_ERROR",e[e.INVALID_INTERNAL_STATE_ACCESS_ERROR=1116]="INVALID_INTERNAL_STATE_ACCESS_ERROR",e[e.INSUFFICIENT_PAYER_BALANCE=1118]="INSUFFICIENT_PAYER_BALANCE",e[e.ACCOUNT_ERROR=1200]="ACCOUNT_ERROR",e[e.ACCOUNT_NOT_FOUND_ERROR=1201]="ACCOUNT_NOT_FOUND_ERROR",e[e.ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR=1202]="ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR",e[e.ACCOUNT_ALREADY_EXISTS_ERROR=1203]="ACCOUNT_ALREADY_EXISTS_ERROR",e[e.FROZEN_ACCOUNT_ERROR=1204]="FROZEN_ACCOUNT_ERROR",e[e.ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR=1205]="ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR",e[e.ACCOUNT_PUBLIC_KEY_LIMIT_ERROR=1206]="ACCOUNT_PUBLIC_KEY_LIMIT_ERROR",e[e.CONTRACT_ERROR=1250]="CONTRACT_ERROR",e[e.CONTRACT_NOT_FOUND_ERROR=1251]="CONTRACT_NOT_FOUND_ERROR",e[e.CONTRACT_NAMES_NOT_FOUND_ERROR=1252]="CONTRACT_NAMES_NOT_FOUND_ERROR",e[e.EVM_EXECUTION_ERROR=1300]="EVM_EXECUTION_ERROR",e}({}),lo=function(e){return e.BLOCKS="blocks",e.BLOCK_HEADERS="block_headers",e.BLOCK_DIGESTS="block_digests",e.ACCOUNT_STATUSES="account_statuses",e.TRANSACTION_STATUSES="transaction_statuses",e.EVENTS="events",e}({}),HO=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.PENDING=1]="PENDING",e[e.FINALIZED=2]="FINALIZED",e[e.EXECUTED=3]="EXECUTED",e[e.SEALED=4]="SEALED",e[e.EXPIRED=5]="EXPIRED",e}({});const qO=()=>{const e=[];let t;return{async deliver(n){e.push(n),t&&(t(e.shift()),t=void 0)},receive(){return new Promise(function(r){const i=e.shift();if(i)return r(i);t=r})}}};let P1;const VO=e=>(P1||(P1=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0)),El="INIT",La="SUBSCRIBE",Xs="UNSUBSCRIBE",Kg="UPDATED",ix="SNAPSHOT",Qg="EXIT",N1="TERMINATE",wd=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||typeof window=="object"&&window.window===window&&window||{FCL_REGISTRY:null};wd.FCL_REGISTRY=wd.FCL_REGISTRY==null?{}:wd.FCL_REGISTRY;const Re=wd.FCL_REGISTRY;let rp=0;const GO=5e3;function mt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{expectReply:!1};return new Promise((i,s)=>{const o=r.expectReply||!1,a=r.timeout!=null?r.timeout:GO;o&&a&&setTimeout(()=>s(new Error(`Timeout: ${a}ms passed without a response.`)),a);const c={to:e,from:r.from,tag:t,data:n,timeout:a,reply:i,reject:s};try{Re[e]&&Re[e].mailbox.deliver(c),o||i(!0)}catch(l){console.error("FCL.Actor -- Could Not Deliver Message",c,Re[e],l),s(l)}})}const WO=e=>{delete Re[e]},KO=e=>async t=>{var n;typeof e[El]=="function"&&await e[El](t);e:for(;;){const r=await t.receive();try{if(r.tag===Qg){typeof e[N1]=="function"&&await e[N1](t,r,r.data||{});break e}await((n=e[r.tag])==null?void 0:n.call(e,t,r,r.data||{}))}catch(i){console.error(`${t.self()} Error`,r,i)}finally{continue e}}},QO=e=>{if(e==null){for(;Re[String(rp)];)rp++;return String(rp)}return String(e)},uo=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const n=QO(t);if(Re[n]!=null)return n;Re[n]={addr:n,mailbox:qO(),subs:new Set,kvs:{},error:null};const r=YO(n);let i;return typeof e=="object"?i=KO(e):i=e,VO(async()=>{await i(r),WO(n)}),n},YO=e=>({self:()=>e,receive:()=>Re[e].mailbox.receive(),send:function(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(t!=null)return i.from=e,mt(t,n,r,i)},sendSelf:function(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Re[e]&&mt(e,t,n,r)},broadcast:function(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r.from=e;for(const i of Re[e].subs)mt(i,t,n,r)},subscribe:t=>t!=null&&Re[e].subs.add(t),unsubscribe:t=>t!=null&&Re[e].subs.delete(t),subscriberCount:()=>Re[e].subs.size,hasSubs:()=>!!Re[e].subs.size,put:(t,n)=>{t!=null&&(Re[e].kvs[t]=n)},get:function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const r=Re[e].kvs[t];return r??n},delete:t=>{delete Re[e].kvs[t]},update:(t,n)=>{t!=null&&(Re[e].kvs[t]=n(Re[e].kvs[t]))},keys:()=>Object.keys(Re[e].kvs),all:()=>Re[e].kvs,where:t=>Object.keys(Re[e].kvs).reduce((n,r)=>t.test(r)?{...n,[r]:Re[e].kvs[r]}:n,{}),merge:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(t).forEach(n=>Re[e].kvs[n]=t[n])},fatalError:t=>{Re[e].error=t;for(const n of Re[e].subs)mt(n,Kg)}});function o0(e,t,n){t(e);const r=uo(async i=>{for(i.send(e,La);;){const s=await i.receive(),o=Re[e].error;if(s.tag===Qg){i.send(e,Xs);return}if(o){n(null,o),i.send(e,Xs);return}n(s.data,null)}});return()=>mt(r,Qg)}function sx(e,t){return t(e),mt(e,ix,null,{expectReply:!0,timeout:0})}const ip=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((i,s)=>s(i),r)},XO=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>t.reduce((i,s)=>({...i,...s(r)}),{})},sp=e=>e&&typeof e=="object"&&!Array.isArray(e),Yg=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const i=n.shift();if(sp(e)&&sp(i))for(const s in i)sp(i[s])?(e[s]||Object.assign(e,{[s]:{}}),Yg(e[s],i[s])):Object.assign(e,{[s]:i[s]});return Yg(e,...n)},JO=e=>Array.isArray(e)?Yg({},...e):e,ZO=e=>e.contracts?e.contracts:{},eP=e=>e.dependencies?e.dependencies:{},tP=e=>t=>Object.entries(t).reduce((n,r)=>{var a;let[i,s]=r;const o=(a=s==null?void 0:s.aliases)==null?void 0:a[e];return o&&(n[i]=o),n},{}),nP=e=>t=>Object.entries(t).reduce((n,r)=>{var a;let[i,s]=r;const o=(a=s==null?void 0:s.aliases)==null?void 0:a[e];return o&&(n[i]=o),n},{}),rP=e=>t=>{let{deployments:n={},accounts:r={}}=t;const i=n==null?void 0:n[e];return i?Object.entries(i).reduce((s,o)=>{var u;let[a,c]=o;const l=(u=r[a])==null?void 0:u.address;return l?c.reduce((d,f)=>({...d,[f]:l}),{}):s},{}):{}},iP=(e,t)=>ip(JO,XO(rP(t),ip(ZO,tP(t)),ip(eP,nP(t))))(e),sP=e=>typeof e!="string"?!1:/^[0-9A-Fa-f]+$/.test(e),D1=e=>Object.entries((e==null?void 0:e.accounts)??[]).reduce((t,n)=>{let[,r]=n;return t?!0:r&&Object.prototype.hasOwnProperty.call(r,"key")&&sP(r==null?void 0:r.key)},!1),oP=e=>Array.isArray(e)?e.some(D1):D1(e),aP=e=>{const t=(e==null?void 0:e.toLowerCase())==="local"?"emulator":e==null?void 0:e.toLowerCase();if(t==="emulator"||t==="testnet"||t==="mainnet"||t==="previewnet")return t;throw new Error(`Invalid network "${e}". Must be one of "emulator", "local", "testnet", or "mainnet"`)};BO(ie);const Wr="config",ox="PUT_CONFIG",ax="GET_CONFIG",cx="GET_ALL_CONFIG",lx="UPDATE_CONFIG",ux="DELETE_CONFIG",dx="CLEAR_CONFIG",fx="WHERE_CONFIG",ac="CONFIG/UPDATED",hx=e=>e,px={[ox]:(e,t,n)=>{let{key:r,value:i}=n;if(r==null)throw new Error("Missing 'key' for config/put.");e.put(r,i),e.broadcast(ac,{...e.all()})},[ax]:(e,t,n)=>{let{key:r,fallback:i}=n;if(r==null)throw new Error("Missing 'key' for config/get");t.reply(e.get(r,i))},[cx]:(e,t)=>{t.reply({...e.all()})},[lx]:(e,t,n)=>{let{key:r,fn:i}=n;if(r==null)throw new Error("Missing 'key' for config/update");e.update(r,i||hx),e.broadcast(ac,{...e.all()})},[ux]:(e,t,n)=>{let{key:r}=n;if(r==null)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(ac,{...e.all()})},[dx]:e=>{const t=Object.keys(e.all());for(const n of t)e.delete(n);e.broadcast(ac,{...e.all()})},[fx]:(e,t,n)=>{let{pattern:r}=n;if(r==null)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(r))},[La]:(e,t)=>{e.subscribe(t.from),e.send(t.from,ac,{...e.all()})},[Xs]:(e,t)=>{e.unsubscribe(t.from)}};uo(px,Wr);function _l(e,t){return mt(Wr,ox,{key:e,value:t}),ie()}function ma(e,t){return mt(Wr,ax,{key:e,fallback:t},{expectReply:!0,timeout:10})}async function a0(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return t;const[n,...r]=e,i=await ma(n);return i??a0(r,t)}function sf(){return mt(Wr,cx,null,{expectReply:!0,timeout:10})}function gx(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hx;return mt(Wr,lx,{key:e,fn:t}),ie()}function mx(e){return mt(Wr,ux,{key:e}),ie()}function yx(e){return mt(Wr,fx,{pattern:e},{expectReply:!0,timeout:10})}function wx(e){return o0(Wr,()=>uo(px,Wr),e)}async function cP(){await mt(Wr,dx)}async function lP(e){return cP().then(()=>ie(e))}async function vx(e){let{ignoreConflicts:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await ma("flow.network"),r=aP(n),{flowJSON:i}=e;if(V(!!i,"config.load -- 'flowJSON' must be defined"),V(!!r,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),oP(i)){const s=r==="emulator";we({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:s?$e.warn:$e.error}),V(s,"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security")}for(const[s,o]of Object.entries(iP(i,r))){const a=`0x${s}`,c=await ma(a);c&&c!==o&&!t?we({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:$e.warn}):_l(a,o);const l=`system.contracts.${s}`,u=await ma(l);u&&u!==o&&!t?we({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:$e.warn}):_l(l,o)}}function ie(e){return e!=null&&typeof e=="object"&&Object.keys(e).map(t=>_l(t,e[t])),{put:_l,get:ma,all:sf,first:a0,update:gx,delete:mx,where:yx,subscribe:wx,overload:bx,load:vx}}ie.put=_l;ie.get=ma;ie.all=sf;ie.first=a0;ie.update=gx;ie.delete=mx;ie.where=yx;ie.subscribe=wx;ie.overload=bx;ie.load=vx;async function bx(e,t){const n=await sf();try{return ie(e),await t(await sf())}finally{await lP(n)}}var je={},qf={};qf.byteLength=fP;qf.toByteArray=pP;qf.fromByteArray=yP;var Lr=[],Vn=[],uP=typeof Uint8Array<"u"?Uint8Array:Array,op="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var _o=0,dP=op.length;_o<dP;++_o)Lr[_o]=op[_o],Vn[op.charCodeAt(_o)]=_o;Vn[45]=62;Vn[95]=63;function Ex(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function fP(e){var t=Ex(e),n=t[0],r=t[1];return(n+r)*3/4-r}function hP(e,t,n){return(t+n)*3/4-n}function pP(e){var t,n=Ex(e),r=n[0],i=n[1],s=new uP(hP(e,r,i)),o=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)t=Vn[e.charCodeAt(c)]<<18|Vn[e.charCodeAt(c+1)]<<12|Vn[e.charCodeAt(c+2)]<<6|Vn[e.charCodeAt(c+3)],s[o++]=t>>16&255,s[o++]=t>>8&255,s[o++]=t&255;return i===2&&(t=Vn[e.charCodeAt(c)]<<2|Vn[e.charCodeAt(c+1)]>>4,s[o++]=t&255),i===1&&(t=Vn[e.charCodeAt(c)]<<10|Vn[e.charCodeAt(c+1)]<<4|Vn[e.charCodeAt(c+2)]>>2,s[o++]=t>>8&255,s[o++]=t&255),s}function gP(e){return Lr[e>>18&63]+Lr[e>>12&63]+Lr[e>>6&63]+Lr[e&63]}function mP(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),i.push(gP(r));return i.join("")}function yP(e){for(var t,n=e.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(mP(e,o,o+s>a?a:o+s));return r===1?(t=e[n-1],i.push(Lr[t>>2]+Lr[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(Lr[t>>10]+Lr[t>>4&63]+Lr[t<<2&63]+"=")),i.join("")}var c0={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c0.read=function(e,t,n,r,i){var s,o,a=i*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=s*256+e[t+d],d+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+e[t+d],d+=f,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-l}return(h?-1:1)*o*Math.pow(2,s-r)};c0.write=function(e,t,n,r,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,d=u>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,p=r?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?t+=f/c:t+=f*Math.pow(2,1-d),t*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(t*c-1)*Math.pow(2,i),o=o+d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=a&255,h+=p,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;e[n+h]=o&255,h+=p,o/=256,l-=8);e[n+h-p]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=qf,n=c0,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=w,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const I=new Uint8Array(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,Uint8Array.prototype),Object.setPrototypeOf(I,y),I.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(I){if(I>i)throw new RangeError('The value "'+I+'" is invalid for option "size"');const y=new Uint8Array(I);return Object.setPrototypeOf(y,a.prototype),y}function a(I,y,b){if(typeof I=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(I)}return c(I,y,b)}a.poolSize=8192;function c(I,y,b){if(typeof I=="string")return f(I,y);if(ArrayBuffer.isView(I))return p(I);if(I==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I);if(In(I,ArrayBuffer)||I&&In(I.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(In(I,SharedArrayBuffer)||I&&In(I.buffer,SharedArrayBuffer)))return g(I,y,b);if(typeof I=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=I.valueOf&&I.valueOf();if(k!=null&&k!==I)return a.from(k,y,b);const N=v(I);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof I[Symbol.toPrimitive]=="function")return a.from(I[Symbol.toPrimitive]("string"),y,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I)}a.from=function(I,y,b){return c(I,y,b)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(I){if(typeof I!="number")throw new TypeError('"size" argument must be of type number');if(I<0)throw new RangeError('The value "'+I+'" is invalid for option "size"')}function u(I,y,b){return l(I),I<=0?o(I):y!==void 0?typeof b=="string"?o(I).fill(y,b):o(I).fill(y):o(I)}a.alloc=function(I,y,b){return u(I,y,b)};function d(I){return l(I),o(I<0?0:m(I)|0)}a.allocUnsafe=function(I){return d(I)},a.allocUnsafeSlow=function(I){return d(I)};function f(I,y){if((typeof y!="string"||y==="")&&(y="utf8"),!a.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const b=E(I,y)|0;let k=o(b);const N=k.write(I,y);return N!==b&&(k=k.slice(0,N)),k}function h(I){const y=I.length<0?0:m(I.length)|0,b=o(y);for(let k=0;k<y;k+=1)b[k]=I[k]&255;return b}function p(I){if(In(I,Uint8Array)){const y=new Uint8Array(I);return g(y.buffer,y.byteOffset,y.byteLength)}return h(I)}function g(I,y,b){if(y<0||I.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(I.byteLength<y+(b||0))throw new RangeError('"length" is outside of buffer bounds');let k;return y===void 0&&b===void 0?k=new Uint8Array(I):b===void 0?k=new Uint8Array(I,y):k=new Uint8Array(I,y,b),Object.setPrototypeOf(k,a.prototype),k}function v(I){if(a.isBuffer(I)){const y=m(I.length)|0,b=o(y);return b.length===0||I.copy(b,0,0,y),b}if(I.length!==void 0)return typeof I.length!="number"||bo(I.length)?o(0):h(I);if(I.type==="Buffer"&&Array.isArray(I.data))return h(I.data)}function m(I){if(I>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return I|0}function w(I){return+I!=I&&(I=0),a.alloc(+I)}a.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==a.prototype},a.compare=function(y,b){if(In(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),In(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),!a.isBuffer(y)||!a.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===b)return 0;let k=y.length,N=b.length;for(let z=0,K=Math.min(k,N);z<K;++z)if(y[z]!==b[z]){k=y[z],N=b[z];break}return k<N?-1:N<k?1:0},a.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(y,b){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return a.alloc(0);let k;if(b===void 0)for(b=0,k=0;k<y.length;++k)b+=y[k].length;const N=a.allocUnsafe(b);let z=0;for(k=0;k<y.length;++k){let K=y[k];if(In(K,Uint8Array))z+K.length>N.length?(a.isBuffer(K)||(K=a.from(K)),K.copy(N,z)):Uint8Array.prototype.set.call(N,K,z);else if(a.isBuffer(K))K.copy(N,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=K.length}return N};function E(I,y){if(a.isBuffer(I))return I.length;if(ArrayBuffer.isView(I)||In(I,ArrayBuffer))return I.byteLength;if(typeof I!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof I);const b=I.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&b===0)return 0;let N=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return Ya(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return Xa(I).length;default:if(N)return k?-1:Ya(I).length;y=(""+y).toLowerCase(),N=!0}}a.byteLength=E;function A(I,y,b){let k=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,y>>>=0,b<=y))return"";for(I||(I="utf8");;)switch(I){case"hex":return $(this,y,b);case"utf8":case"utf-8":return G(this,y,b);case"ascii":return O(this,y,b);case"latin1":case"binary":return R(this,y,b);case"base64":return q(this,y,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,y,b);default:if(k)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),k=!0}}a.prototype._isBuffer=!0;function T(I,y,b){const k=I[y];I[y]=I[b],I[b]=k}a.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<y;b+=2)T(this,b,b+1);return this},a.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<y;b+=4)T(this,b,b+3),T(this,b+1,b+2);return this},a.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<y;b+=8)T(this,b,b+7),T(this,b+1,b+6),T(this,b+2,b+5),T(this,b+3,b+4);return this},a.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?G(this,0,y):A.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(y){if(!a.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:a.compare(this,y)===0},a.prototype.inspect=function(){let y="";const b=e.INSPECT_MAX_BYTES;return y=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(y+=" ... "),"<Buffer "+y+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(y,b,k,N,z){if(In(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),!a.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(b===void 0&&(b=0),k===void 0&&(k=y?y.length:0),N===void 0&&(N=0),z===void 0&&(z=this.length),b<0||k>y.length||N<0||z>this.length)throw new RangeError("out of range index");if(N>=z&&b>=k)return 0;if(N>=z)return-1;if(b>=k)return 1;if(b>>>=0,k>>>=0,N>>>=0,z>>>=0,this===y)return 0;let K=z-N,fe=k-b;const Ye=Math.min(K,fe),He=this.slice(N,z),Xe=y.slice(b,k);for(let Te=0;Te<Ye;++Te)if(He[Te]!==Xe[Te]){K=He[Te],fe=Xe[Te];break}return K<fe?-1:fe<K?1:0};function D(I,y,b,k,N){if(I.length===0)return-1;if(typeof b=="string"?(k=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,bo(b)&&(b=N?0:I.length-1),b<0&&(b=I.length+b),b>=I.length){if(N)return-1;b=I.length-1}else if(b<0)if(N)b=0;else return-1;if(typeof y=="string"&&(y=a.from(y,k)),a.isBuffer(y))return y.length===0?-1:j(I,y,b,k,N);if(typeof y=="number")return y=y&255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(I,y,b):Uint8Array.prototype.lastIndexOf.call(I,y,b):j(I,[y],b,k,N);throw new TypeError("val must be string, number or Buffer")}function j(I,y,b,k,N){let z=1,K=I.length,fe=y.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(I.length<2||y.length<2)return-1;z=2,K/=2,fe/=2,b/=2}function Ye(Xe,Te){return z===1?Xe[Te]:Xe.readUInt16BE(Te*z)}let He;if(N){let Xe=-1;for(He=b;He<K;He++)if(Ye(I,He)===Ye(y,Xe===-1?0:He-Xe)){if(Xe===-1&&(Xe=He),He-Xe+1===fe)return Xe*z}else Xe!==-1&&(He-=He-Xe),Xe=-1}else for(b+fe>K&&(b=K-fe),He=b;He>=0;He--){let Xe=!0;for(let Te=0;Te<fe;Te++)if(Ye(I,He+Te)!==Ye(y,Te)){Xe=!1;break}if(Xe)return He}return-1}a.prototype.includes=function(y,b,k){return this.indexOf(y,b,k)!==-1},a.prototype.indexOf=function(y,b,k){return D(this,y,b,k,!0)},a.prototype.lastIndexOf=function(y,b,k){return D(this,y,b,k,!1)};function L(I,y,b,k){b=Number(b)||0;const N=I.length-b;k?(k=Number(k),k>N&&(k=N)):k=N;const z=y.length;k>z/2&&(k=z/2);let K;for(K=0;K<k;++K){const fe=parseInt(y.substr(K*2,2),16);if(bo(fe))return K;I[b+K]=fe}return K}function C(I,y,b,k){return Ai(Ya(y,I.length-b),I,b,k)}function U(I,y,b,k){return Ai(Th(y),I,b,k)}function B(I,y,b,k){return Ai(Xa(y),I,b,k)}function F(I,y,b,k){return Ai(au(y,I.length-b),I,b,k)}a.prototype.write=function(y,b,k,N){if(b===void 0)N="utf8",k=this.length,b=0;else if(k===void 0&&typeof b=="string")N=b,k=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite(k)?(k=k>>>0,N===void 0&&(N="utf8")):(N=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const z=this.length-b;if((k===void 0||k>z)&&(k=z),y.length>0&&(k<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");let K=!1;for(;;)switch(N){case"hex":return L(this,y,b,k);case"utf8":case"utf-8":return C(this,y,b,k);case"ascii":case"latin1":case"binary":return U(this,y,b,k);case"base64":return B(this,y,b,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,y,b,k);default:if(K)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),K=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function q(I,y,b){return y===0&&b===I.length?t.fromByteArray(I):t.fromByteArray(I.slice(y,b))}function G(I,y,b){b=Math.min(I.length,b);const k=[];let N=y;for(;N<b;){const z=I[N];let K=null,fe=z>239?4:z>223?3:z>191?2:1;if(N+fe<=b){let Ye,He,Xe,Te;switch(fe){case 1:z<128&&(K=z);break;case 2:Ye=I[N+1],(Ye&192)===128&&(Te=(z&31)<<6|Ye&63,Te>127&&(K=Te));break;case 3:Ye=I[N+1],He=I[N+2],(Ye&192)===128&&(He&192)===128&&(Te=(z&15)<<12|(Ye&63)<<6|He&63,Te>2047&&(Te<55296||Te>57343)&&(K=Te));break;case 4:Ye=I[N+1],He=I[N+2],Xe=I[N+3],(Ye&192)===128&&(He&192)===128&&(Xe&192)===128&&(Te=(z&15)<<18|(Ye&63)<<12|(He&63)<<6|Xe&63,Te>65535&&Te<1114112&&(K=Te))}}K===null?(K=65533,fe=1):K>65535&&(K-=65536,k.push(K>>>10&1023|55296),K=56320|K&1023),k.push(K),N+=fe}return x(k)}const S=4096;function x(I){const y=I.length;if(y<=S)return String.fromCharCode.apply(String,I);let b="",k=0;for(;k<y;)b+=String.fromCharCode.apply(String,I.slice(k,k+=S));return b}function O(I,y,b){let k="";b=Math.min(I.length,b);for(let N=y;N<b;++N)k+=String.fromCharCode(I[N]&127);return k}function R(I,y,b){let k="";b=Math.min(I.length,b);for(let N=y;N<b;++N)k+=String.fromCharCode(I[N]);return k}function $(I,y,b){const k=I.length;(!y||y<0)&&(y=0),(!b||b<0||b>k)&&(b=k);let N="";for(let z=y;z<b;++z)N+=cu[I[z]];return N}function P(I,y,b){const k=I.slice(y,b);let N="";for(let z=0;z<k.length-1;z+=2)N+=String.fromCharCode(k[z]+k[z+1]*256);return N}a.prototype.slice=function(y,b){const k=this.length;y=~~y,b=b===void 0?k:~~b,y<0?(y+=k,y<0&&(y=0)):y>k&&(y=k),b<0?(b+=k,b<0&&(b=0)):b>k&&(b=k),b<y&&(b=y);const N=this.subarray(y,b);return Object.setPrototypeOf(N,a.prototype),N};function M(I,y,b){if(I%1!==0||I<0)throw new RangeError("offset is not uint");if(I+y>b)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(y,b,k){y=y>>>0,b=b>>>0,k||M(y,b,this.length);let N=this[y],z=1,K=0;for(;++K<b&&(z*=256);)N+=this[y+K]*z;return N},a.prototype.readUintBE=a.prototype.readUIntBE=function(y,b,k){y=y>>>0,b=b>>>0,k||M(y,b,this.length);let N=this[y+--b],z=1;for(;b>0&&(z*=256);)N+=this[y+--b]*z;return N},a.prototype.readUint8=a.prototype.readUInt8=function(y,b){return y=y>>>0,b||M(y,1,this.length),this[y]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(y,b){return y=y>>>0,b||M(y,2,this.length),this[y]|this[y+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(y,b){return y=y>>>0,b||M(y,2,this.length),this[y]<<8|this[y+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(y,b){return y=y>>>0,b||M(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(y,b){return y=y>>>0,b||M(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},a.prototype.readBigUInt64LE=or(function(y){y=y>>>0,sr(y,"offset");const b=this[y],k=this[y+7];(b===void 0||k===void 0)&&Mn(y,this.length-8);const N=b+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,z=this[++y]+this[++y]*2**8+this[++y]*2**16+k*2**24;return BigInt(N)+(BigInt(z)<<BigInt(32))}),a.prototype.readBigUInt64BE=or(function(y){y=y>>>0,sr(y,"offset");const b=this[y],k=this[y+7];(b===void 0||k===void 0)&&Mn(y,this.length-8);const N=b*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],z=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+k;return(BigInt(N)<<BigInt(32))+BigInt(z)}),a.prototype.readIntLE=function(y,b,k){y=y>>>0,b=b>>>0,k||M(y,b,this.length);let N=this[y],z=1,K=0;for(;++K<b&&(z*=256);)N+=this[y+K]*z;return z*=128,N>=z&&(N-=Math.pow(2,8*b)),N},a.prototype.readIntBE=function(y,b,k){y=y>>>0,b=b>>>0,k||M(y,b,this.length);let N=b,z=1,K=this[y+--N];for(;N>0&&(z*=256);)K+=this[y+--N]*z;return z*=128,K>=z&&(K-=Math.pow(2,8*b)),K},a.prototype.readInt8=function(y,b){return y=y>>>0,b||M(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},a.prototype.readInt16LE=function(y,b){y=y>>>0,b||M(y,2,this.length);const k=this[y]|this[y+1]<<8;return k&32768?k|4294901760:k},a.prototype.readInt16BE=function(y,b){y=y>>>0,b||M(y,2,this.length);const k=this[y+1]|this[y]<<8;return k&32768?k|4294901760:k},a.prototype.readInt32LE=function(y,b){return y=y>>>0,b||M(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},a.prototype.readInt32BE=function(y,b){return y=y>>>0,b||M(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},a.prototype.readBigInt64LE=or(function(y){y=y>>>0,sr(y,"offset");const b=this[y],k=this[y+7];(b===void 0||k===void 0)&&Mn(y,this.length-8);const N=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(k<<24);return(BigInt(N)<<BigInt(32))+BigInt(b+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),a.prototype.readBigInt64BE=or(function(y){y=y>>>0,sr(y,"offset");const b=this[y],k=this[y+7];(b===void 0||k===void 0)&&Mn(y,this.length-8);const N=(b<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(N)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+k)}),a.prototype.readFloatLE=function(y,b){return y=y>>>0,b||M(y,4,this.length),n.read(this,y,!0,23,4)},a.prototype.readFloatBE=function(y,b){return y=y>>>0,b||M(y,4,this.length),n.read(this,y,!1,23,4)},a.prototype.readDoubleLE=function(y,b){return y=y>>>0,b||M(y,8,this.length),n.read(this,y,!0,52,8)},a.prototype.readDoubleBE=function(y,b){return y=y>>>0,b||M(y,8,this.length),n.read(this,y,!1,52,8)};function W(I,y,b,k,N,z){if(!a.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>N||y<z)throw new RangeError('"value" argument is out of bounds');if(b+k>I.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(y,b,k,N){if(y=+y,b=b>>>0,k=k>>>0,!N){const fe=Math.pow(2,8*k)-1;W(this,y,b,k,fe,0)}let z=1,K=0;for(this[b]=y&255;++K<k&&(z*=256);)this[b+K]=y/z&255;return b+k},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(y,b,k,N){if(y=+y,b=b>>>0,k=k>>>0,!N){const fe=Math.pow(2,8*k)-1;W(this,y,b,k,fe,0)}let z=k-1,K=1;for(this[b+z]=y&255;--z>=0&&(K*=256);)this[b+z]=y/K&255;return b+k},a.prototype.writeUint8=a.prototype.writeUInt8=function(y,b,k){return y=+y,b=b>>>0,k||W(this,y,b,1,255,0),this[b]=y&255,b+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(y,b,k){return y=+y,b=b>>>0,k||W(this,y,b,2,65535,0),this[b]=y&255,this[b+1]=y>>>8,b+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(y,b,k){return y=+y,b=b>>>0,k||W(this,y,b,2,65535,0),this[b]=y>>>8,this[b+1]=y&255,b+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(y,b,k){return y=+y,b=b>>>0,k||W(this,y,b,4,4294967295,0),this[b+3]=y>>>24,this[b+2]=y>>>16,this[b+1]=y>>>8,this[b]=y&255,b+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(y,b,k){return y=+y,b=b>>>0,k||W(this,y,b,4,4294967295,0),this[b]=y>>>24,this[b+1]=y>>>16,this[b+2]=y>>>8,this[b+3]=y&255,b+4};function ee(I,y,b,k,N){xr(y,k,N,I,b,7);let z=Number(y&BigInt(4294967295));I[b++]=z,z=z>>8,I[b++]=z,z=z>>8,I[b++]=z,z=z>>8,I[b++]=z;let K=Number(y>>BigInt(32)&BigInt(4294967295));return I[b++]=K,K=K>>8,I[b++]=K,K=K>>8,I[b++]=K,K=K>>8,I[b++]=K,b}function Q(I,y,b,k,N){xr(y,k,N,I,b,7);let z=Number(y&BigInt(4294967295));I[b+7]=z,z=z>>8,I[b+6]=z,z=z>>8,I[b+5]=z,z=z>>8,I[b+4]=z;let K=Number(y>>BigInt(32)&BigInt(4294967295));return I[b+3]=K,K=K>>8,I[b+2]=K,K=K>>8,I[b+1]=K,K=K>>8,I[b]=K,b+8}a.prototype.writeBigUInt64LE=or(function(y,b=0){return ee(this,y,b,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=or(function(y,b=0){return Q(this,y,b,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(y,b,k,N){if(y=+y,b=b>>>0,!N){const Ye=Math.pow(2,8*k-1);W(this,y,b,k,Ye-1,-Ye)}let z=0,K=1,fe=0;for(this[b]=y&255;++z<k&&(K*=256);)y<0&&fe===0&&this[b+z-1]!==0&&(fe=1),this[b+z]=(y/K>>0)-fe&255;return b+k},a.prototype.writeIntBE=function(y,b,k,N){if(y=+y,b=b>>>0,!N){const Ye=Math.pow(2,8*k-1);W(this,y,b,k,Ye-1,-Ye)}let z=k-1,K=1,fe=0;for(this[b+z]=y&255;--z>=0&&(K*=256);)y<0&&fe===0&&this[b+z+1]!==0&&(fe=1),this[b+z]=(y/K>>0)-fe&255;return b+k},a.prototype.writeInt8=function(y,b,k){return y=+y,b=b>>>0,k||W(this,y,b,1,127,-128),y<0&&(y=255+y+1),this[b]=y&255,b+1},a.prototype.writeInt16LE=function(y,b,k){return y=+y,b=b>>>0,k||W(this,y,b,2,32767,-32768),this[b]=y&255,this[b+1]=y>>>8,b+2},a.prototype.writeInt16BE=function(y,b,k){return y=+y,b=b>>>0,k||W(this,y,b,2,32767,-32768),this[b]=y>>>8,this[b+1]=y&255,b+2},a.prototype.writeInt32LE=function(y,b,k){return y=+y,b=b>>>0,k||W(this,y,b,4,2147483647,-2147483648),this[b]=y&255,this[b+1]=y>>>8,this[b+2]=y>>>16,this[b+3]=y>>>24,b+4},a.prototype.writeInt32BE=function(y,b,k){return y=+y,b=b>>>0,k||W(this,y,b,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[b]=y>>>24,this[b+1]=y>>>16,this[b+2]=y>>>8,this[b+3]=y&255,b+4},a.prototype.writeBigInt64LE=or(function(y,b=0){return ee(this,y,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=or(function(y,b=0){return Q(this,y,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function te(I,y,b,k,N,z){if(b+k>I.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function se(I,y,b,k,N){return y=+y,b=b>>>0,N||te(I,y,b,4),n.write(I,y,b,k,23,4),b+4}a.prototype.writeFloatLE=function(y,b,k){return se(this,y,b,!0,k)},a.prototype.writeFloatBE=function(y,b,k){return se(this,y,b,!1,k)};function ue(I,y,b,k,N){return y=+y,b=b>>>0,N||te(I,y,b,8),n.write(I,y,b,k,52,8),b+8}a.prototype.writeDoubleLE=function(y,b,k){return ue(this,y,b,!0,k)},a.prototype.writeDoubleBE=function(y,b,k){return ue(this,y,b,!1,k)},a.prototype.copy=function(y,b,k,N){if(!a.isBuffer(y))throw new TypeError("argument should be a Buffer");if(k||(k=0),!N&&N!==0&&(N=this.length),b>=y.length&&(b=y.length),b||(b=0),N>0&&N<k&&(N=k),N===k||y.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),y.length-b<N-k&&(N=y.length-b+k);const z=N-k;return this===y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,k,N):Uint8Array.prototype.set.call(y,this.subarray(k,N),b),z},a.prototype.fill=function(y,b,k,N){if(typeof y=="string"){if(typeof b=="string"?(N=b,b=0,k=this.length):typeof k=="string"&&(N=k,k=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!a.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(y.length===1){const K=y.charCodeAt(0);(N==="utf8"&&K<128||N==="latin1")&&(y=K)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(b<0||this.length<b||this.length<k)throw new RangeError("Out of range index");if(k<=b)return this;b=b>>>0,k=k===void 0?this.length:k>>>0,y||(y=0);let z;if(typeof y=="number")for(z=b;z<k;++z)this[z]=y;else{const K=a.isBuffer(y)?y:a.from(y,N),fe=K.length;if(fe===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(z=0;z<k-b;++z)this[z+b]=K[z%fe]}return this};const de={};function ce(I,y,b){de[I]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${I}]`,this.stack,delete this.name}get code(){return I}set code(N){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:N,writable:!0})}toString(){return`${this.name} [${I}]: ${this.message}`}}}ce("ERR_BUFFER_OUT_OF_BOUNDS",function(I){return I?`${I} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ce("ERR_INVALID_ARG_TYPE",function(I,y){return`The "${I}" argument must be of type number. Received type ${typeof y}`},TypeError),ce("ERR_OUT_OF_RANGE",function(I,y,b){let k=`The value of "${I}" is out of range.`,N=b;return Number.isInteger(b)&&Math.abs(b)>2**32?N=ze(String(b)):typeof b=="bigint"&&(N=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(N=ze(N)),N+="n"),k+=` It must be ${y}. Received ${N}`,k},RangeError);function ze(I){let y="",b=I.length;const k=I[0]==="-"?1:0;for(;b>=k+4;b-=3)y=`_${I.slice(b-3,b)}${y}`;return`${I.slice(0,b)}${y}`}function ut(I,y,b){sr(y,"offset"),(I[y]===void 0||I[y+b]===void 0)&&Mn(y,I.length-(b+1))}function xr(I,y,b,k,N,z){if(I>b||I<y){const K=typeof y=="bigint"?"n":"";let fe;throw y===0||y===BigInt(0)?fe=`>= 0${K} and < 2${K} ** ${(z+1)*8}${K}`:fe=`>= -(2${K} ** ${(z+1)*8-1}${K}) and < 2 ** ${(z+1)*8-1}${K}`,new de.ERR_OUT_OF_RANGE("value",fe,I)}ut(k,N,z)}function sr(I,y){if(typeof I!="number")throw new de.ERR_INVALID_ARG_TYPE(y,"number",I)}function Mn(I,y,b){throw Math.floor(I)!==I?(sr(I,b),new de.ERR_OUT_OF_RANGE("offset","an integer",I)):y<0?new de.ERR_BUFFER_OUT_OF_BOUNDS:new de.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${y}`,I)}const Qa=/[^+/0-9A-Za-z-_]/g;function Ch(I){if(I=I.split("=")[0],I=I.trim().replace(Qa,""),I.length<2)return"";for(;I.length%4!==0;)I=I+"=";return I}function Ya(I,y){y=y||1/0;let b;const k=I.length;let N=null;const z=[];for(let K=0;K<k;++K){if(b=I.charCodeAt(K),b>55295&&b<57344){if(!N){if(b>56319){(y-=3)>-1&&z.push(239,191,189);continue}else if(K+1===k){(y-=3)>-1&&z.push(239,191,189);continue}N=b;continue}if(b<56320){(y-=3)>-1&&z.push(239,191,189),N=b;continue}b=(N-55296<<10|b-56320)+65536}else N&&(y-=3)>-1&&z.push(239,191,189);if(N=null,b<128){if((y-=1)<0)break;z.push(b)}else if(b<2048){if((y-=2)<0)break;z.push(b>>6|192,b&63|128)}else if(b<65536){if((y-=3)<0)break;z.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((y-=4)<0)break;z.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return z}function Th(I){const y=[];for(let b=0;b<I.length;++b)y.push(I.charCodeAt(b)&255);return y}function au(I,y){let b,k,N;const z=[];for(let K=0;K<I.length&&!((y-=2)<0);++K)b=I.charCodeAt(K),k=b>>8,N=b%256,z.push(N),z.push(k);return z}function Xa(I){return t.toByteArray(Ch(I))}function Ai(I,y,b,k){let N;for(N=0;N<k&&!(N+b>=y.length||N>=I.length);++N)y[N+b]=I[N];return N}function In(I,y){return I instanceof y||I!=null&&I.constructor!=null&&I.constructor.name!=null&&I.constructor.name===y.name}function bo(I){return I!==I}const cu=function(){const I="0123456789abcdef",y=new Array(256);for(let b=0;b<16;++b){const k=b*16;for(let N=0;N<16;++N)y[k+N]=I[b]+I[N]}return y}();function or(I){return typeof BigInt>"u"?lu:I}function lu(){throw new Error("BigInt not supported")}})(je);function l0(e){if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++)t.push(l0(e[r]));const n=je.Buffer.concat(t);return je.Buffer.concat([U1(n.length,192),n])}else{const t=EP(e);return t.length===1&&t[0]<128?t:je.Buffer.concat([U1(t.length,128),t])}}function U1(e,t){if(e<56)return je.Buffer.from([e+t]);{const n=Xg(e),r=n.length/2,i=Xg(t+55+r);return je.Buffer.from(i+n,"hex")}}function _x(e){return e.slice(0,2)==="0x"}function wP(e){return typeof e!="string"?e:_x(e)?e.slice(2):e}function Xg(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?"0"+t:t}function vP(e){return e.length%2?"0"+e:e}function bP(e){const t=Xg(e);return je.Buffer.from(t,"hex")}function EP(e){if(!je.Buffer.isBuffer(e)){if(typeof e=="string")return _x(e)?je.Buffer.from(vP(wP(e)),"hex"):je.Buffer.from(e);if(typeof e=="number")return e?bP(e):je.Buffer.from([]);if(e==null)return je.Buffer.from([]);if(e instanceof Uint8Array)return je.Buffer.from(e);throw new Error("invalid type")}return e}var Jg={exports:{}};(function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Xt<"u"&&Xt,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof Xt<"u"&&Xt||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(S){return S&&DataView.prototype.isPrototypeOf(S)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(S){return S&&u.indexOf(Object.prototype.toString.call(S))>-1};function f(S){if(typeof S!="string"&&(S=String(S)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(S)||S==="")throw new TypeError('Invalid character in header field name: "'+S+'"');return S.toLowerCase()}function h(S){return typeof S!="string"&&(S=String(S)),S}function p(S){var x={next:function(){var O=S.shift();return{done:O===void 0,value:O}}};return c.iterable&&(x[Symbol.iterator]=function(){return x}),x}function g(S){this.map={},S instanceof g?S.forEach(function(x,O){this.append(O,x)},this):Array.isArray(S)?S.forEach(function(x){if(x.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+x.length);this.append(x[0],x[1])},this):S&&Object.getOwnPropertyNames(S).forEach(function(x){this.append(x,S[x])},this)}g.prototype.append=function(S,x){S=f(S),x=h(x);var O=this.map[S];this.map[S]=O?O+", "+x:x},g.prototype.delete=function(S){delete this.map[f(S)]},g.prototype.get=function(S){return S=f(S),this.has(S)?this.map[S]:null},g.prototype.has=function(S){return this.map.hasOwnProperty(f(S))},g.prototype.set=function(S,x){this.map[f(S)]=h(x)},g.prototype.forEach=function(S,x){for(var O in this.map)this.map.hasOwnProperty(O)&&S.call(x,this.map[O],O,this)},g.prototype.keys=function(){var S=[];return this.forEach(function(x,O){S.push(O)}),p(S)},g.prototype.values=function(){var S=[];return this.forEach(function(x){S.push(x)}),p(S)},g.prototype.entries=function(){var S=[];return this.forEach(function(x,O){S.push([O,x])}),p(S)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function v(S){if(!S._noBody){if(S.bodyUsed)return Promise.reject(new TypeError("Already read"));S.bodyUsed=!0}}function m(S){return new Promise(function(x,O){S.onload=function(){x(S.result)},S.onerror=function(){O(S.error)}})}function w(S){var x=new FileReader,O=m(x);return x.readAsArrayBuffer(S),O}function E(S){var x=new FileReader,O=m(x),R=/charset=([A-Za-z0-9_-]+)/.exec(S.type),$=R?R[1]:"utf-8";return x.readAsText(S,$),O}function A(S){for(var x=new Uint8Array(S),O=new Array(x.length),R=0;R<x.length;R++)O[R]=String.fromCharCode(x[R]);return O.join("")}function T(S){if(S.slice)return S.slice(0);var x=new Uint8Array(S.byteLength);return x.set(new Uint8Array(S)),x.buffer}function D(){return this.bodyUsed=!1,this._initBody=function(S){this.bodyUsed=this.bodyUsed,this._bodyInit=S,S?typeof S=="string"?this._bodyText=S:c.blob&&Blob.prototype.isPrototypeOf(S)?this._bodyBlob=S:c.formData&&FormData.prototype.isPrototypeOf(S)?this._bodyFormData=S:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)?this._bodyText=S.toString():c.arrayBuffer&&c.blob&&l(S)?(this._bodyArrayBuffer=T(S.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(S)||d(S))?this._bodyArrayBuffer=T(S):this._bodyText=S=Object.prototype.toString.call(S):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof S=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var S=v(this);if(S)return S;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var S=v(this);return S||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var S=v(this);if(S)return S;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(U)}),this.json=function(){return this.text().then(JSON.parse)},this}var j=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function L(S){var x=S.toUpperCase();return j.indexOf(x)>-1?x:S}function C(S,x){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');x=x||{};var O=x.body;if(S instanceof C){if(S.bodyUsed)throw new TypeError("Already read");this.url=S.url,this.credentials=S.credentials,x.headers||(this.headers=new g(S.headers)),this.method=S.method,this.mode=S.mode,this.signal=S.signal,!O&&S._bodyInit!=null&&(O=S._bodyInit,S.bodyUsed=!0)}else this.url=String(S);if(this.credentials=x.credentials||this.credentials||"same-origin",(x.headers||!this.headers)&&(this.headers=new g(x.headers)),this.method=L(x.method||this.method||"GET"),this.mode=x.mode||this.mode||null,this.signal=x.signal||this.signal||function(){if("AbortController"in a){var P=new AbortController;return P.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&O)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(O),(this.method==="GET"||this.method==="HEAD")&&(x.cache==="no-store"||x.cache==="no-cache")){var R=/([?&])_=[^&]*/;if(R.test(this.url))this.url=this.url.replace(R,"$1_="+new Date().getTime());else{var $=/\?/;this.url+=($.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})};function U(S){var x=new FormData;return S.trim().split("&").forEach(function(O){if(O){var R=O.split("="),$=R.shift().replace(/\+/g," "),P=R.join("=").replace(/\+/g," ");x.append(decodeURIComponent($),decodeURIComponent(P))}}),x}function B(S){var x=new g,O=S.replace(/\r?\n[\t ]+/g," ");return O.split("\r").map(function(R){return R.indexOf(`
`)===0?R.substr(1,R.length):R}).forEach(function(R){var $=R.split(":"),P=$.shift().trim();if(P){var M=$.join(":").trim();try{x.append(P,M)}catch(W){console.warn("Response "+W.message)}}}),x}D.call(C.prototype);function F(S,x){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(x||(x={}),this.type="default",this.status=x.status===void 0?200:x.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=x.statusText===void 0?"":""+x.statusText,this.headers=new g(x.headers),this.url=x.url||"",this._initBody(S)}D.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},F.error=function(){var S=new F(null,{status:200,statusText:""});return S.ok=!1,S.status=0,S.type="error",S};var q=[301,302,303,307,308];F.redirect=function(S,x){if(q.indexOf(x)===-1)throw new RangeError("Invalid status code");return new F(null,{status:x,headers:{location:S}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(x,O){this.message=x,this.name=O;var R=Error(x);this.stack=R.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function G(S,x){return new Promise(function(O,R){var $=new C(S,x);if($.signal&&$.signal.aborted)return R(new o.DOMException("Aborted","AbortError"));var P=new XMLHttpRequest;function M(){P.abort()}P.onload=function(){var Q={statusText:P.statusText,headers:B(P.getAllResponseHeaders()||"")};$.url.indexOf("file://")===0&&(P.status<200||P.status>599)?Q.status=200:Q.status=P.status,Q.url="responseURL"in P?P.responseURL:Q.headers.get("X-Request-URL");var te="response"in P?P.response:P.responseText;setTimeout(function(){O(new F(te,Q))},0)},P.onerror=function(){setTimeout(function(){R(new TypeError("Network request failed"))},0)},P.ontimeout=function(){setTimeout(function(){R(new TypeError("Network request timed out"))},0)},P.onabort=function(){setTimeout(function(){R(new o.DOMException("Aborted","AbortError"))},0)};function W(Q){try{return Q===""&&a.location.href?a.location.href:Q}catch{return Q}}if(P.open($.method,W($.url),!0),$.credentials==="include"?P.withCredentials=!0:$.credentials==="omit"&&(P.withCredentials=!1),"responseType"in P&&(c.blob?P.responseType="blob":c.arrayBuffer&&(P.responseType="arraybuffer")),x&&typeof x.headers=="object"&&!(x.headers instanceof g||a.Headers&&x.headers instanceof a.Headers)){var ee=[];Object.getOwnPropertyNames(x.headers).forEach(function(Q){ee.push(f(Q)),P.setRequestHeader(Q,h(x.headers[Q]))}),$.headers.forEach(function(Q,te){ee.indexOf(te)===-1&&P.setRequestHeader(te,Q)})}else $.headers.forEach(function(Q,te){P.setRequestHeader(te,Q)});$.signal&&($.signal.addEventListener("abort",M),P.onreadystatechange=function(){P.readyState===4&&$.signal.removeEventListener("abort",M)}),P.send(typeof $._bodyInit>"u"?null:$._bodyInit)})}return G.polyfill=!0,a.fetch||(a.fetch=G,a.Headers=g,a.Request=C,a.Response=F),o.Headers=g,o.Request=C,o.Response=F,o.fetch=G,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t})(Jg,Jg.exports);var _P=Jg.exports;const Sx=Ul(_P);function ot(e){return e==null?null:e.replace(/^0x/,"").replace(/^Fx/,"")}function Jt(e){return e==null?null:"0x"+ot(e)}var u0={exports:{}},ya=typeof Reflect=="object"?Reflect:null,B1=ya&&typeof ya.apply=="function"?ya.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},vd;ya&&typeof ya.ownKeys=="function"?vd=ya.ownKeys:Object.getOwnPropertySymbols?vd=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:vd=function(t){return Object.getOwnPropertyNames(t)};function SP(e){console&&console.warn&&console.warn(e)}var xx=Number.isNaN||function(t){return t!==t};function Ce(){Ce.init.call(this)}u0.exports=Ce;u0.exports.once=CP;Ce.EventEmitter=Ce;Ce.prototype._events=void 0;Ce.prototype._eventsCount=0;Ce.prototype._maxListeners=void 0;var L1=10;function Vf(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Ce,"defaultMaxListeners",{enumerable:!0,get:function(){return L1},set:function(e){if(typeof e!="number"||e<0||xx(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");L1=e}});Ce.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ce.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||xx(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Ix(e){return e._maxListeners===void 0?Ce.defaultMaxListeners:e._maxListeners}Ce.prototype.getMaxListeners=function(){return Ix(this)};Ce.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[t];if(c===void 0)return!1;if(typeof c=="function")B1(c,this,n);else for(var l=c.length,u=Rx(c,l),r=0;r<l;++r)B1(u[r],this,n);return!0};function Ax(e,t,n,r){var i,s,o;if(Vf(n),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),o===void 0)o=s[t]=n,++e._eventsCount;else if(typeof o=="function"?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=Ix(e),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,SP(a)}return e}Ce.prototype.addListener=function(t,n){return Ax(this,t,n,!1)};Ce.prototype.on=Ce.prototype.addListener;Ce.prototype.prependListener=function(t,n){return Ax(this,t,n,!0)};function xP(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Cx(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=xP.bind(r);return i.listener=n,r.wrapFn=i,i}Ce.prototype.once=function(t,n){return Vf(n),this.on(t,Cx(this,t,n)),this};Ce.prototype.prependOnceListener=function(t,n){return Vf(n),this.prependListener(t,Cx(this,t,n)),this};Ce.prototype.removeListener=function(t,n){var r,i,s,o,a;if(Vf(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():IP(r,s),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,a||n)}return this};Ce.prototype.off=Ce.prototype.removeListener;Ce.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function Tx(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?AP(i):Rx(i,i.length)}Ce.prototype.listeners=function(t){return Tx(this,t,!0)};Ce.prototype.rawListeners=function(t){return Tx(this,t,!1)};Ce.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):kx.call(e,t)};Ce.prototype.listenerCount=kx;function kx(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Ce.prototype.eventNames=function(){return this._eventsCount>0?vd(this._events):[]};function Rx(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function IP(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function AP(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function CP(e,t){return new Promise(function(n,r){function i(o){e.removeListener(t,s),r(o)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}$x(e,t,s,{once:!0}),t!=="error"&&TP(e,i,{once:!0})})}function TP(e,t,n){typeof e.on=="function"&&$x(e,"error",t,n)}function $x(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(s){r.once&&e.removeEventListener(t,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var En=u0.exports;const Gf=Ul(En);var Wo=null;typeof WebSocket<"u"?Wo=WebSocket:typeof MozWebSocket<"u"?Wo=MozWebSocket:typeof global<"u"?Wo=global.WebSocket||global.MozWebSocket:typeof window<"u"?Wo=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Wo=self.WebSocket||self.MozWebSocket);const kP=Wo;function Ox(e){try{return JSON.parse(e)}catch{return null}}function Px(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}const RP=globalThis.AbortController||require("abort-controller");class bd extends Error{constructor(t){let{error:n,hostname:r,path:i,method:s,requestBody:o,responseBody:a,responseStatusText:c,statusCode:l}=t;const u=`
      HTTP Request Error: An error occurred when interacting with the Access API.
      ${n?`error=${n}`:""}
      ${r?`hostname=${r}`:""}
      ${i?`path=${i}`:""}
      ${s?`method=${s}`:""}
      ${o?`requestBody=${o}`:""}
      ${a?`responseBody=${a}`:""}
      ${c?`responseStatusText=${c}`:""}
      ${l?`statusCode=${l}`:""}
    `;super(u),this.name="HTTP Request Error",this.statusCode=l,this.errorMessage=n}}async function at(e){let{hostname:t,path:n,method:r,body:i,headers:s,retryLimit:o=5,retryIntervalMs:a=1e3,timeoutLimit:c=3e4,enableRequestLogging:l=!0}=e;const u=i?JSON.stringify(i):null;function d(){const h=new RP,p=setTimeout(()=>{h.abort()},c);return Sx(Px(t,n).toString(),{method:r,body:u,headers:s,signal:h.signal}).then(async g=>{if(g.ok)return g.json();const v=await g.text().catch(()=>null),m=Ox(v);throw new bd({error:m==null?void 0:m.message,hostname:t,path:n,method:r,requestBody:u,responseBody:v,responseStatusText:g.statusText,statusCode:g.status})}).catch(async g=>{throw g instanceof bd||g.name==="AbortError"?g:(l&&await we({title:"Access Node Error",message:`The provided access node ${t} does not appear to be a valid REST/HTTP access node.
  Please verify that you are not unintentionally using a GRPC access node.
  See more here: https://docs.onflow.org/fcl/reference/sdk-guidelines/#connect`,level:$e.error}),new bd({error:g==null?void 0:g.message,hostname:t,path:n,method:r,requestBody:u}))}).finally(()=>{clearTimeout(p)})}async function f(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;try{return await d()}catch(p){const g=[408,429,500,502,503,504];if(p.name==="AbortError"||g.includes(p.statusCode))return await new Promise((v,m)=>{h<o?(l&&console.warn(`Access node unavailable, retrying in ${a} ms...`),setTimeout(()=>{v(f(h+1))},a)):m(p)});throw p}}return await f()}async function $P(e,t,n){const i=await(n.httpRequest||at)({hostname:n.node,path:`/v1/scripts?block_id=${e.block.id}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(s=>t.Buffer.from(JSON.stringify(e.arguments[s].asArgument)).toString("base64"))}});return d0(e,t,i)}async function OP(e,t,n){const i=await(n.httpRequest||at)({hostname:n.node,path:`/v1/scripts?block_height=${e.block.height}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(s=>t.Buffer.from(JSON.stringify(e.arguments[s].asArgument)).toString("base64"))}});return d0(e,t,i)}async function PP(e,t,n){const i=await(n.httpRequest||at)({hostname:n.node,path:`/v1/scripts?block_height=${e.block.isSealed?"sealed":"final"}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map(s=>t.Buffer.from(JSON.stringify(e.arguments[s].asArgument)).toString("base64"))}});return d0(e,t,i)}function d0(e,t,n){let r=t.response();return r.tag=e.tag,r.encodedData=JSON.parse(t.Buffer.from(n,"base64").toString()),r}async function NP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return V(n.node,"SDK Send Execute Script Error: opts.node must be defined."),V(t.response,"SDK Send Execute Script Error: context.response must be defined."),V(t.Buffer,"SDK Send Execute Script Error: context.Buffer must be defined."),e=await e,e.block.id?await $P(e,t,n):e.block.height?await OP(e,t,n):await PP(e,t,n)}const DP={SHA2_256:1,SHA2_384:2,SHA3_256:3,SHA3_384:4,KMAC128_BLS_BLS12_381:5},UP={ECDSA_P256:1,ECDSA_secp256k1:2,BLS_BLS12_381:3};async function BP(e,t,n){const i=await(n.httpRequest||at)({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.height}&expand=contracts,keys`,method:"GET",body:null});return Nx(e,t,i)}async function LP(e,t,n){const i=await(n.httpRequest||at)({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.isSealed?"sealed":"final"}&expand=contracts,keys`,method:"GET",body:null});return Nx(e,t,i)}function Nx(e,t,n){var s;let r=t.response();r.tag=e.tag;const i=o=>{const a={};if(!o)return a;for(let c of Object.keys(o))a[c]=t.Buffer.from(o[c],"base64").toString();return a};return r.account={address:n.address,balance:Number(n.balance),code:"",contracts:i(n.contracts),keys:((s=n.keys)==null?void 0:s.map(o=>({index:Number(o.index),publicKey:o.public_key.replace(/^0x/,""),signAlgo:UP[o.signing_algorithm],signAlgoString:o.signing_algorithm,hashAlgo:DP[o.hashing_algorithm],hashAlgoString:o.hashing_algorithm,sequenceNumber:Number(o.sequence_number),weight:Number(o.weight),revoked:o.revoked})))??[]},r}async function FP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return V(n.node,"SDK Send Get Account Error: opts.node must be defined."),V(t.response,"SDK Send Get Account Error: context.response must be defined."),V(t.Buffer,"SDK Send Get Account Error: context.Buffer must be defined."),e=await e,e.block.height!==null?await BP(e,t,n):await LP(e,t,n)}async function jP(e,t,n){const i=await(n.httpRequest||at)({hostname:n.node,path:`/v1/blocks/${e.block.id}`,method:"GET",body:null});return f0(e,t,i)}async function MP(e,t,n){const i=await(n.httpRequest||at)({hostname:n.node,path:`/v1/blocks?height=${e.block.height}`,method:"GET",body:null});return f0(e,t,i)}async function zP(e,t,n){var o;const r=n.httpRequest||at,i=(o=e.block)!=null&&o.isSealed?"sealed":"final",s=await r({hostname:n.node,path:`/v1/blocks?height=${i}`,method:"GET",body:null});return f0(e,t,s)}function f0(e,t,n){const r=n.length?n[0]:null,i=t.response();return i.tag=e.tag,i.blockHeader={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp},i}async function HP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(n.node,"SDK Send Get Block Header Error: opts.node must be defined."),V(t.response,"SDK Send Get Block Header Error: context.response must be defined."),e=await e;const r=e.block.id!==null,i=e.block.height!==null;return r?await jP(e,t,n):i?await MP(e,t,n):await zP(e,t,n)}async function qP(e,t,n){const i=await(n.httpRequest||at)({hostname:n.node,path:`/v1/blocks/${e.block.id}?expand=payload`,method:"GET",body:null});return h0(e,t,i)}async function VP(e,t,n){const i=await(n.httpRequest||at)({hostname:n.node,path:`/v1/blocks?height=${e.block.height}&expand=payload`,method:"GET",body:null});return h0(e,t,i)}async function GP(e,t,n){var o;const r=n.httpRequest||at,i=(o=e.block)!=null&&o.isSealed?"sealed":"final",s=await r({hostname:n.node,path:`/v1/blocks?height=${i}&expand=payload`,method:"GET",body:null});return h0(e,t,s)}function h0(e,t,n){const r=n.length?n[0]:null,i=t.response();return i.tag=e.tag,i.block={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp,parentVoterSignature:r.header.parent_voter_signature,collectionGuarantees:r.payload.collection_guarantees.map(s=>({collectionId:s.collection_id,signerIds:s.signer_ids})),blockSeals:r.payload.block_seals.map(s=>({blockId:s.block_id,executionReceiptId:s.result_id}))},i}async function WP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(n.node,"SDK Send Get Block Error: opts.node must be defined."),V(t.response,"SDK Send Get Block Error: context.response must be defined."),e=await e;const r=e.block.id!==null,i=e.block.height!==null;return r?await qP(e,t,n):i?await VP(e,t,n):await GP(e,t,n)}async function KP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(n.node,"SDK Send Get Collection Error: opts.node must be defined."),V(t.response,"SDK Send Get Collection Error: context.response must be defined.");const i=await(n.httpRequest||at)({hostname:n.node,path:`/v1/collections/${e.collection.id}?expand=transactions`,method:"GET",body:null}),s=t.response();return s.tag=e.tag,s.collection={id:i.id,transactionIds:i.transactions.map(o=>o.id)},s}async function QP(e,t,n){const i=await(n.httpRequest||at)({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&start_height=${e.events.start}&end_height=${e.events.end}`,method:"GET",body:null});return Dx(e,t,i)}async function YP(e,t,n){const i=await(n.httpRequest||at)({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&block_ids=${e.events.blockIds.join(",")}`,method:"GET",body:null});return Dx(e,t,i)}function Dx(e,t,n){let r=t.response();return r.tag=e.tag,r.events=[],n.forEach(i=>i.events?i.events.forEach(s=>r.events.push({blockId:i.block_id,blockHeight:Number(i.block_height),blockTimestamp:i.block_timestamp,type:s.type,transactionId:s.transaction_id,transactionIndex:Number(s.transaction_index),eventIndex:Number(s.event_index),payload:JSON.parse(t.Buffer.from(s.payload,"base64").toString())})):null),r}async function XP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(n.node,"SDK Send Get Events Error: opts.node must be defined."),V(t.response,"SDK Send Get Events Error: context.response must be defined."),V(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined."),e=await e;const r=e.events.start!==null,i=Array.isArray(e.events.blockIds)&&e.events.blockIds.length>0;return V(r||i,"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified."),r?await QP(e,t,n):await YP(e,t,n)}async function JP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(n.node,"SDK Send Get Transaction Error: opts.node must be defined."),V(t.response,"SDK Send Get Transaction Error: context.response must be defined."),V(t.Buffer,"SDK Send Get Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||at;e=await e;const i=await r({hostname:n.node,path:`/v1/transactions/${e.transaction.id}`,method:"GET",body:null}),s=l=>({address:l.address,keyId:Number(l.key_index),sequenceNumber:Number(l.sequence_number)}),o=l=>({address:l.address,keyId:Number(l.key_index),signature:l.signature}),a=l=>JSON.parse(t.Buffer.from(l,"base64").toString());let c=t.response();return c.tag=e.tag,c.transaction={script:t.Buffer.from(i.script,"base64").toString(),args:[...i.arguments.map(a)],referenceBlockId:i.reference_block_id,gasLimit:Number(i.gas_limit),payer:i.payer,proposalKey:i.proposal_key?s(i.proposal_key):i.proposal_key,authorizers:i.authorizers,payloadSignatures:[...i.payload_signatures.map(o)],envelopeSignatures:[...i.envelope_signatures.map(o)]},c}const ZP={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5};async function eN(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(n.node,"SDK Send Get Transaction Status Error: opts.node must be defined."),V(t.response,"SDK Send Get Transaction Status Error: context.response must be defined."),V(t.Buffer,"SDK Send Get Transaction Status Error: context.Buffer must be defined.");const r=n.httpRequest||at;e=await e;const i=await r({hostname:n.node,path:`/v1/transaction_results/${e.transaction.id}`,method:"GET",body:null});let s=t.response();return s.tag=e.tag,s.transactionStatus={blockId:i.block_id,status:ZP[i.status.toUpperCase()]||"",statusString:i.status.toUpperCase(),statusCode:i.status_code,errorMessage:i.error_message,events:i.events.map(o=>({type:o.type,transactionId:o.transaction_id,transactionIndex:Number(o.transaction_index),eventIndex:Number(o.event_index),payload:JSON.parse(t.Buffer.from(o.payload,"base64").toString())}))},s}async function tN(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(!!n.node,"SDK Send Ping Error: opts.node must be defined."),V(!!t.response,"SDK Send Ping Error: context.response must be defined."),await(n.httpRequest||at)({hostname:n.node,path:"/v1/blocks?height=sealed",method:"GET",body:null});let i=typeof(t==null?void 0:t.response)=="function"?t.response():{};return i.tag=e.tag,i}const nN=e=>`${withPrefix(e.addr)}-${e.keyId}`;async function rN(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(n.node,"SDK Send Transaction Error: opts.node must be defined."),V(t.response,"SDK Send Transaction Error: context.response must be defined."),V(t.Buffer,"SDK Send Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||at;e=await e;let i=[];for(let u of Object.values(e.accounts))try{if(!u.role.payer&&u.signature!=null){const d={address:ot(u.addr),key_index:String(u.keyId),signature:t.Buffer.from(u.signature,"hex").toString("base64")};i.find(f=>f.address===d.address&&f.key_index===d.key_index&&f.signature===d.signature)||i.push(d)}}catch(d){throw console.error("SDK HTTP Send Error: Trouble applying payload signature",{acct:u,ix:e}),d}let s={};for(let u of Object.values(e.accounts))try{if(u.role.payer&&u.signature!=null){let d=u.tempId||nN(u);s[d]=s[d]||{address:ot(u.addr),key_index:String(u.keyId),signature:t.Buffer.from(u.signature,"hex").toString("base64")}}}catch(d){throw console.error("SDK HTTP Send Error: Trouble applying envelope signature",{acct:u,ix:e}),d}s=Object.values(s);var o=Date.now();const a=await r({hostname:n.node,path:"/v1/transactions",method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:[...e.message.arguments.map(u=>t.Buffer.from(JSON.stringify(e.arguments[u].asArgument)).toString("base64"))],reference_block_id:e.message.refBlock?e.message.refBlock:null,gas_limit:String(e.message.computeLimit),payer:ot(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),proposal_key:{address:ot(e.accounts[e.proposer].addr),key_index:String(e.accounts[e.proposer].keyId),sequence_number:String(e.accounts[e.proposer].sequenceNum)},authorizers:e.authorizations.map(u=>e.accounts[u].addr).reduce((u,d)=>u.find(f=>f===d)?u:[...u,d],[]).map(ot),payload_signatures:i,envelope_signatures:s}});var c=Date.now();let l=t.response();return l.tag=e.tag,l.transactionId=a.id,typeof window<"u"&&typeof CustomEvent<"u"&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:l.transactionId,delta:c-o}})),l}async function iN(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(n.node,"SDK Send Get Network Parameters Error: opts.node must be defined."),V(t.response,"SDK Send Get Network Parameters Error: context.response must be defined.");const r=n.httpRequest||at;e=await e;const i=await r({hostname:n.node,path:"/v1/network/parameters",method:"GET",body:null,enableRequestLogging:n.enableRequestLogging??!0});let s=t.response();return s.tag=e.tag,s.networkParameters={chainId:i.chain_id},s}async function sN(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(n.node,"SDK Send Get Node Version Info Error: opts.node must be defined."),V(t.response,"SDK Send Get Node Verison Info Error: context.response must be defined.");const r=n.httpRequest||at;e=await e;const i=await r({hostname:n.node,path:"/v1/node_version_info",method:"GET"});let s=t.response();return s.tag=e.tag,s.nodeVersionInfo={semver:i.semver,commit:i.commit,sporkId:i.spork_id,protocolVersion:parseInt(i.protocol_version),sporkRootBlockHeight:parseInt(i.spork_root_block_height),nodeRootBlockHeight:parseInt(i.node_root_block_height)},s}const Ux=kP;class F1 extends Error{constructor(t){let{code:n,reason:r,message:i,wasClean:s}=t;const o=`
      connectWs: connection closed with error${i?`: ${i}`:""}
      ${n?`code: ${n}`:""}
      ${r?`reason: ${r}`:""}
      ${s?`wasClean: ${s}`:""}
    `;super(o),this.name="WebsocketError",this.code=n,this.reason=r,this.wasClean=!1}}function oN(e){let{hostname:t,path:n,params:r,getParams:i,retryLimit:s=5,retryIntervalMs:o=1e3}=e;if(i&&r)throw new Error("connectWs: cannot specify both params and getParams");let a=new En.EventEmitter,c=0;const l=i||(()=>r);let u=()=>{};return function d(){let f=!1,h=!1;const p=aN(t,n,l()),g=new Ux(p);g.onmessage=function(v){const m=Ox(v.data);m?a.emit("data",m):(a.emit("error",new F1({message:"invalid JSON data"})),this.close())},g.onclose=function(v){if(f){a.emit("close"),a.removeAllListeners();return}h?setTimeout(d,o):c<s?(c++,setTimeout(d,o)):(a.emit("error",new F1({wasClean:v.wasClean,code:v.code,reason:v.reason,message:"failed to connect"})),setTimeout(()=>{a.emit("close"),a.removeAllListeners()}))},g.onopen=function(){h=!0,c=0},u=()=>{f=!0,g.close()}}(),{on(d,f){return a.on(d,f),this},off(d,f){return a.off(d,f),this},close(){u()}}}function aN(e,t,n){const r=new URL(t||"",e);return r.protocol==="https:"?r.protocol="wss:":r.protocol==="http:"&&(r.protocol="ws:"),Object.entries(n||{}).forEach(i=>{let[s,o]=i;if(o){let a;Array.isArray(o)?a=o.join(","):a=o.toString(),r.searchParams.append(s,a)}}),r.toString()}function cN(e,t,n){var i;const r=t.response();return r.tag=e.tag,r.events=((i=n.Events)==null?void 0:i.length)>0?n.Events.map(s=>({blockId:n.BlockID,blockHeight:Number(n.Height),blockTimestamp:n.BlockTimestamp,type:s.Type,transactionId:s.TransactionID,transactionIndex:Number(s.TransactionIndex),eventIndex:Number(s.EventIndex),payload:JSON.parse(t.Buffer.from(s.Payload,"base64").toString())})):null,r.heartbeat={blockId:n.BlockID,blockHeight:Number(n.Height),blockTimestamp:n.BlockTimestamp},r}function lN(e,t,n){const r=t.response();return r.tag=e.tag,r.streamConnection=n,r}async function uN(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};V(n.node,"SDK Send Get Events Error: opts.node must be defined."),V(t.response,"SDK Send Get Events Error: context.response must be defined."),V(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined.");const r=await e,i=n.connectWs||oN,s=new En.EventEmitter;let o=null;const a=i({hostname:n.node,path:"/v1/subscribe_events",getParams:()=>{var u,d,f,h,p,g;const l={event_types:(u=r.subscribeEvents)==null?void 0:u.eventTypes,addresses:(d=r.subscribeEvents)==null?void 0:d.addresses,contracts:(f=r.subscribeEvents)==null?void 0:f.contracts,heartbeat_interval:(h=r.subscribeEvents)==null?void 0:h.heartbeatInterval};return o?l.start_height=o+1:(l.start_block_id=(p=r.subscribeEvents)==null?void 0:p.startBlockId,l.start_height=(g=r.subscribeEvents)==null?void 0:g.startHeight),l}});return a.on("data",l=>{const u=cN(r,t,l);o=u.heartbeat.blockHeight,s.emit("data",u)}),a.on("error",l=>{s.emit("error",l)}),a.on("close",()=>{s.emit("close")}),lN(r,t,{on(l,u){return s.on(l,u),this},off(l,u){return s.off(l,u),this},close(){a.close()}})}const p0=async function(e,t){var r,i,s,o;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};switch(V(!!(n!=null&&n.node),'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),V(!!t.ix,"SDK Send Error: context.ix must be defined."),e=await e,!0){case t.ix.isTransaction(e):return n.sendTransaction?n.sendTransaction(e,t,n):rN(e,t,n);case t.ix.isGetTransactionStatus(e):return n.sendGetTransactionStatus?n.sendGetTransactionStatus(e,t,n):eN(e,t,n);case t.ix.isGetTransaction(e):return n.sendGetTransaction?n.sendGetTransaction(e,t,n):JP(e,t,n);case t.ix.isScript(e):return n.sendExecuteScript?n.sendExecuteScript(e,t,n):NP(e,t,n);case t.ix.isGetAccount(e):return n.sendGetAccount?n.sendGetAccount(e,t,n):FP(e,t,n);case t.ix.isGetEvents(e):return n.sendGetEvents?n.sendGetEvents(e,t,n):XP(e,t,n);case((i=(r=t.ix).isSubscribeEvents)==null?void 0:i.call(r,e)):return n.connectSubscribeEvents?n.connectSubscribeEvents(e,t,n):uN(e,t,n);case t.ix.isGetBlock(e):return n.sendGetBlock?n.sendGetBlock(e,t,n):WP(e,t,n);case t.ix.isGetBlockHeader(e):return n.sendGetBlockHeader?n.sendGetBlockHeader(e,t,n):HP(e,t,n);case t.ix.isGetCollection(e):return n.sendGetCollection?n.sendGetCollection(e,t,n):KP(e,t,n);case t.ix.isPing(e):return n.sendPing?n.sendPing(e,t,n):tN(e,t,n);case t.ix.isGetNetworkParameters(e):return n.sendGetNetworkParameters?n.sendGetNetworkParameters(e,t,n):iN(e,t,n);case((o=(s=t.ix).isGetNodeVersionInfo)==null?void 0:o.call(s,e)):return n.sendGetNodeVersionInfo?n.sendGetNodeVersionInfo(e,t,n):sN(e,t,n);default:return e}};let j1=function(e){return e.LIST_SUBSCRIPTIONS="list_subscriptions",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e}({});class Gc extends Error{constructor(t,n){super(n),this.name="SocketError",this.code=t}static fromMessage(t){return new Gc(t.code,t.message)}}const dN=1;class fN{constructor(t,n){Qt(this,"counter",0);Qt(this,"socket",null);Qt(this,"subscriptions",[]);Qt(this,"reconnectAttempts",0);Qt(this,"connectPromise",null);Qt(this,"closeConnection",null);this.config={...n,reconnectOptions:{initialReconnectDelay:500,reconnectAttempts:5,maxReconnectDelay:5e3,...n.reconnectOptions}},this.handlers=t}subscribe(t){const n=this._subscribe(t);return{unsubscribe:()=>{n.then(r=>r&&this.unsubscribe(r))}}}async _subscribe(t){const r=this.getHandler(t.topic).createSubscriber(t.args,t.onData,t.onError);let i=null;try{await this.connect(),i={id:String(this.counter++),topic:t.topic,subscriber:r},this.subscriptions.push(i);const s=await this.sendSubscribe(i);if(s.error)throw new Error(`Failed to subscribe to topic ${i.topic}`,{cause:Gc.fromMessage(s.error)})}catch(s){return r.onError(s instanceof Error?s:new Error(String(s))),i&&this.unsubscribe(i.id),null}return i.id}unsubscribe(t){var r;const n=this.subscriptions.find(i=>i.id===t);if(n){if(this.subscriptions=this.subscriptions.filter(i=>i.id!==t),this.subscriptions.length===0){(r=this.closeConnection)==null||r.call(this);return}this.sendUnsubscribe(n).catch(i=>{console.error(`Error while unsubscribing from topic: ${i}`)})}}async connect(){return this.connectPromise?this.connectPromise:(this.connectPromise=new Promise((t,n)=>{var o;if(((o=this.socket)==null?void 0:o.readyState)===dN){t();return}this.socket=new Ux(this.config.node);const r=a=>{const c=JSON.parse(a.data);if("action"in c&&c.error){const u=this.subscriptions.find(d=>d.id===c.subscription_id);u&&(u.subscriber.onError(new Error(`Failed to subscribe to topic ${u.topic}: ${c.error.message}`)),this.subscriptions=this.subscriptions.filter(d=>d.id!==c.subscription_id));return}const l=this.subscriptions.find(u=>u.id===c.subscription_id);l&&!("action"in c)&&c.subscription_id===l.id&&l.subscriber.onData(c.payload)},i=()=>{this.handleSocketError(new Error("WebSocket closed")).then(()=>{t()}).catch(a=>{n(a)})},s=()=>{t()};this.socket.addEventListener("message",r),this.socket.addEventListener("close",i),this.socket.addEventListener("open",s),this.closeConnection=()=>{var a,c,l,u;(a=this.socket)==null||a.removeEventListener("message",r),(c=this.socket)==null||c.removeEventListener("close",i),(l=this.socket)==null||l.removeEventListener("open",s),(u=this.socket)==null||u.close(),this.socket=null,this.closeConnection=null,this.connectPromise=null}}),this.connectPromise)}async handleSocketError(t){var n;if((n=this.closeConnection)==null||n.call(this),++this.reconnectAttempts>=this.config.reconnectOptions.reconnectAttempts)throw we({level:$e.error,title:"WebSocket Error",message:`Failed to reconnect to the server after ${this.reconnectAttempts+1} attempts: ${t}`}),this.subscriptions.forEach(r=>{r.subscriber.onError(new Error(`Failed to reconnect to the server after ${this.reconnectAttempts+1} attempts: ${t}`))}),this.subscriptions=[],this.reconnectAttempts=0,t;we({level:$e.warn,title:"WebSocket Error",message:`WebSocket error, reconnecting in ${this.backoffInterval}ms: ${t}`}),await new Promise(r=>setTimeout(r,this.backoffInterval)),await this.connect(),await Promise.all(this.subscriptions.map(async r=>{await this.sendSubscribe(r).catch(i=>{r.subscriber.onError(new Error(`Failed to restore subscription: ${i}`)),this.subscriptions=this.subscriptions.filter(s=>s.id!==r.id)})})),this.reconnectAttempts=0}async sendSubscribe(t){const n={action:j1.SUBSCRIBE,topic:t.topic,arguments:t.subscriber.getConnectionArgs(),subscription_id:String(t.id)},r=await this.request(n);if(r.error)throw new Error(`Failed to subscribe to topic ${t.topic}`,{cause:Gc.fromMessage(r.error)});return r}async sendUnsubscribe(t){var i;const n={action:j1.UNSUBSCRIBE,subscription_id:t.id};(i=this.socket)==null||i.send(JSON.stringify(n));const r=await this.request(n);if(r.error)throw new Error(`Failed to unsubscribe from topic ${t.topic}`,{cause:Gc.fromMessage(r.error)});return r}async request(t){let n=()=>{};return await new Promise((r,i)=>{if(!this.socket){i(new Error("WebSocket is not connected"));return}n=()=>{var c,l,u;(c=this.socket)==null||c.removeEventListener("error",s),(l=this.socket)==null||l.removeEventListener("message",a),(u=this.socket)==null||u.removeEventListener("close",o)},this.socket.addEventListener("error",s),this.socket.addEventListener("message",a),this.socket.addEventListener("close",o),this.socket.send(JSON.stringify(t));function s(c){i(new Error(`WebSocket error: ${c}`))}function o(){i(new Error("WebSocket closed"))}function a(c){const l=JSON.parse(c.data);l.subscription_id===t.subscription_id&&r(l)}}).finally(()=>{n()})}getHandler(t){const n=this.handlers.find(r=>r.topic===t);if(!n)throw new Error(`No handler found for topic ${t}`);return n}get backoffInterval(){return Math.min(this.config.reconnectOptions.maxReconnectDelay,this.config.reconnectOptions.initialReconnectDelay*2**this.reconnectAttempts)}}const hN={topic:lo.BLOCKS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const s={block:{id:i.header.id,parentId:i.header.parent_id,height:Number(i.header.height),timestamp:i.header.timestamp,parentVoterSignature:i.header.parent_voter_signature,collectionGuarantees:i.payload.collection_guarantees.map(o=>({collectionId:o.collection_id,signerIds:o.signer_indices})),blockSeals:i.payload.block_seals.map(o=>({blockId:o.block_id,executionReceiptId:o.result_id}))}};r={blockStatus:r.blockStatus,startBlockHeight:Number(BigInt(i.header.height)+BigInt(1))},t(s)},onError(i){n(i)},getConnectionArgs(){let i={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:String(r.startBlockHeight)}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},pN={topic:lo.BLOCK_HEADERS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const s={blockHeader:{id:i.id,parentId:i.parent_id,height:Number(i.height),timestamp:i.timestamp,parentVoterSignature:i.parent_voter_signature}};r={blockStatus:r.blockStatus,startBlockHeight:Number(BigInt(i.height)+BigInt(1))},t(s)},onError(i){n(i)},getConnectionArgs(){let i={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},gN={topic:lo.BLOCK_DIGESTS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const s={blockDigest:{id:i.block_id,height:Number(i.height),timestamp:i.timestamp}};r={blockStatus:r.blockStatus,startBlockId:String(BigInt(i.height)+BigInt(1))},t(s)},onError(i){n(i)},getConnectionArgs(){let i={block_status:r.blockStatus};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},mN={topic:lo.ACCOUNT_STATUSES,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const s=[];for(const[o,a]of Object.entries(i.account_events)){for(const c of a){const l={accountStatusEvent:{accountAddress:o,blockId:i.block_id,blockHeight:Number(i.height),type:c.type,transactionId:c.transaction_id,transactionIndex:Number(c.transaction_index),eventIndex:Number(c.event_index),payload:JSON.parse(Buffer.from(c.payload,"base64").toString())}};s.push(l)}s.sort((c,l)=>{const u=c.accountStatusEvent.transactionIndex-l.accountStatusEvent.transactionIndex;return u!==0?u:c.accountStatusEvent.eventIndex-l.accountStatusEvent.eventIndex});for(const c of s)t(c);r={...r,startBlockHeight:Number(BigInt(i.height)+BigInt(1)),startBlockId:void 0}}},onError(i){n(i)},getConnectionArgs(){let i={event_types:r.eventTypes,addresses:r.addresses,account_addresses:r.accountAddresses};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},yN={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5},wN={topic:lo.TRANSACTION_STATUSES,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){const s={transactionStatus:{blockId:i.transaction_result.block_id,status:yN[i.transaction_result.status.toUpperCase()],statusString:i.transaction_result.status.toUpperCase(),statusCode:i.transaction_result.status_code,errorMessage:i.transaction_result.error_message,events:i.transaction_result.events.map(o=>({type:o.type,transactionId:o.transaction_id,transactionIndex:Number(o.transaction_index),eventIndex:Number(o.event_index),payload:JSON.parse(je.Buffer.from(o.payload,"base64").toString())}))}};t(s)},onError(i){n(i)},getConnectionArgs(){return{tx_id:r.transactionId}}}}},vN={topic:lo.EVENTS,createSubscriber:(e,t,n)=>{let r={...e};return{onData(i){for(const s of i.events){const o={event:{blockId:i.block_id,blockHeight:Number(i.block_height),blockTimestamp:i.block_timestamp,type:s.type,transactionId:s.transaction_id,transactionIndex:Number(s.transaction_index),eventIndex:Number(s.event_index),payload:JSON.parse(Buffer.from(s.payload,"base64").toString())}};t(o)}r={...r,startHeight:Number(BigInt(i.block_height)+BigInt(1)),startBlockId:void 0}},onError(i){n(i)},getConnectionArgs(){let i={event_types:r.eventTypes,addresses:r.addresses,contracts:r.contracts};return"startBlockHeight"in r&&r.startBlockHeight?{...i,start_block_height:r.startBlockHeight}:"startBlockId"in r&&r.startBlockId?{...i,start_block_id:r.startBlockId}:i}}}},bN=[hN,pN,gN,mN,wN,vN];let M1=new Map;function EN(e,t){let{topic:n,args:r,onData:i,onError:s}=e;const o=_N(t.node),a=M1.get(o)||new fN(bN,{node:o});return M1.set(o,a),a.subscribe({topic:n,args:r,onData:i,onError:s})}function _N(e){const t=new URL(Px(e,"/v1/ws"));return t.protocol==="https:"?t.protocol="wss:":t.protocol==="http:"&&(t.protocol="ws:"),t.toString()}const SN={send:p0,subscribe:EN};var xN={},Bx={},Lx={},Fx={},IN=function(t,n){return function(r,i){var s=i*2,o=n*2;r[s]=t[o],r[s+1]=t[o+1]}},g0=IN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(g0);function n(s){return s&&s.__esModule?s:{default:s}}var r=function(o){for(var a=o.A,c=o.C,l=0;l<25;l+=5){for(var u=0;u<5;u++)(0,t.default)(a,l+u)(c,u);for(var d=0;d<5;d++){var f=(l+d)*2,h=(d+1)%5*2,p=(d+2)%5*2;a[f]^=~c[h]&c[p],a[f+1]^=~c[h+1]&c[p+1]}}},i=r;e.default=i})(Fx);var jx={},Mx={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]),n=t;e.default=n})(Mx);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(Mx);function n(s){return s&&s.__esModule?s:{default:s}}var r=function(o){var a=o.A,c=o.roundIndex,l=c*2;a[0]^=t.default[l],a[1]^=t.default[l+1]},i=r;e.default=i})(jx);var zx={},Hx={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1],n=t;e.default=n})(Hx);var qx={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44],n=t;e.default=n})(qx);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(Hx),n=i(qx),r=i(g0);function i(a){return a&&a.__esModule?a:{default:a}}var s=function(c){var l=c.A,u=c.C,d=c.W;(0,r.default)(l,1)(d,0);for(var f=0,h=0,p=0,g=32,v=0;v<24;v++){var m=t.default[v],w=n.default[v];(0,r.default)(l,m)(u,0),f=d[0],h=d[1],g=32-w,p=w<32?0:1,d[p]=f<<w|h>>>g,d[(p+1)%2]=h<<w|f>>>g,(0,r.default)(d,0)(l,m),(0,r.default)(u,0)(d,0)}},o=s;e.default=o})(zx);var Vx={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(g0);function n(s){return s&&s.__esModule?s:{default:s}}var r=function(o){for(var a=o.A,c=o.C,l=o.D,u=o.W,d=0,f=0,h=0;h<5;h++){var p=h*2,g=(h+5)*2,v=(h+10)*2,m=(h+15)*2,w=(h+20)*2;c[p]=a[p]^a[g]^a[v]^a[m]^a[w],c[p+1]=a[p+1]^a[g+1]^a[v+1]^a[m+1]^a[w+1]}for(var E=0;E<5;E++){(0,t.default)(c,(E+1)%5)(u,0),d=u[0],f=u[1],u[0]=d<<1|f>>>31,u[1]=f<<1|d>>>31,l[E*2]=c[(E+4)%5*2]^u[0],l[E*2+1]=c[(E+4)%5*2+1]^u[1];for(var A=0;A<25;A+=5)a[(A+E)*2]^=l[E*2],a[(A+E)*2+1]^=l[E*2+1]}},i=r;e.default=i})(Vx);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s(Fx),n=s(jx),r=s(zx),i=s(Vx);function s(c){return c&&c.__esModule?c:{default:c}}var o=function(){var l=new Uint32Array(10),u=new Uint32Array(10),d=new Uint32Array(2);return function(f){for(var h=0;h<24;h++)(0,i.default)({A:f,C:l,D:u,W:d}),(0,r.default)({A:f,C:l,W:d}),(0,t.default)({A:f,C:l}),(0,n.default)({A:f,roundIndex:h});l.fill(0),u.fill(0),d.fill(0)}},a=o;e.default=a})(Lx);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=je,n=r(Lx);function r(c){return c&&c.__esModule?c:{default:c}}var i=function(l,u){for(var d=0;d<l.length;d+=8){var f=d/4;u[f]^=l[d+7]<<24|l[d+6]<<16|l[d+5]<<8|l[d+4],u[f+1]^=l[d+3]<<24|l[d+2]<<16|l[d+1]<<8|l[d]}return u},s=function(l,u){for(var d=0;d<u.length;d+=8){var f=d/4;u[d]=l[f+1],u[d+1]=l[f+1]>>>8,u[d+2]=l[f+1]>>>16,u[d+3]=l[f+1]>>>24,u[d+4]=l[f],u[d+5]=l[f]>>>8,u[d+6]=l[f]>>>16,u[d+7]=l[f]>>>24}return u},o=function(l){var u=this,d=l.capacity,f=l.padding,h=(0,n.default)(),p=200,g=d/8,v=p-d/4,m=0,w=new Uint32Array(p/4),E=t.Buffer.allocUnsafe(v);return this.absorb=function(A){for(var T=0;T<A.length;T++)E[m]=A[T],m+=1,m>=v&&(i(E,w),h(w),m=0);return u},this.squeeze=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},T={buffer:A.buffer||t.Buffer.allocUnsafe(g),padding:A.padding||f,queue:t.Buffer.allocUnsafe(E.length),state:new Uint32Array(w.length)};E.copy(T.queue);for(var D=0;D<w.length;D++)T.state[D]=w[D];T.queue.fill(0,m),T.queue[m]|=T.padding,T.queue[v-1]|=128,i(T.queue,T.state);for(var j=0;j<T.buffer.length;j+=v)h(T.state),s(T.state,T.buffer.slice(j,j+v));return T.buffer},this.reset=function(){return E.fill(0),w.fill(0),m=0,u},this},a=o;e.default=a})(Bx);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SHAKE=e.SHA3Hash=e.SHA3=e.Keccak=void 0;var t=je,n=r(Bx);function r(u){return u&&u.__esModule?u:{default:u}}var i=function(d){var f=d.allowedSizes,h=d.defaultSize,p=d.padding;return function g(){var v=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h;if(!this||this.constructor!==g)return new g(m);if(f&&!f.includes(m))throw new Error("Unsupported hash length");var w=new n.default({capacity:m});return this.update=function(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"utf8";if(t.Buffer.isBuffer(E))return w.absorb(E),v;if(typeof E=="string")return v.update(t.Buffer.from(E,A));throw new TypeError("Not a string or buffer")},this.digest=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"binary",A=typeof E=="string"?{format:E}:E,T=w.squeeze({buffer:A.buffer,padding:A.padding||p});return A.format&&A.format!=="binary"?T.toString(A.format):T},this.reset=function(){return w.reset(),v},this}},s=i({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});e.Keccak=s;var o=i({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});e.SHA3=o;var a=i({allowedSizes:[128,256],defaultSize:256,padding:31});e.SHAKE=a;var c=s;e.SHA3Hash=c,o.SHA3Hash=c;var l=o;e.default=l})(xN);function Gx(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(!e.length&&!t.length||!e.length)return n;if(!t.length)return n.push(...e),n;const[r,...i]=e,[s,...o]=t;return r!==void 0&&n.push(r),s!==void 0&&n.push(s),Gx(i,o,n)}function Wx(e){return function(t){return typeof t=="function"?(we.deprecate({pkg:"FCL/SDK",subject:"Interopolation of functions into template literals",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"}),Wx(e)(t(e))):String(t)}}function Kx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return typeof e=="string"?()=>e:typeof e=="function"?e:i=>Gx([...e],n.map(Wx(i))).join("").trim()}const pe=(e,t,n)=>({label:e,asArgument:t,asInjection:r=>(we.deprecate({pkg:"@onflow/types",subject:`Passing in ${e} as value for ${e}`,message:`Going forward, use ${e} as value for ${e}.`}),n(r))}),Js=e=>Array.isArray(e),ms=e=>typeof e=="object",Qx=e=>e==null,AN=e=>typeof e=="boolean",et=e=>typeof e=="number",ct=e=>Number.isInteger(e),Oe=e=>typeof e=="string",oe=e=>{throw new Error("Type Error: "+e)},lt=e=>{we.deprecate({pkg:"@onflow/types",subject:`Passing in Number as value for ${e}`,message:`Going forward, use String as value for ${e}.`,transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0002-[U]Int*-and-Word*-as-Number"})};let z1=!1;const CN={label:"Identity",asArgument:e=>(z1||(we.deprecate({pkg:"@onflow/types",subject:"Identity",message:"Identity type is deprecated and will be removed in v2.0.0.  Please remove it from your code."}),z1=!0),e),asInjection:e=>e},TN=pe("UInt",e=>et(e)&&ct(e)?(lt("UInt"),{type:"UInt",value:e.toString()}):Oe(e)?{type:"UInt",value:e}:oe("Expected Positive Integer for type Unsigned Int"),e=>e),kN=pe("Int",e=>et(e)&&ct(e)?(lt("Int"),{type:"Int",value:e.toString()}):Oe(e)?{type:"Int",value:e}:oe("Expected Integer for type Int"),e=>e),RN=pe("UInt8",e=>et(e)&&ct(e)?(lt("UInt8"),{type:"UInt8",value:e.toString()}):Oe(e)?{type:"UInt8",value:e}:oe("Expected integer for UInt8"),e=>e),$N=pe("Int8",e=>et(e)&&ct(e)?(lt("Int8"),{type:"Int8",value:e.toString()}):Oe(e)?{type:"Int8",value:e}:oe("Expected positive integer for Int8"),e=>e),ON=pe("UInt16",e=>et(e)&&ct(e)?(lt("UInt16"),{type:"UInt16",value:e.toString()}):Oe(e)?{type:"UInt16",value:e}:oe("Expected integer for UInt16"),e=>e),PN=pe("Int16",e=>et(e)&&ct(e)?(lt("Int16"),{type:"Int16",value:e.toString()}):Oe(e)?{type:"Int16",value:e}:oe("Expected positive integer for Int16"),e=>e),NN=pe("UInt32",e=>et(e)&&ct(e)?(lt("UInt32"),{type:"UInt32",value:e.toString()}):Oe(e)?{type:"UInt32",value:e}:oe("Expected integer for UInt32"),e=>e),DN=pe("Int32",e=>et(e)&&ct(e)?(lt("Int32"),{type:"Int32",value:e.toString()}):Oe(e)?{type:"Int32",value:e}:oe("Expected positive integer for Int32"),e=>e),UN=pe("UInt64",e=>et(e)&&ct(e)?(lt("UInt64"),{type:"UInt64",value:e.toString()}):Oe(e)?{type:"UInt64",value:e}:oe("Expected integer for UInt64"),e=>e),BN=pe("Int64",e=>et(e)&&ct(e)?(lt("Int64"),{type:"Int64",value:e.toString()}):Oe(e)?{type:"Int64",value:e}:oe("Expected positive integer for Int64"),e=>e),LN=pe("UInt128",e=>et(e)&&ct(e)?(lt("UInt128"),{type:"UInt128",value:e.toString()}):Oe(e)?{type:"UInt128",value:e}:oe("Expected integer for UInt128"),e=>e),FN=pe("Int128",e=>et(e)&&ct(e)?(lt("Int128"),{type:"Int128",value:e.toString()}):Oe(e)?{type:"Int128",value:e}:oe("Expected positive integer for Int128"),e=>e),jN=pe("UInt256",e=>et(e)&&ct(e)?(lt("UInt256"),{type:"UInt256",value:e.toString()}):Oe(e)?{type:"UInt256",value:e}:oe("Expected integer for UInt256"),e=>e),MN=pe("Int256",e=>et(e)&&ct(e)?(lt("Int256"),{type:"Int256",value:e.toString()}):Oe(e)?{type:"Int256",value:e}:oe("Expected integer for Int256"),e=>e),zN=pe("Word8",e=>et(e)&&ct(e)?(lt("Word8"),{type:"Word8",value:e.toString()}):Oe(e)?{type:"Word8",value:e}:oe("Expected positive number for Word8"),e=>e),HN=pe("Word16",e=>et(e)&&ct(e)?(lt("Word16"),{type:"Word16",value:e.toString()}):Oe(e)?{type:"Word16",value:e}:oe("Expected positive number for Word16"),e=>e),qN=pe("Word32",e=>et(e)&&ct(e)?(lt("Word32"),{type:"Word32",value:e.toString()}):Oe(e)?{type:"Word32",value:e}:oe("Expected positive number for Word32"),e=>e),VN=pe("Word64",e=>et(e)&&ct(e)?(lt("Word64"),{type:"Word64",value:e.toString()}):Oe(e)?{type:"Word64",value:e}:oe("Expected positive number for Word64"),e=>e),GN=pe("Word128",e=>et(e)&&ct(e)?(lt("Word128"),{type:"Word128",value:e.toString()}):Oe(e)?{type:"Word128",value:e}:oe("Expected positive number for Word128"),e=>e),WN=pe("Word256",e=>et(e)&&ct(e)?(lt("Word256"),{type:"Word256",value:e.toString()}):Oe(e)?{type:"Word256",value:e}:oe("Expected positive number for Word256"),e=>e),Yx=()=>{we.deprecate({subject:"Passing in Numbers as values for Fix64 and UFix64 types",pkg:"@onflow/types",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0001-[U]Fix64-as-Number"})},KN=pe("UFix64",e=>{if(Oe(e)){const t=e.split(".");return t.length!==2?oe(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):t[1].length==0||t[1].length>8?oe(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):(t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"UFix64",value:e})}else if(et(e))return Yx(),{type:"UFix64",value:e.toString()};return oe("Expected String for UFix64")},e=>e),QN=pe("Fix64",e=>{if(Oe(e)){const t=e.split(".");return t.length!==2?oe(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):t[1].length==0||t[1].length>8?oe(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`):(t[1]=t[1].padEnd(8,"0"),e=t.join("."),{type:"Fix64",value:e})}else if(et(e))return Yx(),{type:"Fix64",value:e.toString()};return oe("Expected String for Fix64")},e=>e),YN=pe("String",e=>Oe(e)?{type:"String",value:e}:oe("Expected String for type String"),e=>e),XN=pe("Character",e=>Oe(e)?{type:"Character",value:e}:oe("Expected Character for type Character"),e=>e),JN=pe("Bool",e=>AN(e)?{type:"Bool",value:e}:oe("Expected Boolean for type Bool"),e=>e),Xx=pe("Address",e=>Oe(e)?{type:"Address",value:e}:oe("Expected Address for type Address"),e=>e),ZN=pe("Void",e=>!e||Qx(e)?{type:"Void",value:null}:oe("Expected Void for type Void"),e=>e),eD=e=>pe("Optional",t=>({type:"Optional",value:Qx(t)?null:e.asArgument(t)}),t=>t),tD=pe("Reference",e=>ms(e)?{type:"Reference",value:e}:oe("Expected Object for type Reference"),e=>e),H1=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return pe("Array",t=>({type:"Array",value:Js(e)?e.map((n,r)=>n.asArgument(t[r])):t.map(n=>e.asArgument(n))}),t=>t)},nD=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return pe("Dictionary",t=>{const n=Js(t),r=Js(e);return ms(t)?{type:"Dictionary",value:r&&n?e.map((i,s)=>({key:i.key.asArgument(t[s].key),value:i.value.asArgument(t[s].value)})):n&&!r?t.map(i=>({key:e.key.asArgument(i.key),value:e.value.asArgument(i.value)})):!n&&!r?[{key:e.key.asArgument(t.key),value:e.value.asArgument(t.value)}]:oe("Invalid arguments for Dictionary.")}:oe("Expected Object for type Dictionary")},t=>t)},rD=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return pe("Event",n=>ms(n)?{type:"Event",value:{id:e,fields:Js(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:oe("Expected Object for type Event"),n=>n)},iD=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return pe("Resource",n=>ms(n)?{type:"Resource",value:{id:e,fields:Js(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:oe("Expected Object for type Resource"),n=>n)},sD=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return pe("Struct",n=>ms(n)?{type:"Struct",value:{id:e,fields:Js(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:oe("Expected Object for type Struct"),n=>n)},oD=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return pe("Enum",n=>ms(n)?{type:"Enum",value:{id:e,fields:Js(t)?t.map((r,i)=>({name:n.fields[i].name,value:r.value.asArgument(n.fields[i].value)})):n.fields.map(r=>({name:r.name,value:t.value.asArgument(r.value)}))}}:oe("Expected Object for type Enum"),n=>n)},aD=pe("Path",e=>ms(e)?Oe(e.domain)?e.domain==="storage"||e.domain==="private"||e.domain==="public"?Oe(e.identifier)?{type:"Path",value:{domain:e.domain,identifier:e.identifier}}:oe(`Expected a string for the Path identifier but found ${e.identifier}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):oe(`Expected either "storage", "private" or "public" as the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):oe(`Expected a string for the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`):oe("Expected Object for type Path"),e=>e),cD=e=>pe("InclusiveRange",t=>{if(ms(t)){const{start:n,end:r,step:i}=t;return{type:"InclusiveRange",value:{start:e.asArgument(n),end:e.asArgument(r),step:e.asArgument(i)}}}return oe("Expected Object for type InclusiveRange")},t=>t),lD=Object.freeze(Object.defineProperty({__proto__:null,Address:Xx,Array:H1,Bool:JN,Character:XN,Dictionary:nD,Enum:oD,Event:rD,Fix64:QN,Identity:CN,InclusiveRange:cD,Int:kN,Int128:FN,Int16:PN,Int256:MN,Int32:DN,Int64:BN,Int8:$N,Optional:eD,Path:aD,Reference:tD,Resource:iD,String:YN,Struct:sD,UFix64:KN,UInt:TN,UInt128:LN,UInt16:ON,UInt256:jN,UInt32:NN,UInt64:UN,UInt8:RN,Void:ZN,Word128:GN,Word16:HN,Word256:WN,Word32:qN,Word64:VN,Word8:zN,_Array:H1},Symbol.toStringTag,{value:"Module"})),uD=`{
  "kind":"${Hf.ACCOUNT}",
  "tempId":null,
  "addr":null,
  "keyId":null,
  "sequenceNum":null,
  "signature":null,
  "signingFunction":null,
  "resolve":null,
  "role": {
    "proposer":false,
    "authorizer":false,
    "payer":false,
    "param":false
  }
}`,dD=`{
  "kind":"${Hf.ARGUMENT}",
  "tempId":null,
  "value":null,
  "asArgument":null,
  "xform":null,
  "resolve": null,
  "resolveArgument": null
}`,Jx=`{
  "tag":"${Ae.UNKNOWN}",
  "assigns":{},
  "status":"${Vl.OK}",
  "reason":null,
  "accounts":{},
  "params":{},
  "arguments":{},
  "message": {
    "cadence":null,
    "refBlock":null,
    "computeLimit":null,
    "proposer":null,
    "payer":null,
    "authorizations":[],
    "params":[],
    "arguments":[]
  },
  "proposer":null,
  "authorizations":[],
  "payer":[],
  "events": {
    "eventType":null,
    "start":null,
    "end":null,
    "blockIds":[]
  },
  "subscribeEvents": {
    "startBlockId":null,
    "startHeight":null,
    "eventTypes":null,
    "addresses":null,
    "contracts":null,
    "heartbeatInterval":null
  },
  "transaction": {
    "id":null
  },
  "block": {
    "id":null,
    "height":null,
    "isSealed":null
  },
  "account": {
    "addr":null
  },
  "collection": {
    "id":null
  }
}`,Zx=new Set(Object.keys(JSON.parse(Jx))),Wf=()=>JSON.parse(Jx),fD=()=>(we.deprecate({pkg:"FCL/SDK",message:"The interaction been deprecated from the Flow JS-SDK/FCL. use initInteraction instead",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0010-deprecate-interaction",level:$e.warn}),Wf()),eI=e=>typeof e=="number",tI=e=>Array.isArray(e),nI=e=>e!==null&&typeof e=="object",m0=e=>e==null,ka=e=>typeof e=="function",rI=e=>{if(!nI(e)||m0(e)||eI(e))return!1;for(let t of Zx)if(!e.hasOwnProperty(t))return!1;return!0},jn=e=>(e.status=Vl.OK,e),y0=(e,t)=>(e.status=Vl.BAD,e.reason=t,e),_n=e=>t=>(t.tag=e,jn(t)),q1=e=>e.keyId==null?e:(V(!isNaN(parseInt(e.keyId.toString())),"account.keyId must be an integer"),{...e,keyId:parseInt(e.keyId.toString())}),iI=()=>JSON.parse(uD),Kf=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=>{V(typeof e=="function"||typeof e=="object","prepAccount must be passed an authorization function or an account object"),V(t.role!=null,"Account must have a role");const r=iI(),i=t.role,s=s0();let o={...e};e.authorization&&ka(e.authorization)&&(o={resolve:e.authorization}),!e.authorization&&ka(e)&&(o={resolve:e});const a=o.resolve;return a&&(o.resolve=function(c){for(var l=arguments.length,u=new Array(l>1?l-1:0),d=1;d<l;d++)u[d-1]=arguments[d];return[a,q1].reduce(async(f,h)=>h(await f,...u),c)}),o=q1(o),n.accounts[s]={...r,tempId:s,...o,role:{...r.role,...typeof e.role=="object"?e.role:{},...i?{[i]:!0}:{}}},i===bl.AUTHORIZER?n.authorizations.push(s):i===bl.PAYER?n.payer.push(s):i&&(n[i]=s),n}},sI=e=>t=>{let n=s0();return t.message.arguments.push(n),t.arguments[n]=JSON.parse(dD),t.arguments[n].tempId=n,t.arguments[n].value=e.value,t.arguments[n].asArgument=e.asArgument,t.arguments[n].xform=e.xform,t.arguments[n].resolve=e.resolve,t.arguments[n].resolveArgument=ka(e.resolveArgument)?e.resolveArgument.bind(e):e.resolveArgument,jn(t)},hD=_n(Ae.UNKNOWN),oI=_n(Ae.SCRIPT),aI=_n(Ae.TRANSACTION),cI=_n(Ae.GET_TRANSACTION_STATUS),pD=_n(Ae.GET_TRANSACTION),lI=_n(Ae.GET_ACCOUNT),gD=_n(Ae.GET_EVENTS),mD=_n(Ae.PING),uI=_n(Ae.GET_BLOCK),yD=_n(Ae.GET_BLOCK_HEADER),wD=_n(Ae.GET_COLLECTION),dI=_n(Ae.GET_NETWORK_PARAMETERS),vD=_n(Ae.SUBSCRIBE_EVENTS),bD=_n(Ae.GET_NODE_VERSION_INFO),Sn=e=>t=>t.tag===e,fI=Sn(Ae.UNKNOWN),w0=Sn(Ae.SCRIPT),ys=Sn(Ae.TRANSACTION),ED=Sn(Ae.GET_TRANSACTION_STATUS),_D=Sn(Ae.GET_TRANSACTION),SD=Sn(Ae.GET_ACCOUNT),xD=Sn(Ae.GET_EVENTS),ID=Sn(Ae.PING),AD=Sn(Ae.GET_BLOCK),CD=Sn(Ae.GET_BLOCK_HEADER),TD=Sn(Ae.GET_COLLECTION),kD=Sn(Ae.GET_NETWORK_PARAMETERS),RD=Sn(Ae.GET_NODE_VERSION_INFO),$D=Sn(Ae.SUBSCRIBE_EVENTS),OD=e=>e.status===Vl.OK,hI=e=>e.status===Vl.BAD,PD=e=>e.reason,ND=e=>e.kind===Hf.ACCOUNT,DD=e=>e.kind===Hf.ARGUMENT,UD=e=>{for(let t of Object.keys(e))if(!Zx.has(t))throw new Error(`"${t}" is an invalid root level Interaction property.`);return e},Ed=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];try{if(e=UD(await e),hI(e))throw new Error(`Interaction Error: ${e.reason}`);if(!t.length)return e;const[n,...r]=t,i=await n;if(ka(i))return Ed(i(e),r);if(m0(i)||!i)return Ed(e,r);if(rI(i))return Ed(i,r);throw new Error("Invalid Interaction Composition")}catch(n){throw n}};function Kt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r,i]=t;return tI(r)?a=>Kt(a,r):Ed(r,i)}const BD=function(e){return e},Qf=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return e.assigns[t]==null?n:e.assigns[t]},v0=(e,t)=>n=>(n.assigns[e]=t,jn(n)),pI=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:BD;return n=>(n.assigns[e]=t(n.assigns[e],n),jn(n))},LD=e=>t=>(delete t.assigns[e],jn(t));var b0=Object.freeze({__proto__:null,Bad:y0,Ok:jn,destroy:LD,get:Qf,initAccount:iI,initInteraction:Wf,interaction:fD,isAccount:ND,isArgument:DD,isArray:tI,isBad:hI,isFn:ka,isGetAccount:SD,isGetBlock:AD,isGetBlockHeader:CD,isGetCollection:TD,isGetEvents:xD,isGetNetworkParameters:kD,isGetNodeVersionInfo:RD,isGetTransaction:_D,isGetTransactionStatus:ED,isInteraction:rI,isNull:m0,isNumber:eI,isObj:nI,isOk:OD,isPing:ID,isScript:w0,isSubscribeEvents:$D,isTransaction:ys,isUnknown:fI,makeArgument:sI,makeGetAccount:lI,makeGetBlock:uI,makeGetBlockHeader:yD,makeGetCollection:wD,makeGetEvents:gD,makeGetNetworkParameters:dI,makeGetNodeVerionInfo:bD,makeGetTransaction:pD,makeGetTransactionStatus:cI,makePing:mD,makeScript:oI,makeSubscribeEvents:vD,makeTransaction:aI,makeUnknown:hD,pipe:Kt,prepAccount:Kf,put:v0,update:pI,why:PD});function gI(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Kt(Wf(),e)}const FD={tag:null,transaction:null,transactionStatus:null,transactionId:null,encodedData:null,events:null,event:null,accountStatusEvent:null,account:null,block:null,blockHeader:null,blockDigest:null,latestBlock:null,collection:null,networkParameters:null,streamConnection:null,heartbeat:null,nodeVersionInfo:null},E0=()=>({...FD});function jD(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return Kt([uI,t=>(t.block.isSealed=e,jn(t))])}function MD(e){return Kt([lI,t=>(t.account.addr=ot(e),jn(t))])}const zD=(e,t,n)=>{const r=new Gf;let i=HD();e.on("data",async o=>{const a=Object.keys(o).filter(l=>o[l]!=null&&l!=="tag");let c=Promise.all(a.map(async l=>{const u={[l]:o[l]},d=await t(u,n);return{channel:l,message:d}}));i.push(async()=>{(await c).forEach(u=>{let{channel:d,message:f}=u;r.emit(d,f)})})});function s(o){e.on(o,a=>{i.push(async()=>{r.emit(o,a)})})}return s("close"),s("error"),{on(o,a){return r.on(o,a),this},off(o,a){return r.off(o,a),this},close:()=>{e.close()}}};function HD(){let e=[],t=!1;async function n(){if(!t){for(t=!0;e.length>0;){const r=e.shift();await(r==null?void 0:r())}t=!1}}return{push:r=>{e.push(r),n()}}}const qD=()=>{we.deprecate({pkg:"@onflow/decode",subject:"Operating upon data of the latestBlock field of the response object",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field"})},xe=async e=>e,VD=async()=>null,GD=async e=>e.staticType,WD=async(e,t,n)=>e?await Zs(e,t,n):null,KD=async(e,t,n)=>await Promise.all(e.map(r=>new Promise(async i=>i(await Zs(r,t,[...n,r.type]))))),QD=async(e,t,n)=>await e.reduce(async(r,i)=>(r=await r,r[await Zs(i.key,t,[...n,i.key])]=await Zs(i.value,t,[...n,i.key]),r),Promise.resolve({})),ku=async(e,t,n)=>{const r=await e.fields.reduce(async(s,o)=>(s=await s,s[o.name]=await Zs(o.value,t,[...n,o.name]),s),Promise.resolve({})),i=e.id&&mI(t,e.id);return i?await i(r):r},YD=async(e,t,n)=>{const r=["start","end","step"];return await Object.keys(e).reduce(async(s,o)=>(s=await s,r.includes(o)&&(s[o]=await Zs(e[o],t,[...n,o])),s),Promise.resolve({}))},V1={UInt:xe,Int:xe,UInt8:xe,Int8:xe,UInt16:xe,Int16:xe,UInt32:xe,Int32:xe,UInt64:xe,Int64:xe,UInt128:xe,Int128:xe,UInt256:xe,Int256:xe,Word8:xe,Word16:xe,Word32:xe,Word64:xe,Word128:xe,Word256:xe,UFix64:xe,Fix64:xe,String:xe,Character:xe,Bool:xe,Address:xe,Void:VD,Optional:WD,Reference:xe,Array:KD,Dictionary:QD,Event:ku,Resource:ku,Struct:ku,Enum:ku,Type:GD,Path:xe,Capability:xe,InclusiveRange:YD},mI=(e,t)=>{const n=Object.keys(e).find(r=>/^\/.*\/$/.test(r)?new RegExp(r.substring(1,r.length-1)).test(t):r===t);return t&&n&&e[n]},Zs=async(e,t,n)=>{let r=mI(t,e.type);if(!r)throw new Error(`Undefined Decoder Error: ${e.type}@${n.join(".")}`);return await r(e.value,t,n)},cc=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const i={...Object.keys(V1).filter(s=>!Object.keys(t).find(o=>new RegExp(o).test(s))).reduce((s,o)=>(s[o]=V1[o],s),t),...t};return Zs(e,i,n)},Gl=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.encodedData)return cc(e.encodedData,t);if(e.transactionStatus)return{...e.transactionStatus,events:await Promise.all(e.transactionStatus.events.map(async function(r){return{type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await cc(r.payload,t)}}))};if(e.transaction)return e.transaction;if(e.events)return await Promise.all(e.events.map(async function(r){return{blockId:r.blockId,blockHeight:r.blockHeight,blockTimestamp:r.blockTimestamp,type:r.type,transactionId:r.transactionId,transactionIndex:r.transactionIndex,eventIndex:r.eventIndex,data:await cc(r.payload,t)}}));if(e.event){const{payload:n,...r}=e.event;return{...r,data:await cc(n,t)}}else if(e.accountStatusEvent){const{payload:n,...r}=e.accountStatusEvent;return{...r,data:await cc(n,t)}}else{if(e.account)return e.account;if(e.block)return e.block;if(e.blockHeader)return e.blockHeader;if(e.blockDigest)return e.blockDigest;if(e.latestBlock)return qD(),e.latestBlock;if(e.transactionId)return e.transactionId;if(e.collection)return e.collection;if(e.networkParameters){const n=/^flow-/,r=e.networkParameters.chainId;let i;return r==="flow-emulator"?i="local":n.test(r)?i=r.replace(n,""):i=r,{chainId:i}}else{if(e.streamConnection)return zD(e.streamConnection,Gl,t);if(e.heartbeat)return e.heartbeat;if(e.nodeVersionInfo)return e.nodeVersionInfo}}return null},G1=e=>typeof e=="function",W1=e=>typeof e=="string",XD=()=>/\b(0x\w+)\b/g;function K1(e){return XD().test(e)}const yI=()=>/import\s+"(\w+)"/g;function Q1(e){return yI().test(e)}function JD(e){return e.matchAll(yI())}async function ZD(e){if(!ys(e)&&!w0(e))return e;var t=Qf(e,"ix.cadence");if(V(G1(t)||W1(t),"Cadence needs to be a function or a string."),G1(t)&&(t=await t({})),V(W1(t),"Cadence needs to be a string at this point."),V(!K1(t)||!Q1(t),"Both account identifier and contract identifier syntax not simultaneously supported."),K1(t)&&(t=await ie().where(/^0x/).then(n=>Object.entries(n).reduce((r,i)=>{let[s,o]=i;const a=new RegExp("(\\b"+s+"\\b)","g");return r.replace(a,o)},t))),Q1(t))for(const[n,r]of JD(t)){const i=await ie().get(`system.contracts.${r}`);i?t=t.replace(n,`import ${r} from ${Jt(i)}`):we({title:"Contract Placeholder not found",message:`Cannot find a value for contract placeholder ${r}. Please add to your flow.json or explicitly add it to the config 'contracts.*' namespace.`,level:$e.warn})}return e.message.cadence=t,e}const Zg=e=>typeof e=="function";function e8(e){if(V(typeof e.xform!=null,`No type specified for argument: ${e.value}`),Zg(e.xform))return e.xform(e.value);if(Zg(e.xform.asArgument))return e.xform.asArgument(e.value);V(!1,"Invalid Argument",e)}async function wI(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;if(V(t>0,`Argument Resolve Recursion Limit Exceeded for Arg: ${e.tempId}`),Zg(e.resolveArgument)){const n=await e.resolveArgument();return wI(n,t-1)}else return e}async function t8(e){if(ys(e)||w0(e))for(let[t,n]of Object.entries(e.arguments)){const r=await wI(n);e.arguments[t].asArgument=e8(r)}return e}const n8=e=>bI(EI(_I(e))),r8=e=>bI(EI(u8(e))),i8=(e,t)=>je.Buffer.from(e.padEnd(t*2,"0"),"hex"),vI=(e,t)=>je.Buffer.from(e.padStart(t*2,"0"),"hex"),s8=i8(je.Buffer.from("FLOW-V0.0-transaction").toString("hex"),32).toString("hex"),bI=e=>s8+e,ap=e=>vI(e,8),o8=e=>vI(e,32),a8=e=>je.Buffer.from(JSON.stringify(e),"utf8"),c8=e=>je.Buffer.from(e,"utf8"),l8=e=>je.Buffer.from(e,"hex"),EI=e=>l0(e).toString("hex"),_I=e=>(h8(e),[c8(e.cadence||""),e.arguments.map(a8),o8(e.refBlock||""),e.computeLimit,ap(ot(e.proposalKey.address||"")),e.proposalKey.keyId,e.proposalKey.sequenceNum,ap(ot(e.payer)),e.authorizers.map(t=>ap(ot(t)))]),u8=e=>(p8(e),[_I(e),d8(e)]),d8=e=>{var n;const t=f8(e);return(n=e.payloadSigs)==null?void 0:n.map(r=>({signerIndex:t.get(ot(r.address))||"",keyId:r.keyId,sig:r.sig})).sort((r,i)=>r.signerIndex>i.signerIndex?1:r.signerIndex<i.signerIndex?-1:r.keyId>i.keyId?1:r.keyId<i.keyId?-1:0).map(r=>[r.signerIndex,r.keyId,l8(r.sig)])},f8=e=>{const t=new Map;let n=0;const r=i=>{t.has(i)||(t.set(i,n),n++)};return e.proposalKey.address&&r(e.proposalKey.address),r(e.payer),e.authorizers.forEach(r),t},h8=e=>{g8.forEach(t=>af(e,t)),m8.forEach(t=>af(e.proposalKey,t,"proposalKey"))},p8=e=>{var t;y8.forEach(n=>af(e,n)),(t=e.payloadSigs)==null||t.forEach((n,r)=>{w8.forEach(i=>af(n,i,"payloadSigs",r))})},of=e=>typeof e=="number",wa=e=>typeof e=="string",SI=e=>e!==null&&typeof e=="object",em=e=>SI(e)&&e instanceof Array,g8=[{name:"cadence",check:wa},{name:"arguments",check:em},{name:"refBlock",check:wa,defaultVal:"0"},{name:"computeLimit",check:of},{name:"proposalKey",check:SI},{name:"payer",check:wa},{name:"authorizers",check:em}],m8=[{name:"address",check:wa},{name:"keyId",check:of},{name:"sequenceNum",check:of}],y8=[{name:"payloadSigs",check:em}],w8=[{name:"address",check:wa},{name:"keyId",check:of},{name:"sig",check:wa}],af=(e,t,n,r)=>{const{name:i,check:s,defaultVal:o}=t;if(e[i]==null&&o!=null&&(e[i]=o),e[i]==null)throw v8(i,n,r);if(!s(e[i]))throw b8(i,n,r)},xI=(e,t,n)=>t?n==null?`${t}.${e}`:`${t}.${n}.${e}`:e,v8=(e,t,n)=>new Error(`Missing field ${xI(e,t,n)}`),b8=(e,t,n)=>new Error(`Invalid field ${xI(e,t,n)}`);function II(e){let t=new Set(e.authorizations);return e.proposer&&t.add(e.proposer),Array.isArray(e.payer)?e.payer.forEach(n=>t.delete(n)):t.delete(e.payer),Array.from(t)}function AI(e){let t=new Set(Array.isArray(e.payer)?e.payer:[e.payer]);return Array.from(t)}const _0=e=>{const t=()=>e.authorizations.map(o=>Jt(e.accounts[o].addr)).reduce((o,a)=>o.find(c=>c===a)?o:[...o,a],[]),n=()=>II(e).map(s=>({address:Jt(e.accounts[s].addr),keyId:e.accounts[s].keyId,sig:e.accounts[s].signature})),r=()=>AI(e).map(s=>({address:Jt(e.accounts[s].addr),keyId:e.accounts[s].keyId,sig:e.accounts[s].signature})),i=e.proposer?{address:Jt(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(s=>e.arguments[s].asArgument),proposalKey:i,payer:Jt(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),authorizers:t(),payloadSigs:n(),envelopeSigs:r()}},Dr=5,E8=e=>`${Jt(e.addr)}-${e.keyId}`,_8=e=>e&&(Object.prototype.toString.call(e)==="[object Function]"||typeof e=="function"||e instanceof Function),S8=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("-")};var $n=function(e){return e.PAYER="payer",e.PROPOSER="proposer",e.AUTHORIZATIONS="authorizations",e}($n||{});function x8(){const e=" ",n=[];return[function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;n.push(Array(i*4).fill(e).join("-")+r)},function(){return n.reduce((r,i)=>r+`
`+i)}]}function S0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;return t<=0||!Array.isArray(e)?e:S0(e.flatMap(n=>n),t-1)}function I8(e,t){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map(n=>t.arguments[n].asArgument),data:{},interaction:t,voucher:_0(t)}}catch(n){throw console.error("buildPreSignable",n),n}}async function A8(e,t){const n=Array.isArray(e.payer)?e.payer:[e.payer],r=Array.isArray(e.authorizations)?e.authorizations:[e.authorizations],i=e.proposer===null?[]:Array.isArray(e.proposer)?e.proposer:[e.proposer],s=Object.keys(e.accounts),o=[...new Set(n.concat(r,i))];for(const a of s)o.find(c=>c===a)||delete e.accounts[a]}function Y1(e,t){typeof t.addr=="string"&&(typeof t.keyId=="number"||typeof t.keyId=="string")?t.tempId=E8(t):t.tempId=t.tempId||s0();const n=e.accounts[t.tempId]||t;return e.accounts[t.tempId]||(e.accounts[t.tempId]=t),e.accounts[t.tempId].role.proposer=n.role.proposer||t.role.proposer,e.accounts[t.tempId].role.payer=n.role.payer||t.role.payer,e.accounts[t.tempId].role.authorizer=n.role.authorizer||t.role.authorizer,e.accounts[t.tempId]}function C8(e){const t=S0(e),n=new Set;return t.map(i=>{const s=S8(i.tempId,i.role.payer,i.role.proposer,i.role.authorizer,i.role.param);return n.has(s)?null:(n.add(s),i)}).filter(i=>i!==null)}async function T8(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Dr,{debugLogger:r}=arguments.length>3?arguments[3]:void 0;if(n<=0)throw new Error(`recurseResolveAccount Error: Depth limit (${Dr}) reached. Ensure your authorization functions resolve to an account after ${Dr} resolves.`);let i=e.accounts[t];if(!i)return[[],!1];if(r(`account: ${i.tempId}`,Math.max(Dr-n,0)),i!=null&&i.resolve)if(_8(i==null?void 0:i.resolve)){r(`account: ${i.tempId} -- cache MISS`,Math.max(Dr-n,0));const{resolve:s,...o}=i;let a=await s(o,I8(o,e));a=Array.isArray(a)?a:[a];let c=S0(a);return c=c.map(l=>Y1(e,l)),i.resolve=c.map(l=>l.tempId),i=Y1(e,i),[c.map(l=>l.tempId),!0]}else return r(`account: ${i.tempId} -- cache HIT`,Math.max(Dr-n,0)),[i.resolve,!1];return[i.tempId?[i.tempId]:[],!1]}const Rc=e=>e===null?[]:Array.isArray(e)?e:[e];async function k8(e,t,n){var r;for(let i of Object.values($n))if(i===$n.AUTHORIZATIONS||i===$n.PAYER)e[i]=Rc(e[i]).reduce((s,o)=>o===t?s.concat(...n.filter(a=>i===$n.PAYER&&a.role.payer||i===$n.AUTHORIZATIONS&&a.role.authorizer).map(a=>a.tempId)):s.concat(o),[]);else if(i===$n.PROPOSER){const s=n.filter(o=>o.role.proposer);if(s.length>1)throw new Error("replaceRoles Error: Multiple proposer keys were resolved, but only one is allowed");e[i]=((r=s[0])==null?void 0:r.tempId)??e[i]}}async function R8(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Dr,{debugLogger:r}=arguments.length>3?arguments[3]:void 0;V(e&&typeof e=="object","resolveAccountType Error: ix not defined");let i=new Set;for(let o of t){let a=e.accounts[o];V(!!a,"resolveAccountType Error: account not found");const[c,l]=await T8(e,o,n,{debugLogger:r});if(l){const u=c.map(f=>e.accounts[f]),d=C8(u);d.forEach(f=>i.add(f.tempId)),k8(e,o,d)}}let s;for(const o of e[$n.PAYER]){let a=e.accounts[o];if(!s)s=a.addr;else if(s!==a.addr)throw new Error("resolveAccountType Error: payers from different accounts detected")}return i}async function $8(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ys(e)){Array.isArray(e.payer)||we.deprecate({pkg:"FCL",subject:'"ix.payer" must be an array. Support for ix.payer as a singular',message:"See changelog for more info."});let[n,r]=x8();try{let i=Dr,s=new Set([...Rc(e[$n.PAYER]),...Rc(e[$n.PROPOSER]),...Rc(e[$n.AUTHORIZATIONS])]);for(;s.size>0;){if(i<=0)throw new Error(`resolveAccounts Error: Depth limit (${Dr}) reached. Ensure your authorization functions resolve to an account after ${Dr} resolves.`);s=await R8(e,s,i,{debugLogger:n}),i--}await A8(e,{debugLogger:n});for(const o of Object.values($n))V(Rc(e[o]).length>0||o===$n.AUTHORIZATIONS,`resolveAccountType Error: no accounts for role "${o}" found`);t.enableDebug&&console.debug(r())}catch(i){throw console.error(`=== SAD PANDA ===

`,i,`

=== SAD PANDA ===`),i}}return e}async function O8(e){if(ys(e))try{let t=II(e);const n=n8(J1(e));await Promise.all(t.map(X1(e,n)));let r=AI(e);const i=r8({...J1(e),payloadSigs:t.map(s=>({address:e.accounts[s].addr||"",keyId:e.accounts[s].keyId||0,sig:e.accounts[s].signature||""}))});await Promise.all(r.map(X1(e,i)))}catch(t){throw console.error("Signatures",t,{ix:e}),t}return e}function X1(e,t){return async function(r){const i=e.accounts[r];if(i.signature!=null&&i.signature!==void 0)return;const{signature:s}=await i.signingFunction(P8(i,t,e));e.accounts[r].signature=s}}function P8(e,t,n){try{return{f_type:"Signable",f_vsn:"1.0.1",message:t,addr:ot(e.addr),keyId:e.keyId,roles:e.role,cadence:n.message.cadence,args:n.message.arguments.map(r=>n.arguments[r].asArgument),data:{},interaction:n,voucher:_0(n)}}catch(r){throw console.error("buildSignable",r),r}}function J1(e){const t=ot((Array.isArray(e.payer)?e.accounts[e.payer[0]]:e.accounts[e.payer]).addr||""),n=e.proposer?{address:ot(e.accounts[e.proposer].addr)||"",keyId:e.accounts[e.proposer].keyId||0,sequenceNum:e.accounts[e.proposer].sequenceNum||0}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(r=>e.arguments[r].asArgument),proposalKey:n,payer:t,authorizers:e.authorizations.map(r=>ot(e.accounts[r].addr)||"").reduce((r,i)=>r.find(s=>s===i)?r:[...r,i],[])}}async function N8(e){const t=Qf(e,"ix.validators",[]);return Kt(e,t.map(n=>r=>n(r,{Ok:jn,Bad:y0})))}async function D8(e){for(let t of Object.keys(e.accounts))e.accounts[t].addr=ot(e.accounts[t].addr);return e}async function U8(e){const t=Qf(e,"ix.voucher-intercept");return ka(t)&&await t(_0(e)),e}const B8=100;async function L8(e){return ys(e)&&(e.message.computeLimit=e.message.computeLimit||await ie.get("fcl.limit"),e.message.computeLimit||(we.deprecate({pkg:"FCL/SDK",subject:"The built-in default compute limit (DEFAULT_COMPUTE_LIMIT=10)",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0009-deprecate-default-compute-limit"}),e.message.computeLimit=B8)),e}const F8=e=>e,So=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:F8;return async n=>{const r=s=>[`
Accounts:`,{proposer:s.proposer,authorizations:s.authorizations,payer:s.payer},`

Details:`,s.accounts].filter(Boolean),i=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];console.log(`debug[${e}] ---
`,...o,`


---`)};return await ie.get(`debug.${e}`)&&await t(n,i,r),n}},j8=Kt([ZD,So("cadence",(e,t)=>t(e.message.cadence)),L8,So("compute limit",(e,t)=>t(e.message.computeLimit)),t8,So("arguments",(e,t)=>t(e.message.arguments,e.message)),$8,So("accounts",(e,t,n)=>t(...n(e))),M8,z8,O8,So("signatures",(e,t,n)=>t(...n(e))),D8,N8,U8,So("resolved",(e,t)=>t(e))]);async function M8(e){if(ys(e)&&e.message.refBlock==null){const t=await ie().get("accessNode.api"),n=await ie.first(["sdk.transport","sdk.send"],p0);V(n,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),e.message.refBlock=(await n(gI([jD()]),{config:ie,response:E0,Buffer:je.Buffer,ix:b0},{node:t}).then(Gl)).id}return e}async function z8(e){if(ys(e)){var t=Object.values(e.accounts).find(n=>n.role.proposer);if(V(t!==void 0,"Transactions require a proposer"),t&&t.sequenceNum==null){const n=await ie().get("accessNode.api"),r=await ie.first(["sdk.transport","sdk.send"],p0);V(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),e.accounts[t.tempId].sequenceNum=await r(await gI([MD(t.addr)]),{config:ie,response:E0,Buffer:je.Buffer,ix:b0},{node:n}).then(Gl).then(i=>i.keys).then(i=>i.find(s=>s.index===t.keyId)).then(i=>i.sequenceNumber)}}return e}function CI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){const[i,s]=t;return CI((o,a)=>{let{Ok:c,Bad:l}=a;return i?c(o):l(o,s)})}const[r]=t;return i=>r(i,{Ok:jn,Bad:y0})}class TI extends Error{constructor(){super("The current transport does not support subscriptions.  If you have provided a custom transport (e.g. via `sdk.transport` configuration), ensure that it implements the subscribe method."),this.name="SubscriptionsNotSupportedError"}}async function kI(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};V(e.send==null||e.transport==null,'SDK Transport Error: Cannot provide both "transport" and legacy "send" options.');const t=e.transport||e.send||await ie().first(["sdk.transport","sdk.send"],SN);return H8(t)?t:{send:t,subscribe:()=>{throw new TI}}}function H8(e){return e.send!==void 0&&e.subscribe!==void 0&&typeof e.send=="function"&&typeof e.subscribe=="function"}const Yf=async function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await kI(t),r=n.send.bind(n);CI(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21");const i=await ie.first(["sdk.resolve"],t.resolve||j8);return t.node=t.node||await ie().get("accessNode.api"),Array.isArray(e)&&(e=Kt(Wf(),e)),r(await i(e),{config:ie,response:E0,ix:b0,Buffer:je.Buffer},t)};function q8(e){let{topic:t,args:n,onData:r,onError:i}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};async function o(){let c,l;try{c=await kI(s),l=(s==null?void 0:s.node)||await ie().get("accessNode.api"),V(!!l,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.')}catch(u){i(u instanceof Error?u:new Error(String(u)));return}return c.subscribe({topic:t,args:n,onData:r,onError:i},{node:l,...s})}let a=o();return{unsubscribe:()=>{a.then(c=>{var l;return(l=c==null?void 0:c.unsubscribe)==null?void 0:l.call(c)})}}}function V8(e){let{topic:t,args:n,onData:r,onError:i}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=q8({topic:t,args:n,onData:a=>{Gl(a).then(r).catch(c=>{var l;i(new Error(`Failed to decode response: ${c.message}`)),(l=o==null?void 0:o.unsubscribe)==null||l.call(o)})},onError:i},s);return o}async function Xf(e){const t=await ie().where(/^decoder\./),n=Object.entries(t).map(r=>{let[i,s]=r;return i=`/${i.replace(/^decoder\./,"")}$/`,[i,s]});return Gl(e,Object.fromEntries(n))}function G8(e){return pI("ix.validators",t=>Array.isArray(t)?[...t,e]:[e])}function W8(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Kt([t=>(t.block.isSealed=e,t),G8(t=>{if(t.block.id)throw new Error("Unable to specify both block finality and block id.");if(t.block.height)throw new Error("Unable to specify both block finality and block height.");return t})])}function K8(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Kt(e.map(t=>Kf(t,{role:bl.AUTHORIZER})))}function Q8(e){return Kt([cI,t=>(t.transaction.id=e,jn(t))])}function Y8(){return Kt([dI,e=>jn(e)])}function RI(e){return t=>(t.message.computeLimit=e,t)}function $I(e){return Kt(e.map(sI))}function OI(e,t){return{value:e,xform:t}}function X8(e){return Kf(e,{role:bl.PROPOSER})}function J8(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)||(e=[e]),Kt(e.map(t=>Kf(t,{role:bl.PAYER})))}function Z8(){return Kt([oI,v0("ix.cadence",Kx(...arguments))])}const e4=[],t4=null;function n4(){return Kt([aI,v0("ix.cadence",Kx(...arguments)),e=>(e.message.refBlock=e.message.refBlock||t4,e.authorizations=e.authorizations||e4,jn(e))])}var PI={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Xt,function(){return n={418:function(i,s){(function(o,a){for(var c in a)o[c]=a[c]})(s,function(o){var a={};function c(l){if(a[l])return a[l].exports;var u=a[l]={i:l,l:!1,exports:{}};return o[l].call(u.exports,u,u.exports,c),u.l=!0,u.exports}return c.m=o,c.c=a,c.i=function(l){return l},c.d=function(l,u,d){c.o(l,u)||Object.defineProperty(l,u,{configurable:!1,enumerable:!0,get:d})},c.n=function(l){var u=l&&l.__esModule?function(){return l.default}:function(){return l};return c.d(u,"a",u),u},c.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},c.p="",c(c.s=1)}([function(o,a,c){Object.defineProperty(a,"__esModule",{value:!0});var l=c(3),u=function(){function d(f,h){f===void 0&&(f={}),h===void 0&&(h={splitValues:!1});var p,g=this;this.headersMap={},f&&(typeof Headers<"u"&&f instanceof Headers?l.getHeaderKeys(f).forEach(function(v){l.getHeaderValues(f,v).forEach(function(m){h.splitValues?g.append(v,l.splitHeaderValue(m)):g.append(v,m)})}):typeof(p=f)=="object"&&typeof p.headersMap=="object"&&typeof p.forEach=="function"?f.forEach(function(v,m){g.append(v,m)}):typeof Map<"u"&&f instanceof Map?f.forEach(function(v,m){g.append(m,v)}):typeof f=="string"?this.appendFromString(f):typeof f=="object"&&Object.getOwnPropertyNames(f).forEach(function(v){var m=f[v];Array.isArray(m)?m.forEach(function(w){g.append(v,w)}):g.append(v,m)}))}return d.prototype.appendFromString=function(f){for(var h=f.split(`\r
`),p=0;p<h.length;p++){var g=h[p],v=g.indexOf(":");if(v>0){var m=g.substring(0,v).trim(),w=g.substring(v+1).trim();this.append(m,w)}}},d.prototype.delete=function(f,h){var p=l.normalizeName(f);if(h===void 0)delete this.headersMap[p];else{var g=this.headersMap[p];if(g){var v=g.indexOf(h);v>=0&&g.splice(v,1),g.length===0&&delete this.headersMap[p]}}},d.prototype.append=function(f,h){var p=this,g=l.normalizeName(f);Array.isArray(this.headersMap[g])||(this.headersMap[g]=[]),Array.isArray(h)?h.forEach(function(v){p.headersMap[g].push(l.normalizeValue(v))}):this.headersMap[g].push(l.normalizeValue(h))},d.prototype.set=function(f,h){var p=l.normalizeName(f);if(Array.isArray(h)){var g=[];h.forEach(function(v){g.push(l.normalizeValue(v))}),this.headersMap[p]=g}else this.headersMap[p]=[l.normalizeValue(h)]},d.prototype.has=function(f,h){var p=this.headersMap[l.normalizeName(f)];if(!Array.isArray(p))return!1;if(h!==void 0){var g=l.normalizeValue(h);return p.indexOf(g)>=0}return!0},d.prototype.get=function(f){var h=this.headersMap[l.normalizeName(f)];return h!==void 0?h.concat():[]},d.prototype.forEach=function(f){var h=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(p){f(p,h.headersMap[p])},this)},d.prototype.toHeaders=function(){if(typeof Headers<"u"){var f=new Headers;return this.forEach(function(h,p){p.forEach(function(g){f.append(h,g)})}),f}throw new Error("Headers class is not defined")},d}();a.BrowserHeaders=u},function(o,a,c){Object.defineProperty(a,"__esModule",{value:!0});var l=c(0);a.BrowserHeaders=l.BrowserHeaders},function(o,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.iterateHeaders=function(l,u){for(var d=l[Symbol.iterator](),f=d.next();!f.done;)u(f.value[0]),f=d.next()},a.iterateHeadersKeys=function(l,u){for(var d=l.keys(),f=d.next();!f.done;)u(f.value),f=d.next()}},function(o,a,c){Object.defineProperty(a,"__esModule",{value:!0});var l=c(2);a.normalizeName=function(u){if(typeof u!="string"&&(u=String(u)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(u))throw new TypeError("Invalid character in header field name");return u.toLowerCase()},a.normalizeValue=function(u){return typeof u!="string"&&(u=String(u)),u},a.getHeaderValues=function(u,d){var f=u;if(f instanceof Headers&&f.getAll)return f.getAll(d);var h=f.get(d);return h&&typeof h=="string"?[h]:h},a.getHeaderKeys=function(u){var d=u,f={},h=[];return d.keys?l.iterateHeadersKeys(d,function(p){f[p]||(f[p]=!0,h.push(p))}):d.forEach?d.forEach(function(p,g){f[g]||(f[g]=!0,h.push(g))}):l.iterateHeaders(d,function(p){var g=p[0];f[g]||(f[g]=!0,h.push(g))}),h},a.splitHeaderValue=function(u){var d=[];return u.split(", ").forEach(function(f){f.split(",").forEach(function(h){d.push(h)})}),d}}]))},617:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.ChunkParser=s.ChunkType=s.encodeASCII=s.decodeASCII=void 0;var a,c=o(65);function l(v){return(m=v)===9||m===10||m===13||v>=32&&v<=126;var m}function u(v){for(var m=0;m!==v.length;++m)if(!l(v[m]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(v))}function d(v){return(128&v.getUint8(0))==128}function f(v){return v.getUint32(1,!1)}function h(v,m,w){return v.byteLength-m>=w}function p(v,m,w){if(v.slice)return v.slice(m,w);var E=v.length;w!==void 0&&(E=w);for(var A=new Uint8Array(E-m),T=0,D=m;D<E;D++)A[T++]=v[D];return A}s.decodeASCII=u,s.encodeASCII=function(v){for(var m=new Uint8Array(v.length),w=0;w!==v.length;++w){var E=v.charCodeAt(w);if(!l(E))throw new Error("Metadata contains invalid ASCII");m[w]=E}return m},function(v){v[v.MESSAGE=1]="MESSAGE",v[v.TRAILERS=2]="TRAILERS"}(a=s.ChunkType||(s.ChunkType={}));var g=function(){function v(){this.buffer=null,this.position=0}return v.prototype.parse=function(m,w){if(m.length===0&&w)return[];var E,A=[];if(this.buffer==null)this.buffer=m,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=m,this.position=0;else{var T=this.buffer.byteLength-this.position,D=new Uint8Array(T+m.byteLength),j=p(this.buffer,this.position);D.set(j,0);var L=new Uint8Array(m);D.set(L,T),this.buffer=D,this.position=0}for(;;){if(!h(this.buffer,this.position,5))return A;var C=p(this.buffer,this.position,this.position+5),U=new DataView(C.buffer,C.byteOffset,C.byteLength),B=f(U);if(!h(this.buffer,this.position,5+B))return A;var F=p(this.buffer,this.position+5,this.position+5+B);if(this.position+=5+B,d(U))return A.push({chunkType:a.TRAILERS,trailers:(E=F,new c.Metadata(u(E)))}),A;A.push({chunkType:a.MESSAGE,data:F})}},v}();s.ChunkParser=g},8:function(i,s){var o;Object.defineProperty(s,"__esModule",{value:!0}),s.httpStatusToCode=s.Code=void 0,function(a){a[a.OK=0]="OK",a[a.Canceled=1]="Canceled",a[a.Unknown=2]="Unknown",a[a.InvalidArgument=3]="InvalidArgument",a[a.DeadlineExceeded=4]="DeadlineExceeded",a[a.NotFound=5]="NotFound",a[a.AlreadyExists=6]="AlreadyExists",a[a.PermissionDenied=7]="PermissionDenied",a[a.ResourceExhausted=8]="ResourceExhausted",a[a.FailedPrecondition=9]="FailedPrecondition",a[a.Aborted=10]="Aborted",a[a.OutOfRange=11]="OutOfRange",a[a.Unimplemented=12]="Unimplemented",a[a.Internal=13]="Internal",a[a.Unavailable=14]="Unavailable",a[a.DataLoss=15]="DataLoss",a[a.Unauthenticated=16]="Unauthenticated"}(o=s.Code||(s.Code={})),s.httpStatusToCode=function(a){switch(a){case 0:return o.Internal;case 200:return o.OK;case 400:return o.InvalidArgument;case 401:return o.Unauthenticated;case 403:return o.PermissionDenied;case 404:return o.NotFound;case 409:return o.Aborted;case 412:return o.FailedPrecondition;case 429:return o.ResourceExhausted;case 499:return o.Canceled;case 500:return o.Unknown;case 501:return o.Unimplemented;case 503:return o.Unavailable;case 504:return o.DeadlineExceeded;default:return o.Unknown}}},934:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.client=void 0;var a=o(65),c=o(617),l=o(8),u=o(346),d=o(57),f=o(882);s.client=function(g,v){return new h(g,v)};var h=function(){function g(v,m){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new c.ChunkParser,this.methodDefinition=v,this.props=m,this.createTransport()}return g.prototype.createTransport=function(){var v=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,m={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:v,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(m):this.transport=d.makeDefaultTransport(m)},g.prototype.onTransportHeaders=function(v,m){if(this.props.debug&&u.debug("onHeaders",v,m),this.closed)this.props.debug&&u.debug("grpc.onHeaders received after request was closed - ignoring");else if(m!==0){this.responseHeaders=v,this.props.debug&&u.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var w=p(v);this.props.debug&&u.debug("onHeaders.gRPCStatus",w);var E=w&&w>=0?w:l.httpStatusToCode(m);this.props.debug&&u.debug("onHeaders.code",E);var A=v.get("grpc-message")||[];if(this.props.debug&&u.debug("onHeaders.gRPCMessage",A),this.rawOnHeaders(v),E!==l.Code.OK){var T=this.decodeGRPCStatus(A[0]);this.rawOnError(E,T,v)}}},g.prototype.onTransportChunk=function(v){var m=this;if(this.closed)this.props.debug&&u.debug("grpc.onChunk received after request was closed - ignoring");else{var w=[];try{w=this.parser.parse(v)}catch(E){return this.props.debug&&u.debug("onChunk.parsing error",E,E.message),void this.rawOnError(l.Code.Internal,"parsing error: "+E.message)}w.forEach(function(E){if(E.chunkType===c.ChunkType.MESSAGE){var A=m.methodDefinition.responseType.deserializeBinary(E.data);m.rawOnMessage(A)}else E.chunkType===c.ChunkType.TRAILERS&&(m.responseHeaders?(m.responseTrailers=new a.Metadata(E.trailers),m.props.debug&&u.debug("onChunk.trailers",m.responseTrailers)):(m.responseHeaders=new a.Metadata(E.trailers),m.rawOnHeaders(m.responseHeaders)))})}},g.prototype.onTransportEnd=function(){if(this.props.debug&&u.debug("grpc.onEnd"),this.closed)this.props.debug&&u.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var v=p(this.responseTrailers);if(v!==null){var m=this.responseTrailers.get("grpc-message"),w=this.decodeGRPCStatus(m[0]);this.rawOnEnd(v,w,this.responseTrailers)}else this.rawOnError(l.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(l.Code.Unknown,"Response closed without headers");var E=p(this.responseHeaders),A=this.responseHeaders.get("grpc-message");if(this.props.debug&&u.debug("grpc.headers only response ",E,A),E===null)return void this.rawOnEnd(l.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var T=this.decodeGRPCStatus(A[0]);this.rawOnEnd(E,T,this.responseHeaders)}},g.prototype.decodeGRPCStatus=function(v){if(!v)return"";try{return decodeURIComponent(v)}catch{return v}},g.prototype.rawOnEnd=function(v,m,w){var E=this;this.props.debug&&u.debug("rawOnEnd",v,m,w),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(A){if(!E.closed)try{A(v,m,w)}catch(T){setTimeout(function(){throw T},0)}}))},g.prototype.rawOnHeaders=function(v){this.props.debug&&u.debug("rawOnHeaders",v),this.completed||this.onHeadersCallbacks.forEach(function(m){try{m(v)}catch(w){setTimeout(function(){throw w},0)}})},g.prototype.rawOnError=function(v,m,w){var E=this;w===void 0&&(w=new a.Metadata),this.props.debug&&u.debug("rawOnError",v,m),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(A){if(!E.closed)try{A(v,m,w)}catch(T){setTimeout(function(){throw T},0)}}))},g.prototype.rawOnMessage=function(v){var m=this;this.props.debug&&u.debug("rawOnMessage",v.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(w){if(!m.closed)try{w(v)}catch(E){setTimeout(function(){throw E},0)}})},g.prototype.onHeaders=function(v){this.onHeadersCallbacks.push(v)},g.prototype.onMessage=function(v){this.onMessageCallbacks.push(v)},g.prototype.onEnd=function(v){this.onEndCallbacks.push(v)},g.prototype.start=function(v){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var m=new a.Metadata(v||{});m.set("content-type","application/grpc-web+proto"),m.set("x-grpc-web","1"),this.transport.start(m)},g.prototype.send=function(v){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var m=f.frameRequest(v);this.transport.sendMessage(m)},g.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},g.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&u.debug("request.abort aborting request"),this.transport.cancel()},g}();function p(g){var v=g.get("grpc-status")||[];if(v.length>0)try{var m=v[0];return parseInt(m,10)}catch{return null}return null}},346:function(i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.debug=void 0,s.debug=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];console.debug?console.debug.apply(null,o):console.log.apply(null,o)}},607:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.grpc=void 0;var a,c=o(418),l=o(57),u=o(229),d=o(540),f=o(210),h=o(859),p=o(8),g=o(938),v=o(35),m=o(934);(a=s.grpc||(s.grpc={})).setDefaultTransport=l.setDefaultTransportFactory,a.CrossBrowserHttpTransport=h.CrossBrowserHttpTransport,a.FetchReadableStreamTransport=u.FetchReadableStreamTransport,a.XhrTransport=f.XhrTransport,a.WebsocketTransport=d.WebsocketTransport,a.Code=p.Code,a.Metadata=c.BrowserHeaders,a.client=function(w,E){return m.client(w,E)},a.invoke=g.invoke,a.unary=v.unary},938:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.invoke=void 0;var a=o(934);s.invoke=function(c,l){if(c.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var u=a.client(c,{host:l.host,transport:l.transport,debug:l.debug});return l.onHeaders&&u.onHeaders(l.onHeaders),l.onMessage&&u.onMessage(l.onMessage),l.onEnd&&u.onEnd(l.onEnd),u.start(l.metadata),u.send(l.request),u.finishSend(),{close:function(){u.close()}}}},65:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var a=o(418);Object.defineProperty(s,"Metadata",{enumerable:!0,get:function(){return a.BrowserHeaders}})},57:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.makeDefaultTransport=s.setDefaultTransportFactory=void 0;var a=o(859),c=function(l){return a.CrossBrowserHttpTransport({withCredentials:!1})(l)};s.setDefaultTransportFactory=function(l){c=l},s.makeDefaultTransport=function(l){return c(l)}},229:function(i,s,o){var a=this&&this.__assign||function(){return(a=Object.assign||function(d){for(var f,h=1,p=arguments.length;h<p;h++)for(var g in f=arguments[h])Object.prototype.hasOwnProperty.call(f,g)&&(d[g]=f[g]);return d}).apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.detectFetchSupport=s.FetchReadableStreamTransport=void 0;var c=o(65),l=o(346);s.FetchReadableStreamTransport=function(d){return function(f){return function(h,p){return h.debug&&l.debug("fetchRequest",h),new u(h,p)}(f,d)}};var u=function(){function d(f,h){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=f,this.init=h}return d.prototype.pump=function(f,h){var p=this;if(this.reader=f,this.cancelled)return this.options.debug&&l.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(g){p.options.debug&&l.debug("Fetch.pump.reader.cancel exception",g)});this.reader.read().then(function(g){if(g.done)return p.options.onEnd(),h;p.options.onChunk(g.value),p.pump(p.reader,h)}).catch(function(g){p.cancelled?p.options.debug&&l.debug("Fetch.catch - request cancelled"):(p.cancelled=!0,p.options.debug&&l.debug("Fetch.catch",g.message),p.options.onEnd(g))})},d.prototype.send=function(f){var h=this;fetch(this.options.url,a(a({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:f,signal:this.controller&&this.controller.signal})).then(function(p){if(h.options.debug&&l.debug("Fetch.response",p),h.options.onHeaders(new c.Metadata(p.headers),p.status),!p.body)return p;h.pump(p.body.getReader(),p)}).catch(function(p){h.cancelled?h.options.debug&&l.debug("Fetch.catch - request cancelled"):(h.cancelled=!0,h.options.debug&&l.debug("Fetch.catch",p.message),h.options.onEnd(p))})},d.prototype.sendMessage=function(f){this.send(f)},d.prototype.finishSend=function(){},d.prototype.start=function(f){this.metadata=f},d.prototype.cancel=function(){var f=this;this.cancelled?this.options.debug&&l.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&l.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&l.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&l.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(h){f.options.debug&&l.debug("Fetch.cancel.reader.cancel exception",h)})):this.options.debug&&l.debug("Fetch.cancel before reader"))},d}();s.detectFetchSupport=function(){return typeof Response<"u"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.CrossBrowserHttpTransport=void 0;var a=o(229),c=o(210);s.CrossBrowserHttpTransport=function(l){if(a.detectFetchSupport()){var u={credentials:l.withCredentials?"include":"same-origin"};return a.FetchReadableStreamTransport(u)}return c.XhrTransport({withCredentials:l.withCredentials})}},210:function(i,s,o){var a,c=this&&this.__extends||(a=function(v,m){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,E){w.__proto__=E}||function(w,E){for(var A in E)Object.prototype.hasOwnProperty.call(E,A)&&(w[A]=E[A])})(v,m)},function(v,m){function w(){this.constructor=v}a(v,m),v.prototype=m===null?Object.create(m):(w.prototype=m.prototype,new w)});Object.defineProperty(s,"__esModule",{value:!0}),s.stringToArrayBuffer=s.MozChunkedArrayBufferXHR=s.XHR=s.XhrTransport=void 0;var l=o(65),u=o(346),d=o(849);s.XhrTransport=function(v){return function(m){if(d.detectMozXHRSupport())return new h(m,v);if(d.detectXHROverrideMimeTypeSupport())return new f(m,v);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var f=function(){function v(m,w){this.options=m,this.init=w}return v.prototype.onProgressEvent=function(){this.options.debug&&u.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var m=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var w=g(m);this.options.onChunk(w)},v.prototype.onLoadEvent=function(){this.options.debug&&u.debug("XHR.onLoadEvent"),this.options.onEnd()},v.prototype.onStateChange=function(){this.options.debug&&u.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new l.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},v.prototype.sendMessage=function(m){this.xhr.send(m)},v.prototype.finishSend=function(){},v.prototype.start=function(m){var w=this;this.metadata=m;var E=new XMLHttpRequest;this.xhr=E,E.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function(A,T){E.setRequestHeader(A,T.join(", "))}),E.withCredentials=!!this.init.withCredentials,E.addEventListener("readystatechange",this.onStateChange.bind(this)),E.addEventListener("progress",this.onProgressEvent.bind(this)),E.addEventListener("loadend",this.onLoadEvent.bind(this)),E.addEventListener("error",function(A){w.options.debug&&u.debug("XHR.error",A),w.options.onEnd(A.error)})},v.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},v.prototype.cancel=function(){this.options.debug&&u.debug("XHR.abort"),this.xhr.abort()},v}();s.XHR=f;var h=function(v){function m(){return v!==null&&v.apply(this,arguments)||this}return c(m,v),m.prototype.configureXhr=function(){this.options.debug&&u.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},m.prototype.onProgressEvent=function(){var w=this.xhr.response;this.options.debug&&u.debug("MozXHR.onProgressEvent: ",new Uint8Array(w)),this.options.onChunk(new Uint8Array(w))},m}(f);function p(v,m){var w=v.charCodeAt(m);if(w>=55296&&w<=56319){var E=v.charCodeAt(m+1);E>=56320&&E<=57343&&(w=65536+(w-55296<<10)+(E-56320))}return w}function g(v){for(var m=new Uint8Array(v.length),w=0,E=0;E<v.length;E++){var A=String.prototype.codePointAt?v.codePointAt(E):p(v,E);m[w++]=255&A}return m}s.MozChunkedArrayBufferXHR=h,s.stringToArrayBuffer=g},849:function(i,s){var o;function a(){if(o!==void 0)return o;if(XMLHttpRequest){o=new XMLHttpRequest;try{o.open("GET","https://localhost")}catch{}}return o}function c(l){var u=a();if(!u)return!1;try{return u.responseType=l,u.responseType===l}catch{}return!1}Object.defineProperty(s,"__esModule",{value:!0}),s.detectXHROverrideMimeTypeSupport=s.detectMozXHRSupport=s.xhrSupportsResponseType=void 0,s.xhrSupportsResponseType=c,s.detectMozXHRSupport=function(){return typeof XMLHttpRequest<"u"&&c("moz-chunked-arraybuffer")},s.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.WebsocketTransport=void 0;var a,c=o(346),l=o(617);(function(d){d[d.FINISH_SEND=1]="FINISH_SEND"})(a||(a={}));var u=new Uint8Array([1]);s.WebsocketTransport=function(){return function(d){return function(f){f.debug&&c.debug("websocketRequest",f);var h,p=function(m){if(m.substr(0,8)==="https://")return"wss://"+m.substr(8);if(m.substr(0,7)==="http://")return"ws://"+m.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(f.url),g=[];function v(m){if(m===a.FINISH_SEND)h.send(u);else{var w=m,E=new Int8Array(w.byteLength+1);E.set(new Uint8Array([0])),E.set(w,1),h.send(E)}}return{sendMessage:function(m){h&&h.readyState!==h.CONNECTING?v(m):g.push(m)},finishSend:function(){h&&h.readyState!==h.CONNECTING?v(a.FINISH_SEND):g.push(a.FINISH_SEND)},start:function(m){(h=new WebSocket(p,["grpc-websockets"])).binaryType="arraybuffer",h.onopen=function(){var w;f.debug&&c.debug("websocketRequest.onopen"),h.send((w="",m.forEach(function(E,A){w+=E+": "+A.join(", ")+`\r
`}),l.encodeASCII(w))),g.forEach(function(E){v(E)})},h.onclose=function(w){f.debug&&c.debug("websocketRequest.onclose",w),f.onEnd()},h.onerror=function(w){f.debug&&c.debug("websocketRequest.onerror",w)},h.onmessage=function(w){f.onChunk(new Uint8Array(w.data))}},cancel:function(){f.debug&&c.debug("websocket.abort"),h.close()}}}(d)}}},35:function(i,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.unary=void 0;var a=o(65),c=o(934);s.unary=function(l,u){if(l.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(l.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var d=null,f=null,h=c.client(l,{host:u.host,transport:u.transport,debug:u.debug});return h.onHeaders(function(p){d=p}),h.onMessage(function(p){f=p}),h.onEnd(function(p,g,v){u.onEnd({status:p,statusMessage:g,headers:d||new a.Metadata,message:f,trailers:v})}),h.start(u.metadata),h.send(u.request),h.finishSend(),{close:function(){h.close()}}}},882:function(i,s){Object.defineProperty(s,"__esModule",{value:!0}),s.frameRequest=void 0,s.frameRequest=function(o){var a=o.serializeBinary(),c=new ArrayBuffer(a.byteLength+5);return new DataView(c,1,4).setUint32(0,a.length,!1),new Uint8Array(c,5).set(a),new Uint8Array(c)}}},r={},function i(s){if(r[s])return r[s].exports;var o=r[s]={exports:{}};return n[s].call(o.exports,o,o.exports,i),o.exports}(607);var n,r})})(PI);var r4=PI.exports,Z1=/^[0-9]+$/,i4=function(t,n){var r=Z1.test(t),i=Z1.test(n);return r&&i&&(t=+t,n=+n),t===n?0:r&&!i?-1:i&&!r?1:t<n?-1:1},ev=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,s4=function(t,n){if(typeof t!="string"||typeof n!="string")throw new Error("Invalid input");var r=t.match(ev),i=n.match(ev);if(!r||!i)throw new Error("Invalid input");for(var s=1;s<=3;s++){if(parseInt(r[s])>parseInt(i[s]))return 1;if(parseInt(r[s])<parseInt(i[s]))return-1}if(r[4]&&i[4])for(var o=(r[4]||"").split("."),a=(i[4]||"").split("."),c=0;c<Math.max(o.length,a.length);c++){if(o[c]===void 0)return-1;if(a[c]===void 0)return 1;var l=i4(o[c],a[c]);if(l!==0)return l}return 0};const x0="1.20.0",Jf=e=>t=>typeof t===e,ci=e=>e!=null,o4=Jf("object"),va=Jf("string"),NI=Jf("function"),a4=Jf("number");function DI(e){return NI(e)?e(OI,lD):[]}async function UI(e,t){V(ci(t),`${e}(opts) -- opts is required`),V(o4(t),`${e}(opts) -- opts must be an object`),V(!(t.cadence&&t.template),`${e}({ template, cadence }) -- cannot pass both cadence and template`),V(ci(t.cadence||(t==null?void 0:t.template)),`${e}({ cadence }) -- cadence is required`),V(va(t.cadence)||(t==null?void 0:t.template),`${e}({ cadence }) -- cadence must be a string`),V(await ie().get("accessNode.api"),`${e}(opts) -- Required value for "accessNode.api" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration`)}async function c4(e){return UI("mutate",e)}async function l4(e){return UI("query",e)}async function tv(e){let{url:t}=e;V(typeof t<"u","retrieve({ url }) -- url must be defined");let n;try{n=await Sx(t)}catch{throw new Error("httpDocumentResolver Error: Failed to retrieve document.")}return n.ok?await n.json():null}const nv=new Map([["http",tv],["https",tv]]);async function u4(e){let{url:t}=e;V(typeof t<"u","retrieve({ url }) -- url must be defined"),V(typeof t=="string","retrieve({ url }) -- url must be a string");const n=await ie().where(/^document\.resolver\./);Object.keys(n).map(a=>{const c=n[a],l=a.replace(/^document\.resolver\./,"");nv.set(l,c)});const r=/^(.*):\/\/([A-Za-z0-9\-\.]+)(:[0-9]+)?(.*)$/.exec(t);V(r,"Failed to parse URL");const i=r[1];V(r,"Failed to parse URL protocol");const s=nv.get(i);return V(s,`No resolver found for protcol=${i}`),await s({url:t})}async function d4(e){var i;let{network:t,template:n}=e;return V(n.f_version==="1.0.0","deriveCadenceByNetwork100({ template }) -- template must be version 1.0.0"),Object.keys((i=n==null?void 0:n.data)==null?void 0:i.dependencies).map(s=>{var l,u;const o=Object.values((u=(l=n==null?void 0:n.data)==null?void 0:l.dependencies)==null?void 0:u[s]);V(o!==void 0,`deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ${s}`),V(o.length>0,`deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ${s}`);const a=o[0],c=a==null?void 0:a[t];return V(c,`deriveCadenceByNetwork100 -- Could not find ${t} network information for dependency: ${s}`),[s,c==null?void 0:c.address]}).reduce((s,o)=>{let[a,c]=o;const l=new RegExp("(\\b"+a+"\\b)","g");return s.replace(l,c)},n.data.cadence)}function f4(e){let{cadence:t,networkDependencies:n}=e;return Object.keys(n).reduce((r,i)=>{const s=n[i],o=new RegExp(`import "\\b${i}\\b"`,"g");return r.replace(o,`import ${i} from ${s}`)},t)}async function h4(e){var i,s,o,a,c,l;let{network:t,template:n}=e;V(n.f_version==="1.1.0","deriveCadenceByNetwork110({ template }) -- template must be version 1.0.0");const r={};return(i=n==null?void 0:n.data)==null||i.dependencies.forEach(u=>{u.contracts.forEach(d=>{const f=d.contract;d.networks.forEach(h=>{h.network===t&&(r[f]=h.address)}),V(r[f]!==void 0,`deriveCadenceByNetwork110 -- Could not find contracts Network Address: ${t} ${f}`)})}),V(Object.keys(r).length===((s=n==null?void 0:n.data)==null?void 0:s.dependencies.length),`deriveCadenceByNetwork110 -- Could not find contracts for import dependencies: ${r}`),V(Object.keys(r).length===Object.values(r).length,`deriveCadenceByNetwork110 -- Could not find all addresses for network ${t} dependencies:  ${r}`),V((a=(o=n==null?void 0:n.data)==null?void 0:o.cadence)==null?void 0:a.body,`no cadence found -- Could not replace import dependencies: ${r}`),f4({cadence:(l=(c=n==null?void 0:n.data)==null?void 0:c.cadence)==null?void 0:l.body,networkDependencies:r})}async function p4(e){let{network:t,template:n}=e;switch(V(t!=null,"deriveCadenceByNetwork({ network }) -- network must be defined"),V(typeof t=="string","deriveCadenceByNetwork({ network }) -- network must be a string"),V(n!=null,"deriveCadenceByNetwork({ template }) -- template must be defined"),V(typeof n=="object","deriveCadenceByNetwork({ template }) -- template must be an object"),V(n.f_type==="InteractionTemplate","deriveCadenceByNetwork({ template }) -- template must be an InteractionTemplate"),n.f_version){case"1.1.0":return await h4({network:t,template:n});case"1.0.0":return await d4({network:t,template:n});default:throw new Error("deriveCadenceByNetwork Error: Unsupported template version")}}async function g4(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(await Yf([Y8()],e).then(Xf)).chainId}let xo={},rv=!1;async function fo(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=await ie.get("flow.network"),n=await ie.get("env");n&&!rv&&(we.deprecate({pkg:"FCL",subject:'Using the "env" configuration key for specifying the flow network',message:"Configuring to specify flow network is no longer required",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0001-deprecate-env-config-key"}),rv=!0);const r=e.node||await ie.get("accessNode.api");if(!r){if(t)return t;if(n)return n;throw new Error('Either the "accessNode.api" config key or opts.node must be set')}if(xo[r])try{return await xo[r]}catch{}xo[r]||(xo[r]=g4(e).catch(i=>{throw xo[r]=null,i}));try{return await xo[r]}catch(i){if(t)return t;if(n)return n;throw new Error(`Error getting chainId from access node - are you using the correct access node endpoint.  If running locally, is your emulator up-to-date? ${i.message}`)}}function m4(){return ie.subscribe(()=>{fo({enableRequestLogging:!1}).catch(()=>{})})}async function BI(e){va(e==null?void 0:e.template)&&(e.template=await u4({url:e==null?void 0:e.template}));const t=e.cadence||await p4({template:e.template,network:await fo(e)});return e.cadence=t,e}async function y4(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return await l4(e),e=await BI(e),Yf([Z8(e.cadence),$I(DI(e.args||[])),W8(e.isSealed??!1),e.limit&&typeof e.limit=="number"&&RI(e.limit)])}async function Vs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return y4(e).then(Xf)}const On={"HTTP/RPC":"HTTP/RPC","HTTP/POST":"HTTP/POST","IFRAME/RPC":"IFRAME/RPC","POP/RPC":"POP/RPC","TAB/RPC":"TAB/RPC","EXT/RPC":"EXT/RPC","DEEPLINK/RPC":"DEEPLINK/RPC"},w4=globalThis.URL;let I0=class extends w4{constructor(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];super(t,n,...i)}};const Fa={f_type:"Service",f_vsn:"1.0.0"},LI={f_type:"Identity",f_vsn:"1.0.0"},v4={f_type:"USER",f_vsn:"1.0.0"},b4={f_type:"PollingResponse",f_vsn:"1.0.0"},E4={f_type:"CompositeSignature",f_vsn:"1.0.0"},_4="USER_SIGNATURE",S4=e=>{if(e.appIdentifier){const{appIdentifier:t,address:n,nonce:r,signatures:i}=e;return V(va(t),"verifyAccountProof({ appIdentifier }) -- appIdentifier must be a string"),V(va(n)&&ot(n).length===16,"verifyAccountProof({ address }) -- address must be a valid address"),V(/^[0-9a-f]+$/i.test(r),"nonce must be a hex string"),V(Array.isArray(i)&&i.every((s,o,a)=>s.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),V(i.map(s=>s.addr).every((s,o,a)=>s===a[0]),"User signatures to be verified must be from a single account address"),!0}else{const{message:t,address:n,compSigs:r}=e;return V(/^[0-9a-f]+$/i.test(t),"Signed message must be a hex string"),V(va(n)&&ot(n).length===16,"verifyUserSignatures({ address }) -- address must be a valid address"),V(Array.isArray(r)&&r.every((i,s,o)=>i.f_type==="CompositeSignature"),"Must include an Array of CompositeSignatures to verify"),V(r.map(i=>i.addr).every((i,s,o)=>i===o[0]),"User signatures to be verified must be from a single account address"),!0}},x4=async(e,t)=>{const n="verifyUserSignatures";let r=await fo(t);const i={testnet:"0x74daa6f9c7ef24b1",mainnet:"0xb4b82a1c9d21d284",previewnet:"0x40b5b8b2ce81ea4a"},s=t.fclCryptoContract||i[r];return V(s,`${n}({ fclCryptoContract }) -- FCLCrypto contract address is unknown for network: ${r}. Please manually specify the FCLCrypto contract address.`),`
      import FCLCrypto from ${s}

      access(all) fun main(
          address: Address, 
          message: String, 
          keyIndices: [Int], 
          signatures: [String]
      ): Bool {
        return FCLCrypto.${n}(address: address, message: message, keyIndices: keyIndices, signatures: signatures)
      }
    `};async function I4(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Jt(t[0].addr);S4({message:e,address:r,compSigs:t});let i=[],s=[];for(const o of t)i.push(o.signature),s.push(o.keyId.toString());return Vs({cadence:await x4(_4,n),args:(o,a)=>[o(r,a.Address),o(e,a.String),o(s,a.Array(a.Int)),o(i,a.Array(a.String))]})}we.deprecate({pkg:"FCL",subject:"fcl.verifyUserSignatures()",message:"Please use fcl.AppUtils.verifyUserSignatures()",callback:function(t,n){return I4(t,n)}});const A4=/\[Error Code: (\d+)\]/;class Zf extends Error{constructor(t,n){super(t),this.code=n,this.type=O1[n]}static fromErrorMessage(t){const n=t.match(A4),r=n?parseInt(n[1],10):void 0;return new Zf(t,r||O1.UNKNOWN_ERROR)}}async function iv(e){return Object.fromEntries(Object.entries(await ie().where(e)).map(t=>{let[n,r]=t;return[n.replace(e,""),r]}))}const FI=e=>e.status===5,as=e=>e.status>=4,eh=e=>e.status>=3,th=e=>e.status>=2,jI=e=>e.status>=1,C4=e=>e.status>=0,MI=(e,t)=>{if(e===t)return!0;if(typeof e!="object"||typeof t!="object"||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!MI(e[n],t[n]))return!1;return!0},tm=(e,t)=>!MI(e,t),cf=e=>{if(typeof e=="object"&&(e=e.transactionId),e==null)throw new Error("transactionId required");return e},zI=/^[0-9a-fA-F]{64}$/,cp="POLL",sv="TIMEOUT",T4=async e=>Yf([Q8(e)]).then(Xf),k4=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{[El]:async t=>{setTimeout(()=>t.sendSelf(sv),e.txNotFoundTimeout),t.sendSelf(cp)},[La]:(t,n)=>{t.subscribe(n.from),t.send(n.from,Kg,t.all())},[Xs]:(t,n)=>{t.unsubscribe(n.from)},[ix]:async(t,n)=>{n.reply(t.all())},[sv]:async t=>{Object.keys(t.all()).length===0&&t.fatalError(new Error(`TX status polling failed: no transaction was found within timeout interval (${e.txNotFoundTimeout}ms)`))},[cp]:async t=>{const n=()=>setTimeout(()=>t.sendSelf(cp),e.pollRate);let r;const i=t.all();try{r=await T4(t.self())}catch(s){const o=s instanceof bd&&s.statusCode===404,a=s.code===r4.grpc.Code.NotFound;return o||a?n():t.fatalError(s)}as(r)||n(),tm(i,r)&&t.broadcast(Kg,r),t.merge(r)}}},ov=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=>uo(k4(e),cf(t))};function ho(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{txNotFoundTimeout:12500,pollRate:1e3};if(!zI.test(cf(e)))throw new Error("Invalid transactionId");function n(){return sx(e,ov(t))}function r(s){return o0(cf(e),ov(t),s)}function i(s){return function(){const c=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).suppress||!1;return new Promise((l,u)=>{const d=r((f,h)=>{if((h||f.statusCode)&&!c){if(h!=null)u(h),d();else if(f.statusCode===1){const p=Zf.fromErrorMessage(f.errorMessage);u(p),d()}return}s(f)&&(l(f),d())})})}}return{snapshot:n,subscribe:r,onceFinalized:i(th),onceExecuted:i(eh),onceSealed:i(as)}}ho.isUnknown=C4;ho.isPending=jI;ho.isFinalized=th;ho.isExecuted=eh;ho.isSealed=as;ho.isExpired=FI;const R4="local",av=new Map;function Ei(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{txNotFoundTimeout:12500,pollRate:1e3};if(!zI.test(cf(e)))throw new Error("Invalid transactionId");function n(){let o=av.get(e);return o||(o=$4(e,t),av.set(e,o)),o}function r(){return Promise.resolve(n().value)}function i(o,a){const c=n(),{unsubscribe:l}=c.subscribe(o,a);return()=>l()}function s(o){return function(){const l=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{suppress:!1}).suppress||!1;return new Promise((u,d)=>{const f=i(h=>{if(h.statusCode===1){const p=Zf.fromErrorMessage(h.errorMessage);d(p),f()}else o(h)&&(u(h),f())},h=>{l||(d(h),f())})})}}return{snapshot:r,subscribe:i,onceFinalized:s(th),onceExecuted:s(eh),onceSealed:s(as)}}Ei.isUnknown=fI;Ei.isPending=jI;Ei.isFinalized=th;Ei.isExecuted=eh;Ei.isSealed=as;Ei.isExpired=FI;function $4(e,t){const n=new Set;let r={blockId:"",status:HO.UNKNOWN,statusCode:0,errorMessage:"",events:[],statusString:""};i().catch(c);async function i(){await fo()===R4?(console.warn("Events are not supported on the Flow emulator, falling back to legacy polling."),o()):s()}function s(){const l=V8({topic:lo.TRANSACTION_STATUSES,args:{transactionId:e},onData:u=>{tm(r,u)&&(r=u,a(u)),as(u)&&new Promise(d=>setTimeout(d,0)).then(()=>{as(u)&&l.unsubscribe()})},onError:u=>{u instanceof TI?(console.warn("Failed to subscribe to transaction status updates using real-time streaming (are you using the deprecated GRPC transport?), falling back to polling."),o()):c(u)}})}function o(){const l=ho(e,t).subscribe((u,d)=>{d?c(d):u&&tm(r,u)&&(r=u,a(u),as(u)&&new Promise(f=>setTimeout(f,0)).then(()=>{l()}))})}function a(l){for(const u of n)try{u.onData(l)}catch(d){console.error("Error in transaction observer",d)}}function c(l){for(const u of n)try{u.onError(l)}catch(d){console.error("Error in transaction observer",d)}}return{subscribe(l,u){const d={onData:l,onError:u||(()=>{})};return n.add(d),l(r),{unsubscribe:()=>n.delete(d)}},get value(){return r}}}const Io=()=>{throw new Error("Platform specific Core Strategies are not initialized")},O4={[On["EXT/RPC"]]:Io,[On["HTTP/POST"]]:Io,[On["IFRAME/RPC"]]:Io,[On["POP/RPC"]]:Io,[On["TAB/RPC"]]:Io,[On["EXT/RPC"]]:Io},P4=["ServicePlugin"],N4=["discovery-service"],D4=e=>{const{services:t=[],serviceStrategy:n}=e;V(Array.isArray(t),"Services must be an array");for(const r of t)V(ci(r.f_type)&&r.f_type==="Service","Service is required"),V(ci(r.type)&&r.type==="authn",`Service must be type authn. Received ${r.type}`),V(r.method in On||n.method===r.method,`Service method ${r.method} is not supported`);return V(ci(n),"Service strategy is required"),V(ci(n.method)&&va(n.method),"Service strategy method is required"),V(ci(n.exec)&&NI(n.exec),"Service strategy exec function is required"),{discoveryServices:t,serviceStrategy:n}},U4=e=>{let{coreStrategies:t}=e,n=new Set,r=new Map(Object.entries(t));const i=l=>{if(V(N4.includes(l.type),`Service Plugin type ${l.type} is not supported`),l.type==="discovery-service"){const{discoveryServices:u,serviceStrategy:d}=D4(l);s(u),r.has(d.method)?we({title:"Add Service Plugin",message:`Service strategy for ${d.method} already exists`,level:$e.warn}):r.set(d.method,d.exec)}},s=l=>n=new Set([...l]);return Object.freeze({add:i,getServices:()=>[...n],getStrategy:l=>r.get(l),getStrategies:()=>[...r.keys()]})},B4=e=>{let t;V(!!e,"No plugins supplied"),Array.isArray(e)?t=[...e]:t=[e];for(const n of t)V(ci(n.name),"Plugin name is required"),V(ci(n.f_type),"Plugin f_type is required"),V(P4.includes(n.f_type),`Plugin type ${n.f_type} is not supported`);return t},L4=()=>{const e=new Map;return Object.freeze({add:r=>{const i=B4(r);for(const s of i)e.set(s.name,s),s.f_type==="ServicePlugin"&&Sl.add(s)},getPlugins:()=>e})};let Sl;const HI=()=>typeof Sl<"u",qI=e=>{let{coreStrategies:t}=e;if(HI())return Sl;const n=U4({coreStrategies:t});return Sl=n,n},Wl=()=>HI()?Sl:(console.warn("Registry is not initalized, it will be initialized with stub core strategies"),qI({coreStrategies:O4})),cv=L4(),VI=async()=>[...(window==null?void 0:window.fcl_extensions)||[],...Wl().getServices()];async function F4(e){const t=await ie.get("discovery.authn.include",[]),n=await ie.get("discovery.authn.exclude",[]),r=await ie.get("discovery.features.suggested",[]),i=await ie.first(["discovery.wallet.method","discovery.wallet.method.default"]),s=e!=null&&e.method?e.method:i,o=(e==null?void 0:e.endpoint)??await ie.first(["discovery.wallet","challenge.handshake"]);return V(o,`
    If no service is passed to "authenticate," then "discovery.wallet" must be defined in fcl config.
    See: "https://docs.onflow.org/fcl/reference/api/#setting-configuration-values"
    `),{...e,type:"authn",endpoint:o,method:s,discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r}}async function j4(e){var o;let{types:t}=e;const n=await ie.get("discovery.authn.endpoint");V(!!n,'"discovery.authn.endpoint" in config must be defined.');const r=await ie.get("discovery.authn.include",[]),i=await ie.get("discovery.authn.exclude",[]),s=new I0(n);return fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,fclVersion:x0,include:r,exclude:i,features:{suggested:await ie.get("discovery.features.suggested",[])},clientServices:await VI(),supportedStrategies:Wl().getStrategies(),userAgent:(o=window==null?void 0:window.navigator)==null?void 0:o.userAgent,network:await fo()})}).then(a=>a.json())}const Fr={AUTHN:"authn",RESULTS:"results",SNAPSHOT:"SNAPSHOT",UPDATED:"UPDATED",UPDATE_RESULTS:"UPDATE_RESULTS"},M4=(e,t)=>{e&&console.warn(`
      %cFCL Warning
      ============================
      ${t}
      For more info, please see the docs: https://docs.onflow.org/fcl/
      ============================
      `,"font-weight:bold;font-family:monospace;")},nm=async()=>{try{const e=await j4({types:[Fr.AUTHN]});mt(Fr.AUTHN,Fr.UPDATE_RESULTS,{results:e})}catch(e){we({title:`${e.name} Error fetching Discovery API services.`,message:e.message,level:$e.error})}},z4={[El]:async e=>{M4(typeof window>"u",'"fcl.discovery" is only available in the browser.'),document.readyState==="complete"?nm():window.addEventListener("load",()=>{nm()})},[Fr.UPDATE_RESULTS]:(e,t,n)=>{e.merge(n),e.broadcast(Fr.UPDATED,{...e.all()})},[La]:(e,t)=>{e.subscribe(t.from),e.send(t.from,Fr.UPDATED,{...e.all()})},[Xs]:(e,t)=>e.unsubscribe(t.from),[Fr.SNAPSHOT]:async(e,t)=>t.reply({...e.all()})},lv=()=>uo(z4,Fr.AUTHN),H4={subscribe:e=>o0(Fr.AUTHN,lv,e),snapshot:()=>sx(Fr.AUTHN,lv),update:()=>{document.readyState==="complete"&&nm()}},q4={authn:H4};async function V4(e,t){if(e==null||t==null)return[];const n=new I0(e);n.searchParams.append("code",t);const r=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(s=>s.json());if(Array.isArray(r))return r;const i=[];if(Array.isArray(r.authorizations))for(let s of r.authorizations)i.push({type:"authz",keyId:r.keyId,...s});return r.provider!=null&&i.push({type:"authn",id:"wallet-provider#authn",...r.provider}),i}function G4(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return[...e,...t]}function W4(e){if(e==null)return null;if(!e.f_vsn)return{...Fa,type:e.type,uid:e.id,endpoint:e.authn,id:e.pid,provider:{address:Jt(e.addr),name:e.name,icon:e.icon}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function K4(e){if(e==null)return null;if(!e.f_vsn)return{...Fa,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...LI,address:Jt(e.addr),keyId:e.keyId},params:e.params,data:e.data};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function Q4(e){if(e==null)return null;if(!e.f_vsn)return{...Fa,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...LI,address:Jt(e.addr),keyId:e.keyId},params:e.params,data:e.data};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function GI(e){if(e==null)return null;if(!e.f_vsn)return{old:e,...Fa,type:"frame",endpoint:e.endpoint,params:e.params||{},data:e.data||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function WI(e){if(e==null)return null;if(!e.f_vsn)return{...Fa,type:"back-channel-rpc",endpoint:e.endpoint,method:e.method,params:e.params||{},data:e.data||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function Y4(e){if(e==null)return null;switch(e.f_vsn){case"1.0.0":return e;default:return null}}function X4(e){if(e==null)return null;if(!e.f_vsn)throw new Error("Invalid user-signature service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function KI(e){if(e==null)return null;if(e.method==null&&(e={...e,type:"local-view",method:"VIEW/IFRAME"}),!e.f_vsn)return{...Fa,type:e.type||"local-view",method:e.method,endpoint:e.endpoint,data:e.data||{},params:e.params||{}};switch(e.f_vsn){case"1.0.0":return e;default:return null}}function J4(e){if(e==null)return null;if(!e.f_vsn)throw new Error("FCL Normalizer Error: Invalid account-proof service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function Z4(e){if(e==null)return null;if(!e.f_vsn)throw new Error("Invalid authn-refresh service");switch(e.f_vsn){case"1.0.0":return e;default:return null}}function e6(e,t){return e.map(n=>n6(n,t)).filter(Boolean)}const t6={"back-channel-rpc":WI,"pre-authz":Q4,authz:K4,authn:W4,frame:GI,"open-id":Y4,"user-signature":X4,"local-view":KI,"account-proof":J4,"authn-refresh":Z4};function n6(e,t){try{var n=t6[e.type](e,t);return n}catch(r){return console.error(`Unrecognized FCL Service Type [${e.type}]`,e,r),e}}function xl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce((n,r)=>r.type===t&&(!n||s4(r.f_vsn,n.f_vsn)>0)?r:n,null)}function r6(e){var t,n;return l0([((t=e.provider)==null?void 0:t.address)||((n=e.provider)==null?void 0:n.name)||"UNSPECIFIED",e.id]).toString("hex")}function i6(e){return e.addr=e.addr?Jt(e.addr):null,e.paddr=e.paddr?Jt(e.paddr):null,e}async function uv(e){e=i6(e);var t=e6(G4(e.services||[],await V4(e.hks,e.code)));const n=xl(t,"authn");return{...v4,addr:Jt(e.addr),cid:r6(n),loggedIn:!0,services:t,expiresAt:e.expires}}const s6="WC/RPC",o6=typeof window>"u";function a6(){if(o6)return;Wl().getStrategies().includes(s6)||we({title:"FCL WalletConnect Service Plugin",level:$e.error,message:"All dApps are expected to register for a WalletConnect projectId & add this to their FCL configuration.  If you do not do so, users will be unable to use certain wallets to interact with your dApp.  See https://developers.flow.com/tools/clients/fcl-js/configure-fcl for more information."})}const c6=globalThis.AbortController||require("abort-controller"),nh=async e=>{let{service:t,body:n,config:r,abortSignal:i,customRpc:s,user:o,opts:a}=e;return Wl().getStrategy(t.method)({service:t,body:n,config:r,abortSignal:i,customRpc:s,opts:a,user:o})};async function eo(e){var u;let{service:t,msg:n={},config:r={},opts:i={},platform:s,abortSignal:o=new c6().signal,execStrategy:a,user:c}=e;a6(),n.data=t.data;const l={services:await iv(/^service\./),app:await iv(/^app\.detail\./),client:{...r.client,platform:s,fclVersion:x0,fclLibrary:"https://github.com/onflow/fcl-js",hostname:((u=window==null?void 0:window.location)==null?void 0:u.hostname)??null,network:await fo(i)}};try{const d=await(a||nh)({service:t,body:n,config:l,opts:i,user:c,abortSignal:o});return d.status==="REDIRECT"?(V(t.type===d.data.type,"Cannot shift recursive service type in execService"),await eo({service:d.data,msg:n,config:l,opts:i,abortSignal:o,platform:s,user:c})):d}catch(d){throw we({title:`Error on execService ${t==null?void 0:t.type}`,message:d,level:$e.error}),d}}function rm(e){if(e==null)return null;if(!e.f_vsn)return{...E4,addr:ot(e.addr||e.address),signature:e.signature||e.sig,keyId:e.keyId};switch(e.f_vsn){case"1.0.0":return e;default:return null}}const l6=e=>typeof e=="function",_r="CURRENT_USER",lp="CURRENT_USER/UPDATED",QI="SNAPSHOT",im="SET_CURRENT_USER",YI="DEL_CURRENT_USER",sm=`{
  "f_type": "User",
  "f_vsn": "1.0.0",
  "addr":null,
  "cid":null,
  "loggedIn":null,
  "expiresAt":null,
  "services":[]
}`,u6=async e=>{const t=JSON.parse(sm),n=await e.get(_r);return n!=null&&t.f_vsn!==n.f_vsn?(e.removeItem(_r),t):n||t},d6=e=>{const t=async()=>e.getStorageProvider?await e.getStorageProvider():await ie.first(["fcl.storage","fcl.storage.default"]);return{[El]:async n=>{typeof window>"u"&&console.warn(`
        %cFCL Warning
        ============================
        "currentUser" is only available in the browser.
        For more info, please see the docs: https://docs.onflow.org/fcl/
        ============================
        `,"font-weight:bold;font-family:monospace;"),n.merge(JSON.parse(sm));const r=await t();if(r.can){const i=await u6(r);f6(i)&&n.merge(i)}},[La]:(n,r)=>{n.subscribe(r.from),n.send(r.from,lp,{...n.all()})},[Xs]:(n,r)=>{n.unsubscribe(r.from)},[QI]:async(n,r)=>{r.reply({...n.all()})},[im]:async(n,r,i)=>{n.merge(i);const s=await t();s.can&&s.put(_r,n.all()),n.broadcast(lp,{...n.all()})},[YI]:async(n,r)=>{n.merge(JSON.parse(sm));const i=await t();i.can&&i.put(_r,n.all()),n.broadcast(lp,{...n.all()})}}},ja=e=>uo(d6(e),_r);function f6(e){return e.expiresAt==null||e.expiresAt===0||e.expiresAt>Date.now()}async function h6(){var r;let e=await ie.get("fcl.accountProof.resolver");if(e==null)return;if(!l6(e)){we({title:"Account Proof Data Resolver must be a function",message:`Check fcl.accountProof.resolver configuration.
                Expected: fcl.accountProof.resolver: async () => { ... }
                Received: fcl.accountProof.resolver: ${typeof e}
                `,level:$e.warn});return}const t={...await e()},n=(r=window==null?void 0:window.location)==null?void 0:r.origin;return t.appIdentifier?n&&(we.deprecate({pkg:"FCL",subject:"appIdentifier in fcl.accountProof.resolver",message:"Manually set app identifiers in the account proof resolver function are now deprecated.  These are now automatically set to the application origin URL by FCL",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0002-deprecate-appIdentifier-field-in-account-proof-resolver"}),V(typeof t.appIdentifier=="string","appIdentifier must be a string")):(V(n,"The appIdentifier (origin) could not be inferred from the window.location.origin.  Please set the appIdentifier manually in the fcl.accountProof.resolver function."),t.appIdentifier=n),V(/^[0-9a-f]+$/i.test(t.nonce),"Nonce must be a hex string"),t}const p6=async e=>{let{discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r}=e;return{client:{discoveryAuthnInclude:t,discoveryAuthnExclude:n,discoveryFeaturesSuggested:r,clientServices:await VI(),supportedStrategies:Wl().getStrategies()}}},rh=e=>async function(){var i,s,o;let{service:t,redir:n=!1,forceReauth:r=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t&&!((i=t==null?void 0:t.provider)!=null&&i.is_installed)&&((s=t==null?void 0:t.provider)!=null&&s.requires_install)){window.location.href=(o=t==null?void 0:t.provider)==null?void 0:o.install_link;return}return new Promise(async(a,c)=>{var h;ja(e);const l={redir:n},u=await _d(e)(),d=xl(u.services,"authn-refresh");let f;if(u.loggedIn&&!r)if(d)try{const p=await eo({service:d,msg:f,opts:l,platform:e.platform,user:u});mt(_r,im,await uv(p))}catch(p){we({title:`${p.name} Could not refresh wallet authentication.`,message:p.message,level:$e.error})}finally{return a(await _d(e)())}else return a(u);try{f=await h6()}catch(p){return we({title:`${p.name} On Authentication: Could not resolve account proof data.`,message:p.message,level:$e.error}),c(p)}try{const p=await F4(t),g=await eo({service:p,msg:f,config:await p6(p),opts:l,platform:e.platform,execStrategy:(h=e.discovery)==null?void 0:h.execStrategy,user:u});mt(_r,im,await uv(g))}catch(p){we({title:`${p} On Authentication`,message:p,level:$e.error})}finally{a(await _d(e)())}})};function g6(e){return function(){ja(e),mt(_r,YI)}}const m6=e=>({f_type:"PreAuthzResponse",f_vsn:"1.0.0",proposer:(e||{}).proposer,payer:(e||{}).payer||[],authorization:(e||{}).authorization||[]}),y6=e=>(t,n)=>{let{user:r}=n;const i=m6(t),s=[];i.proposer!=null&&s.push(["PROPOSER",i.proposer]);for(let a of i.payer||[])s.push(["PAYER",a]);for(let a of i.authorization||[])s.push(["AUTHORIZER",a]);var o=s.map(a=>{let[c,l]=a;return{tempId:[l.identity.address,l.identity.keyId].join("|"),addr:l.identity.address,keyId:l.identity.keyId,signingFunction(u){return eo({service:l,msg:u,platform:e.platform,user:r})},role:{proposer:c==="PROPOSER",payer:c==="PAYER",authorizer:c==="AUTHORIZER"}}});return o},w6=e=>async t=>(ja(e),{...t,tempId:"CURRENT_USER",async resolve(n,r){const i=await rh(e)({redir:!0}),s=xl(i.services,"authz"),o=xl(i.services,"pre-authz");if(o)return y6(e)(await eo({service:o,msg:r,platform:e.platform,user:i}),{user:i});if(s)return{...n,tempId:"CURRENT_USER",resolve:null,addr:ot(s.identity.address),keyId:s.identity.keyId,sequenceNum:null,signature:null,async signingFunction(a){return rm(await eo({service:s,msg:a,opts:{includeOlderJsonRpcCall:!0},platform:e.platform,user:i}))}};throw new Error("No Authz or PreAuthz Service configured for CURRENT_USER")}});function v6(e){return function(n){ja(e);const r="@EXIT",i=uo(async s=>{for(s.send(_r,La);;){const o=await s.receive();if(o.tag===r){s.send(_r,Xs);return}n(o.data)}});return()=>mt(i,r)}}function _d(e){return function(){return ja(e),mt(_r,QI,null,{expectReply:!0,timeout:0})}}const b6=e=>async()=>{const{addr:t}=await rh(e)();return OI(Jt(t),Xx)},E6=e=>(V(/^[0-9a-f]+$/i.test(e),"Message must be a hex string"),{message:e}),_6=e=>async t=>{ja(e);const n=await rh(e)({redir:!0}),r=xl(n.services,"user-signature");V(r,"Current user must have authorized a signing service.");try{const i=await eo({service:r,msg:E6(t),platform:e.platform,user:n});return Array.isArray(i)?i.map(s=>rm(s)):[rm(i)]}catch(i){return i}},XI=e=>{const t={authenticate:rh(e),unauthenticate:g6(e),authorization:w6(e),signUserMessage:_6(e),subscribe:v6(e),snapshot:_d(e),resolveArgument:b6(e)};return Object.assign(()=>({...t}),{...t})},S6=e=>async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var r;try{await c4(n),n=await BI(n);const i=typeof e=="function"?e:XI(e),s=await ie().get("fcl.authz",i().authorization);return r=Yf([n4(n.cadence),$I(DI(n.args||[])),n.limit&&a4(n.limit)&&RI(n.limit),X8(n.proposer||n.authz||s),J8(n.payer||n.authz||s),K8(n.authorizations||[n.authz||s])]).then(Xf),r}catch(i){throw i}};function Kl(e){var n;const t=new I0(e.endpoint);if((n=window==null?void 0:window.location)!=null&&n.origin&&t.searchParams.append("l6n",window.location.origin),e.params!=null)for(let[r,i]of Object.entries(e.params||{}))t.searchParams.append(r,i);return t}function JI(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=t.method||"POST",r=n==="GET"?void 0:JSON.stringify(t.data||e.data||{});return fetch(Kl(e),{method:n,headers:{...e.headers||{},...t.headers||{},"Content-Type":"application/json"},body:r}).then(i=>i.json())}function Kr(e){if(e==null)return null;if(!e.f_vsn)return{...b4,status:e.status??"APPROVED",reason:e.reason??null,data:e.compositeSignature||e.data||{...e},updates:WI(e.authorizationUpdates),local:GI((e.local||[])[0])};switch(e.f_vsn){case"1.0.0":return e;default:return null}}const dv={"HTTP/GET":"GET","HTTP/POST":"POST"},x6=e=>(V(dv[e.method],"Invalid Service Method for type back-channel-rpc",{service:e}),dv[e.method]);async function om(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>!0;if(V(e,"Missing Polling Service",{service:e}),!t())throw new Error("Externally Halted");let r;try{if(typeof document<"u"&&document.visibilityState==="hidden")return await new Promise(i=>setTimeout(i,500)),om(e,t);r=await JI(e,{method:x6(e)}).then(Kr)}catch(i){throw i}switch(r.status){case"APPROVED":return r.data;case"DECLINED":throw new Error(`Declined: ${r.reason||"No reason supplied."}`);default:return await new Promise(i=>setTimeout(i,500)),om(r.updates,t)}}const fv=e=>async t=>{let{service:n,body:r,config:i,opts:s}=t;const o=await JI(n,{data:{fclVersion:x0,service:{params:n.params,data:n.data,type:n.type},config:i,...r}}).then(Kr);if(o.status==="APPROVED")return o.data;if(o.status==="DECLINED")throw new Error(`Declined: ${o.reason||"No reason supplied."}`);if(o.status==="REDIRECT")return o;if(o.status==="PENDING"){var a=!0,c=!0;const[l,u]=await e(KI(o.local),{serviceEndpoint:Kl,onClose:()=>c=!1}),d=()=>{try{u(),c=!1}catch(h){console.error("Frame Close Error",h)}},f=()=>{const h=a;return a=c,h};return om(o.updates,f).then(h=>(d(),h)).catch(h=>{throw console.error(h),d(),h})}else throw console.error("Auto Decline: Invalid Response",{service:n,resp:o}),new Error("Auto Decline: Invalid Response")},Ru="FCL:VIEW:CLOSE",up="FCL:VIEW:READY",dp="FCL:VIEW:RESPONSE",I6="FCL:VIEW:CUSTOM_RPC",Je=e=>typeof e=="string"&&e.toLowerCase(),A6=new Set(["monetizationstart","monetizationpending","monetizationprogress","monetizationstop"]),vs=(e,t)=>console.warn("DEPRECATION NOTICE",`Received ${e}, please use ${t} for this and future versions of FCL`),ih=e=>{let{close:t,send:n,onReady:r,onResponse:i,onMessage:s,onCustomRpc:o,getSource:a}=e,c;return l=>{try{c=(a==null?void 0:a())||c}catch{c=null}try{if(typeof l.data!="object"||A6.has(l.data.type)||c!=null&&l.source!==c)return;Je(l.data.type)===Je(Ru)&&t(),Je(l.data.type)===Je(up)&&(r(l,{send:n,close:t}),c||(c=l.source)),Je(l.data.type)===Je(dp)&&i(l,{send:n,close:t}),Je(l.data.type)===Je(I6)&&o(l.data.payload,{send:n,close:t}),s(l,{send:n,close:t}),Je(l.data.type)===Je("FCL:FRAME:READY")&&(vs(l.data.type,up),r(l,{send:n,close:t}),c||(c=l.source)),Je(l.data.type)===Je("FCL:FRAME:RESPONSE")&&(vs(l.data.type,dp),i(l,{send:n,close:t})),Je(l.data.type)===Je("FCL:FRAME:CLOSE")&&(vs(l.data.type,Ru),t()),Je(l.data.type)===Je("FCL::CHALLENGE::RESPONSE")&&(vs(l.data.type,dp),i(l,{send:n,close:t})),Je(l.data.type)===Je("FCL::AUTHZ_READY")&&(vs(l.data.type,up),r(l,{send:n,close:t}),c||(c=l.source)),Je(l.data.type)===Je("FCL::CHALLENGE::CANCEL")&&(vs(l.data.type,Ru),t()),Je(l.data.type)===Je("FCL::CANCEL")&&(vs(l.data.type,Ru),t())}catch(u){console.error("Frame Callback Error",u),t()}}};m4();let hv=function(e){return e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e}({});class pv extends Error{constructor(t,n,r){super(n),this.code=t,this.message=n,this.data=r}}var am=function(e){return e.HELLO="rpc_hello",e}(am||{});class C6{constructor(t){Qt(this,"id",0);Qt(this,"setSend",()=>{});Qt(this,"_send",new Promise(t=>{this.setSend=t}));Qt(this,"peerInfo",new Promise((t,n)=>{this.resolvePeerInfo=t,this.rejectPeerInfo=n}));Qt(this,"enabledNotifications",[]);Qt(this,"requestHandlers",{});Qt(this,"subscriptions",{});Qt(this,"messageListeners",[]);let{notifications:n}=t;this.enabledNotifications=n||[],this.on(am.HELLO,r=>(this.resolvePeerInfo(r),this.ownInfo()))}connect(t){let{send:n}=t;this.setSend(n),this.requestWithoutConnection(am.HELLO,this.ownInfo()).then(r=>{this.resolvePeerInfo(r)}).catch(this.rejectPeerInfo)}ownInfo(){return{requests:Object.keys(this.requestHandlers),notifications:this.enabledNotifications}}async send(t){return(await this._send)(t)}receive(t){(t==null?void 0:t.jsonrpc)==="2.0"&&("method"in t&&("id"in t?this.handleRequest(t):this.handleNotification(t)),this.messageListeners.forEach(n=>n(t)))}async handleRequest(t){const n=this.requestHandlers[t.method];if(n)try{const r=await n(t.params);this.send({jsonrpc:"2.0",id:t.id,result:r})}catch(r){r instanceof pv?this.send({jsonrpc:"2.0",id:t.id,error:{code:r.code,message:r.message,data:r.data}}):this.send({jsonrpc:"2.0",id:t.id,error:{code:hv.INTERNAL_ERROR,message:r==null?void 0:r.message}})}else this.send({jsonrpc:"2.0",id:t.id,error:{code:hv.METHOD_NOT_FOUND,message:`Method not found: ${t.method}`}})}handleNotification(t){this.subscriptions[t.method]&&this.subscriptions[t.method].forEach(n=>n(t.params))}onMessage(t){return this.messageListeners.push(t),()=>{this.messageListeners=this.messageListeners.filter(n=>n!==t)}}async notify(t,n){await this.onceConnected(),this.send({jsonrpc:"2.0",method:t,params:n})}async request(t,n){return await this.onceConnected(),this.requestWithoutConnection(t,n)}async requestWithoutConnection(t,n){const r=this.id++;let i=()=>{};const s=new Promise((o,a)=>{i=this.onMessage(c=>{if(c.id===r&&("result"in c||"error"in c)){if(c.error){const l=new pv(c.error.code,c.error.message,c.error.data);a(l)}o(c.result)}})}).finally(i);return this.send({jsonrpc:"2.0",method:t,params:n,id:r}),s}on(t,n){this.requestHandlers[t]=n}subscribe(t,n){this.subscriptions[t]=this.subscriptions[t]||new Set,this.subscriptions[t].add(n)}unsubscribe(t,n){var r;(r=this.subscriptions[t])==null||r.delete(n)}async onceConnected(){return this.peerInfo.then(()=>{})}async getAvailableRequests(){return this.peerInfo.then(t=>t.requests)}async getAvailableNotifications(){return this.peerInfo.then(t=>t.notifications)}}const T6="modulepreload",k6=function(e){return"/"+e},gv={},ZI=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=k6(c),c in gv)return;gv[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":T6,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};var mv=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},R6=function(){function e(t,n,r){this.name=t,this.version=n,this.os=r,this.type="browser"}return e}(),$6=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),O6=function(){function e(t,n,r,i){this.name=t,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return e}(),P6=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),N6=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),D6=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,U6=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,yv=3,B6=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",D6]],wv=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function L6(e){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new N6:typeof navigator<"u"?j6(navigator.userAgent):z6()}function F6(e){return e!==""&&B6.reduce(function(t,n){var r=n[0],i=n[1];if(t)return t;var s=i.exec(e);return!!s&&[r,s]},!1)}function j6(e){var t=F6(e);if(!t)return null;var n=t[0],r=t[1];if(n==="searchbot")return new P6;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<yv&&(i=mv(mv([],i,!0),H6(yv-i.length),!0)):i=[];var s=i.join("."),o=M6(e),a=U6.exec(e);return a&&a[1]?new O6(n,s,o,a[1]):new R6(n,s,o)}function M6(e){for(var t=0,n=wv.length;t<n;t++){var r=wv[t],i=r[0],s=r[1],o=s.exec(e);if(o)return i}return null}function z6(){var e=typeof process<"u"&&process.version;return e?new $6(process.version.slice(1)):null}function H6(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}var Z={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cm=function(e,t){return cm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},cm(e,t)};function q6(e,t){cm(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var lm=function(){return lm=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},lm.apply(this,arguments)};function V6(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function G6(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function W6(e,t){return function(n,r){t(n,r,e)}}function K6(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Q6(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function Y6(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function X6(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function J6(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function um(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function e3(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function Z6(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(e3(arguments[t]));return e}function e5(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function Il(e){return this instanceof Il?(this.v=e,this):new Il(e)}function t5(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(h){return new Promise(function(p,g){s.push([f,h,p,g])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(p){d(s[0][3],p)}}function c(f){f.value instanceof Il?Promise.resolve(f.value.v).then(l,u):d(s[0][2],f)}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function n5(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Il(e[i](o)),done:i==="return"}:s?s(o):o}:s}}function r5(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof um=="function"?um(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,c){o=e[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function i5(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function s5(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o5(e){return e&&e.__esModule?e:{default:e}}function a5(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function c5(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}const l5=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return lm},__asyncDelegator:n5,__asyncGenerator:t5,__asyncValues:r5,__await:Il,__awaiter:Q6,__classPrivateFieldGet:a5,__classPrivateFieldSet:c5,__createBinding:X6,__decorate:G6,__exportStar:J6,__extends:q6,__generator:Y6,__importDefault:o5,__importStar:s5,__makeTemplateObject:i5,__metadata:K6,__param:W6,__read:e3,__rest:V6,__spread:Z6,__spreadArrays:e5,__values:um},Symbol.toStringTag,{value:"Module"})),Ql=AT(l5);var fp={},lc={},vv;function u5(){if(vv)return lc;vv=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.delay=void 0;function e(t){return new Promise(n=>{setTimeout(()=>{n(!0)},t)})}return lc.delay=e,lc}var bs={},hp={},Es={},bv;function d5(){return bv||(bv=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.ONE_THOUSAND=Es.ONE_HUNDRED=void 0,Es.ONE_HUNDRED=100,Es.ONE_THOUSAND=1e3),Es}var pp={},Ev;function f5(){return Ev||(Ev=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(pp)),pp}var _v;function t3(){return _v||(_v=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ql;t.__exportStar(d5(),e),t.__exportStar(f5(),e)}(hp)),hp}var Sv;function h5(){if(Sv)return bs;Sv=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.fromMiliseconds=bs.toMiliseconds=void 0;const e=t3();function t(r){return r*e.ONE_THOUSAND}bs.toMiliseconds=t;function n(r){return Math.floor(r/e.ONE_THOUSAND)}return bs.fromMiliseconds=n,bs}var xv;function p5(){return xv||(xv=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ql;t.__exportStar(u5(),e),t.__exportStar(h5(),e)}(fp)),fp}var Ao={},Iv;function g5(){if(Iv)return Ao;Iv=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:i})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Ao.Watch=e,Ao.default=e,Ao}var gp={},uc={},Av;function m5(){if(Av)return uc;Av=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.IWatch=void 0;class e{}return uc.IWatch=e,uc}var Cv;function y5(){return Cv||(Cv=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Ql.__exportStar(m5(),e)}(gp)),gp}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ql;t.__exportStar(p5(),e),t.__exportStar(g5(),e),t.__exportStar(y5(),e),t.__exportStar(t3(),e)})(Z);var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.getLocalStorage=Ne.getLocalStorageOrThrow=Ne.getCrypto=Ne.getCryptoOrThrow=n3=Ne.getLocation=Ne.getLocationOrThrow=A0=Ne.getNavigator=Ne.getNavigatorOrThrow=to=Ne.getDocument=Ne.getDocumentOrThrow=Ne.getFromWindowOrThrow=Ne.getFromWindow=void 0;function po(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}Ne.getFromWindow=po;function Ma(e){const t=po(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Ne.getFromWindowOrThrow=Ma;function w5(){return Ma("document")}Ne.getDocumentOrThrow=w5;function v5(){return po("document")}var to=Ne.getDocument=v5;function b5(){return Ma("navigator")}Ne.getNavigatorOrThrow=b5;function E5(){return po("navigator")}var A0=Ne.getNavigator=E5;function _5(){return Ma("location")}Ne.getLocationOrThrow=_5;function S5(){return po("location")}var n3=Ne.getLocation=S5;function x5(){return Ma("crypto")}Ne.getCryptoOrThrow=x5;function I5(){return po("crypto")}Ne.getCrypto=I5;function A5(){return Ma("localStorage")}Ne.getLocalStorageOrThrow=A5;function C5(){return po("localStorage")}Ne.getLocalStorage=C5;var C0={};Object.defineProperty(C0,"__esModule",{value:!0});var r3=C0.getWindowMetadata=void 0;const Tv=Ne;function T5(){let e,t;try{e=Tv.getDocumentOrThrow(),t=Tv.getLocationOrThrow()}catch{return null}function n(){const d=e.getElementsByTagName("link"),f=[];for(let h=0;h<d.length;h++){const p=d[h],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const v=p.getAttribute("href");if(v)if(v.toLowerCase().indexOf("https:")===-1&&v.toLowerCase().indexOf("http:")===-1&&v.indexOf("//")!==0){let m=t.protocol+"//"+t.host;if(v.indexOf("/")===0)m+=v;else{const w=t.pathname.split("/");w.pop();const E=w.join("/");m+=E+"/"+v}f.push(m)}else if(v.indexOf("//")===0){const m=t.protocol+v;f.push(m)}else f.push(v)}}return f}function r(...d){const f=e.getElementsByTagName("meta");for(let h=0;h<f.length;h++){const p=f[h],g=["itemprop","property","name"].map(v=>p.getAttribute(v)).filter(v=>v?d.includes(v):!1);if(g.length&&g){const v=p.getAttribute("content");if(v)return v}}return""}function i(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=e.title),d}function s(){return r("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=t.origin,l=n();return{description:a,url:c,icons:l,name:o}}r3=C0.getWindowMetadata=T5;function Al(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function dm(e){return Al(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const i3="2.31.0";let dc={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${i3}`};class no extends Error{constructor(t,n={}){var a;const r=(()=>{var c;return n.cause instanceof no?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),i=n.cause instanceof no&&n.cause.docsPath||n.docsPath,s=(a=dc.getDocsUrl)==null?void 0:a.call(dc,{...n,docsPath:i}),o=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...r?[`Details: ${r}`]:[],...dc.version?[`Version: ${dc.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=i3}walk(t){return s3(this,t)}}function s3(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?s3(e.cause,t):t?null:e}class o3 extends no{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function za(e,{dir:t,size:n=32}={}){return typeof e=="string"?k5(e,{dir:t,size:n}):R5(e,{dir:t,size:n})}function k5(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new o3({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function R5(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new o3({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let i=0;i<n;i++){const s=t==="right";r[s?i:n-i-1]=e[s?i:e.length-i-1]}return r}class $5 extends no{constructor({max:t,min:n,signed:r,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class O5 extends no{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}function Ha(e,{size:t}){if(dm(e)>t)throw new O5({givenSize:dm(e),maxSize:t})}function fm(e,t={}){const{signed:n}=t;t.size&&Ha(e,{size:t.size});const r=BigInt(e);if(!n)return r;const i=(e.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return r<=s?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function P5(e,t={}){return Number(fm(e,t))}const N5=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function hm(e,t={}){return typeof e=="number"||typeof e=="bigint"?c3(e,t):typeof e=="string"?B5(e,t):typeof e=="boolean"?D5(e,t):a3(e,t)}function D5(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(Ha(n,{size:t.size}),za(n,{size:t.size})):n}function a3(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=N5[e[i]];const r=`0x${n}`;return typeof t.size=="number"?(Ha(r,{size:t.size}),za(r,{dir:"right",size:t.size})):r}function c3(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&n?-s-1n:0;if(s&&i>s||i<o){const c=typeof e=="bigint"?"n":"";throw new $5({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${e}${c}`})}const a=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?za(a,{size:r}):a}const U5=new TextEncoder;function B5(e,t={}){const n=U5.encode(e);return a3(n,t)}const L5=new TextEncoder;function F5(e,t={}){return typeof e=="number"||typeof e=="bigint"?M5(e,t):typeof e=="boolean"?j5(e,t):Al(e)?l3(e,t):u3(e,t)}function j5(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(Ha(n,{size:t.size}),za(n,{size:t.size})):n}const Xr={zero:48,nine:57,A:65,F:70,a:97,f:102};function kv(e){if(e>=Xr.zero&&e<=Xr.nine)return e-Xr.zero;if(e>=Xr.A&&e<=Xr.F)return e-(Xr.A-10);if(e>=Xr.a&&e<=Xr.f)return e-(Xr.a-10)}function l3(e,t={}){let n=e;t.size&&(Ha(n,{size:t.size}),n=za(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=kv(r.charCodeAt(a++)),l=kv(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new no(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);s[o]=c*16+l}return s}function M5(e,t){const n=c3(e,t);return l3(n)}function u3(e,t={}){const n=L5.encode(e);return typeof t.size=="number"?(Ha(n,{size:t.size}),za(n,{dir:"right",size:t.size})):n}const $u=BigInt(2**32-1),Rv=BigInt(32);function z5(e,t=!1){return t?{h:Number(e&$u),l:Number(e>>Rv&$u)}:{h:Number(e>>Rv&$u)|0,l:Number(e&$u)|0}}function H5(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=z5(e[s],t);[r[s],i[s]]=[o,a]}return[r,i]}const q5=(e,t,n)=>e<<n|t>>>32-n,V5=(e,t,n)=>t<<n|e>>>32-n,G5=(e,t,n)=>t<<n-32|e>>>64-n,W5=(e,t,n)=>e<<n-32|t>>>64-n,Co=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function K5(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function lf(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Cl(e,...t){if(!K5(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function BJ(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");lf(e.outputLen),lf(e.blockLen)}function $v(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Q5(e,t){Cl(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Y5(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function d3(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function LJ(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function FJ(e,t){return e<<32-t|e>>>t}const X5=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function J5(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function Z5(e){for(let t=0;t<e.length;t++)e[t]=J5(e[t]);return e}const Ov=X5?e=>e:Z5;function eU(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function f3(e){return typeof e=="string"&&(e=eU(e)),Cl(e),e}function jJ(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];Cl(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const s=e[r];n.set(s,i),i+=s.length}return n}class tU{}function nU(e){const t=r=>e().update(f3(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function MJ(e=32){if(Co&&typeof Co.getRandomValues=="function")return Co.getRandomValues(new Uint8Array(e));if(Co&&typeof Co.randomBytes=="function")return Uint8Array.from(Co.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const rU=BigInt(0),fc=BigInt(1),iU=BigInt(2),sU=BigInt(7),oU=BigInt(256),aU=BigInt(113),h3=[],p3=[],g3=[];for(let e=0,t=fc,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],h3.push(2*(5*r+n)),p3.push((e+1)*(e+2)/2%64);let i=rU;for(let s=0;s<7;s++)t=(t<<fc^(t>>sU)*aU)%oU,t&iU&&(i^=fc<<(fc<<BigInt(s))-fc);g3.push(i)}const m3=H5(g3,!0),cU=m3[0],lU=m3[1],Pv=(e,t,n)=>n>32?G5(e,t,n):q5(e,t,n),Nv=(e,t,n)=>n>32?W5(e,t,n):V5(e,t,n);function uU(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Pv(l,u,1)^n[a],f=Nv(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)e[o+h]^=d,e[o+h+1]^=f}let i=e[2],s=e[3];for(let o=0;o<24;o++){const a=p3[o],c=Pv(i,s,a),l=Nv(i,s,a),u=h3[o];i=e[u],s=e[u+1],e[u]=c,e[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=cU[r],e[1]^=lU[r]}d3(n)}class T0 extends tU{constructor(t,n,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,lf(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Y5(this.state)}clone(){return this._cloneInto()}keccak(){Ov(this.state32),uU(this.state32,this.rounds),Ov(this.state32),this.posOut=0,this.pos=0}update(t){$v(this),t=f3(t),Cl(t);const{blockLen:n,state:r}=this,i=t.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,n&128&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){$v(this,!1),Cl(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=t.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return lf(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Q5(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,d3(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new T0(n,r,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const dU=(e,t,n)=>nU(()=>new T0(t,e,n)),fU=dU(1,136,256/8);function y3(e,t){const n=t||"hex",r=fU(Al(e,{strict:!1})?F5(e):e);return n==="bytes"?r:hm(r)}class hU extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const mp=new hU(8192);function pU(e,t){if(mp.has(`${e}.${t}`))return mp.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=y3(u3(n),"bytes"),i=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(r[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return mp.set(`${e}.${t}`,s),s}function gU(e){const t=y3(`0x${e.substring(4)}`).substring(26);return pU(`0x${t}`)}async function mU({hash:e,signature:t}){const n=Al(e)?e:hm(e),{secp256k1:r}=await ZI(async()=>{const{secp256k1:o}=await import("./secp256k1-jH0SQW1v.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:l,s:u,v:d,yParity:f}=t,h=Number(f??d),p=Dv(h);return new r.Signature(fm(l),fm(u)).addRecoveryBit(p)}const o=Al(t)?t:hm(t);if(dm(o)!==65)throw new Error("invalid signature length");const a=P5(`0x${o.slice(130)}`),c=Dv(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Dv(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function yU({hash:e,signature:t}){return gU(await mU({hash:e,signature:t}))}function wU(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let l=0;l<t.length;l++)t[l]=255;for(let l=0;l<e.length;l++){const u=e.charAt(l),d=u.charCodeAt(0);if(t[d]!==255)throw new TypeError(u+" is ambiguous");t[d]=l}const n=e.length,r=e.charAt(0),i=Math.log(n)/Math.log(256),s=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,f=0;const h=l.length;for(;f!==h&&l[f]===0;)f++,u++;const p=(h-f)*s+1>>>0,g=new Uint8Array(p);for(;f!==h;){let w=l[f],E=0;for(let A=p-1;(w!==0||E<d)&&A!==-1;A--,E++)w+=256*g[A]>>>0,g[A]=w%n>>>0,w=w/n>>>0;if(w!==0)throw new Error("Non-zero carry");d=E,f++}let v=p-d;for(;v!==p&&g[v]===0;)v++;let m=r.repeat(u);for(;v<p;++v)m+=e.charAt(g[v]);return m}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,f=0;for(;l[u]===r;)d++,u++;const h=(l.length-u)*i+1>>>0,p=new Uint8Array(h);for(;u<l.length;){const w=l.charCodeAt(u);if(w>255)return;let E=t[w];if(E===255)return;let A=0;for(let T=h-1;(E!==0||A<f)&&T!==-1;T--,A++)E+=n*p[T]>>>0,p[T]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");f=A,u++}let g=h-f;for(;g!==h&&p[g]===0;)g++;const v=new Uint8Array(d+(h-g));let m=d;for(;g!==h;)v[m++]=p[g++];return v}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var vU="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Yl=wU(vU);function bU(e){const t=e.length;let n=0,r=0;for(;r<t;){let i=e.charCodeAt(r++);if(i&4294967168)if(!(i&4294965248))n+=2;else{if(i>=55296&&i<=56319&&r<t){const s=e.charCodeAt(r);(s&64512)===56320&&(++r,i=((i&1023)<<10)+(s&1023)+65536)}i&4294901760?n+=4:n+=3}else{n++;continue}}return n}function EU(e,t,n){const r=e.length;let i=n,s=0;for(;s<r;){let o=e.charCodeAt(s++);if(o&4294967168)if(!(o&4294965248))t[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<r){const a=e.charCodeAt(s);(a&64512)===56320&&(++s,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(t[i++]=o>>18&7|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128):(t[i++]=o>>12&15|224,t[i++]=o>>6&63|128)}else{t[i++]=o;continue}t[i++]=o&63|128}}const _U=new TextEncoder,SU=50;function xU(e,t,n){_U.encodeInto(e,t.subarray(n))}function IU(e,t,n){e.length>SU?xU(e,t,n):EU(e,t,n)}const AU=4096;function w3(e,t,n){let r=t;const i=r+n,s=[];let o="";for(;r<i;){const a=e[r++];if(!(a&128))s.push(a);else if((a&224)===192){const c=e[r++]&63;s.push((a&31)<<6|c)}else if((a&240)===224){const c=e[r++]&63,l=e[r++]&63;s.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=e[r++]&63,l=e[r++]&63,u=e[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,s.push(d>>>10&1023|55296),d=56320|d&1023),s.push(d)}else s.push(a);s.length>=AU&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}const CU=new TextDecoder,TU=200;function kU(e,t,n){const r=e.subarray(t,t+n);return CU.decode(r)}function RU(e,t,n){return n>TU?kU(e,t,n):w3(e,t,n)}class Ou{constructor(t,n){this.type=t,this.data=n}}class Rn extends Error{constructor(t){super(t);const n=Object.create(Rn.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Rn.name})}}const hc=4294967295;function $U(e,t,n){const r=n/4294967296,i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function v3(e,t,n){const r=Math.floor(n/4294967296),i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function b3(e,t){const n=e.getInt32(t),r=e.getUint32(t+4);return n*4294967296+r}function OU(e,t){const n=e.getUint32(t),r=e.getUint32(t+4);return n*4294967296+r}const PU=-1,NU=4294967296-1,DU=17179869184-1;function UU({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=DU)if(t===0&&e<=NU){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),n}else{const n=e/4294967296,r=e&4294967295,i=new Uint8Array(8),s=new DataView(i.buffer);return s.setUint32(0,t<<2|n&3),s.setUint32(4,r),i}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,t),v3(r,4,e),n}}function BU(e){const t=e.getTime(),n=Math.floor(t/1e3),r=(t-n*1e3)*1e6,i=Math.floor(r/1e9);return{sec:n+i,nsec:r-i*1e9}}function LU(e){if(e instanceof Date){const t=BU(e);return UU(t)}else return null}function FU(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const n=t.getUint32(0),r=t.getUint32(4),i=(n&3)*4294967296+r,s=n>>>2;return{sec:i,nsec:s}}case 12:{const n=b3(t,4),r=t.getUint32(0);return{sec:n,nsec:r}}default:throw new Rn(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function jU(e){const t=FU(e);return new Date(t.sec*1e3+t.nsec/1e6)}const MU={type:PU,encode:LU,decode:jU};class uf{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(MU)}register({type:t,encode:n,decode:r}){if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{const i=-1-t;this.builtInEncoders[i]=n,this.builtInDecoders[i]=r}}tryToEncode(t,n){for(let r=0;r<this.builtInEncoders.length;r++){const i=this.builtInEncoders[r];if(i!=null){const s=i(t,n);if(s!=null){const o=-1-r;return new Ou(o,s)}}}for(let r=0;r<this.encoders.length;r++){const i=this.encoders[r];if(i!=null){const s=i(t,n);if(s!=null){const o=r;return new Ou(o,s)}}}return t instanceof Ou?t:null}decode(t,n,r){const i=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return i?i(t,n,r):new Ou(n,t)}}uf.defaultCodec=new uf;function zU(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function pm(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):zU(e)?new Uint8Array(e):Uint8Array.from(e)}const HU=100,qU=2048;let VU=class E3{constructor(t){this.entered=!1,this.extensionCodec=(t==null?void 0:t.extensionCodec)??uf.defaultCodec,this.context=t==null?void 0:t.context,this.useBigInt64=(t==null?void 0:t.useBigInt64)??!1,this.maxDepth=(t==null?void 0:t.maxDepth)??HU,this.initialBufferSize=(t==null?void 0:t.initialBufferSize)??qU,this.sortKeys=(t==null?void 0:t.sortKeys)??!1,this.forceFloat32=(t==null?void 0:t.forceFloat32)??!1,this.ignoreUndefined=(t==null?void 0:t.ignoreUndefined)??!1,this.forceIntegerToFloat=(t==null?void 0:t.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new E3({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(t){if(this.entered)return this.clone().encodeSharedRef(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(t){if(this.entered)return this.clone().encode(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(t,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);t==null?this.encodeNil():typeof t=="boolean"?this.encodeBoolean(t):typeof t=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):typeof t=="string"?this.encodeString(t):this.useBigInt64&&typeof t=="bigint"?this.encodeBigInt64(t):this.encodeObject(t,n)}ensureBufferSizeToWrite(t){const n=this.pos+t;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(t){const n=new ArrayBuffer(t),r=new Uint8Array(n),i=new DataView(n);r.set(this.bytes),this.view=i,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(t){t===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)}encodeNumberAsFloat(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}encodeBigInt64(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else if(t<4294967296)this.writeU8(219),this.writeU32(t);else throw new Error(`Too long string: ${t} bytes in UTF-8`)}encodeString(t){const r=bU(t);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),IU(t,this.bytes,this.pos),this.pos+=r}encodeObject(t,n){const r=this.extensionCodec.tryToEncode(t,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(t))this.encodeArray(t,n);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else if(typeof t=="object")this.encodeMap(t,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(t)}`)}encodeBinary(t){const n=t.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=pm(t);this.writeU8a(r)}encodeArray(t,n){const r=t.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const i of t)this.doEncode(i,n+1)}countWithoutUndefined(t,n){let r=0;for(const i of n)t[i]!==void 0&&r++;return r}encodeMap(t,n){const r=Object.keys(t);this.sortKeys&&r.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(t,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const s of r){const o=t[s];this.ignoreUndefined&&o===void 0||(this.encodeString(s),this.doEncode(o,n+1))}}encodeExtension(t){if(typeof t.data=="function"){const r=t.data(this.pos+6),i=r.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(t.type),this.writeU8a(r);return}const n=t.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){const n=t.length;this.ensureBufferSizeToWrite(n),this.bytes.set(t,this.pos),this.pos+=n}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),$U(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),v3(this.view,this.pos,t),this.pos+=8}writeBigUint64(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8}writeBigInt64(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8}};function GU(e,t){return new VU(t).encodeSharedRef(e)}function yp(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}const WU=16,KU=16;class QU{constructor(t=WU,n=KU){this.hit=0,this.miss=0,this.maxKeyLength=t,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,n,r){const i=this.caches[r-1];e:for(const s of i){const o=s.bytes;for(let a=0;a<r;a++)if(o[a]!==t[n+a])continue e;return s.str}return null}store(t,n){const r=this.caches[t.length-1],i={bytes:t,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(t,n,r){const i=this.find(t,n,r);if(i!=null)return this.hit++,i;this.miss++;const s=w3(t,n,r),o=Uint8Array.prototype.slice.call(t,n,n+r);return this.store(o,s),s}}const gm="array",Wc="map_key",_3="map_value",YU=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new Rn("The type of key must be string or number but "+typeof e)};class XU{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){const n=this.getUninitializedStateFromPool();n.type=gm,n.position=0,n.size=t,n.array=new Array(t)}pushMapState(t){const n=this.getUninitializedStateFromPool();n.type=Wc,n.readCount=0,n.size=t,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===gm){const r=t;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(t.type===Wc||t.type===_3){const r=t;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const pc=-1,k0=new DataView(new ArrayBuffer(0)),JU=new Uint8Array(k0.buffer);try{k0.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const Uv=new RangeError("Insufficient data"),ZU=new QU;let eB=class S3{constructor(t){this.totalPos=0,this.pos=0,this.view=k0,this.bytes=JU,this.headByte=pc,this.stack=new XU,this.entered=!1,this.extensionCodec=(t==null?void 0:t.extensionCodec)??uf.defaultCodec,this.context=t==null?void 0:t.context,this.useBigInt64=(t==null?void 0:t.useBigInt64)??!1,this.rawStrings=(t==null?void 0:t.rawStrings)??!1,this.maxStrLength=(t==null?void 0:t.maxStrLength)??hc,this.maxBinLength=(t==null?void 0:t.maxBinLength)??hc,this.maxArrayLength=(t==null?void 0:t.maxArrayLength)??hc,this.maxMapLength=(t==null?void 0:t.maxMapLength)??hc,this.maxExtLength=(t==null?void 0:t.maxExtLength)??hc,this.keyDecoder=(t==null?void 0:t.keyDecoder)!==void 0?t.keyDecoder:ZU,this.mapKeyConverter=(t==null?void 0:t.mapKeyConverter)??YU}clone(){return new S3({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=pc,this.stack.reset()}setBuffer(t){const n=pm(t);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===pc&&!this.hasRemaining(1))this.setBuffer(t);else{const n=this.bytes.subarray(this.pos),r=pm(t),i=new Uint8Array(n.length+r.length);i.set(n),i.set(r,n.length),this.setBuffer(i)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let n=!1,r;for await(const a of t){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:i,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${yp(i)} at ${o} (${s} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,n){if(this.entered){yield*this.clone().decodeMultiAsync(t,n);return}try{this.entered=!0;let r=n,i=-1;for await(const s of t){if(n&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),r&&(i=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let n;if(t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){const i=t-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t<160){const i=t-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else{const i=t-160;n=this.decodeString(i,0)}else if(t===192)n=null;else if(t===194)n=!1;else if(t===195)n=!0;else if(t===202)n=this.readF32();else if(t===203)n=this.readF64();else if(t===204)n=this.readU8();else if(t===205)n=this.readU16();else if(t===206)n=this.readU32();else if(t===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(t===208)n=this.readI8();else if(t===209)n=this.readI16();else if(t===210)n=this.readI32();else if(t===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(t===217){const i=this.lookU8();n=this.decodeString(i,1)}else if(t===218){const i=this.lookU16();n=this.decodeString(i,2)}else if(t===219){const i=this.lookU32();n=this.decodeString(i,4)}else if(t===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===196){const i=this.lookU8();n=this.decodeBinary(i,1)}else if(t===197){const i=this.lookU16();n=this.decodeBinary(i,2)}else if(t===198){const i=this.lookU32();n=this.decodeBinary(i,4)}else if(t===212)n=this.decodeExtension(1,0);else if(t===213)n=this.decodeExtension(2,0);else if(t===214)n=this.decodeExtension(4,0);else if(t===215)n=this.decodeExtension(8,0);else if(t===216)n=this.decodeExtension(16,0);else if(t===199){const i=this.lookU8();n=this.decodeExtension(i,1)}else if(t===200){const i=this.lookU16();n=this.decodeExtension(i,2)}else if(t===201){const i=this.lookU32();n=this.decodeExtension(i,4)}else throw new Rn(`Unrecognized type byte: ${yp(t)}`);this.complete();const r=this.stack;for(;r.length>0;){const i=r.top();if(i.type===gm)if(i.array[i.position]=n,i.position++,i.position===i.size)n=i.array,r.release(i);else continue e;else if(i.type===Wc){if(n==="__proto__")throw new Rn("The key __proto__ is not allowed");i.key=this.mapKeyConverter(n),i.type=_3;continue e}else if(i.map[i.key]=n,i.readCount++,i.readCount===i.size)n=i.map,r.release(i);else{i.key=null,i.type=Wc;continue e}}return n}}readHeadByte(){return this.headByte===pc&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=pc}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new Rn(`Unrecognized array type byte: ${yp(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new Rn(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new Rn(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,n):this.decodeBinary(t,n)}decodeUtf8String(t,n){var s;if(t>this.maxStrLength)throw new Rn(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+t)throw Uv;const r=this.pos+n;let i;return this.stateIsMapKey()&&((s=this.keyDecoder)!=null&&s.canBeCached(t))?i=this.keyDecoder.decode(this.bytes,r,t):i=RU(this.bytes,r,t),this.pos+=n+t,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Wc:!1}decodeBinary(t,n){if(t>this.maxBinLength)throw new Rn(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+n))throw Uv;const r=this.pos+n,i=this.bytes.subarray(r,r+t);return this.pos+=n+t,i}decodeExtension(t,n){if(t>this.maxExtLength)throw new Rn(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),i=this.decodeBinary(t,n+1);return this.extensionCodec.decode(i,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=OU(this.view,this.pos);return this.pos+=8,t}readI64(){const t=b3(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}};function tB(e,t){return new eB(t).decode(e)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function nB(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function x3(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function df(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function R0(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function mm(e){if(!Array.isArray(e))throw new Error("array expected")}function ff(e,t){if(!x3(!0,t))throw new Error(`${e}: array of strings expected`)}function rB(e,t){if(!x3(!1,t))throw new Error(`${e}: array of numbers expected`)}function iB(...e){const t=s=>s,n=(s,o)=>a=>s(o(a)),r=e.map(s=>s.encode).reduceRight(n,t),i=e.map(s=>s.decode).reduce(n,t);return{encode:r,decode:i}}function sB(e){const t=typeof e=="string"?e.split(""):e,n=t.length;ff("alphabet",t);const r=new Map(t.map((i,s)=>[i,s]));return{encode:i=>(mm(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${e}`);return t[s]})),decode:i=>(mm(i),i.map(s=>{df("alphabet.decode",s);const o=r.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${e}`);return o}))}}function oB(e=""){return df("join",e),{encode:t=>(ff("join.decode",t),t.join(e)),decode:t=>(df("join.decode",t),t.split(e))}}function aB(e,t="="){return R0(e),df("padding",t),{encode(n){for(ff("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){ff("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const I3=(e,t)=>t===0?e:I3(t,e%t),hf=(e,t)=>e+(t-I3(e,t)),wp=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function Bv(e,t,n,r){if(mm(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(hf(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${hf(t,n)}`);let i=0,s=0;const o=wp[t],a=wp[n]-1,c=[];for(const l of e){if(R0(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${t}`);if(i=i<<t|l,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)c.push((i>>s-n&a)>>>0);const u=wp[s];if(u===void 0)throw new Error("invalid carry");i&=u-1}if(i=i<<n-s&a,!r&&s>=t)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&c.push(i>>>0),c}function cB(e,t=!1){if(R0(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(hf(8,e)>32||hf(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!nB(n))throw new Error("radix2.encode input should be Uint8Array");return Bv(Array.from(n),8,e,!t)},decode:n=>(rB("radix2.decode",n),Uint8Array.from(Bv(n,e,8,t)))}}const lB=iB(cB(5),sB("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),aB(5),oB("")),uB=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n),dB=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function ro(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return dB(e)}catch{return e}}function _i(e){return typeof e=="string"?e:uB(e)||""}function fB(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function A3(e,...t){if(!fB(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Lv(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function hB(e,t){A3(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const To=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vp=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function pB(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function C3(e){return typeof e=="string"&&(e=pB(e)),A3(e),e}let gB=class{clone(){return this._cloneInto()}};function mB(e){const t=r=>e().update(C3(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function T3(e=32){if(To&&typeof To.getRandomValues=="function")return To.getRandomValues(new Uint8Array(e));if(To&&typeof To.randomBytes=="function")return To.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function yB(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+l,a,r)}let wB=class extends gB{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=vp(this.buffer)}update(t){Lv(this);const{view:n,buffer:r,blockLen:i}=this;t=C3(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=vp(t);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Lv(this),hB(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;yB(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=vp(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}};const Pu=BigInt(2**32-1),ym=BigInt(32);function k3(e,t=!1){return t?{h:Number(e&Pu),l:Number(e>>ym&Pu)}:{h:Number(e>>ym&Pu)|0,l:Number(e&Pu)|0}}function vB(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=k3(e[i],t);[n[i],r[i]]=[s,o]}return[n,r]}const bB=(e,t)=>BigInt(e>>>0)<<ym|BigInt(t>>>0),EB=(e,t,n)=>e>>>n,_B=(e,t,n)=>e<<32-n|t>>>n,SB=(e,t,n)=>e>>>n|t<<32-n,xB=(e,t,n)=>e<<32-n|t>>>n,IB=(e,t,n)=>e<<64-n|t>>>n-32,AB=(e,t,n)=>e>>>n-32|t<<64-n,CB=(e,t)=>t,TB=(e,t)=>e,kB=(e,t,n)=>e<<n|t>>>32-n,RB=(e,t,n)=>t<<n|e>>>32-n,$B=(e,t,n)=>t<<n-32|e>>>64-n,OB=(e,t,n)=>e<<n-32|t>>>64-n;function PB(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const NB=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),DB=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,UB=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),BB=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,LB=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),FB=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,le={fromBig:k3,split:vB,toBig:bB,shrSH:EB,shrSL:_B,rotrSH:SB,rotrSL:xB,rotrBH:IB,rotrBL:AB,rotr32H:CB,rotr32L:TB,rotlSH:kB,rotlSL:RB,rotlBH:$B,rotlBL:OB,add:PB,add3L:NB,add3H:DB,add4L:UB,add4H:BB,add5H:FB,add5L:LB},[jB,MB]=le.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Ti=new Uint32Array(80),ki=new Uint32Array(80);let zB=class extends wB{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:v}=this;return[t,n,r,i,s,o,a,c,l,u,d,f,h,p,g,v]}set(t,n,r,i,s,o,a,c,l,u,d,f,h,p,g,v){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=p|0,this.Hh=g|0,this.Hl=v|0}process(t,n){for(let E=0;E<16;E++,n+=4)Ti[E]=t.getUint32(n),ki[E]=t.getUint32(n+=4);for(let E=16;E<80;E++){const A=Ti[E-15]|0,T=ki[E-15]|0,D=le.rotrSH(A,T,1)^le.rotrSH(A,T,8)^le.shrSH(A,T,7),j=le.rotrSL(A,T,1)^le.rotrSL(A,T,8)^le.shrSL(A,T,7),L=Ti[E-2]|0,C=ki[E-2]|0,U=le.rotrSH(L,C,19)^le.rotrBH(L,C,61)^le.shrSH(L,C,6),B=le.rotrSL(L,C,19)^le.rotrBL(L,C,61)^le.shrSL(L,C,6),F=le.add4L(j,B,ki[E-7],ki[E-16]),q=le.add4H(F,D,U,Ti[E-7],Ti[E-16]);Ti[E]=q|0,ki[E]=F|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:v,Hh:m,Hl:w}=this;for(let E=0;E<80;E++){const A=le.rotrSH(d,f,14)^le.rotrSH(d,f,18)^le.rotrBH(d,f,41),T=le.rotrSL(d,f,14)^le.rotrSL(d,f,18)^le.rotrBL(d,f,41),D=d&h^~d&g,j=f&p^~f&v,L=le.add5L(w,T,j,MB[E],ki[E]),C=le.add5H(L,m,A,D,jB[E],Ti[E]),U=L|0,B=le.rotrSH(r,i,28)^le.rotrBH(r,i,34)^le.rotrBH(r,i,39),F=le.rotrSL(r,i,28)^le.rotrBL(r,i,34)^le.rotrBL(r,i,39),q=r&s^r&a^s&a,G=i&o^i&c^o&c;m=g|0,w=v|0,g=h|0,v=p|0,h=d|0,p=f|0,{h:d,l:f}=le.add(l|0,u|0,C|0,U|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const S=le.add3L(U,F,G);r=le.add3H(S,C,B,q),i=S|0}({h:r,l:i}=le.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=le.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=le.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=le.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:f}=le.add(this.Eh|0,this.El|0,d|0,f|0),{h,l:p}=le.add(this.Fh|0,this.Fl|0,h|0,p|0),{h:g,l:v}=le.add(this.Gh|0,this.Gl|0,g|0,v|0),{h:m,l:w}=le.add(this.Hh|0,this.Hl|0,m|0,w|0),this.set(r,i,s,o,a,c,l,u,d,f,h,p,g,v,m,w)}roundClean(){Ti.fill(0),ki.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const HB=mB(()=>new zB);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $0=BigInt(0),R3=BigInt(1),qB=BigInt(2);function O0(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function P0(e){if(!O0(e))throw new Error("Uint8Array expected")}function bp(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const VB=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function N0(e){P0(e);let t="";for(let n=0;n<e.length;n++)t+=VB[e[n]];return t}function $3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?$0:BigInt("0x"+e)}const Jr={_0:48,_9:57,A:65,F:70,a:97,f:102};function Fv(e){if(e>=Jr._0&&e<=Jr._9)return e-Jr._0;if(e>=Jr.A&&e<=Jr.F)return e-(Jr.A-10);if(e>=Jr.a&&e<=Jr.f)return e-(Jr.a-10)}function O3(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=Fv(e.charCodeAt(s)),a=Fv(e.charCodeAt(s+1));if(o===void 0||a===void 0){const c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function GB(e){return $3(N0(e))}function Sd(e){return P0(e),$3(N0(Uint8Array.from(e).reverse()))}function P3(e,t){return O3(e.toString(16).padStart(t*2,"0"))}function wm(e,t){return P3(e,t).reverse()}function Zr(e,t,n){let r;if(typeof t=="string")try{r=O3(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(O0(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function jv(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];P0(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const s=e[r];n.set(s,i),i+=s.length}return n}const Ep=e=>typeof e=="bigint"&&$0<=e;function WB(e,t,n){return Ep(e)&&Ep(t)&&Ep(n)&&t<=e&&e<n}function gc(e,t,n,r){if(!WB(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function KB(e){let t;for(t=0;e>$0;e>>=R3,t+=1);return t}const QB=e=>(qB<<BigInt(e-1))-R3,YB={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||O0(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function D0(e,t,n={}){const r=(i,s,o)=>{const a=YB[s];if(typeof a!="function")throw new Error("invalid validator function");const c=e[i];if(!(o&&c===void 0)&&!a(c,e))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}function Mv(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const s=e(n,...r);return t.set(n,s),s}}const _t=BigInt(0),nt=BigInt(1),$s=BigInt(2),XB=BigInt(3),vm=BigInt(4),zv=BigInt(5),Hv=BigInt(8);function pt(e,t){const n=e%t;return n>=_t?n:t+n}function JB(e,t,n){if(t<_t)throw new Error("invalid exponent, negatives unsupported");if(n<=_t)throw new Error("invalid modulus");if(n===nt)return _t;let r=nt;for(;t>_t;)t&nt&&(r=r*e%n),e=e*e%n,t>>=nt;return r}function Ar(e,t,n){let r=e;for(;t-- >_t;)r*=r,r%=n;return r}function qv(e,t){if(e===_t)throw new Error("invert: expected non-zero number");if(t<=_t)throw new Error("invert: expected positive modulus, got "+t);let n=pt(e,t),r=t,i=_t,s=nt;for(;n!==_t;){const o=r/n,a=r%n,c=i-s*o;r=n,n=a,i=s,s=c}if(r!==nt)throw new Error("invert: does not exist");return pt(i,t)}function ZB(e){const t=(e-nt)/$s;let n,r,i;for(n=e-nt,r=0;n%$s===_t;n/=$s,r++);for(i=$s;i<e&&JB(i,t,e)!==e-nt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(e+nt)/vm;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(n+nt)/$s;return function(o,a){if(o.pow(a,t)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,i),n),u=o.pow(a,s),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let p=o.sqr(d);f<c&&!o.eql(p,o.ONE);f++)p=o.sqr(p);const h=o.pow(l,nt<<BigInt(c-f-1));l=o.sqr(h),u=o.mul(u,h),d=o.mul(d,l),c=f}return u}}function eL(e){if(e%vm===XB){const t=(e+nt)/vm;return function(n,r){const i=n.pow(r,t);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(e%Hv===zv){const t=(e-zv)/Hv;return function(n,r){const i=n.mul(r,$s),s=n.pow(i,t),o=n.mul(r,s),a=n.mul(n.mul(o,$s),s),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return ZB(e)}const tL=(e,t)=>(pt(e,t)&nt)===nt,nL=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function rL(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=nL.reduce((r,i)=>(r[i]="function",r),t);return D0(e,n)}function iL(e,t,n){if(n<_t)throw new Error("invalid exponent, negatives unsupported");if(n===_t)return e.ONE;if(n===nt)return t;let r=e.ONE,i=t;for(;n>_t;)n&nt&&(r=e.mul(r,i)),i=e.sqr(i),n>>=nt;return r}function sL(e,t){const n=new Array(t.length),r=t.reduce((s,o,a)=>e.is0(o)?s:(n[a]=s,e.mul(s,o)),e.ONE),i=e.inv(r);return t.reduceRight((s,o,a)=>e.is0(o)?s:(n[a]=e.mul(s,n[a]),e.mul(s,o)),i),n}function N3(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function D3(e,t,n=!1,r={}){if(e<=_t)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=N3(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:s,MASK:QB(i),ZERO:_t,ONE:nt,create:c=>pt(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return _t<=c&&c<e},is0:c=>c===_t,isOdd:c=>(c&nt)===nt,neg:c=>pt(-c,e),eql:(c,l)=>c===l,sqr:c=>pt(c*c,e),add:(c,l)=>pt(c+l,e),sub:(c,l)=>pt(c-l,e),mul:(c,l)=>pt(c*l,e),pow:(c,l)=>iL(a,c,l),div:(c,l)=>pt(c*qv(l,e),e),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>qv(c,e),sqrt:r.sqrt||(c=>(o||(o=eL(e)),o(a,c))),invertBatch:c=>sL(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?wm(c,s):P3(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?Sd(c):GB(c)}});return Object.freeze(a)}const Vv=BigInt(0),Nu=BigInt(1);function _p(e,t){const n=t.negate();return e?n:t}function U3(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Sp(e,t){U3(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function oL(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function aL(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const xp=new WeakMap,B3=new WeakMap;function Ip(e){return B3.get(e)||1}function cL(e,t){return{constTimeNegate:_p,hasPrecomputes(n){return Ip(n)!==1},unsafeLadder(n,r,i=e.ZERO){let s=n;for(;r>Vv;)r&Nu&&(i=i.add(s)),s=s.double(),r>>=Nu;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=Sp(r,t),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=Sp(n,t);let a=e.ZERO,c=e.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let f=0;f<s;f++){const h=f*o;let p=Number(i&l);i>>=d,p>o&&(p-=u,i+=Nu);const g=h,v=h+Math.abs(p)-1,m=f%2!==0,w=p<0;p===0?c=c.add(_p(m,r[g])):a=a.add(_p(w,r[v]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=e.ZERO){const{windows:o,windowSize:a}=Sp(n,t),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const f=d*a;if(i===Vv)break;let h=Number(i&c);if(i>>=u,h>a&&(h-=l,i+=Nu),h===0)continue;let p=r[f+Math.abs(h)-1];h<0&&(p=p.negate()),s=s.add(p)}return s},getPrecomputes(n,r,i){let s=xp.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&xp.set(r,i(s))),s},wNAFCached(n,r,i){const s=Ip(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=Ip(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){U3(r,t),B3.set(n,r),xp.delete(n)}}}function lL(e,t,n,r){if(oL(n,e),aL(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=KB(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((t.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let h=0;h<r.length;h++){const p=r[h],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[h])}let f=i;for(let h=c.length-1,p=i;h>0;h--)p=p.add(c[h]),f=f.add(p);if(u=u.add(f),d!==0)for(let h=0;h<o;h++)u=u.double()}return u}function uL(e){return rL(e.Fp),D0(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...N3(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const cr=BigInt(0),on=BigInt(1),Du=BigInt(2),dL=BigInt(8),fL={zip215:!0};function hL(e){const t=uL(e);return D0(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function pL(e){const t=hL(e),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=t,l=Du<<BigInt(a*8)-on,u=n.create,d=D3(t.n,t.nBitLength),f=t.uvRatio||((S,x)=>{try{return{isValid:!0,value:n.sqrt(S*n.inv(x))}}catch{return{isValid:!1,value:cr}}}),h=t.adjustScalarBytes||(S=>S),p=t.domain||((S,x,O)=>{if(bp("phflag",O),x.length||O)throw new Error("Contexts/pre-hash are not supported");return S});function g(S,x){gc("coordinate "+S,x,cr,l)}function v(S){if(!(S instanceof E))throw new Error("ExtendedPoint expected")}const m=Mv((S,x)=>{const{ex:O,ey:R,ez:$}=S,P=S.is0();x==null&&(x=P?dL:n.inv($));const M=u(O*x),W=u(R*x),ee=u($*x);if(P)return{x:cr,y:on};if(ee!==on)throw new Error("invZ was invalid");return{x:M,y:W}}),w=Mv(S=>{const{a:x,d:O}=t;if(S.is0())throw new Error("bad point: ZERO");const{ex:R,ey:$,ez:P,et:M}=S,W=u(R*R),ee=u($*$),Q=u(P*P),te=u(Q*Q),se=u(W*x),ue=u(Q*u(se+ee)),de=u(te+u(O*u(W*ee)));if(ue!==de)throw new Error("bad point: equation left != right (1)");const ce=u(R*$),ze=u(P*M);if(ce!==ze)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(x,O,R,$){this.ex=x,this.ey=O,this.ez=R,this.et=$,g("x",x),g("y",O),g("z",R),g("t",$),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof E)throw new Error("extended point not allowed");const{x:O,y:R}=x||{};return g("x",O),g("y",R),new E(O,R,on,u(O*R))}static normalizeZ(x){const O=n.invertBatch(x.map(R=>R.ez));return x.map((R,$)=>R.toAffine(O[$])).map(E.fromAffine)}static msm(x,O){return lL(E,d,x,O)}_setWindowSize(x){D.setWindowSize(this,x)}assertValidity(){w(this)}equals(x){v(x);const{ex:O,ey:R,ez:$}=this,{ex:P,ey:M,ez:W}=x,ee=u(O*W),Q=u(P*$),te=u(R*W),se=u(M*$);return ee===Q&&te===se}is0(){return this.equals(E.ZERO)}negate(){return new E(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:x}=t,{ex:O,ey:R,ez:$}=this,P=u(O*O),M=u(R*R),W=u(Du*u($*$)),ee=u(x*P),Q=O+R,te=u(u(Q*Q)-P-M),se=ee+M,ue=se-W,de=ee-M,ce=u(te*ue),ze=u(se*de),ut=u(te*de),xr=u(ue*se);return new E(ce,ze,xr,ut)}add(x){v(x);const{a:O,d:R}=t,{ex:$,ey:P,ez:M,et:W}=this,{ex:ee,ey:Q,ez:te,et:se}=x;if(O===BigInt(-1)){const au=u((P-$)*(Q+ee)),Xa=u((P+$)*(Q-ee)),Ai=u(Xa-au);if(Ai===cr)return this.double();const In=u(M*Du*se),bo=u(W*Du*te),cu=bo+In,or=Xa+au,lu=bo-In,I=u(cu*Ai),y=u(or*lu),b=u(cu*lu),k=u(Ai*or);return new E(I,y,k,b)}const ue=u($*ee),de=u(P*Q),ce=u(W*R*se),ze=u(M*te),ut=u(($+P)*(ee+Q)-ue-de),xr=ze-ce,sr=ze+ce,Mn=u(de-O*ue),Qa=u(ut*xr),Ch=u(sr*Mn),Ya=u(ut*Mn),Th=u(xr*sr);return new E(Qa,Ch,Th,Ya)}subtract(x){return this.add(x.negate())}wNAF(x){return D.wNAFCached(this,x,E.normalizeZ)}multiply(x){const O=x;gc("scalar",O,on,r);const{p:R,f:$}=this.wNAF(O);return E.normalizeZ([R,$])[0]}multiplyUnsafe(x,O=E.ZERO){const R=x;return gc("scalar",R,cr,r),R===cr?T:this.is0()||R===on?this:D.wNAFCachedUnsafe(this,R,E.normalizeZ,O)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return D.unsafeLadder(this,r).is0()}toAffine(x){return m(this,x)}clearCofactor(){const{h:x}=t;return x===on?this:this.multiplyUnsafe(x)}static fromHex(x,O=!1){const{d:R,a:$}=t,P=n.BYTES;x=Zr("pointHex",x,P),bp("zip215",O);const M=x.slice(),W=x[P-1];M[P-1]=W&-129;const ee=Sd(M),Q=O?l:n.ORDER;gc("pointHex.y",ee,cr,Q);const te=u(ee*ee),se=u(te-on),ue=u(R*te-$);let{isValid:de,value:ce}=f(se,ue);if(!de)throw new Error("Point.fromHex: invalid y coordinate");const ze=(ce&on)===on,ut=(W&128)!==0;if(!O&&ce===cr&&ut)throw new Error("Point.fromHex: x=0 and x_0=1");return ut!==ze&&(ce=u(-ce)),E.fromAffine({x:ce,y:ee})}static fromPrivateKey(x){return C(x).point}toRawBytes(){const{x,y:O}=this.toAffine(),R=wm(O,n.BYTES);return R[R.length-1]|=x&on?128:0,R}toHex(){return N0(this.toRawBytes())}}E.BASE=new E(t.Gx,t.Gy,on,u(t.Gx*t.Gy)),E.ZERO=new E(cr,on,on,cr);const{BASE:A,ZERO:T}=E,D=cL(E,a*8);function j(S){return pt(S,r)}function L(S){return j(Sd(S))}function C(S){const x=n.BYTES;S=Zr("private key",S,x);const O=Zr("hashed private key",s(S),2*x),R=h(O.slice(0,x)),$=O.slice(x,2*x),P=L(R),M=A.multiply(P),W=M.toRawBytes();return{head:R,prefix:$,scalar:P,point:M,pointBytes:W}}function U(S){return C(S).pointBytes}function B(S=new Uint8Array,...x){const O=jv(...x);return L(s(p(O,Zr("context",S),!!i)))}function F(S,x,O={}){S=Zr("message",S),i&&(S=i(S));const{prefix:R,scalar:$,pointBytes:P}=C(x),M=B(O.context,R,S),W=A.multiply(M).toRawBytes(),ee=B(O.context,W,P,S),Q=j(M+ee*$);gc("signature.s",Q,cr,r);const te=jv(W,wm(Q,n.BYTES));return Zr("result",te,n.BYTES*2)}const q=fL;function G(S,x,O,R=q){const{context:$,zip215:P}=R,M=n.BYTES;S=Zr("signature",S,2*M),x=Zr("message",x),O=Zr("publicKey",O,M),P!==void 0&&bp("zip215",P),i&&(x=i(x));const W=Sd(S.slice(M,2*M));let ee,Q,te;try{ee=E.fromHex(O,P),Q=E.fromHex(S.slice(0,M),P),te=A.multiplyUnsafe(W)}catch{return!1}if(!P&&ee.isSmallOrder())return!1;const se=B($,Q.toRawBytes(),ee.toRawBytes(),x);return Q.add(ee.multiplyUnsafe(se)).subtract(te).clearCofactor().equals(E.ZERO)}return A._setWindowSize(8),{CURVE:t,getPublicKey:U,sign:F,verify:G,ExtendedPoint:E,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>o(n.BYTES),precompute(S=8,x=E.BASE){return x._setWindowSize(S),x.multiply(BigInt(3)),x}}}}BigInt(0),BigInt(1);const U0=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Gv=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const gL=BigInt(1),Wv=BigInt(2);BigInt(3);const mL=BigInt(5),yL=BigInt(8);function wL(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=U0,o=e*e%s*e%s,a=Ar(o,Wv,s)*o%s,c=Ar(a,gL,s)*e%s,l=Ar(c,mL,s)*c%s,u=Ar(l,t,s)*l%s,d=Ar(u,n,s)*u%s,f=Ar(d,r,s)*d%s,h=Ar(f,i,s)*f%s,p=Ar(h,i,s)*f%s,g=Ar(p,t,s)*l%s;return{pow_p_5_8:Ar(g,Wv,s)*e%s,b2:o}}function vL(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function bL(e,t){const n=U0,r=pt(t*t*t,n),i=pt(r*r*t,n),s=wL(e*i).pow_p_5_8;let o=pt(e*r*s,n);const a=pt(t*o*o,n),c=o,l=pt(o*Gv,n),u=a===e,d=a===pt(-e,n),f=a===pt(-e*Gv,n);return u&&(o=c),(d||f)&&(o=l),tL(o,n)&&(o=pt(-o,n)),{isValid:u||d,value:o}}const EL=D3(U0,void 0,!0),_L={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:EL,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:yL,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:HB,randomBytes:T3,adjustScalarBytes:vL,uvRatio:bL},L3=pL(_L),SL="EdDSA",xL="JWT",pf=".",sh="base64url",F3="utf8",j3="utf8",IL=":",AL="did",CL="key",Kv="base58btc",TL="z",kL="K36",RL=32;function B0(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function M3(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?B0(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function z3(e,t){t||(t=e.reduce((i,s)=>i+s.length,0));const n=M3(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return B0(n)}function $L(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,v=0,m=0,w=p.length;m!==w&&p[m]===0;)m++,g++;for(var E=(w-m)*u+1>>>0,A=new Uint8Array(E);m!==w;){for(var T=p[m],D=0,j=E-1;(T!==0||D<v)&&j!==-1;j--,D++)T+=256*A[j]>>>0,A[j]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");v=D,m++}for(var L=E-v;L!==E&&A[L]===0;)L++;for(var C=c.repeat(g);L<E;++L)C+=e.charAt(A[L]);return C}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var v=0,m=0;p[g]===c;)v++,g++;for(var w=(p.length-g)*l+1>>>0,E=new Uint8Array(w);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var T=0,D=w-1;(A!==0||T<m)&&D!==-1;D--,T++)A+=a*E[D]>>>0,E[D]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=T,g++}if(p[g]!==" "){for(var j=w-m;j!==w&&E[j]===0;)j++;for(var L=new Uint8Array(v+(w-j)),C=v;j!==w;)L[C++]=E[j++];return L}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var OL=$L,PL=OL;const H3=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},NL=e=>new TextEncoder().encode(e),DL=e=>new TextDecoder().decode(e);let UL=class{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},BL=class{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return q3(this,t)}},LL=class{constructor(t){this.decoders=t}or(t){return q3(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const q3=(e,t)=>new LL({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let FL=class{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new UL(t,n,r),this.decoder=new BL(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};const oh=({name:e,prefix:t,encode:n,decode:r})=>new FL(e,t,n,r),Xl=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=PL(n,t);return oh({prefix:e,name:t,encode:r,decode:s=>H3(i(s))})},jL=(e,t,n,r)=>{const i={};for(let u=0;u<t.length;++u)i[t[u]]=u;let s=e.length;for(;e[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[e[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},ML=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>n;)o-=n,s+=t[i&a>>o];if(o&&(s+=t[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},Pt=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>oh({prefix:t,name:e,encode(i){return ML(i,r,n)},decode(i){return jL(i,r,n,e)}}),zL=oh({prefix:"\0",name:"identity",encode:e=>DL(e),decode:e=>NL(e)});var HL=Object.freeze({__proto__:null,identity:zL});const qL=Pt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var VL=Object.freeze({__proto__:null,base2:qL});const GL=Pt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var WL=Object.freeze({__proto__:null,base8:GL});const KL=Xl({prefix:"9",name:"base10",alphabet:"0123456789"});var QL=Object.freeze({__proto__:null,base10:KL});const YL=Pt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),XL=Pt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var JL=Object.freeze({__proto__:null,base16:YL,base16upper:XL});const ZL=Pt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),eF=Pt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),tF=Pt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),nF=Pt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),rF=Pt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),iF=Pt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),sF=Pt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),oF=Pt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),aF=Pt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var cF=Object.freeze({__proto__:null,base32:ZL,base32upper:eF,base32pad:tF,base32padupper:nF,base32hex:rF,base32hexupper:iF,base32hexpad:sF,base32hexpadupper:oF,base32z:aF});const lF=Xl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),uF=Xl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var dF=Object.freeze({__proto__:null,base36:lF,base36upper:uF});const fF=Xl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),hF=Xl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var pF=Object.freeze({__proto__:null,base58btc:fF,base58flickr:hF});const gF=Pt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),mF=Pt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yF=Pt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),wF=Pt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var vF=Object.freeze({__proto__:null,base64:gF,base64pad:mF,base64url:yF,base64urlpad:wF});const V3=Array.from(""),bF=V3.reduce((e,t,n)=>(e[n]=t,e),[]),EF=V3.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function _F(e){return e.reduce((t,n)=>(t+=bF[n],t),"")}function SF(e){const t=[];for(const n of e){const r=EF[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const xF=oh({prefix:"",name:"base256emoji",encode:_F,decode:SF});var IF=Object.freeze({__proto__:null,base256emoji:xF}),AF=G3,Qv=128,CF=-128,TF=Math.pow(2,31);function G3(e,t,n){t=t||[],n=n||0;for(var r=n;e>=TF;)t[n++]=e&255|Qv,e/=128;for(;e&CF;)t[n++]=e&255|Qv,e>>>=7;return t[n]=e|0,G3.bytes=n-r+1,t}var kF=bm,RF=128,Yv=127;function bm(e,r){var n=0,r=r||0,i=0,s=r,o,a=e.length;do{if(s>=a)throw bm.bytes=0,new RangeError("Could not decode varint");o=e[s++],n+=i<28?(o&Yv)<<i:(o&Yv)*Math.pow(2,i),i+=7}while(o>=RF);return bm.bytes=s-r,n}var $F=Math.pow(2,7),OF=Math.pow(2,14),PF=Math.pow(2,21),NF=Math.pow(2,28),DF=Math.pow(2,35),UF=Math.pow(2,42),BF=Math.pow(2,49),LF=Math.pow(2,56),FF=Math.pow(2,63),jF=function(e){return e<$F?1:e<OF?2:e<PF?3:e<NF?4:e<DF?5:e<UF?6:e<BF?7:e<LF?8:e<FF?9:10},MF={encode:AF,decode:kF,encodingLength:jF},W3=MF;const Xv=(e,t,n=0)=>(W3.encode(e,t,n),t),Jv=e=>W3.encodingLength(e),Em=(e,t)=>{const n=t.byteLength,r=Jv(e),i=r+Jv(n),s=new Uint8Array(i+n);return Xv(e,s,0),Xv(n,s,r),s.set(t,i),new zF(e,n,t,s)};let zF=class{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}};const K3=({name:e,code:t,encode:n})=>new HF(e,t,n);let HF=class{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?Em(this.code,n):n.then(r=>Em(this.code,r))}else throw Error("Unknown type, must be binary type")}};const Q3=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),qF=K3({name:"sha2-256",code:18,encode:Q3("SHA-256")}),VF=K3({name:"sha2-512",code:19,encode:Q3("SHA-512")});var GF=Object.freeze({__proto__:null,sha256:qF,sha512:VF});const Y3=0,WF="identity",X3=H3,KF=e=>Em(Y3,X3(e)),QF={code:Y3,name:WF,encode:X3,digest:KF};var YF=Object.freeze({__proto__:null,identity:QF});new TextEncoder,new TextDecoder;const Zv={...HL,...VL,...WL,...QL,...JL,...cF,...dF,...pF,...vF,...IF};({...GF,...YF});function J3(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const eb=J3("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Ap=J3("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=M3(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),Z3={utf8:eb,"utf-8":eb,hex:Zv.base16,latin1:Ap,ascii:Ap,binary:Ap,...Zv};function ah(e,t="utf8"){const n=Z3[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}function qa(e,t="utf8"){const n=Z3[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?B0(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function tb(e){return ro(ah(qa(e,sh),F3))}function gf(e){return ah(qa(_i(e),F3),sh)}function eA(e){const t=qa(kL,Kv),n=TL+ah(z3([t,e]),Kv);return[AL,CL,n].join(IL)}function XF(e){return ah(e,sh)}function JF(e){return qa(e,sh)}function ZF(e){return qa([gf(e.header),gf(e.payload)].join(pf),j3)}function ej(e){return[gf(e.header),gf(e.payload),XF(e.signature)].join(pf)}function _m(e){const t=e.split(pf),n=tb(t[0]),r=tb(t[1]),i=JF(t[2]),s=qa(t.slice(0,2).join(pf),j3);return{header:n,payload:r,signature:i,data:s}}function nb(e=T3(RL)){const t=L3.getPublicKey(e);return{secretKey:z3([e,t]),publicKey:t}}async function tj(e,t,n,r,i=Z.fromMiliseconds(Date.now())){const s={alg:SL,typ:xL},o=eA(r.publicKey),a=i+n,c={iss:o,sub:e,aud:t,iat:i,exp:a},l=ZF({header:s,payload:c}),u=L3.sign(l,r.secretKey.slice(0,32));return ej({header:s,payload:c,signature:u})}function L0(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function tA(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?L0(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Kc(e,t){t||(t=e.reduce((i,s)=>i+s.length,0));const n=tA(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return L0(n)}function nj(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,v=0,m=0,w=p.length;m!==w&&p[m]===0;)m++,g++;for(var E=(w-m)*u+1>>>0,A=new Uint8Array(E);m!==w;){for(var T=p[m],D=0,j=E-1;(T!==0||D<v)&&j!==-1;j--,D++)T+=256*A[j]>>>0,A[j]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");v=D,m++}for(var L=E-v;L!==E&&A[L]===0;)L++;for(var C=c.repeat(g);L<E;++L)C+=e.charAt(A[L]);return C}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var v=0,m=0;p[g]===c;)v++,g++;for(var w=(p.length-g)*l+1>>>0,E=new Uint8Array(w);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var T=0,D=w-1;(A!==0||T<m)&&D!==-1;D--,T++)A+=a*E[D]>>>0,E[D]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=T,g++}if(p[g]!==" "){for(var j=w-m;j!==w&&E[j]===0;)j++;for(var L=new Uint8Array(v+(w-j)),C=v;j!==w;)L[C++]=E[j++];return L}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var rj=nj,ij=rj;const sj=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},oj=e=>new TextEncoder().encode(e),aj=e=>new TextDecoder().decode(e);class cj{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class lj{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return nA(this,t)}}class uj{constructor(t){this.decoders=t}or(t){return nA(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const nA=(e,t)=>new uj({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class dj{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new cj(t,n,r),this.decoder=new lj(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const ch=({name:e,prefix:t,encode:n,decode:r})=>new dj(e,t,n,r),Jl=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=ij(n,t);return ch({prefix:e,name:t,encode:r,decode:s=>sj(i(s))})},fj=(e,t,n,r)=>{const i={};for(let u=0;u<t.length;++u)i[t[u]]=u;let s=e.length;for(;e[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[e[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},hj=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>n;)o-=n,s+=t[i&a>>o];if(o&&(s+=t[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},Nt=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>ch({prefix:t,name:e,encode(i){return hj(i,r,n)},decode(i){return fj(i,r,n,e)}}),pj=ch({prefix:"\0",name:"identity",encode:e=>aj(e),decode:e=>oj(e)}),gj=Object.freeze(Object.defineProperty({__proto__:null,identity:pj},Symbol.toStringTag,{value:"Module"})),mj=Nt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),yj=Object.freeze(Object.defineProperty({__proto__:null,base2:mj},Symbol.toStringTag,{value:"Module"})),wj=Nt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),vj=Object.freeze(Object.defineProperty({__proto__:null,base8:wj},Symbol.toStringTag,{value:"Module"})),bj=Jl({prefix:"9",name:"base10",alphabet:"0123456789"}),Ej=Object.freeze(Object.defineProperty({__proto__:null,base10:bj},Symbol.toStringTag,{value:"Module"})),_j=Nt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Sj=Nt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),xj=Object.freeze(Object.defineProperty({__proto__:null,base16:_j,base16upper:Sj},Symbol.toStringTag,{value:"Module"})),Ij=Nt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Aj=Nt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Cj=Nt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Tj=Nt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),kj=Nt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Rj=Nt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),$j=Nt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Oj=Nt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Pj=Nt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Nj=Object.freeze(Object.defineProperty({__proto__:null,base32:Ij,base32hex:kj,base32hexpad:$j,base32hexpadupper:Oj,base32hexupper:Rj,base32pad:Cj,base32padupper:Tj,base32upper:Aj,base32z:Pj},Symbol.toStringTag,{value:"Module"})),Dj=Jl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Uj=Jl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Bj=Object.freeze(Object.defineProperty({__proto__:null,base36:Dj,base36upper:Uj},Symbol.toStringTag,{value:"Module"})),Lj=Jl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Fj=Jl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),jj=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Lj,base58flickr:Fj},Symbol.toStringTag,{value:"Module"})),Mj=Nt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),zj=Nt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Hj=Nt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),qj=Nt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Vj=Object.freeze(Object.defineProperty({__proto__:null,base64:Mj,base64pad:zj,base64url:Hj,base64urlpad:qj},Symbol.toStringTag,{value:"Module"})),rA=Array.from(""),Gj=rA.reduce((e,t,n)=>(e[n]=t,e),[]),Wj=rA.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function Kj(e){return e.reduce((t,n)=>(t+=Gj[n],t),"")}function Qj(e){const t=[];for(const n of e){const r=Wj[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const Yj=ch({prefix:"",name:"base256emoji",encode:Kj,decode:Qj}),Xj=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Yj},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const rb={...gj,...yj,...vj,...Ej,...xj,...Nj,...Bj,...jj,...Vj,...Xj};function iA(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const ib=iA("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Cp=iA("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=tA(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),sA={utf8:ib,"utf-8":ib,hex:rb.base16,latin1:Cp,ascii:Cp,binary:Cp,...rb};function Xn(e,t="utf8"){const n=sA[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?L0(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function bn(e,t="utf8"){const n=sA[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}const Jj={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},Zj="Input must be an string, Buffer or Uint8Array";function eM(e){let t;if(e instanceof Uint8Array)t=e;else if(typeof e=="string")t=new TextEncoder().encode(e);else throw new Error(Zj);return t}function tM(e){return Array.prototype.map.call(e,function(t){return(t<16?"0":"")+t.toString(16)}).join("")}function Uu(e){return(4294967296+e).toString(16).substring(1)}function nM(e,t,n){let r=`
`+e+" = ";for(let i=0;i<t.length;i+=2){if(n===32)r+=Uu(t[i]).toUpperCase(),r+=" ",r+=Uu(t[i+1]).toUpperCase();else if(n===64)r+=Uu(t[i+1]).toUpperCase(),r+=Uu(t[i]).toUpperCase();else throw new Error("Invalid size "+n);i%6===4?r+=`
`+new Array(e.length+4).join(" "):i<t.length-2&&(r+=" ")}console.log(r)}function rM(e,t,n){let r=new Date().getTime();const i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=o%256;const s=new Date().getTime();console.log("Generated random input in "+(s-r)+"ms"),r=s;for(let o=0;o<n;o++){const a=e(i),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var oA={normalizeInput:eM,toHex:tM,debugPrint:nM,testSpeed:rM};const xd=oA;function Bu(e,t,n){const r=e[t]+e[n];let i=e[t+1]+e[n+1];r>=4294967296&&i++,e[t]=r,e[t+1]=i}function sb(e,t,n,r){let i=e[t]+n;n<0&&(i+=4294967296);let s=e[t+1]+r;i>=4294967296&&s++,e[t]=i,e[t+1]=s}function aA(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function Ri(e,t,n,r,i,s){const o=$c[i],a=$c[i+1],c=$c[s],l=$c[s+1];Bu(ae,e,t),sb(ae,e,o,a);let u=ae[r]^ae[e],d=ae[r+1]^ae[e+1];ae[r]=d,ae[r+1]=u,Bu(ae,n,r),u=ae[t]^ae[n],d=ae[t+1]^ae[n+1],ae[t]=u>>>24^d<<8,ae[t+1]=d>>>24^u<<8,Bu(ae,e,t),sb(ae,e,c,l),u=ae[r]^ae[e],d=ae[r+1]^ae[e+1],ae[r]=u>>>16^d<<16,ae[r+1]=d>>>16^u<<16,Bu(ae,n,r),u=ae[t]^ae[n],d=ae[t+1]^ae[n+1],ae[t]=d>>>31^u<<1,ae[t+1]=u>>>31^d<<1}const cA=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),iM=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Lt=new Uint8Array(iM.map(function(e){return e*2})),ae=new Uint32Array(32),$c=new Uint32Array(32);function lA(e,t){let n=0;for(n=0;n<16;n++)ae[n]=e.h[n],ae[n+16]=cA[n];for(ae[24]=ae[24]^e.t,ae[25]=ae[25]^e.t/4294967296,t&&(ae[28]=~ae[28],ae[29]=~ae[29]),n=0;n<32;n++)$c[n]=aA(e.b,4*n);for(n=0;n<12;n++)Ri(0,8,16,24,Lt[n*16+0],Lt[n*16+1]),Ri(2,10,18,26,Lt[n*16+2],Lt[n*16+3]),Ri(4,12,20,28,Lt[n*16+4],Lt[n*16+5]),Ri(6,14,22,30,Lt[n*16+6],Lt[n*16+7]),Ri(0,10,20,30,Lt[n*16+8],Lt[n*16+9]),Ri(2,12,22,24,Lt[n*16+10],Lt[n*16+11]),Ri(4,14,16,26,Lt[n*16+12],Lt[n*16+13]),Ri(6,8,18,28,Lt[n*16+14],Lt[n*16+15]);for(n=0;n<16;n++)e.h[n]=e.h[n]^ae[n]^ae[n+16]}const $i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function uA(e,t,n,r){if(e===0||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};$i.fill(0),$i[0]=e,t&&($i[1]=t.length),$i[2]=1,$i[3]=1,n&&$i.set(n,32),r&&$i.set(r,48);for(let s=0;s<16;s++)i.h[s]=cA[s]^aA($i,s*4);return t&&(F0(i,t),i.c=128),i}function F0(e,t){for(let n=0;n<t.length;n++)e.c===128&&(e.t+=e.c,lA(e,!1),e.c=0),e.b[e.c++]=t[n]}function dA(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;lA(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3);return t}function fA(e,t,n,r,i){n=n||64,e=xd.normalizeInput(e),r&&(r=xd.normalizeInput(r)),i&&(i=xd.normalizeInput(i));const s=uA(n,t,r,i);return F0(s,e),dA(s)}function sM(e,t,n,r,i){const s=fA(e,t,n,r,i);return xd.toHex(s)}var oM={blake2b:fA,blake2bHex:sM,blake2bInit:uA,blake2bUpdate:F0,blake2bFinal:dA};const hA=oA;function aM(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function Oi(e,t,n,r,i,s){Ee[e]=Ee[e]+Ee[t]+i,Ee[r]=Lu(Ee[r]^Ee[e],16),Ee[n]=Ee[n]+Ee[r],Ee[t]=Lu(Ee[t]^Ee[n],12),Ee[e]=Ee[e]+Ee[t]+s,Ee[r]=Lu(Ee[r]^Ee[e],8),Ee[n]=Ee[n]+Ee[r],Ee[t]=Lu(Ee[t]^Ee[n],7)}function Lu(e,t){return e>>>t^e<<32-t}const pA=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ft=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Ee=new Uint32Array(16),xt=new Uint32Array(16);function gA(e,t){let n=0;for(n=0;n<8;n++)Ee[n]=e.h[n],Ee[n+8]=pA[n];for(Ee[12]^=e.t,Ee[13]^=e.t/4294967296,t&&(Ee[14]=~Ee[14]),n=0;n<16;n++)xt[n]=aM(e.b,4*n);for(n=0;n<10;n++)Oi(0,4,8,12,xt[Ft[n*16+0]],xt[Ft[n*16+1]]),Oi(1,5,9,13,xt[Ft[n*16+2]],xt[Ft[n*16+3]]),Oi(2,6,10,14,xt[Ft[n*16+4]],xt[Ft[n*16+5]]),Oi(3,7,11,15,xt[Ft[n*16+6]],xt[Ft[n*16+7]]),Oi(0,5,10,15,xt[Ft[n*16+8]],xt[Ft[n*16+9]]),Oi(1,6,11,12,xt[Ft[n*16+10]],xt[Ft[n*16+11]]),Oi(2,7,8,13,xt[Ft[n*16+12]],xt[Ft[n*16+13]]),Oi(3,4,9,14,xt[Ft[n*16+14]],xt[Ft[n*16+15]]);for(n=0;n<8;n++)e.h[n]^=Ee[n]^Ee[n+8]}function mA(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=t?t.length:0;if(t&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(pA),b:new Uint8Array(64),c:0,t:0,outlen:e};return r.h[0]^=16842752^n<<8^e,n>0&&(j0(r,t),r.c=64),r}function j0(e,t){for(let n=0;n<t.length;n++)e.c===64&&(e.t+=e.c,gA(e,!1),e.c=0),e.b[e.c++]=t[n]}function yA(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;gA(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3)&255;return t}function wA(e,t,n){n=n||32,e=hA.normalizeInput(e);const r=mA(n,t);return j0(r,e),yA(r)}function cM(e,t,n){const r=wA(e,t,n);return hA.toHex(r)}var lM={blake2s:wA,blake2sHex:cM,blake2sInit:mA,blake2sUpdate:j0,blake2sFinal:yA};const mc=oM,yc=lM;var uM={blake2b:mc.blake2b,blake2bHex:mc.blake2bHex,blake2bInit:mc.blake2bInit,blake2bUpdate:mc.blake2bUpdate,blake2bFinal:mc.blake2bFinal,blake2s:yc.blake2s,blake2sHex:yc.blake2sHex,blake2sInit:yc.blake2sInit,blake2sUpdate:yc.blake2sUpdate,blake2sFinal:yc.blake2sFinal},dM={};const fM=":";function ba(e){const[t,n]=e.split(fM);return{namespace:t,reference:n}}function vA(e,t){return e.includes(":")?[e]:t.chains||[]}var hM=Object.defineProperty,pM=Object.defineProperties,gM=Object.getOwnPropertyDescriptors,ob=Object.getOwnPropertySymbols,mM=Object.prototype.hasOwnProperty,yM=Object.prototype.propertyIsEnumerable,Sm=(e,t,n)=>t in e?hM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ab=(e,t)=>{for(var n in t||(t={}))mM.call(t,n)&&Sm(e,n,t[n]);if(ob)for(var n of ob(t))yM.call(t,n)&&Sm(e,n,t[n]);return e},wM=(e,t)=>pM(e,gM(t)),cb=(e,t,n)=>Sm(e,typeof t!="symbol"?t+"":t,n);const vM="ReactNative",Nn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},bM="js";function mf(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ws(){return!to()&&!!A0()&&navigator.product===vM}function EM(){return ws()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function _M(){return ws()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Va(){return!mf()&&!!A0()&&!!to()}function Zl(){return ws()?Nn.reactNative:mf()?Nn.node:Va()?Nn.browser:Nn.unknown}function lb(){var e;try{return ws()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function SM(e,t){const n=new URLSearchParams(e);for(const r of Object.keys(t).sort())if(t.hasOwnProperty(r)){const i=t[r];i!==void 0&&n.set(r,i)}return n.toString()}function xM(e){var t,n;const r=bA();try{return e!=null&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),e.url=r.url),(t=e==null?void 0:e.icons)!=null&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(i=>i!=="")),wM(ab(ab({},r),e),{url:(e==null?void 0:e.url)||r.url,name:(e==null?void 0:e.name)||r.name,description:(e==null?void 0:e.description)||r.description,icons:(n=e==null?void 0:e.icons)!=null&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),e||r}}function bA(){return r3()||{name:"",description:"",url:"",icons:[""]}}function IM(){if(Zl()===Nn.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const e=L6();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function AM(){var e;const t=Zl();return t===Nn.browser?[t,((e=n3())==null?void 0:e.host)||"unknown"].join(":"):t}function EA(e,t,n){const r=IM(),i=AM();return[[e,t].join("-"),[bM,n].join("-"),r,i].join("/")}function CM({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=EA(e,t,r),d={auth:i,ua:u,projectId:s,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},f=SM(l[1]||"",d);return l[0]+"?"+f}function Ls(e,t){return e.filter(n=>t.includes(n)).length===e.length}function xm(e){return Object.fromEntries(e.entries())}function Im(e){return new Map(Object.entries(e))}function Rs(e=Z.FIVE_MINUTES,t){const n=Z.toMiliseconds(e||Z.FIVE_MINUTES);let r,i,s,o;return{resolve:a=>{s&&r&&(clearTimeout(s),r(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(t);o=Promise.reject(l),c(l)},n),r=a,i=c})}}function Xi(e,t,n){return new Promise(async(r,i)=>{const s=setTimeout(()=>i(new Error(n)),t);try{const o=await e;r(o)}catch(o){i(o)}clearTimeout(s)})}function _A(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function TM(e){return _A("topic",e)}function kM(e){return _A("id",e)}function SA(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")r.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function ft(e,t){return Z.fromMiliseconds(Date.now()+Z.toMiliseconds(e))}function zi(e){return Date.now()>=Z.toMiliseconds(e)}function Se(e,t){return`${e}${t?`:${t}`:""}`}function Hr(e=[],t=[]){return[...new Set([...e,...t])]}async function RM({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=$M(s,e,t),a=Zl();if(a===Nn.browser){if(!((r=to())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}OM(o)}else a===Nn.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function $M(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;if(e.startsWith("https://t.me")){const s=e.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${UM(r,!0)}`}else i=`${i}/wc?${r}`;return i}function OM(e){let t="_self";DM()?t="_top":(NM()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function PM(e,t){let n="";try{if(Va()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(r){console.error(r)}return n}function ub(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function db(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function M0(){return typeof process<"u"&&dM.IS_VITEST==="true"}function NM(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function DM(){try{return window.self!==window.top}catch{return!1}}function UM(e,t=!1){const n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}function xA(e){return Buffer.from(e,"base64").toString("utf-8")}function BM(e){return new Promise(t=>setTimeout(t,e))}let LM=class{constructor({limit:t}){cb(this,"limit"),cb(this,"set"),this.limit=t,this.set=new Set}add(t){if(!this.set.has(t)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(t)}}has(t){return this.set.has(t)}};const Fu=BigInt(2**32-1),fb=BigInt(32);function IA(e,t=!1){return t?{h:Number(e&Fu),l:Number(e>>fb&Fu)}:{h:Number(e>>fb&Fu)|0,l:Number(e&Fu)|0}}function AA(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=IA(e[s],t);[r[s],i[s]]=[o,a]}return[r,i]}const hb=(e,t,n)=>e>>>n,pb=(e,t,n)=>e<<32-n|t>>>n,Hi=(e,t,n)=>e>>>n|t<<32-n,qi=(e,t,n)=>e<<32-n|t>>>n,Oc=(e,t,n)=>e<<64-n|t>>>n-32,Pc=(e,t,n)=>e>>>n-32|t<<64-n,FM=(e,t)=>t,jM=(e,t)=>e,MM=(e,t,n)=>e<<n|t>>>32-n,zM=(e,t,n)=>t<<n|e>>>32-n,HM=(e,t,n)=>t<<n-32|e>>>64-n,qM=(e,t,n)=>e<<n-32|t>>>64-n;function hr(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const z0=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),H0=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,VM=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),GM=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,WM=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),KM=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,ko=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function q0(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Si(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function tr(e,...t){if(!q0(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function V0(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Si(e.outputLen),Si(e.blockLen)}function ds(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function G0(e,t){tr(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Tl(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function nr(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Tp(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Cr(e,t){return e<<32-t|e>>>t}const CA=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function TA(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const ri=CA?e=>e:e=>TA(e);function QM(e){for(let t=0;t<e.length;t++)e[t]=TA(e[t]);return e}const Vi=CA?e=>e:QM,kA=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",YM=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function kl(e){if(tr(e),kA)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=YM[e[n]];return t}const ei={_0:48,_9:57,A:65,F:70,a:97,f:102};function gb(e){if(e>=ei._0&&e<=ei._9)return e-ei._0;if(e>=ei.A&&e<=ei.F)return e-(ei.A-10);if(e>=ei.a&&e<=ei.f)return e-(ei.a-10)}function W0(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(kA)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=gb(e.charCodeAt(s)),a=gb(e.charCodeAt(s+1));if(o===void 0||a===void 0){const c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function XM(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function br(e){return typeof e=="string"&&(e=XM(e)),tr(e),e}function Fs(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];tr(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const s=e[r];n.set(s,i),i+=s.length}return n}let lh=class{};function eu(e){const t=r=>e().update(br(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function JM(e){const t=(r,i)=>e(i).update(br(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function Ga(e=32){if(ko&&typeof ko.getRandomValues=="function")return ko.getRandomValues(new Uint8Array(e));if(ko&&typeof ko.randomBytes=="function")return Uint8Array.from(ko.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const ZM=BigInt(0),wc=BigInt(1),e7=BigInt(2),t7=BigInt(7),n7=BigInt(256),r7=BigInt(113),RA=[],$A=[],OA=[];for(let e=0,t=wc,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],RA.push(2*(5*r+n)),$A.push((e+1)*(e+2)/2%64);let i=ZM;for(let s=0;s<7;s++)t=(t<<wc^(t>>t7)*r7)%n7,t&e7&&(i^=wc<<(wc<<BigInt(s))-wc);OA.push(i)}const PA=AA(OA,!0),i7=PA[0],s7=PA[1],mb=(e,t,n)=>n>32?HM(e,t,n):MM(e,t,n),yb=(e,t,n)=>n>32?qM(e,t,n):zM(e,t,n);function o7(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=mb(l,u,1)^n[a],f=yb(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)e[o+h]^=d,e[o+h+1]^=f}let i=e[2],s=e[3];for(let o=0;o<24;o++){const a=$A[o],c=mb(i,s,a),l=yb(i,s,a),u=RA[o];i=e[u],s=e[u+1],e[u]=c,e[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=i7[r],e[1]^=s7[r]}nr(n)}let a7=class NA extends lh{constructor(t,n,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,Si(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Tl(this.state)}clone(){return this._cloneInto()}keccak(){Vi(this.state32),o7(this.state32,this.rounds),Vi(this.state32),this.posOut=0,this.pos=0}update(t){ds(this),t=br(t),tr(t);const{blockLen:n,state:r}=this,i=t.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,n&128&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){ds(this,!1),tr(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=t.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Si(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(G0(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,nr(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new NA(n,r,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}};const c7=(e,t,n)=>eu(()=>new a7(t,e,n)),l7=c7(1,136,256/8);function u7(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+l,a,r)}function d7(e,t,n){return e&t^~e&n}function f7(e,t,n){return e&t^e&n^t&n}let DA=class extends lh{constructor(t,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(t),this.view=Tp(this.buffer)}update(t){ds(this),t=br(t),tr(t);const{view:n,buffer:r,blockLen:i}=this,s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Tp(t);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ds(this),G0(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,nr(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;u7(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Tp(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=s,t.length=i,t.pos=a,i%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}};const Pi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),jt=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Mt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),h7=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ni=new Uint32Array(64);let p7=class extends DA{constructor(t=32){super(64,t,8,!1),this.A=Pi[0]|0,this.B=Pi[1]|0,this.C=Pi[2]|0,this.D=Pi[3]|0,this.E=Pi[4]|0,this.F=Pi[5]|0,this.G=Pi[6]|0,this.H=Pi[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[t,n,r,i,s,o,a,c]}set(t,n,r,i,s,o,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let d=0;d<16;d++,n+=4)Ni[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const f=Ni[d-15],h=Ni[d-2],p=Cr(f,7)^Cr(f,18)^f>>>3,g=Cr(h,17)^Cr(h,19)^h>>>10;Ni[d]=g+Ni[d-7]+p+Ni[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=Cr(a,6)^Cr(a,11)^Cr(a,25),h=u+f+d7(a,c,l)+h7[d]+Ni[d]|0,p=(Cr(r,2)^Cr(r,13)^Cr(r,22))+f7(r,i,s)|0;u=l,l=c,c=a,a=o+h|0,o=s,s=i,i=r,r=h+p|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){nr(Ni)}destroy(){this.set(0,0,0,0,0,0,0,0),nr(this.buffer)}};const UA=AA(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),g7=UA[0],m7=UA[1],Di=new Uint32Array(80),Ui=new Uint32Array(80);let K0=class extends DA{constructor(t=64){super(128,t,16,!1),this.Ah=Mt[0]|0,this.Al=Mt[1]|0,this.Bh=Mt[2]|0,this.Bl=Mt[3]|0,this.Ch=Mt[4]|0,this.Cl=Mt[5]|0,this.Dh=Mt[6]|0,this.Dl=Mt[7]|0,this.Eh=Mt[8]|0,this.El=Mt[9]|0,this.Fh=Mt[10]|0,this.Fl=Mt[11]|0,this.Gh=Mt[12]|0,this.Gl=Mt[13]|0,this.Hh=Mt[14]|0,this.Hl=Mt[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:v}=this;return[t,n,r,i,s,o,a,c,l,u,d,f,h,p,g,v]}set(t,n,r,i,s,o,a,c,l,u,d,f,h,p,g,v){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=p|0,this.Hh=g|0,this.Hl=v|0}process(t,n){for(let E=0;E<16;E++,n+=4)Di[E]=t.getUint32(n),Ui[E]=t.getUint32(n+=4);for(let E=16;E<80;E++){const A=Di[E-15]|0,T=Ui[E-15]|0,D=Hi(A,T,1)^Hi(A,T,8)^hb(A,T,7),j=qi(A,T,1)^qi(A,T,8)^pb(A,T,7),L=Di[E-2]|0,C=Ui[E-2]|0,U=Hi(L,C,19)^Oc(L,C,61)^hb(L,C,6),B=qi(L,C,19)^Pc(L,C,61)^pb(L,C,6),F=VM(j,B,Ui[E-7],Ui[E-16]),q=GM(F,D,U,Di[E-7],Di[E-16]);Di[E]=q|0,Ui[E]=F|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:v,Hh:m,Hl:w}=this;for(let E=0;E<80;E++){const A=Hi(d,f,14)^Hi(d,f,18)^Oc(d,f,41),T=qi(d,f,14)^qi(d,f,18)^Pc(d,f,41),D=d&h^~d&g,j=f&p^~f&v,L=WM(w,T,j,m7[E],Ui[E]),C=KM(L,m,A,D,g7[E],Di[E]),U=L|0,B=Hi(r,i,28)^Oc(r,i,34)^Oc(r,i,39),F=qi(r,i,28)^Pc(r,i,34)^Pc(r,i,39),q=r&s^r&a^s&a,G=i&o^i&c^o&c;m=g|0,w=v|0,g=h|0,v=p|0,h=d|0,p=f|0,{h:d,l:f}=hr(l|0,u|0,C|0,U|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const S=z0(U,F,G);r=H0(S,C,B,q),i=S|0}({h:r,l:i}=hr(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=hr(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=hr(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=hr(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:f}=hr(this.Eh|0,this.El|0,d|0,f|0),{h,l:p}=hr(this.Fh|0,this.Fl|0,h|0,p|0),{h:g,l:v}=hr(this.Gh|0,this.Gl|0,g|0,v|0),{h:m,l:w}=hr(this.Hh|0,this.Hl|0,m|0,w|0),this.set(r,i,s,o,a,c,l,u,d,f,h,p,g,v,m,w)}roundClean(){nr(Di,Ui)}destroy(){nr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},y7=class extends K0{constructor(){super(48),this.Ah=jt[0]|0,this.Al=jt[1]|0,this.Bh=jt[2]|0,this.Bl=jt[3]|0,this.Ch=jt[4]|0,this.Cl=jt[5]|0,this.Dh=jt[6]|0,this.Dl=jt[7]|0,this.Eh=jt[8]|0,this.El=jt[9]|0,this.Fh=jt[10]|0,this.Fl=jt[11]|0,this.Gh=jt[12]|0,this.Gl=jt[13]|0,this.Hh=jt[14]|0,this.Hl=jt[15]|0}};const zt=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class w7 extends K0{constructor(){super(32),this.Ah=zt[0]|0,this.Al=zt[1]|0,this.Bh=zt[2]|0,this.Bl=zt[3]|0,this.Ch=zt[4]|0,this.Cl=zt[5]|0,this.Dh=zt[6]|0,this.Dl=zt[7]|0,this.Eh=zt[8]|0,this.El=zt[9]|0,this.Fh=zt[10]|0,this.Fl=zt[11]|0,this.Gh=zt[12]|0,this.Gl=zt[13]|0,this.Hh=zt[14]|0,this.Hl=zt[15]|0}}const uh=eu(()=>new p7),v7=eu(()=>new K0),b7=eu(()=>new y7),E7=eu(()=>new w7),_7=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),dt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ne=new Uint32Array(32);function Bi(e,t,n,r,i,s){const o=i[s],a=i[s+1];let c=ne[2*e],l=ne[2*e+1],u=ne[2*t],d=ne[2*t+1],f=ne[2*n],h=ne[2*n+1],p=ne[2*r],g=ne[2*r+1],v=z0(c,u,o);l=H0(v,l,d,a),c=v|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:FM(g,p),Dl:jM(g)},{h,l:f}=hr(h,f,g,p),{Bh:d,Bl:u}={Bh:d^h,Bl:u^f},{Bh:d,Bl:u}={Bh:Hi(d,u,24),Bl:qi(d,u,24)},ne[2*e]=c,ne[2*e+1]=l,ne[2*t]=u,ne[2*t+1]=d,ne[2*n]=f,ne[2*n+1]=h,ne[2*r]=p,ne[2*r+1]=g}function Li(e,t,n,r,i,s){const o=i[s],a=i[s+1];let c=ne[2*e],l=ne[2*e+1],u=ne[2*t],d=ne[2*t+1],f=ne[2*n],h=ne[2*n+1],p=ne[2*r],g=ne[2*r+1],v=z0(c,u,o);l=H0(v,l,d,a),c=v|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:Hi(g,p,16),Dl:qi(g,p,16)},{h,l:f}=hr(h,f,g,p),{Bh:d,Bl:u}={Bh:d^h,Bl:u^f},{Bh:d,Bl:u}={Bh:Oc(d,u,63),Bl:Pc(d,u,63)},ne[2*e]=c,ne[2*e+1]=l,ne[2*t]=u,ne[2*t+1]=d,ne[2*n]=f,ne[2*n+1]=h,ne[2*r]=p,ne[2*r+1]=g}function S7(e,t={},n,r,i){if(Si(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:s,salt:o,personalization:a}=t;if(s!==void 0&&(s.length<1||s.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==i)throw new Error("personalization must be undefined or "+i)}class x7 extends lh{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Si(t),Si(n),this.blockLen=t,this.outputLen=n,this.buffer=new Uint8Array(t),this.buffer32=Tl(this.buffer)}update(t){ds(this),t=br(t),tr(t);const{blockLen:n,buffer:r,buffer32:i}=this,s=t.length,o=t.byteOffset,a=t.buffer;for(let c=0;c<s;){this.pos===n&&(Vi(i),this.compress(i,0,!1),Vi(i),this.pos=0);const l=Math.min(n-this.pos,s-c),u=o+c;if(l===n&&!(u%4)&&c+l<s){const d=new Uint32Array(a,u,Math.floor((s-c)/4));Vi(d);for(let f=0;c+n<s;f+=i.length,c+=n)this.length+=n,this.compress(d,f,!1);Vi(d);continue}r.set(t.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(t){ds(this),G0(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,nr(this.buffer.subarray(n)),Vi(r),this.compress(r,0,!0),Vi(r);const i=Tl(t);this.get().forEach((s,o)=>i[o]=ri(s))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:i,destroyed:s,outputLen:o,pos:a}=this;return t||(t=new this.constructor({dkLen:o})),t.set(...this.get()),t.buffer.set(n),t.destroyed=s,t.finished=i,t.length=r,t.pos=a,t.outputLen=o,t}clone(){return this._cloneInto()}}class I7 extends x7{constructor(t={}){const n=t.dkLen===void 0?64:t.dkLen;super(128,n),this.v0l=dt[0]|0,this.v0h=dt[1]|0,this.v1l=dt[2]|0,this.v1h=dt[3]|0,this.v2l=dt[4]|0,this.v2h=dt[5]|0,this.v3l=dt[6]|0,this.v3h=dt[7]|0,this.v4l=dt[8]|0,this.v4h=dt[9]|0,this.v5l=dt[10]|0,this.v5h=dt[11]|0,this.v6l=dt[12]|0,this.v6h=dt[13]|0,this.v7l=dt[14]|0,this.v7h=dt[15]|0,S7(n,t,64,16,16);let{key:r,personalization:i,salt:s}=t,o=0;if(r!==void 0&&(r=br(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,s!==void 0){s=br(s);const a=Tl(s);this.v4l^=ri(a[0]),this.v4h^=ri(a[1]),this.v5l^=ri(a[2]),this.v5h^=ri(a[3])}if(i!==void 0){i=br(i);const a=Tl(i);this.v6l^=ri(a[0]),this.v6h^=ri(a[1]),this.v7l^=ri(a[2]),this.v7h^=ri(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:i,v2l:s,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:f,v6l:h,v6h:p,v7l:g,v7h:v}=this;return[t,n,r,i,s,o,a,c,l,u,d,f,h,p,g,v]}set(t,n,r,i,s,o,a,c,l,u,d,f,h,p,g,v){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=f|0,this.v6l=h|0,this.v6h=p|0,this.v7l=g|0,this.v7h=v|0}compress(t,n,r){this.get().forEach((c,l)=>ne[l]=c),ne.set(dt,16);let{h:i,l:s}=IA(BigInt(this.length));ne[24]=dt[8]^s,ne[25]=dt[9]^i,r&&(ne[28]=~ne[28],ne[29]=~ne[29]);let o=0;const a=_7;for(let c=0;c<12;c++)Bi(0,4,8,12,t,n+2*a[o++]),Li(0,4,8,12,t,n+2*a[o++]),Bi(1,5,9,13,t,n+2*a[o++]),Li(1,5,9,13,t,n+2*a[o++]),Bi(2,6,10,14,t,n+2*a[o++]),Li(2,6,10,14,t,n+2*a[o++]),Bi(3,7,11,15,t,n+2*a[o++]),Li(3,7,11,15,t,n+2*a[o++]),Bi(0,5,10,15,t,n+2*a[o++]),Li(0,5,10,15,t,n+2*a[o++]),Bi(1,6,11,12,t,n+2*a[o++]),Li(1,6,11,12,t,n+2*a[o++]),Bi(2,7,8,13,t,n+2*a[o++]),Li(2,7,8,13,t,n+2*a[o++]),Bi(3,4,9,14,t,n+2*a[o++]),Li(3,4,9,14,t,n+2*a[o++]);this.v0l^=ne[0]^ne[16],this.v0h^=ne[1]^ne[17],this.v1l^=ne[2]^ne[18],this.v1h^=ne[3]^ne[19],this.v2l^=ne[4]^ne[20],this.v2h^=ne[5]^ne[21],this.v3l^=ne[6]^ne[22],this.v3h^=ne[7]^ne[23],this.v4l^=ne[8]^ne[24],this.v4h^=ne[9]^ne[25],this.v5l^=ne[10]^ne[26],this.v5h^=ne[11]^ne[27],this.v6l^=ne[12]^ne[28],this.v6h^=ne[13]^ne[29],this.v7l^=ne[14]^ne[30],this.v7h^=ne[15]^ne[31],nr(ne)}destroy(){this.destroyed=!0,nr(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const A7=JM(e=>new I7(e)),C7="https://rpc.walletconnect.org/v1";function BA(e){const t=`Ethereum Signed Message:
${e.length}`,n=new TextEncoder().encode(t+e);return"0x"+Buffer.from(l7(n)).toString("hex")}async function T7(e,t,n,r,i,s){switch(n.t){case"eip191":return await k7(e,t,n.s);case"eip1271":return await R7(e,t,n.s,r,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function k7(e,t,n){return(await yU({hash:BA(t),signature:n})).toLowerCase()===e.toLowerCase()}async function R7(e,t,n,r,i,s){const o=ba(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(t.startsWith("0x")?t:BA(t)).substring(2),f=a+d+c+u+l,h=await fetch(`${s||C7}/?chainId=${r}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:$7(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:f},"latest"]})}),{result:p}=await h.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function $7(){return Date.now()+Math.floor(Math.random()*1e3)}function O7(e){const t=atob(e),n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const s=Buffer.from(e,"base64").slice(1,65);return Yl.encode(s)}function P7(e){const t=new Uint8Array(Buffer.from(e,"base64")),n=Array.from("TransactionData::").map(s=>s.charCodeAt(0)),r=new Uint8Array(n.length+t.length);r.set(n),r.set(t,n.length);const i=A7(r,{dkLen:32});return Yl.encode(i)}function wb(e){const t=new Uint8Array(uh(N7(e)));return Yl.encode(t)}function N7(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if(typeof e=="object"&&e!=null&&e.data)return new Uint8Array(Object.values(e.data));if(typeof e=="object"&&e)return new Uint8Array(Object.values(e));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function vb(e){const t=Buffer.from(e,"base64"),n=tB(t).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=GU(n),i=Buffer.from("TX"),s=Buffer.concat([i,Buffer.from(r)]),o=E7(s);return lB.encode(o).replace(/=+$/,"")}function kp(e){const t=[];let n=BigInt(e);for(;n>=BigInt(128);)t.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return t.push(Number(n)),Buffer.from(t)}function D7(e){const t=Buffer.from(e.signed.bodyBytes,"base64"),n=Buffer.from(e.signed.authInfoBytes,"base64"),r=Buffer.from(e.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(kp(t.length)),i.push(t),i.push(Buffer.from([18])),i.push(kp(n.length)),i.push(n),i.push(Buffer.from([26])),i.push(kp(r.length)),i.push(r);const s=Buffer.concat(i),o=uh(s);return Buffer.from(o).toString("hex").toUpperCase()}var U7=Object.defineProperty,B7=Object.defineProperties,L7=Object.getOwnPropertyDescriptors,bb=Object.getOwnPropertySymbols,F7=Object.prototype.hasOwnProperty,j7=Object.prototype.propertyIsEnumerable,Eb=(e,t,n)=>t in e?U7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M7=(e,t)=>{for(var n in t||(t={}))F7.call(t,n)&&Eb(e,n,t[n]);if(bb)for(var n of bb(t))j7.call(t,n)&&Eb(e,n,t[n]);return e},z7=(e,t)=>B7(e,L7(t));const H7="did:pkh:",Q0=e=>e==null?void 0:e.split(":"),q7=e=>{const t=e&&Q0(e);if(t)return e.includes(H7)?t[3]:t[1]},Am=e=>{const t=e&&Q0(e);if(t)return t[2]+":"+t[3]},yf=e=>{const t=e&&Q0(e);if(t)return t.pop()};async function _b(e){const{cacao:t,projectId:n}=e,{s:r,p:i}=t,s=LA(i,i.iss),o=yf(i.iss);return await T7(o,s,r,Am(i.iss),n)}const LA=(e,t)=>{const n=`${e.domain} wants you to sign in with your Ethereum account:`,r=yf(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=e.statement||void 0;const s=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${q7(t)}`,c=`Nonce: ${e.nonce}`,l=`Issued At: ${e.iat}`,u=e.exp?`Expiration Time: ${e.exp}`:void 0,d=e.nbf?`Not Before: ${e.nbf}`:void 0,f=e.requestId?`Request ID: ${e.requestId}`:void 0,h=e.resources?`Resources:${e.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=Id(e.resources);if(p){const g=Rl(p);i=Z7(i,g)}return[n,r,"",i,"",s,o,a,c,l,u,d,f,h].filter(g=>g!=null).join(`
`)};function V7(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function G7(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function io(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(n=>{const r=e.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(i=>{const s=r[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function W7(e,t,n,r={}){return n==null||n.sort((i,s)=>i.localeCompare(s)),{att:{[e]:K7(t,n,r)}}}function K7(e,t,n={}){t=t==null?void 0:t.sort((i,s)=>i.localeCompare(s));const r=t.map(i=>({[`${e}/${i}`]:[n]}));return Object.assign({},...r)}function FA(e){return io(e),`urn:recap:${V7(e).replace(/=/g,"")}`}function Rl(e){const t=G7(e.replace("urn:recap:",""));return io(t),t}function Q7(e,t,n){const r=W7(e,t,n);return FA(r)}function Y7(e){return e&&e.includes("urn:recap:")}function X7(e,t){const n=Rl(e),r=Rl(t),i=J7(n,r);return FA(i)}function J7(e,t){io(e),io(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort((i,s)=>i.localeCompare(s)),r={att:{}};return n.forEach(i=>{var s,o;Object.keys(((s=e.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=t.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[i]=z7(M7({},r.att[i]),{[a]:((c=e.att[i])==null?void 0:c[a])||((l=t.att[i])==null?void 0:l[a])})})}),r}function Z7(e="",t){io(t);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;const r=[];let i=0;Object.keys(t.att).forEach(a=>{const c=Object.keys(t.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,f)=>d.action.localeCompare(f.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(i++,`(${i}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const s=r.join(" "),o=`${n}${s}`;return`${e?e+" ":""}${o}`}function Sb(e){var t;const n=Rl(e);io(n);const r=(t=n.att)==null?void 0:t.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function xb(e){const t=Rl(e);io(t);const n=[];return Object.values(t.att).forEach(r=>{Object.values(r).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function Id(e){if(!e)return;const t=e==null?void 0:e[e.length-1];return Y7(t)?t:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function jA(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Cm(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function Rp(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function hn(e,...t){if(!jA(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Ib(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function e9(e,t){hn(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function cs(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Ra(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function t9(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const n9=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function r9(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Tm(e){if(typeof e=="string")e=r9(e);else if(jA(e))e=km(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function i9(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function s9(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const o9=(e,t)=>{function n(r,...i){if(hn(r),!n9)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");e.varSizeNonce?hn(l):hn(l,e.nonceLength)}const s=e.tagLength;s&&i[1]!==void 0&&hn(i[1]);const o=t(r,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");hn(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,hn(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(hn(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,e),n};function Ab(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!c9(t))throw new Error("invalid output, must be aligned");return t}function Cb(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s);e.setUint32(t+4,o,r),e.setUint32(t+0,a,r)}function a9(e,t,n){Cm(n);const r=new Uint8Array(16),i=t9(r);return Cb(i,0,BigInt(t),n),Cb(i,8,BigInt(e),n),r}function c9(e){return e.byteOffset%4===0}function km(e){return Uint8Array.from(e)}const MA=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),l9=MA("expand 16-byte k"),u9=MA("expand 32-byte k"),d9=cs(l9),f9=cs(u9);function ve(e,t){return e<<t|e>>>32-t}function Rm(e){return e.byteOffset%4===0}const ju=64,h9=16,zA=2**32-1,Tb=new Uint32Array;function p9(e,t,n,r,i,s,o,a){const c=i.length,l=new Uint8Array(ju),u=cs(l),d=Rm(i)&&Rm(s),f=d?cs(i):Tb,h=d?cs(s):Tb;for(let p=0;p<c;o++){if(e(t,n,r,u,o,a),o>=zA)throw new Error("arx: counter overflow");const g=Math.min(ju,c-p);if(d&&g===ju){const v=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let m=0,w;m<h9;m++)w=v+m,h[w]=f[w]^u[m];p+=ju;continue}for(let v=0,m;v<g;v++)m=p+v,s[m]=i[m]^l[v];p+=g}}function g9(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=i9({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Rp(i),Rp(o),Cm(s),Cm(n),(a,c,l,u,d=0)=>{hn(a),hn(c),hn(l);const f=l.length;if(u===void 0&&(u=new Uint8Array(f)),hn(u),Rp(d),d<0||d>=zA)throw new Error("arx: counter overflow");if(u.length<f)throw new Error(`arx: output (${u.length}) is shorter than data (${f})`);const h=[];let p=a.length,g,v;if(p===32)h.push(g=km(a)),v=f9;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),v=d9,h.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);Rm(c)||h.push(c=km(c));const m=cs(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(v,m,cs(c.subarray(0,16)),m),c=c.subarray(16)}const w=16-i;if(w!==c.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const A=new Uint8Array(12);A.set(c,s?0:12-c.length),c=A,h.push(c)}const E=cs(c);return p9(e,v,m,E,l,u,d,o),Ra(...h),u}}const It=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class m9{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=Tm(t),hn(t,32);const n=It(t,0),r=It(t,2),i=It(t,4),s=It(t,6),o=It(t,8),a=It(t,10),c=It(t,12),l=It(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=It(t,16+2*u)}process(t,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],f=o[5],h=o[6],p=o[7],g=o[8],v=o[9],m=It(t,n+0),w=It(t,n+2),E=It(t,n+4),A=It(t,n+6),T=It(t,n+8),D=It(t,n+10),j=It(t,n+12),L=It(t,n+14);let C=s[0]+(m&8191),U=s[1]+((m>>>13|w<<3)&8191),B=s[2]+((w>>>10|E<<6)&8191),F=s[3]+((E>>>7|A<<9)&8191),q=s[4]+((A>>>4|T<<12)&8191),G=s[5]+(T>>>1&8191),S=s[6]+((T>>>14|D<<2)&8191),x=s[7]+((D>>>11|j<<5)&8191),O=s[8]+((j>>>8|L<<8)&8191),R=s[9]+(L>>>5|i),$=0,P=$+C*a+U*(5*v)+B*(5*g)+F*(5*p)+q*(5*h);$=P>>>13,P&=8191,P+=G*(5*f)+S*(5*d)+x*(5*u)+O*(5*l)+R*(5*c),$+=P>>>13,P&=8191;let M=$+C*c+U*a+B*(5*v)+F*(5*g)+q*(5*p);$=M>>>13,M&=8191,M+=G*(5*h)+S*(5*f)+x*(5*d)+O*(5*u)+R*(5*l),$+=M>>>13,M&=8191;let W=$+C*l+U*c+B*a+F*(5*v)+q*(5*g);$=W>>>13,W&=8191,W+=G*(5*p)+S*(5*h)+x*(5*f)+O*(5*d)+R*(5*u),$+=W>>>13,W&=8191;let ee=$+C*u+U*l+B*c+F*a+q*(5*v);$=ee>>>13,ee&=8191,ee+=G*(5*g)+S*(5*p)+x*(5*h)+O*(5*f)+R*(5*d),$+=ee>>>13,ee&=8191;let Q=$+C*d+U*u+B*l+F*c+q*a;$=Q>>>13,Q&=8191,Q+=G*(5*v)+S*(5*g)+x*(5*p)+O*(5*h)+R*(5*f),$+=Q>>>13,Q&=8191;let te=$+C*f+U*d+B*u+F*l+q*c;$=te>>>13,te&=8191,te+=G*a+S*(5*v)+x*(5*g)+O*(5*p)+R*(5*h),$+=te>>>13,te&=8191;let se=$+C*h+U*f+B*d+F*u+q*l;$=se>>>13,se&=8191,se+=G*c+S*a+x*(5*v)+O*(5*g)+R*(5*p),$+=se>>>13,se&=8191;let ue=$+C*p+U*h+B*f+F*d+q*u;$=ue>>>13,ue&=8191,ue+=G*l+S*c+x*a+O*(5*v)+R*(5*g),$+=ue>>>13,ue&=8191;let de=$+C*g+U*p+B*h+F*f+q*d;$=de>>>13,de&=8191,de+=G*u+S*l+x*c+O*a+R*(5*v),$+=de>>>13,de&=8191;let ce=$+C*v+U*g+B*p+F*h+q*f;$=ce>>>13,ce&=8191,ce+=G*d+S*u+x*l+O*c+R*a,$+=ce>>>13,ce&=8191,$=($<<2)+$|0,$=$+P|0,P=$&8191,$=$>>>13,M+=$,s[0]=P,s[1]=M,s[2]=W,s[3]=ee,s[4]=Q,s[5]=te,s[6]=se,s[7]=ue,s[8]=de,s[9]=ce}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let i=t[1]>>>13;t[1]&=8191;for(let a=2;a<10;a++)t[a]+=i,i=t[a]>>>13,t[a]&=8191;t[0]+=i*5,i=t[0]>>>13,t[0]&=8191,t[1]+=i,i=t[1]>>>13,t[1]&=8191,t[2]+=i,r[0]=t[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=t[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)t[a]=t[a]&s|r[a];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let o=t[0]+n[0];t[0]=o&65535;for(let a=1;a<8;a++)o=(t[a]+n[a]|0)+(o>>>16)|0,t[a]=o&65535;Ra(r)}update(t){Ib(this),t=Tm(t),hn(t);const{buffer:n,blockLen:r}=this,i=t.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(t,s);continue}n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Ra(this.h,this.r,this.buffer,this.pad)}digestInto(t){Ib(this),e9(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)t[s++]=r[o]>>>0,t[s++]=r[o]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function y9(e){const t=(r,i)=>e(i).update(Tm(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const w9=y9(e=>new m9(e));function v9(e,t,n,r,i,s=20){let o=e[0],a=e[1],c=e[2],l=e[3],u=t[0],d=t[1],f=t[2],h=t[3],p=t[4],g=t[5],v=t[6],m=t[7],w=i,E=n[0],A=n[1],T=n[2],D=o,j=a,L=c,C=l,U=u,B=d,F=f,q=h,G=p,S=g,x=v,O=m,R=w,$=E,P=A,M=T;for(let ee=0;ee<s;ee+=2)D=D+U|0,R=ve(R^D,16),G=G+R|0,U=ve(U^G,12),D=D+U|0,R=ve(R^D,8),G=G+R|0,U=ve(U^G,7),j=j+B|0,$=ve($^j,16),S=S+$|0,B=ve(B^S,12),j=j+B|0,$=ve($^j,8),S=S+$|0,B=ve(B^S,7),L=L+F|0,P=ve(P^L,16),x=x+P|0,F=ve(F^x,12),L=L+F|0,P=ve(P^L,8),x=x+P|0,F=ve(F^x,7),C=C+q|0,M=ve(M^C,16),O=O+M|0,q=ve(q^O,12),C=C+q|0,M=ve(M^C,8),O=O+M|0,q=ve(q^O,7),D=D+B|0,M=ve(M^D,16),x=x+M|0,B=ve(B^x,12),D=D+B|0,M=ve(M^D,8),x=x+M|0,B=ve(B^x,7),j=j+F|0,R=ve(R^j,16),O=O+R|0,F=ve(F^O,12),j=j+F|0,R=ve(R^j,8),O=O+R|0,F=ve(F^O,7),L=L+q|0,$=ve($^L,16),G=G+$|0,q=ve(q^G,12),L=L+q|0,$=ve($^L,8),G=G+$|0,q=ve(q^G,7),C=C+U|0,P=ve(P^C,16),S=S+P|0,U=ve(U^S,12),C=C+U|0,P=ve(P^C,8),S=S+P|0,U=ve(U^S,7);let W=0;r[W++]=o+D|0,r[W++]=a+j|0,r[W++]=c+L|0,r[W++]=l+C|0,r[W++]=u+U|0,r[W++]=d+B|0,r[W++]=f+F|0,r[W++]=h+q|0,r[W++]=p+G|0,r[W++]=g+S|0,r[W++]=v+x|0,r[W++]=m+O|0,r[W++]=w+R|0,r[W++]=E+$|0,r[W++]=A+P|0,r[W++]=T+M|0}const b9=g9(v9,{counterRight:!1,counterLength:4,allowShortKeys:!1}),E9=new Uint8Array(16),kb=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(E9.subarray(n))},_9=new Uint8Array(32);function Rb(e,t,n,r,i){const s=e(t,n,_9),o=w9.create(s);i&&kb(o,i),kb(o,r);const a=a9(r.length,i?i.length:0,!0);o.update(a);const c=o.digest();return Ra(s,a),c}const S9=e=>(t,n,r)=>({encrypt(i,s){const o=i.length;s=Ab(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);e(t,n,a,a,1);const c=Rb(e,t,n,a,r);return s.set(c,o),Ra(c),s},decrypt(i,s){s=Ab(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=Rb(e,t,n,o,r);if(!s9(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),e(t,n,s,s,1),Ra(c),s}}),HA=o9({blockSize:64,nonceLength:12,tagLength:16},S9(b9));let qA=class extends lh{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,V0(t);const r=br(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),nr(s)}update(t){return ds(this),this.iHash.update(t),this}digestInto(t){ds(this),tr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const dh=(e,t,n)=>new qA(e,t).update(n).digest();dh.create=(e,t)=>new qA(e,t);function x9(e,t,n){return V0(e),n===void 0&&(n=new Uint8Array(e.outputLen)),dh(e,br(n),br(t))}const $p=Uint8Array.from([0]),$b=Uint8Array.of();function I9(e,t,n,r=32){V0(e),Si(r);const i=e.outputLen;if(r>255*i)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/i);n===void 0&&(n=$b);const o=new Uint8Array(s*i),a=dh.create(e,t),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<s;u++)$p[0]=u+1,c.update(u===0?$b:l).update(n).update($p).digestInto(l),o.set(l,i*u),a._cloneInto(c);return a.destroy(),c.destroy(),nr(l,$p),o.slice(0,r)}const A9=(e,t,n,r,i)=>I9(e,x9(e,t,n),r,i),fh=uh,Y0=BigInt(0),$m=BigInt(1);function wf(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function Mu(e){const t=e.toString(16);return t.length&1?"0"+t:t}function VA(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Y0:BigInt("0x"+e)}function hh(e){return VA(kl(e))}function vf(e){return tr(e),VA(kl(Uint8Array.from(e).reverse()))}function X0(e,t){return W0(e.toString(16).padStart(t*2,"0"))}function J0(e,t){return X0(e,t).reverse()}function fn(e,t,n){let r;if(typeof t=="string")try{r=W0(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(q0(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}const Op=e=>typeof e=="bigint"&&Y0<=e;function C9(e,t,n){return Op(e)&&Op(t)&&Op(n)&&t<=e&&e<n}function Om(e,t,n,r){if(!C9(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function T9(e){let t;for(t=0;e>Y0;e>>=$m,t+=1);return t}const ph=e=>($m<<BigInt(e))-$m;function k9(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),i=f=>Uint8Array.of(f);let s=r(e),o=r(e),a=0;const c=()=>{s.fill(1),o.fill(0),a=0},l=(...f)=>n(o,s,...f),u=(f=r(0))=>{o=l(i(0),f),s=l(),f.length!==0&&(o=l(i(1),f),s=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<t;){s=l();const p=s.slice();h.push(p),f+=s.length}return Fs(...h)};return(f,h)=>{c(),u(f);let p;for(;!(p=h(d()));)u();return c(),p}}function gh(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(i,s,o){const a=e[i];if(o&&a===void 0)return;const c=typeof a;if(c!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(t).forEach(([i,s])=>r(i,s,!1)),Object.entries(n).forEach(([i,s])=>r(i,s,!0))}function Ob(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const s=e(n,...r);return t.set(n,s),s}}const mn=BigInt(0),en=BigInt(1),js=BigInt(2),R9=BigInt(3),GA=BigInt(4),WA=BigInt(5),KA=BigInt(8);function Wn(e,t){const n=e%t;return n>=mn?n:t+n}function fr(e,t,n){let r=e;for(;t-- >mn;)r*=r,r%=n;return r}function Pb(e,t){if(e===mn)throw new Error("invert: expected non-zero number");if(t<=mn)throw new Error("invert: expected positive modulus, got "+t);let n=Wn(e,t),r=t,i=mn,s=en;for(;n!==mn;){const o=r/n,a=r%n,c=i-s*o;r=n,n=a,i=s,s=c}if(r!==en)throw new Error("invert: does not exist");return Wn(i,t)}function QA(e,t){const n=(e.ORDER+en)/GA,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function $9(e,t){const n=(e.ORDER-WA)/KA,r=e.mul(t,js),i=e.pow(r,n),s=e.mul(t,i),o=e.mul(e.mul(s,js),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),t))throw new Error("Cannot find square root");return a}function O9(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-en,n=0;for(;t%js===mn;)t/=js,n++;let r=js;const i=Wa(e);for(;Nb(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return QA;let s=i.pow(r,t);const o=(t+en)/js;return function(a,c){if(a.is0(c))return c;if(Nb(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,s),d=a.pow(c,t),f=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let h=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(h++,p=a.sqr(p),h===l)throw new Error("Cannot find square root");const g=en<<BigInt(l-h-1),v=a.pow(u,g);l=h,u=a.sqr(v),d=a.mul(d,u),f=a.mul(f,v)}return f}}function P9(e){return e%GA===R9?QA:e%KA===WA?$9:O9(e)}const N9=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function D9(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=N9.reduce((r,i)=>(r[i]="function",r),t);return gh(e,n),e}function U9(e,t,n){if(n<mn)throw new Error("invalid exponent, negatives unsupported");if(n===mn)return e.ONE;if(n===en)return t;let r=e.ONE,i=t;for(;n>mn;)n&en&&(r=e.mul(r,i)),i=e.sqr(i),n>>=en;return r}function YA(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((o,a,c)=>e.is0(a)?o:(r[c]=o,e.mul(o,a)),e.ONE),s=e.inv(i);return t.reduceRight((o,a,c)=>e.is0(a)?o:(r[c]=e.mul(o,r[c]),e.mul(o,a)),s),r}function Nb(e,t){const n=(e.ORDER-en)/js,r=e.pow(t,n),i=e.eql(r,e.ONE),s=e.eql(r,e.ZERO),o=e.eql(r,e.neg(e.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function B9(e,t){t!==void 0&&Si(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Wa(e,t,n=!1,r={}){if(e<=mn)throw new Error("invalid field: expected ORDER > 0, got "+e);let i,s;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=t;u.BITS&&(i=u.BITS),u.sqrt&&(s=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof t=="number"&&(i=t),r.sqrt&&(s=r.sqrt);const{nBitLength:o,nByteLength:a}=B9(e,i);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:e,isLE:n,BITS:o,BYTES:a,MASK:ph(o),ZERO:mn,ONE:en,create:u=>Wn(u,e),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return mn<=u&&u<e},is0:u=>u===mn,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&en)===en,neg:u=>Wn(-u,e),eql:(u,d)=>u===d,sqr:u=>Wn(u*u,e),add:(u,d)=>Wn(u+d,e),sub:(u,d)=>Wn(u-d,e),mul:(u,d)=>Wn(u*d,e),pow:(u,d)=>U9(l,u,d),div:(u,d)=>Wn(u*Pb(d,e),e),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>Pb(u,e),sqrt:s||(u=>(c||(c=P9(e)),c(l,u))),toBytes:u=>n?J0(u,a):X0(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?vf(u):hh(u)},invertBatch:u=>YA(l,u),cmov:(u,d,f)=>f?d:u});return Object.freeze(l)}function XA(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function JA(e){const t=XA(e);return t+Math.ceil(t/2)}function L9(e,t,n=!1){const r=e.length,i=XA(t),s=JA(t);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?vf(e):hh(e),a=Wn(o,t-en)+en;return n?J0(a,i):X0(a,i)}const $a=BigInt(0),Ms=BigInt(1);function Qc(e,t){const n=t.negate();return e?n:t}function F9(e,t,n){const r=s=>s.pz,i=YA(e.Fp,n.map(r));return n.map((s,o)=>s.toAffine(i[o])).map(e.fromAffine)}function ZA(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Pp(e,t){ZA(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),i=2**e,s=ph(e),o=BigInt(e);return{windows:n,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function Db(e,t,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(e&i),c=e>>o;a>r&&(a-=s,c+=Ms);const l=t*r,u=l+Math.abs(a)-1,d=a===0,f=a<0,h=t%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:l}}function j9(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function M9(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Np=new WeakMap,eC=new WeakMap;function Dp(e){return eC.get(e)||1}function Ub(e){if(e!==$a)throw new Error("invalid wNAF")}function z9(e,t){return{constTimeNegate:Qc,hasPrecomputes(n){return Dp(n)!==1},unsafeLadder(n,r,i=e.ZERO){let s=n;for(;r>$a;)r&Ms&&(i=i.add(s)),s=s.double(),r>>=Ms;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=Pp(r,t),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){let s=e.ZERO,o=e.BASE;const a=Pp(n,t);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:p}=Db(i,c,a);i=l,d?o=o.add(Qc(h,r[p])):s=s.add(Qc(f,r[u]))}return Ub(i),{p:s,f:o}},wNAFUnsafe(n,r,i,s=e.ZERO){const o=Pp(n,t);for(let a=0;a<o.windows&&i!==$a;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=Db(i,a,o);if(i=c,!u){const f=r[l];s=s.add(d?f.negate():f)}}return Ub(i),s},getPrecomputes(n,r,i){let s=Np.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&(typeof i=="function"&&(s=i(s)),Np.set(r,s))),s},wNAFCached(n,r,i){const s=Dp(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=Dp(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){ZA(r,t),eC.set(n,r),Np.delete(n)}}}function H9(e,t,n,r){let i=t,s=e.ZERO,o=e.ZERO;for(;n>$a||r>$a;)n&Ms&&(s=s.add(i)),r&Ms&&(o=o.add(i)),i=i.double(),n>>=Ms,r>>=Ms;return{p1:s,p2:o}}function q9(e,t,n,r){j9(n,e),M9(r,t);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=T9(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=ph(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((t.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){u.fill(o);for(let g=0;g<s;g++){const v=r[g],m=Number(v>>BigInt(h)&l);u[m]=u[m].add(n[g])}let p=o;for(let g=u.length-1,v=o;g>0;g--)v=v.add(u[g]),p=p.add(v);if(f=f.add(p),h!==0)for(let g=0;g<c;g++)f=f.double()}return f}function Bb(e,t){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return D9(t),t}else return Wa(e)}function V9(e,t,n={}){if(!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const o of["p","n","h"]){const a=t[o];if(!(typeof a=="bigint"&&a>$a))throw new Error(`CURVE.${o} must be positive bigint`)}const r=Bb(t.p,n.Fp),i=Bb(t.n,n.Fn),s=["Gx","Gy","a","b"];for(const o of s)if(!r.isValid(t[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const vc=BigInt(0),Ro=BigInt(1),zu=BigInt(2);function G9(e){return gh(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}function W9(e){const t=G9(e),{P:n,type:r,adjustScalarBytes:i,powPminus2:s,randomBytes:o}=t,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||Ga,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),f=BigInt(a?121665:39081),h=a?zu**BigInt(254):zu**BigInt(447),p=a?BigInt(8)*zu**BigInt(251)-Ro:BigInt(4)*zu**BigInt(445)-Ro,g=h+p+Ro,v=C=>Wn(C,n),m=w(d);function w(C){return J0(v(C),u)}function E(C){const U=fn("u coordinate",C,u);return a&&(U[31]&=127),v(vf(U))}function A(C){return vf(i(fn("scalar",C,u)))}function T(C,U){const B=L(E(U),A(C));if(B===vc)throw new Error("invalid private or public key received");return w(B)}function D(C){return T(C,m)}function j(C,U,B){const F=v(C*(U-B));return U=v(U-F),B=v(B+F),{x_2:U,x_3:B}}function L(C,U){Om("u",C,vc,n),Om("scalar",U,h,g);const B=U,F=C;let q=Ro,G=vc,S=C,x=Ro,O=vc;for(let $=BigInt(l-1);$>=vc;$--){const P=B>>$&Ro;O^=P,{x_2:q,x_3:S}=j(O,q,S),{x_2:G,x_3:x}=j(O,G,x),O=P;const M=q+G,W=v(M*M),ee=q-G,Q=v(ee*ee),te=W-Q,se=S+x,ue=S-x,de=v(ue*M),ce=v(se*ee),ze=de+ce,ut=de-ce;S=v(ze*ze),x=v(F*v(ut*ut)),q=v(W*Q),G=v(te*(W+v(f*te)))}({x_2:q,x_3:S}=j(O,q,S)),{x_2:G,x_3:x}=j(O,G,x);const R=s(G);return v(q*R)}return{scalarMult:T,scalarMultBase:D,getSharedSecret:(C,U)=>T(C,U),getPublicKey:C=>D(C),utils:{randomPrivateKey:()=>c(u)},GuBytes:m.slice()}}BigInt(0);const K9=BigInt(1),Lb=BigInt(2),Q9=BigInt(3),Y9=BigInt(5);BigInt(8);const tC={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function X9(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=tC.p,o=e*e%s*e%s,a=fr(o,Lb,s)*o%s,c=fr(a,K9,s)*e%s,l=fr(c,Y9,s)*c%s,u=fr(l,t,s)*l%s,d=fr(u,n,s)*u%s,f=fr(d,r,s)*d%s,h=fr(f,i,s)*f%s,p=fr(h,i,s)*f%s,g=fr(p,t,s)*l%s;return{pow_p_5_8:fr(g,Lb,s)*e%s,b2:o}}function J9(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const Pm=(()=>{const e=tC.p;return W9({P:e,type:"x25519",powPminus2:t=>{const{pow_p_5_8:n,b2:r}=X9(t);return Wn(fr(n,Q9,e)*r,e)},adjustScalarBytes:J9})})();function Fb(e){e.lowS!==void 0&&wf("lowS",e.lowS),e.prehash!==void 0&&wf("prehash",e.prehash)}class Z9 extends Error{constructor(t=""){super(t)}}const ai={Err:Z9,_tlv:{encode:(e,t)=>{const{Err:n}=ai;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=Mu(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?Mu(i.length/2|128):"";return Mu(e)+s+i+t},decode(e,t){const{Err:n}=ai;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=t.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+o)}}},_int:{encode(e){const{Err:t}=ai;if(e<Yc)throw new t("integer: negative integers are not allowed");let n=Mu(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=ai;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return hh(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=ai,i=fn("signature",e),{v:s,l:o}=r.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(e){const{_tlv:t,_int:n}=ai,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),s=r+i;return t.encode(48,s)}},Yc=BigInt(0),Xc=BigInt(1),ez=BigInt(2),Hu=BigInt(3),tz=BigInt(4);function nz(e,t,n){function r(i){const s=e.sqr(i),o=e.mul(s,i);return e.add(e.add(o,e.mul(i,t)),n)}return r}function nC(e,t,n){const{BYTES:r}=e;function i(s){let o;if(typeof s=="bigint")o=s;else{let a=fn("private key",s);if(t){if(!t.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=e.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof s}`)}}if(n&&(o=e.create(o)),!e.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return i}function rz(e,t={}){const{Fp:n,Fn:r}=V9("weierstrass",e,t),{h:i,n:s}=e;gh(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=t;if(o&&(!n.is0(e.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(L,C,U){const{x:B,y:F}=C.toAffine(),q=n.toBytes(B);if(wf("isCompressed",U),U){a();const G=!n.isOdd(F);return Fs(rC(G),q)}else return Fs(Uint8Array.of(4),q,n.toBytes(F))}function l(L){tr(L);const C=n.BYTES,U=C+1,B=2*C+1,F=L.length,q=L[0],G=L.subarray(1);if(F===U&&(q===2||q===3)){const S=n.fromBytes(G);if(!n.isValid(S))throw new Error("bad point: is not on curve, wrong x");const x=f(S);let O;try{O=n.sqrt(x)}catch($){const P=$ instanceof Error?": "+$.message:"";throw new Error("bad point: is not on curve, sqrt error"+P)}a();const R=n.isOdd(O);return(q&1)===1!==R&&(O=n.neg(O)),{x:S,y:O}}else if(F===B&&q===4){const S=n.fromBytes(G.subarray(C*0,C*1)),x=n.fromBytes(G.subarray(C*1,C*2));if(!h(S,x))throw new Error("bad point: is not on curve");return{x:S,y:x}}else throw new Error(`bad point: got length ${F}, expected compressed=${U} or uncompressed=${B}`)}const u=t.toBytes||c,d=t.fromBytes||l,f=nz(n,e.a,e.b);function h(L,C){const U=n.sqr(C),B=f(L);return n.eql(U,B)}if(!h(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(e.a,Hu),tz),g=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function v(L,C,U=!1){if(!n.isValid(C)||U&&n.is0(C))throw new Error(`bad point coordinate ${L}`);return C}function m(L){if(!(L instanceof T))throw new Error("ProjectivePoint expected")}const w=Ob((L,C)=>{const{px:U,py:B,pz:F}=L;if(n.eql(F,n.ONE))return{x:U,y:B};const q=L.is0();C==null&&(C=q?n.ONE:n.inv(F));const G=n.mul(U,C),S=n.mul(B,C),x=n.mul(F,C);if(q)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:G,y:S}}),E=Ob(L=>{if(L.is0()){if(t.allowInfinityPoint&&!n.is0(L.py))return;throw new Error("bad point: ZERO")}const{x:C,y:U}=L.toAffine();if(!n.isValid(C)||!n.isValid(U))throw new Error("bad point: x or y not field elements");if(!h(C,U))throw new Error("bad point: equation left != right");if(!L.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(L,C,U,B,F){return U=new T(n.mul(U.px,L),U.py,U.pz),C=Qc(B,C),U=Qc(F,U),C.add(U)}class T{constructor(C,U,B){this.px=v("x",C),this.py=v("y",U,!0),this.pz=v("z",B),Object.freeze(this)}static fromAffine(C){const{x:U,y:B}=C||{};if(!C||!n.isValid(U)||!n.isValid(B))throw new Error("invalid affine point");if(C instanceof T)throw new Error("projective point not allowed");return n.is0(U)&&n.is0(B)?T.ZERO:new T(U,B,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){return F9(T,"pz",C)}static fromBytes(C){return tr(C),T.fromHex(C)}static fromHex(C){const U=T.fromAffine(d(fn("pointHex",C)));return U.assertValidity(),U}static fromPrivateKey(C){const U=nC(r,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return T.BASE.multiply(U(C))}static msm(C,U){return q9(T,r,C,U)}precompute(C=8,U=!0){return j.setWindowSize(this,C),U||this.multiply(Hu),this}_setWindowSize(C){this.precompute(C)}assertValidity(){E(this)}hasEvenY(){const{y:C}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(C)}equals(C){m(C);const{px:U,py:B,pz:F}=this,{px:q,py:G,pz:S}=C,x=n.eql(n.mul(U,S),n.mul(q,F)),O=n.eql(n.mul(B,S),n.mul(G,F));return x&&O}negate(){return new T(this.px,n.neg(this.py),this.pz)}double(){const{a:C,b:U}=e,B=n.mul(U,Hu),{px:F,py:q,pz:G}=this;let S=n.ZERO,x=n.ZERO,O=n.ZERO,R=n.mul(F,F),$=n.mul(q,q),P=n.mul(G,G),M=n.mul(F,q);return M=n.add(M,M),O=n.mul(F,G),O=n.add(O,O),S=n.mul(C,O),x=n.mul(B,P),x=n.add(S,x),S=n.sub($,x),x=n.add($,x),x=n.mul(S,x),S=n.mul(M,S),O=n.mul(B,O),P=n.mul(C,P),M=n.sub(R,P),M=n.mul(C,M),M=n.add(M,O),O=n.add(R,R),R=n.add(O,R),R=n.add(R,P),R=n.mul(R,M),x=n.add(x,R),P=n.mul(q,G),P=n.add(P,P),R=n.mul(P,M),S=n.sub(S,R),O=n.mul(P,$),O=n.add(O,O),O=n.add(O,O),new T(S,x,O)}add(C){m(C);const{px:U,py:B,pz:F}=this,{px:q,py:G,pz:S}=C;let x=n.ZERO,O=n.ZERO,R=n.ZERO;const $=e.a,P=n.mul(e.b,Hu);let M=n.mul(U,q),W=n.mul(B,G),ee=n.mul(F,S),Q=n.add(U,B),te=n.add(q,G);Q=n.mul(Q,te),te=n.add(M,W),Q=n.sub(Q,te),te=n.add(U,F);let se=n.add(q,S);return te=n.mul(te,se),se=n.add(M,ee),te=n.sub(te,se),se=n.add(B,F),x=n.add(G,S),se=n.mul(se,x),x=n.add(W,ee),se=n.sub(se,x),R=n.mul($,te),x=n.mul(P,ee),R=n.add(x,R),x=n.sub(W,R),R=n.add(W,R),O=n.mul(x,R),W=n.add(M,M),W=n.add(W,M),ee=n.mul($,ee),te=n.mul(P,te),W=n.add(W,ee),ee=n.sub(M,ee),ee=n.mul($,ee),te=n.add(te,ee),M=n.mul(W,te),O=n.add(O,M),M=n.mul(se,te),x=n.mul(Q,x),x=n.sub(x,M),M=n.mul(Q,W),R=n.mul(se,R),R=n.add(R,M),new T(x,O,R)}subtract(C){return this.add(C.negate())}is0(){return this.equals(T.ZERO)}multiply(C){const{endo:U}=t;if(!r.isValidNot0(C))throw new Error("invalid scalar: out of range");let B,F;const q=G=>j.wNAFCached(this,G,T.normalizeZ);if(U){const{k1neg:G,k1:S,k2neg:x,k2:O}=U.splitScalar(C),{p:R,f:$}=q(S),{p:P,f:M}=q(O);F=$.add(M),B=A(U.beta,R,P,G,x)}else{const{p:G,f:S}=q(C);B=G,F=S}return T.normalizeZ([B,F])[0]}multiplyUnsafe(C){const{endo:U}=t,B=this;if(!r.isValid(C))throw new Error("invalid scalar: out of range");if(C===Yc||B.is0())return T.ZERO;if(C===Xc)return B;if(j.hasPrecomputes(this))return this.multiply(C);if(U){const{k1neg:F,k1:q,k2neg:G,k2:S}=U.splitScalar(C),{p1:x,p2:O}=H9(T,B,q,S);return A(U.beta,x,O,F,G)}else return j.wNAFCachedUnsafe(B,C)}multiplyAndAddUnsafe(C,U,B){const F=this.multiplyUnsafe(U).add(C.multiplyUnsafe(B));return F.is0()?void 0:F}toAffine(C){return w(this,C)}isTorsionFree(){const{isTorsionFree:C}=t;return i===Xc?!0:C?C(T,this):j.wNAFCachedUnsafe(this,s).is0()}clearCofactor(){const{clearCofactor:C}=t;return i===Xc?this:C?C(T,this):this.multiplyUnsafe(i)}toBytes(C=!0){return wf("isCompressed",C),this.assertValidity(),u(T,this,C)}toRawBytes(C=!0){return this.toBytes(C)}toHex(C=!0){return kl(this.toBytes(C))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}T.BASE=new T(e.Gx,e.Gy,n.ONE),T.ZERO=new T(n.ZERO,n.ONE,n.ZERO),T.Fp=n,T.Fn=r;const D=r.BITS,j=z9(T,t.endo?Math.ceil(D/2):D);return T}function rC(e){return Uint8Array.of(e?2:3)}function iz(e,t,n={}){gh(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||Ga,i=t.hmac||((B,...F)=>dh(t.hash,B,Fs(...F))),{Fp:s,Fn:o}=e,{ORDER:a,BITS:c}=o;function l(B){const F=a>>Xc;return B>F}function u(B){return l(B)?o.neg(B):B}function d(B,F){if(!o.isValidNot0(F))throw new Error(`invalid signature ${B}: out of range 1..CURVE.n`)}class f{constructor(F,q,G){d("r",F),d("s",q),this.r=F,this.s=q,G!=null&&(this.recovery=G),Object.freeze(this)}static fromCompact(F){const q=o.BYTES,G=fn("compactSignature",F,q*2);return new f(o.fromBytes(G.subarray(0,q)),o.fromBytes(G.subarray(q,q*2)))}static fromDER(F){const{r:q,s:G}=ai.toSig(fn("DER",F));return new f(q,G)}assertValidity(){}addRecoveryBit(F){return new f(this.r,this.s,F)}recoverPublicKey(F){const q=s.ORDER,{r:G,s:S,recovery:x}=this;if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");if(a*ez<q&&x>1)throw new Error("recovery id is ambiguous for h>1 curve");const O=x===2||x===3?G+a:G;if(!s.isValid(O))throw new Error("recovery id 2 or 3 invalid");const R=s.toBytes(O),$=e.fromHex(Fs(rC((x&1)===0),R)),P=o.inv(O),M=E(fn("msgHash",F)),W=o.create(-M*P),ee=o.create(S*P),Q=e.BASE.multiplyUnsafe(W).add($.multiplyUnsafe(ee));if(Q.is0())throw new Error("point at infinify");return Q.assertValidity(),Q}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new f(this.r,o.neg(this.s),this.recovery):this}toBytes(F){if(F==="compact")return Fs(o.toBytes(this.r),o.toBytes(this.s));if(F==="der")return W0(ai.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return kl(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return kl(this.toBytes("compact"))}}const h=nC(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(B){try{return h(B),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const B=a;return L9(r(JA(B)),B)},precompute(B=8,F=e.BASE){return F.precompute(B,!1)}};function g(B,F=!0){return e.fromPrivateKey(B).toBytes(F)}function v(B){if(typeof B=="bigint")return!1;if(B instanceof e)return!0;const F=fn("key",B).length,q=s.BYTES,G=q+1,S=2*q+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===G))return F===G||F===S}function m(B,F,q=!0){if(v(B)===!0)throw new Error("first arg must be private key");if(v(F)===!1)throw new Error("second arg must be public key");return e.fromHex(F).multiply(h(B)).toBytes(q)}const w=t.bits2int||function(B){if(B.length>8192)throw new Error("input is too large");const F=hh(B),q=B.length*8-c;return q>0?F>>BigInt(q):F},E=t.bits2int_modN||function(B){return o.create(w(B))},A=ph(c);function T(B){return Om("num < 2^"+c,B,Yc,A),o.toBytes(B)}function D(B,F,q=j){if(["recovered","canonical"].some(Q=>Q in q))throw new Error("sign() legacy options not supported");const{hash:G}=t;let{lowS:S,prehash:x,extraEntropy:O}=q;S==null&&(S=!0),B=fn("msgHash",B),Fb(q),x&&(B=fn("prehashed msgHash",G(B)));const R=E(B),$=h(F),P=[T($),T(R)];if(O!=null&&O!==!1){const Q=O===!0?r(s.BYTES):O;P.push(fn("extraEntropy",Q))}const M=Fs(...P),W=R;function ee(Q){const te=w(Q);if(!o.isValidNot0(te))return;const se=o.inv(te),ue=e.BASE.multiply(te).toAffine(),de=o.create(ue.x);if(de===Yc)return;const ce=o.create(se*o.create(W+de*$));if(ce===Yc)return;let ze=(ue.x===de?0:2)|Number(ue.y&Xc),ut=ce;return S&&l(ce)&&(ut=u(ce),ze^=1),new f(de,ut,ze)}return{seed:M,k2sig:ee}}const j={lowS:t.lowS,prehash:!1},L={lowS:t.lowS,prehash:!1};function C(B,F,q=j){const{seed:G,k2sig:S}=D(B,F,q);return k9(t.hash.outputLen,o.BYTES,i)(G,S)}e.BASE.precompute(8);function U(B,F,q,G=L){const S=B;F=fn("msgHash",F),q=fn("publicKey",q),Fb(G);const{lowS:x,prehash:O,format:R}=G;if("strict"in G)throw new Error("options.strict was renamed to lowS");if(R!==void 0&&!["compact","der","js"].includes(R))throw new Error('format must be "compact", "der" or "js"');const $=typeof S=="string"||q0(S),P=!$&&!R&&typeof S=="object"&&S!==null&&typeof S.r=="bigint"&&typeof S.s=="bigint";if(!$&&!P)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let M,W;try{if(P)if(R===void 0||R==="js")M=new f(S.r,S.s);else throw new Error("invalid format");if($){try{R!=="compact"&&(M=f.fromDER(S))}catch(ze){if(!(ze instanceof ai.Err))throw ze}!M&&R!=="der"&&(M=f.fromCompact(S))}W=e.fromHex(q)}catch{return!1}if(!M||x&&M.hasHighS())return!1;O&&(F=t.hash(F));const{r:ee,s:Q}=M,te=E(F),se=o.inv(Q),ue=o.create(te*se),de=o.create(ee*se),ce=e.BASE.multiplyUnsafe(ue).add(W.multiplyUnsafe(de));return ce.is0()?!1:o.create(ce.x)===ee}return Object.freeze({getPublicKey:g,getSharedSecret:m,sign:C,verify:U,utils:p,Point:e,Signature:f})}function sz(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp,r=Wa(t.n,e.nBitLength),i={Fp:n,Fn:r,allowedPrivateKeyLengths:e.allowedPrivateKeyLengths,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,wrapPrivateKey:e.wrapPrivateKey,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:i}}function oz(e){const{CURVE:t,curveOpts:n}=sz(e),r={hash:e.hash,hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,ecdsaOpts:r}}function az(e,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:e})}function cz(e){const{CURVE:t,curveOpts:n,ecdsaOpts:r}=oz(e),i=rz(t,n),s=iz(i,r,n);return az(e,s)}function Nm(e,t){const n=r=>cz({...e,hash:r});return{...n(t),create:n}}const iC={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},sC={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},oC={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},lz=Wa(iC.p),uz=Wa(sC.p),dz=Wa(oC.p),fz=Nm({...iC,Fp:lz,lowS:!1},uh);Nm({...sC,Fp:uz,lowS:!1},b7),Nm({...oC,Fp:dz,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},v7);const hz=fz,aC="base10",tn="base16",yr="base64pad",Ki="base64url",tu="utf8",cC=0,pi=1,nu=2,pz=0,jb=1,Jc=12,Z0=32;function gz(){const e=Pm.utils.randomPrivateKey(),t=Pm.getPublicKey(e);return{privateKey:bn(e,tn),publicKey:bn(t,tn)}}function Dm(){const e=Ga(Z0);return bn(e,tn)}function mz(e,t){const n=Pm.getSharedSecret(Xn(e,tn),Xn(t,tn)),r=A9(fh,n,void 0,void 0,Z0);return bn(r,tn)}function Ad(e){const t=fh(Xn(e,tn));return bn(t,tn)}function Ur(e){const t=fh(Xn(e,tu));return bn(t,tn)}function lC(e){return Xn(`${e}`,aC)}function so(e){return Number(bn(e,aC))}function uC(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function dC(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return t+"=".repeat(n)}function yz(e){const t=lC(typeof e.type<"u"?e.type:cC);if(so(t)===pi&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?Xn(e.senderPublicKey,tn):void 0,r=typeof e.iv<"u"?Xn(e.iv,tn):Ga(Jc),i=Xn(e.symKey,tn),s=HA(i,r).encrypt(Xn(e.message,tu)),o=fC({type:t,sealed:s,iv:r,senderPublicKey:n});return e.encoding===Ki?uC(o):o}function wz(e){const t=Xn(e.symKey,tn),{sealed:n,iv:r}=$l({encoded:e.encoded,encoding:e.encoding}),i=HA(t,r).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return bn(i,tu)}function vz(e,t){const n=lC(nu),r=Ga(Jc),i=Xn(e,tu),s=fC({type:n,sealed:i,iv:r});return t===Ki?uC(s):s}function bz(e,t){const{sealed:n}=$l({encoded:e,encoding:t});return bn(n,tu)}function fC(e){if(so(e.type)===nu)return bn(Kc([e.type,e.sealed]),yr);if(so(e.type)===pi){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return bn(Kc([e.type,e.senderPublicKey,e.iv,e.sealed]),yr)}return bn(Kc([e.type,e.iv,e.sealed]),yr)}function $l(e){const t=(e.encoding||yr)===Ki?dC(e.encoded):e.encoded,n=Xn(t,yr),r=n.slice(pz,jb),i=jb;if(so(r)===pi){const c=i+Z0,l=c+Jc,u=n.slice(i,c),d=n.slice(c,l),f=n.slice(l);return{type:r,sealed:f,iv:d,senderPublicKey:u}}if(so(r)===nu){const c=n.slice(i),l=Ga(Jc);return{type:r,sealed:c,iv:l}}const s=i+Jc,o=n.slice(i,s),a=n.slice(s);return{type:r,sealed:a,iv:o}}function Ez(e,t){const n=$l({encoded:e,encoding:t==null?void 0:t.encoding});return hC({type:so(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?bn(n.senderPublicKey,tn):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function hC(e){const t=(e==null?void 0:e.type)||cC;if(t===pi){if(typeof(e==null?void 0:e.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(e==null?void 0:e.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e==null?void 0:e.senderPublicKey,receiverPublicKey:e==null?void 0:e.receiverPublicKey}}function Mb(e){return e.type===pi&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function zb(e){return e.type===nu}function _z(e){const t=Buffer.from(e.x,"base64"),n=Buffer.from(e.y,"base64");return Kc([new Uint8Array([4]),t,n])}function Sz(e,t){const[n,r,i]=e.split("."),s=Buffer.from(dC(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=`${n}.${r}`,l=fh(c),u=_z(t);if(!hz.verify(Kc([o,a]),l,u))throw new Error("Invalid signature");return _m(e).payload}const xz="irn";function bf(e){return(e==null?void 0:e.relay)||{protocol:xz}}function Nc(e){const t=Jj[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function Iz(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach(i=>{if(i.startsWith(r)){const s=i.replace(r,""),o=e[i];n[s]=o}}),n}function Hb(e){if(!e.includes("wc:")){const l=xA(e);l!=null&&l.includes("wc:")&&(e=l)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,t),i=e.substring(t+1,n).split("@"),s=typeof n<"u"?e.substring(n):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:Az(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:Iz(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Az(e){return e.startsWith("//")?e.substring(2):e}function Cz(e,t="-"){const n="relay",r={};return Object.keys(e).forEach(i=>{const s=i,o=n+t+s;e[s]&&(r[o]=e[s])}),r}function qb(e){const t=new URLSearchParams,n=Cz(e.relay);Object.keys(n).sort().forEach(i=>{t.set(i,n[i])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const r=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${r}`}function qu(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var Tz=Object.defineProperty,kz=Object.defineProperties,Rz=Object.getOwnPropertyDescriptors,Vb=Object.getOwnPropertySymbols,$z=Object.prototype.hasOwnProperty,Oz=Object.prototype.propertyIsEnumerable,Gb=(e,t,n)=>t in e?Tz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pz=(e,t)=>{for(var n in t||(t={}))$z.call(t,n)&&Gb(e,n,t[n]);if(Vb)for(var n of Vb(t))Oz.call(t,n)&&Gb(e,n,t[n]);return e},Nz=(e,t)=>kz(e,Rz(t));function Ka(e){const t=[];return e.forEach(n=>{const[r,i]=n.split(":");t.push(`${r}:${i}`)}),t}function Dz(e){const t=[];return Object.values(e).forEach(n=>{t.push(...Ka(n.accounts))}),t}function Uz(e,t){const n=[];return Object.values(e).forEach(r=>{Ka(r.accounts).includes(t)&&n.push(...r.methods)}),n}function Bz(e,t){const n=[];return Object.values(e).forEach(r=>{Ka(r.accounts).includes(t)&&n.push(...r.events)}),n}function mh(e){return e.includes(":")}function ca(e){return mh(e)?e.split(":")[0]:e}function Wb(e){var t,n,r;const i={};if(!qr(e))return i;for(const[s,o]of Object.entries(e)){const a=mh(s)?[s]:o.chains,c=o.methods||[],l=o.events||[],u=ca(s);i[u]=Nz(Pz({},i[u]),{chains:Hr(a,(t=i[u])==null?void 0:t.chains),methods:Hr(c,(n=i[u])==null?void 0:n.methods),events:Hr(l,(r=i[u])==null?void 0:r.events)})}return i}function Lz(e){const t={};return e==null||e.forEach(n=>{var r;const[i,s]=n.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(n),(r=t[i].chains)==null||r.push(`${i}:${s}`)}),t}function Kb(e,t){t=t.map(r=>r.replace("did:pkh:",""));const n=Lz(t);for(const[r,i]of Object.entries(n))i.methods?i.methods=Hr(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return n}function Fz(e,t){var n,r,i,s,o,a;const c=Wb(e),l=Wb(t),u={},d=Object.keys(c).concat(Object.keys(l));for(const f of d)u[f]={chains:Hr((n=c[f])==null?void 0:n.chains,(r=l[f])==null?void 0:r.chains),methods:Hr((i=c[f])==null?void 0:i.methods,(s=l[f])==null?void 0:s.methods),events:Hr((o=c[f])==null?void 0:o.events,(a=l[f])==null?void 0:a.events)};return u}const jz={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Mz={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function J(e,t){const{message:n,code:r}=Mz[e];return{message:t?`${n} ${t}`:n,code:r}}function qe(e,t){const{message:n,code:r}=jz[e];return{message:t?`${n} ${t}`:n,code:r}}function gi(e,t){return!!Array.isArray(e)}function qr(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Rt(e){return typeof e>"u"}function it(e,t){return t&&Rt(e)?!0:typeof e=="string"&&!!e.trim().length}function ew(e,t){return t&&Rt(e)?!0:typeof e=="number"&&!isNaN(e)}function zz(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),i=Object.keys(n);let s=!0;return Ls(i,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=e.namespaces[o],u=Ka(a),d=n[o];(!Ls(vA(o,d),u)||!Ls(d.methods,c)||!Ls(d.events,l))&&(s=!1)}),s):!1}function Ef(e){return it(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function Hz(e){if(it(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&Ef(n)}}return!1}function qz(e){function t(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(it(e,!1)){if(t(e))return!0;const n=xA(e);return t(n)}}catch{}return!1}function Vz(e){var t;return(t=e==null?void 0:e.proposer)==null?void 0:t.publicKey}function Gz(e){return e==null?void 0:e.topic}function Wz(e,t){let n=null;return it(e==null?void 0:e.publicKey,!1)||(n=J("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function Qb(e){let t=!0;return gi(e)?e.length&&(t=e.every(n=>it(n,!1))):t=!1,t}function Kz(e,t,n){let r=null;return gi(t)&&t.length?t.forEach(i=>{r||Ef(i)||(r=qe("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Ef(e)||(r=qe("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function Qz(e,t,n){let r=null;return Object.entries(e).forEach(([i,s])=>{if(r)return;const o=Kz(i,vA(i,s),`${t} ${n}`);o&&(r=o)}),r}function Yz(e,t){let n=null;return gi(e)?e.forEach(r=>{n||Hz(r)||(n=qe("UNSUPPORTED_ACCOUNTS",`${t}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=qe("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Xz(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=Yz(r==null?void 0:r.accounts,`${t} namespace`);i&&(n=i)}),n}function Jz(e,t){let n=null;return Qb(e==null?void 0:e.methods)?Qb(e==null?void 0:e.events)||(n=qe("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=qe("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function pC(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=Jz(r,`${t}, namespace`);i&&(n=i)}),n}function Zz(e,t,n){let r=null;if(e&&qr(e)){const i=pC(e,t);i&&(r=i);const s=Qz(e,t,n);s&&(r=s)}else r=J("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}function Up(e,t){let n=null;if(e&&qr(e)){const r=pC(e,t);r&&(n=r);const i=Xz(e,t);i&&(n=i)}else n=J("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function gC(e){return it(e.protocol,!0)}function eH(e,t){let n=!1;return e?e&&gi(e)&&e.length&&e.forEach(r=>{n=gC(r)}):n=!0,n}function tH(e){return typeof e=="number"}function dn(e){return typeof e<"u"&&typeof e!==null}function nH(e){return!(!e||typeof e!="object"||!e.code||!ew(e.code,!1)||!e.message||!it(e.message,!1))}function rH(e){return!(Rt(e)||!it(e.method,!1))}function iH(e){return!(Rt(e)||Rt(e.result)&&Rt(e.error)||!ew(e.id,!1)||!it(e.jsonrpc,!1))}function sH(e){return!(Rt(e)||!it(e.name,!1))}function Yb(e,t){return!(!Ef(t)||!Dz(e).includes(t))}function oH(e,t,n){return it(n,!1)?Uz(e,t).includes(n):!1}function aH(e,t,n){return it(n,!1)?Bz(e,t).includes(n):!1}function Xb(e,t,n){let r=null;const i=cH(e),s=lH(t),o=Object.keys(i),a=Object.keys(s),c=Jb(Object.keys(e)),l=Jb(Object.keys(t)),u=c.filter(d=>!l.includes(d));return u.length&&(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(t).toString()}`)),Ls(o,a)||(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(t).forEach(d=>{if(!d.includes(":")||r)return;const f=Ka(t[d].accounts);f.includes(d)||(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${f.toString()}`))}),o.forEach(d=>{r||(Ls(i[d].methods,s[d].methods)?Ls(i[d].events,s[d].events)||(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function cH(e){const t={};return Object.keys(e).forEach(n=>{var r;n.includes(":")?t[n]=e[n]:(r=e[n].chains)==null||r.forEach(i=>{t[i]={methods:e[n].methods,events:e[n].events}})}),t}function Jb(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function lH(e){const t={};return Object.keys(e).forEach(n=>{if(n.includes(":"))t[n]=e[n];else{const r=Ka(e[n].accounts);r==null||r.forEach(i=>{t[i]={accounts:e[n].accounts.filter(s=>s.includes(`${i}:`)),methods:e[n].methods,events:e[n].events}})}}),t}function uH(e,t){return ew(e,!1)&&e<=t.max&&e>=t.min}function Zb(){const e=Zl();return new Promise(t=>{switch(e){case Nn.browser:t(dH());break;case Nn.reactNative:t(fH());break;case Nn.node:t(hH());break;default:t(!0)}})}function dH(){return Va()&&(navigator==null?void 0:navigator.onLine)}async function fH(){if(ws()&&typeof global<"u"&&global!=null&&global.NetInfo){const e=await(global==null?void 0:global.NetInfo.fetch());return e==null?void 0:e.isConnected}return!0}function hH(){return!0}function pH(e){switch(Zl()){case Nn.browser:gH(e);break;case Nn.reactNative:mH(e);break}}function gH(e){!ws()&&Va()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function mH(e){ws()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(t=>e(t==null?void 0:t.isConnected)))}function yH(){var e;return Va()&&to()?((e=to())==null?void 0:e.visibilityState)==="visible":!0}const Bp={};class bc{static get(t){return Bp[t]}static set(t,n){Bp[t]=n}static delete(t){delete Bp[t]}}function wH(e){const t=Yl.decode(e);if(t.length<33)throw new Error("Too short to contain a public key");return t.slice(1,33)}function vH({publicKey:e,signature:t,payload:n}){var r;const i=Um(n.method),s=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=_H(n.address),a=n.era==="00"?new Uint8Array([0]):Um(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${EH(n.tip)}`),d=xH(u),f=new Uint8Array([0,...e,o,...t,...a,...l,...d,...i]),h=SH(f.length+1);return new Uint8Array([...h,s,...f])}function bH(e){const t=Um(e),n=uM.blake2b(t,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function Um(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(t=>parseInt(t,16)))}function EH(e){return e.startsWith("0x")?e.slice(2):e}function _H(e){const t=Yl.decode(e)[0];return t===42?0:t===60?2:1}function SH(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){const t=e<<2|1;return new Uint8Array([t&255,t>>8&255])}else if(e<1<<30){const t=e<<2|2;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function xH(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){const t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}else if(e<BigInt(1)<<BigInt(30)){const t=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255)),Number(t>>BigInt(16)&BigInt(255)),Number(t>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function IH(e){const t=Uint8Array.from(Buffer.from(e.signature,"hex")),n=wH(e.transaction.address),r=vH({publicKey:n,signature:t,payload:e.transaction}),i=Buffer.from(r).toString("hex");return bH(i)}var yh,Ue,mC,Os,eE,yC,wC,vC,tw,Bm,Lm,Ol={},bC=[],AH=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,wh=Array.isArray;function di(e,t){for(var n in t)e[n]=t[n];return e}function nw(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function CH(e,t,n){var r,i,s,o={};for(s in t)s=="key"?r=t[s]:s=="ref"?i=t[s]:o[s]=t[s];if(arguments.length>2&&(o.children=arguments.length>3?yh.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)o[s]===void 0&&(o[s]=e.defaultProps[s]);return Cd(e,o,r,i,null)}function Cd(e,t,n,r,i){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++mC,__i:-1,__u:0};return i==null&&Ue.vnode!=null&&Ue.vnode(s),s}function vh(e){return e.children}function Td(e,t){this.props=e,this.context=t}function Oa(e,t){if(t==null)return e.__?Oa(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Oa(e):null}function EC(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return EC(e)}}function tE(e){(!e.__d&&(e.__d=!0)&&Os.push(e)&&!_f.__r++||eE!=Ue.debounceRendering)&&((eE=Ue.debounceRendering)||yC)(_f)}function _f(){for(var e,t,n,r,i,s,o,a=1;Os.length;)Os.length>a&&Os.sort(wC),e=Os.shift(),a=Os.length,e.__d&&(n=void 0,i=(r=(t=e).__v).__e,s=[],o=[],t.__P&&((n=di({},r)).__v=r.__v+1,Ue.vnode&&Ue.vnode(n),rw(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,s,i??Oa(r),!!(32&r.__u),o),n.__v=r.__v,n.__.__k[n.__i]=n,xC(s,n,o),n.__e!=i&&EC(n)));_f.__r=0}function _C(e,t,n,r,i,s,o,a,c,l,u){var d,f,h,p,g,v,m=r&&r.__k||bC,w=t.length;for(c=TH(n,t,m,c,w),d=0;d<w;d++)(h=n.__k[d])!=null&&(f=h.__i==-1?Ol:m[h.__i]||Ol,h.__i=d,v=rw(e,h,f,i,s,o,a,c,l,u),p=h.__e,h.ref&&f.ref!=h.ref&&(f.ref&&iw(f.ref,null,h),u.push(h.ref,h.__c||p,h)),g==null&&p!=null&&(g=p),4&h.__u||f.__k===h.__k?c=SC(h,c,e):typeof h.type=="function"&&v!==void 0?c=v:p&&(c=p.nextSibling),h.__u&=-7);return n.__e=g,c}function TH(e,t,n,r,i){var s,o,a,c,l,u=n.length,d=u,f=0;for(e.__k=new Array(i),s=0;s<i;s++)(o=t[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(c=s+f,(o=e.__k[s]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Cd(null,o,null,null,null):wh(o)?Cd(vh,{children:o},null,null,null):o.constructor==null&&o.__b>0?Cd(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,a=null,(l=o.__i=kH(o,n,c,d))!=-1&&(d--,(a=n[l])&&(a.__u|=2)),a==null||a.__v==null?(l==-1&&(i>u?f--:i<u&&f++),typeof o.type!="function"&&(o.__u|=4)):l!=c&&(l==c-1?f--:l==c+1?f++:(l>c?f--:f++,o.__u|=4))):e.__k[s]=null;if(d)for(s=0;s<u;s++)(a=n[s])!=null&&!(2&a.__u)&&(a.__e==r&&(r=Oa(a)),AC(a,a));return r}function SC(e,t,n){var r,i;if(typeof e.type=="function"){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=SC(r[i],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Oa(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function kH(e,t,n,r){var i,s,o=e.key,a=e.type,c=t[n];if(c===null&&e.key==null||c&&o==c.key&&a==c.type&&!(2&c.__u))return n;if(r>(c!=null&&!(2&c.__u)?1:0))for(i=n-1,s=n+1;i>=0||s<t.length;){if(i>=0){if((c=t[i])&&!(2&c.__u)&&o==c.key&&a==c.type)return i;i--}if(s<t.length){if((c=t[s])&&!(2&c.__u)&&o==c.key&&a==c.type)return s;s++}}return-1}function nE(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||AH.test(t)?n:n+"px"}function Vu(e,t,n,r,i){var s,o;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||nE(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||nE(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(vC,"$1")),o=t.toLowerCase(),t=o in e||t=="onFocusOut"||t=="onFocusIn"?o.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r?n.u=r.u:(n.u=tw,e.addEventListener(t,s?Lm:Bm,s)):e.removeEventListener(t,s?Lm:Bm,s);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function rE(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=tw++;else if(t.t<n.u)return;return n(Ue.event?Ue.event(t):t)}}}function rw(e,t,n,r,i,s,o,a,c,l){var u,d,f,h,p,g,v,m,w,E,A,T,D,j,L,C,U,B=t.type;if(t.constructor!=null)return null;128&n.__u&&(c=!!(32&n.__u),s=[a=t.__e=n.__e]),(u=Ue.__b)&&u(t);e:if(typeof B=="function")try{if(m=t.props,w="prototype"in B&&B.prototype.render,E=(u=B.contextType)&&r[u.__c],A=u?E?E.props.value:u.__:r,n.__c?v=(d=t.__c=n.__c).__=d.__E:(w?t.__c=d=new B(m,A):(t.__c=d=new Td(m,A),d.constructor=B,d.render=$H),E&&E.sub(d),d.props=m,d.state||(d.state={}),d.context=A,d.__n=r,f=d.__d=!0,d.__h=[],d._sb=[]),w&&d.__s==null&&(d.__s=d.state),w&&B.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=di({},d.__s)),di(d.__s,B.getDerivedStateFromProps(m,d.__s))),h=d.props,p=d.state,d.__v=t,f)w&&B.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),w&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(w&&B.getDerivedStateFromProps==null&&m!==h&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(m,A),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(m,d.__s,A)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(d.props=m,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(F){F&&(F.__=t)}),T=0;T<d._sb.length;T++)d.__h.push(d._sb[T]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(m,d.__s,A),w&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(h,p,g)})}if(d.context=A,d.props=m,d.__P=e,d.__e=!1,D=Ue.__r,j=0,w){for(d.state=d.__s,d.__d=!1,D&&D(t),u=d.render(d.props,d.state,d.context),L=0;L<d._sb.length;L++)d.__h.push(d._sb[L]);d._sb=[]}else do d.__d=!1,D&&D(t),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++j<25);d.state=d.__s,d.getChildContext!=null&&(r=di(di({},r),d.getChildContext())),w&&!f&&d.getSnapshotBeforeUpdate!=null&&(g=d.getSnapshotBeforeUpdate(h,p)),C=u,u!=null&&u.type===vh&&u.key==null&&(C=IC(u.props.children)),a=_C(e,wh(C)?C:[C],t,n,r,i,s,o,a,c,l),d.base=t.__e,t.__u&=-161,d.__h.length&&o.push(d),v&&(d.__E=d.__=null)}catch(F){if(t.__v=null,c||s!=null)if(F.then){for(t.__u|=c?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,t.__e=a}else for(U=s.length;U--;)nw(s[U]);else t.__e=n.__e,t.__k=n.__k;Ue.__e(F,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):a=t.__e=RH(n.__e,t,n,r,i,s,o,c,l);return(u=Ue.diffed)&&u(t),128&t.__u?void 0:a}function xC(e,t,n){for(var r=0;r<n.length;r++)iw(n[r],n[++r],n[++r]);Ue.__c&&Ue.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(s){s.call(i)})}catch(s){Ue.__e(s,i.__v)}})}function IC(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:wh(e)?e.map(IC):di({},e)}function RH(e,t,n,r,i,s,o,a,c){var l,u,d,f,h,p,g,v=n.props,m=t.props,w=t.type;if(w=="svg"?i="http://www.w3.org/2000/svg":w=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((h=s[l])&&"setAttribute"in h==!!w&&(w?h.localName==w:h.nodeType==3)){e=h,s[l]=null;break}}if(e==null){if(w==null)return document.createTextNode(m);e=document.createElementNS(i,w,m.is&&m),a&&(Ue.__m&&Ue.__m(t,s),a=!1),s=null}if(w==null)v===m||a&&e.data==m||(e.data=m);else{if(s=s&&yh.call(e.childNodes),v=n.props||Ol,!a&&s!=null)for(v={},l=0;l<e.attributes.length;l++)v[(h=e.attributes[l]).name]=h.value;for(l in v)if(h=v[l],l!="children"){if(l=="dangerouslySetInnerHTML")d=h;else if(!(l in m)){if(l=="value"&&"defaultValue"in m||l=="checked"&&"defaultChecked"in m)continue;Vu(e,l,null,h,i)}}for(l in m)h=m[l],l=="children"?f=h:l=="dangerouslySetInnerHTML"?u=h:l=="value"?p=h:l=="checked"?g=h:a&&typeof h!="function"||v[l]===h||Vu(e,l,h,v[l],i);if(u)a||d&&(u.__html==d.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=""),_C(t.type=="template"?e.content:e,wh(f)?f:[f],t,n,r,w=="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,o,s?s[0]:n.__k&&Oa(n,0),a,c),s!=null)for(l=s.length;l--;)nw(s[l]);a||(l="value",w=="progress"&&p==null?e.removeAttribute("value"):p!=null&&(p!==e[l]||w=="progress"&&!p||w=="option"&&p!=v[l])&&Vu(e,l,p,v[l],i),l="checked",g!=null&&g!=e[l]&&Vu(e,l,g,v[l],i))}return e}function iw(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(i){Ue.__e(i,n)}}function AC(e,t,n){var r,i;if(Ue.unmount&&Ue.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||iw(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){Ue.__e(s,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&AC(r[i],t,n||typeof e.type!="function");n||nw(e.__e),e.__c=e.__=e.__e=void 0}function $H(e,t,n){return this.constructor(e,n)}function iE(e,t,n){var r,i,s,o;t==document&&(t=document.documentElement),Ue.__&&Ue.__(e,t),i=(r=!1)?null:t.__k,s=[],o=[],rw(t,e=t.__k=CH(vh,null,[e]),i||Ol,Ol,t.namespaceURI,i?null:t.firstChild?yh.call(t.childNodes):null,s,i?i.__e:t.firstChild,r,o),xC(s,e,o)}yh=bC.slice,Ue={__e:function(e,t,n,r){for(var i,s,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),o=i.__d),o)return i.__E=i}catch(a){e=a}throw e}},mC=0,Td.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=di({},this.state),typeof e=="function"&&(e=e(di({},n),this.props)),e&&di(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),tE(this))},Td.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),tE(this))},Td.prototype.render=vh,Os=[],yC=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,wC=function(e,t){return e.__v.__b-t.__v.__b},_f.__r=0,vC=/(PointerCapture)$|Capture$/i,tw=0,Bm=rE(!1),Lm=rE(!0);var OH=0;function Rr(e,t,n,r,i,s){t||(t={});var o,a,c=t;if("ref"in c)for(a in c={},t)a=="ref"?o=t[a]:c[a]=t[a];var l={type:e,props:c,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--OH,__i:-1,__u:0,__source:i,__self:s};if(typeof e=="function"&&(o=e.defaultProps))for(a in o)c[a]===void 0&&(c[a]=o[a]);return Ue.vnode&&Ue.vnode(l),l}class go{}let PH=class extends go{constructor(t){super()}};const sE=Z.FIVE_SECONDS,mo={pulse:"heartbeat_pulse"};let NH=class CC extends PH{constructor(t){super(t),this.events=new En.EventEmitter,this.interval=sE,this.interval=(t==null?void 0:t.interval)||sE}static async init(t){const n=new CC(t);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Z.toMiliseconds(this.interval))}pulse(){this.events.emit(mo.pulse)}};const DH=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,UH=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,BH=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function LH(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){FH(e);return}return t}function FH(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Gu(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const n=e.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!BH.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(DH.test(e)||UH.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,LH)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}function jH(e){return!e||typeof e.then!="function"?Promise.resolve(e):e}function vt(e,...t){try{return jH(e(...t))}catch(n){return Promise.reject(n)}}function MH(e){const t=typeof e;return e===null||t!=="object"&&t!=="function"}function zH(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function kd(e){if(MH(e))return String(e);if(zH(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON=="function")return kd(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Fm="base64:";function HH(e){return typeof e=="string"?e:Fm+GH(e)}function qH(e){return typeof e!="string"||!e.startsWith(Fm)?e:VH(e.slice(Fm.length))}function VH(e){return globalThis.Buffer?Buffer.from(e,"base64"):Uint8Array.from(globalThis.atob(e),t=>t.codePointAt(0))}function GH(e){return globalThis.Buffer?Buffer.from(e).toString("base64"):globalThis.btoa(String.fromCodePoint(...e))}function un(e){var t;return e&&((t=e.split("?")[0])==null?void 0:t.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function WH(...e){return un(e.join(":"))}function Wu(e){return e=un(e),e?e+":":""}function KH(e,t){if(t===void 0)return!0;let n=0,r=e.indexOf(":");for(;r>-1;)n++,r=e.indexOf(":",r+1);return n<=t}function QH(e,t){return t?e.startsWith(t)&&e[e.length-1]!=="$":e[e.length-1]!=="$"}const YH="memory",XH=()=>{const e=new Map;return{name:YH,getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,n){e.set(t,n)},setItemRaw(t,n){e.set(t,n)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}};function JH(e={}){const t={mounts:{"":e.driver||XH()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of t.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:t.mounts[u]};return{base:"",relativeKey:l,driver:t.mounts[""]}},r=(l,u)=>t.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:t.mounts[d]})),i=(l,u)=>{if(t.watching){u=un(u);for(const d of t.watchListeners)d(l,u)}},s=async()=>{if(!t.watching){t.watching=!0;for(const l in t.mounts)t.unwatch[l]=await oE(t.mounts[l],i,l)}},o=async()=>{if(t.watching){for(const l in t.unwatch)await t.unwatch[l]();t.unwatch={},t.watching=!1}},a=(l,u,d)=>{const f=new Map,h=p=>{let g=f.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},f.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",v=un(g?p:p.key),m=g?void 0:p.value,w=g||!p.options?u:{...u,...p.options},E=n(v);h(E).items.push({key:v,value:m,relativeKey:E.relativeKey,options:w})}return Promise.all([...f.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=un(l);const{relativeKey:d,driver:f}=n(l);return vt(f.hasItem,d,u)},getItem(l,u={}){l=un(l);const{relativeKey:d,driver:f}=n(l);return vt(f.getItem,d,u).then(h=>Gu(h))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?vt(d.driver.getItems,d.items.map(f=>({key:f.relativeKey,options:f.options})),u).then(f=>f.map(h=>({key:WH(d.base,h.key),value:Gu(h.value)}))):Promise.all(d.items.map(f=>vt(d.driver.getItem,f.relativeKey,f.options).then(h=>({key:f.key,value:Gu(h)})))))},getItemRaw(l,u={}){l=un(l);const{relativeKey:d,driver:f}=n(l);return f.getItemRaw?vt(f.getItemRaw,d,u):vt(f.getItem,d,u).then(h=>qH(h))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=un(l);const{relativeKey:f,driver:h}=n(l);h.setItem&&(await vt(h.setItem,f,kd(u),d),h.watch||i("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return vt(d.driver.setItems,d.items.map(f=>({key:f.relativeKey,value:kd(f.value),options:f.options})),u);d.driver.setItem&&await Promise.all(d.items.map(f=>vt(d.driver.setItem,f.relativeKey,kd(f.value),f.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=un(l);const{relativeKey:f,driver:h}=n(l);if(h.setItemRaw)await vt(h.setItemRaw,f,u,d);else if(h.setItem)await vt(h.setItem,f,HH(u),d);else return;h.watch||i("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=un(l);const{relativeKey:d,driver:f}=n(l);f.removeItem&&(await vt(f.removeItem,d,u),(u.removeMeta||u.removeMata)&&await vt(f.removeItem,d+"$",u),f.watch||i("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=un(l);const{relativeKey:d,driver:f}=n(l),h=Object.create(null);if(f.getMeta&&Object.assign(h,await vt(f.getMeta,d,u)),!u.nativeOnly){const p=await vt(f.getItem,d+"$",u).then(g=>Gu(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(h,p))}return h},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var v;l=Wu(l);const d=r(l,!0);let f=[];const h=[];let p=!0;for(const m of d){(v=m.driver.flags)!=null&&v.maxDepth||(p=!1);const w=await vt(m.driver.getKeys,m.relativeBase,u);for(const E of w){const A=m.mountpoint+un(E);f.some(T=>A.startsWith(T))||h.push(A)}f=[m.mountpoint,...f.filter(E=>!E.startsWith(m.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return h.filter(m=>(!g||KH(m,u.maxDepth))&&QH(m,l))},async clear(l,u={}){l=Wu(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return vt(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const f=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(f.map(h=>d.driver.removeItem(h,u)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(l=>aE(l)))},async watch(l){return await s(),t.watchListeners.push(l),async()=>{t.watchListeners=t.watchListeners.filter(u=>u!==l),t.watchListeners.length===0&&await o()}},async unwatch(){t.watchListeners=[],await o()},mount(l,u){if(l=Wu(l),l&&t.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(t.mountpoints.push(l),t.mountpoints.sort((d,f)=>f.length-d.length)),t.mounts[l]=u,t.watching&&Promise.resolve(oE(u,i,l)).then(d=>{t.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,f;l=Wu(l),!(!l||!t.mounts[l])&&(t.watching&&l in t.unwatch&&((f=(d=t.unwatch)[l])==null||f.call(d),delete t.unwatch[l]),u&&await aE(t.mounts[l]),t.mountpoints=t.mountpoints.filter(h=>h!==l),delete t.mounts[l])},getMount(l=""){l=un(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=un(l),r(l,u.parents).map(f=>({driver:f.driver,base:f.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function oE(e,t,n){return e.watch?e.watch((r,i)=>t(r,n+i)):()=>{}}async function aE(e){typeof e.dispose=="function"&&await vt(e.dispose)}function yo(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function TC(e,t){let n;const r=()=>{if(n)return n;const i=indexedDB.open(e);return i.onupgradeneeded=()=>i.result.createObjectStore(t),n=yo(i),n.then(s=>{s.onclose=()=>n=void 0},()=>{}),n};return(i,s)=>r().then(o=>s(o.transaction(t,i).objectStore(t)))}let Lp;function ru(){return Lp||(Lp=TC("keyval-store","keyval")),Lp}function cE(e,t=ru()){return t("readonly",n=>yo(n.get(e)))}function ZH(e,t,n=ru()){return n("readwrite",r=>(r.put(t,e),yo(r.transaction)))}function eq(e,t=ru()){return t("readwrite",n=>(n.delete(e),yo(n.transaction)))}function tq(e=ru()){return e("readwrite",t=>(t.clear(),yo(t.transaction)))}function nq(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},yo(e.transaction)}function rq(e=ru()){return e("readonly",t=>{if(t.getAllKeys)return yo(t.getAllKeys());const n=[];return nq(t,r=>n.push(r.key)).then(()=>n)})}const iq="idb-keyval";var sq=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",n=i=>t+i;let r;return e.dbName&&e.storeName&&(r=TC(e.dbName,e.storeName)),{name:iq,options:e,async hasItem(i){return!(typeof await cE(n(i),r)>"u")},async getItem(i){return await cE(n(i),r)??null},setItem(i,s){return ZH(n(i),s,r)},removeItem(i){return eq(n(i),r)},getKeys(){return rq(r)},clear(){return tq(r)}}};const oq="WALLET_CONNECT_V2_INDEXED_DB",aq="keyvaluestorage";let cq=class{constructor(){this.indexedDb=JH({driver:sq({dbName:oq,storeName:aq})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){const n=await this.indexedDb.getItem(t);if(n!==null)return n}async setItem(t,n){await this.indexedDb.setItem(t,_i(n))}async removeItem(t){await this.indexedDb.removeItem(t)}};var Fp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rd={exports:{}};(function(){let e;function t(){}e=t,e.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},e.prototype.setItem=function(n,r){this[n]=String(r)},e.prototype.removeItem=function(n){delete this[n]},e.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},e.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Fp<"u"&&Fp.localStorage?Rd.exports=Fp.localStorage:typeof window<"u"&&window.localStorage?Rd.exports=window.localStorage:Rd.exports=new t})();function lq(e){var t;return[e[0],ro((t=e[1])!=null?t:"")]}let uq=class{constructor(){this.localStorage=Rd.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(lq)}async getItem(t){const n=this.localStorage.getItem(t);if(n!==null)return ro(n)}async setItem(t,n){this.localStorage.setItem(t,_i(n))}async removeItem(t){this.localStorage.removeItem(t)}};const dq="wc_storage_version",lE=1,fq=async(e,t,n)=>{const r=dq,i=await t.getItem(r);if(i&&i>=lE){n(t);return}const s=await e.getKeys();if(!s.length){n(t);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await e.getItem(a);await t.setItem(a,l),o.push(a)}}await t.setItem(r,lE),n(t),hq(e,o)},hq=async(e,t)=>{t.length&&t.forEach(async n=>{await e.removeItem(n)})};let pq=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const t=new uq;this.storage=t;try{const n=new cq;fq(t,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,n){return await this.initialize(),this.storage.setItem(t,n)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),t())},20)})}};function gq(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}var mq=yq;function yq(e,t,n){var r=n&&n.stringify||gq,i=1;if(typeof e=="object"&&e!==null){var s=t.length+i;if(s===1)return e;var o=new Array(s);o[0]=r(e);for(var a=1;a<s;a++)o[a]=r(t[a]);return o.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var l="",u=1-i,d=-1,f=e&&e.length||0,h=0;h<f;){if(e.charCodeAt(h)===37&&h+1<f){switch(d=d>-1?d:0,e.charCodeAt(h+1)){case 100:case 102:if(u>=c||t[u]==null)break;d<h&&(l+=e.slice(d,h)),l+=Number(t[u]),d=h+2,h++;break;case 105:if(u>=c||t[u]==null)break;d<h&&(l+=e.slice(d,h)),l+=Math.floor(Number(t[u])),d=h+2,h++;break;case 79:case 111:case 106:if(u>=c||t[u]===void 0)break;d<h&&(l+=e.slice(d,h));var p=typeof t[u];if(p==="string"){l+="'"+t[u]+"'",d=h+2,h++;break}if(p==="function"){l+=t[u].name||"<anonymous>",d=h+2,h++;break}l+=r(t[u]),d=h+2,h++;break;case 115:if(u>=c)break;d<h&&(l+=e.slice(d,h)),l+=String(t[u]),d=h+2,h++;break;case 37:d<h&&(l+=e.slice(d,h)),l+="%",d=h+2,h++,u--;break}++u}++h}return d===-1?e:(d<f&&(l+=e.slice(d)),l)}const uE=mq;var Ko=Vr;const Pl=Cq().console||{},wq={mapHttpRequest:Ku,mapHttpResponse:Ku,wrapRequestSerializer:jp,wrapResponseSerializer:jp,wrapErrorSerializer:jp,req:Ku,res:Ku,err:Sq};function vq(e,t){return Array.isArray(e)?e.filter(function(r){return r!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function Vr(e){e=e||{},e.browser=e.browser||{};const t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const n=e.browser.write||Pl;e.browser.write&&(e.browser.asObject=!0);const r=e.serializers||{},i=vq(e.browser.serialize,r);let s=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),e.enabled===!1&&(e.level="silent");const a=e.level||"info",c=Object.create(n);c.log||(c.log=Nl),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:f});const l={transmit:t,serialize:i,asObject:e.browser.asObject,levels:o,timestamp:xq(e)};c.levels=Vr.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Nl,c.serializers=r,c._serialize=i,c._stdErrSerialize=s,c.child=h,t&&(c._logEvent=jm());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function f(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,$o(l,c,"error","log"),$o(l,c,"fatal","error"),$o(l,c,"warn","error"),$o(l,c,"info","log"),$o(l,c,"debug","log"),$o(l,c,"trace","log")}function h(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},i&&p.serializers&&(g.serializers=p.serializers);const v=g.serializers;if(i&&v){var m=Object.assign({},r,v),w=e.browser.serialize===!0?Object.keys(m):i;delete p.serializers,bh([p],w,m,this._stdErrSerialize)}function E(A){this._childLevel=(A._childLevel|0)+1,this.error=Oo(A,p,"error"),this.fatal=Oo(A,p,"fatal"),this.warn=Oo(A,p,"warn"),this.info=Oo(A,p,"info"),this.debug=Oo(A,p,"debug"),this.trace=Oo(A,p,"trace"),m&&(this.serializers=m,this._serialize=w),t&&(this._logEvent=jm([].concat(A._logEvent.bindings,p)))}return E.prototype=this,new E(this)}return c}Vr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Vr.stdSerializers=wq;Vr.stdTimeFunctions=Object.assign({},{nullTime:kC,epochTime:RC,unixTime:Iq,isoTime:Aq});function $o(e,t,n,r){const i=Object.getPrototypeOf(t);t[n]=t.levelVal>t.levels.values[n]?Nl:i[n]?i[n]:Pl[n]||Pl[r]||Nl,bq(e,t,n)}function bq(e,t,n){!e.transmit&&t[n]===Nl||(t[n]=function(r){return function(){const s=e.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Pl?Pl:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(e.serialize&&!e.asObject&&bh(o,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?r.call(a,Eq(this,n,o,s)):r.apply(a,o),e.transmit){const l=e.transmit.level||t.level,u=Vr.levels.values[l],d=Vr.levels.values[n];if(d<u)return;_q(this,{ts:s,methodLevel:n,methodValue:d,transmitValue:Vr.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},o)}}}(t[n]))}function Eq(e,t,n,r){e._serialize&&bh(n,e._serialize,e.serializers,e._stdErrSerialize);const i=n.slice();let s=i[0];const o={};r&&(o.time=r),o.level=Vr.levels.values[t];let a=(e._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof i[0]=="object";)Object.assign(o,i.shift());s=i.length?uE(i.shift(),i):void 0}else typeof s=="string"&&(s=uE(i.shift(),i));return s!==void 0&&(o.msg=s),o}function bh(e,t,n,r){for(const i in e)if(r&&e[i]instanceof Error)e[i]=Vr.stdSerializers.err(e[i]);else if(typeof e[i]=="object"&&!Array.isArray(e[i]))for(const s in e[i])t&&t.indexOf(s)>-1&&s in n&&(e[i][s]=n[s](e[i][s]))}function Oo(e,t,n){return function(){const r=new Array(1+arguments.length);r[0]=t;for(var i=1;i<r.length;i++)r[i]=arguments[i-1];return e[n].apply(this,r)}}function _q(e,t,n){const r=t.send,i=t.ts,s=t.methodLevel,o=t.methodValue,a=t.val,c=e._logEvent.bindings;bh(n,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),e._logEvent.level.label=s,e._logEvent.level.value=o,r(s,e._logEvent,a),e._logEvent=jm(c)}function jm(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function Sq(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const n in e)t[n]===void 0&&(t[n]=e[n]);return t}function xq(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?kC:RC}function Ku(){return{}}function jp(e){return e}function Nl(){}function kC(){return!1}function RC(){return Date.now()}function Iq(){return Math.round(Date.now()/1e3)}function Aq(){return new Date(Date.now()).toISOString()}function Cq(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}const iu=Ul(Ko),Tq={level:"info"},su="custom_context",sw=1e3*1024;let kq=class{constructor(t){this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},dE=class{constructor(t){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const n=new kq(t);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let n=this.head;for(;n!==null;)t.push(n.value),n=n.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const n=t.value;return t=t.next,{done:!1,value:n}}}}},$C=class{constructor(t,n=sw){this.level=t??"error",this.levelValue=Ko.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new dE(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,n){n===Ko.levels.values.error?console.error(t):n===Ko.levels.values.warn?console.warn(t):n===Ko.levels.values.debug?console.debug(t):n===Ko.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(_i({timestamp:new Date().toISOString(),log:t}));const n=typeof t=="string"?JSON.parse(t).level:t.level;n>=this.levelValue&&this.forwardToConsole(t,n)}getLogs(){return this.logs}clearLogs(){this.logs=new dE(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const n=this.getLogArray();return n.push(_i({extraMetadata:t})),new Blob(n,{type:"application/json"})}},Rq=class{constructor(t,n=sw){this.baseChunkLogger=new $C(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const n=URL.createObjectURL(this.logsToBlob(t)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},$q=class{constructor(t,n=sw){this.baseChunkLogger=new $C(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}};var Oq=Object.defineProperty,Pq=Object.defineProperties,Nq=Object.getOwnPropertyDescriptors,fE=Object.getOwnPropertySymbols,Dq=Object.prototype.hasOwnProperty,Uq=Object.prototype.propertyIsEnumerable,hE=(e,t,n)=>t in e?Oq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sf=(e,t)=>{for(var n in t||(t={}))Dq.call(t,n)&&hE(e,n,t[n]);if(fE)for(var n of fE(t))Uq.call(t,n)&&hE(e,n,t[n]);return e},xf=(e,t)=>Pq(e,Nq(t));function Eh(e){return xf(Sf({},e),{level:(e==null?void 0:e.level)||Tq.level})}function Bq(e,t=su){return e[t]||""}function Lq(e,t,n=su){return e[n]=t,e}function xn(e,t=su){let n="";return typeof e.bindings>"u"?n=Bq(e,t):n=e.bindings().context||"",n}function Fq(e,t,n=su){const r=xn(e,n);return r.trim()?`${r}/${t}`:t}function sn(e,t,n=su){const r=Fq(e,t,n),i=e.child({context:r});return Lq(i,r,n)}function jq(e){var t,n;const r=new Rq((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:iu(xf(Sf({},e.opts),{level:"trace",browser:xf(Sf({},(n=e.opts)==null?void 0:n.browser),{write:i=>r.write(i)})})),chunkLoggerController:r}}function Mq(e){var t;const n=new $q((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:iu(xf(Sf({},e.opts),{level:"trace"}),n),chunkLoggerController:n}}function zq(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?jq(e):Mq(e)}var Hq=Object.defineProperty,qq=(e,t,n)=>t in e?Hq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pE=(e,t,n)=>qq(e,typeof t!="symbol"?t+"":t,n);let Vq=class extends go{constructor(t){super(),this.opts=t,pE(this,"protocol","wc"),pE(this,"version",2)}};var Gq=Object.defineProperty,Wq=(e,t,n)=>t in e?Gq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kq=(e,t,n)=>Wq(e,t+"",n);let Qq=class extends go{constructor(t,n){super(),this.core=t,this.logger=n,Kq(this,"records",new Map)}},Yq=class{constructor(t,n){this.logger=t,this.core=n}};class Xq extends go{constructor(t,n){super(),this.relayer=t,this.logger=n}}let Jq=class extends go{constructor(t){super()}},Zq=class{constructor(t,n,r,i){this.core=t,this.logger=n,this.name=r}},eV=class extends go{constructor(t,n){super(),this.relayer=t,this.logger=n}},tV=class extends go{constructor(t,n){super(),this.core=t,this.logger=n}},nV=class{constructor(t,n,r){this.core=t,this.logger=n,this.store=r}},rV=class{constructor(t,n){this.projectId=t,this.logger=n}},iV=class{constructor(t,n,r){this.core=t,this.logger=n,this.telemetryEnabled=r}};var sV=Object.defineProperty,oV=(e,t,n)=>t in e?sV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gE=(e,t,n)=>oV(e,typeof t!="symbol"?t+"":t,n);class aV{constructor(t){this.opts=t,gE(this,"protocol","wc"),gE(this,"version",2)}}let cV=class{constructor(t){this.client=t}};const lV="PARSE_ERROR",uV="INVALID_REQUEST",dV="METHOD_NOT_FOUND",fV="INVALID_PARAMS",OC="INTERNAL_ERROR",ow="SERVER_ERROR",hV=[-32700,-32600,-32601,-32602,-32603],Zc={[lV]:{code:-32700,message:"Parse error"},[uV]:{code:-32600,message:"Invalid Request"},[dV]:{code:-32601,message:"Method not found"},[fV]:{code:-32602,message:"Invalid params"},[OC]:{code:-32603,message:"Internal error"},[ow]:{code:-32e3,message:"Server error"}},PC=ow;function pV(e){return hV.includes(e)}function mE(e){return Object.keys(Zc).includes(e)?Zc[e]:Zc[PC]}function gV(e){const t=Object.values(Zc).find(n=>n.code===e);return t||Zc[PC]}function NC(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${t}`):e}var DC={},ti={},yE;function mV(){if(yE)return ti;yE=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.isBrowserCryptoAvailable=ti.getSubtleCrypto=ti.getBrowerCrypto=void 0;function e(){return(Xt==null?void 0:Xt.crypto)||(Xt==null?void 0:Xt.msCrypto)||{}}ti.getBrowerCrypto=e;function t(){const r=e();return r.subtle||r.webkitSubtle}ti.getSubtleCrypto=t;function n(){return!!e()&&!!t()}return ti.isBrowserCryptoAvailable=n,ti}var ni={},wE;function yV(){if(wE)return ni;wE=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.isBrowser=ni.isNode=ni.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ni.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ni.isNode=t;function n(){return!e()&&!t()}return ni.isBrowser=n,ni}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Ql;t.__exportStar(mV(),e),t.__exportStar(yV(),e)})(DC);function Pr(e=3){const t=Date.now()*Math.pow(10,e),n=Math.floor(Math.random()*Math.pow(10,e));return t+n}function zs(e=6){return BigInt(Pr(e))}function Ji(e,t,n){return{id:n||Pr(),jsonrpc:"2.0",method:e,params:t}}function _h(e,t){return{id:e,jsonrpc:"2.0",result:t}}function Sh(e,t,n){return{id:e,jsonrpc:"2.0",error:wV(t)}}function wV(e,t){return typeof e>"u"?mE(OC):(typeof e=="string"&&(e=Object.assign(Object.assign({},mE(ow)),{message:e})),pV(e.code)&&(e=gV(e.code)),e)}class vV{}class bV extends vV{constructor(){super()}}class EV extends bV{constructor(t){super()}}const _V="^https?:",SV="^wss?:";function xV(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function UC(e,t){const n=xV(e);return typeof n>"u"?!1:new RegExp(t).test(n)}function vE(e){return UC(e,_V)}function bE(e){return UC(e,SV)}function IV(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function BC(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function aw(e){return BC(e)&&"method"in e}function xh(e){return BC(e)&&(Nr(e)||Gn(e))}function Nr(e){return"result"in e}function Gn(e){return"error"in e}let rr=class extends EV{constructor(t){super(t),this.events=new En.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async request(t,n){return this.requestStrict(Ji(t.method,t.params||[],t.id||zs().toString()),n)}async requestStrict(t,n){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${t.id}`,s=>{Gn(s)?i(s.error):r(s.result)});try{await this.connection.send(t,n)}catch(s){i(s)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),xh(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const AV=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),CV=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",EE=e=>e.split("?")[0],_E=10,TV=AV();let kV=class{constructor(t){if(this.url=t,this.events=new En.EventEmitter,this.registering=!1,!bE(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(_i(t))}catch(n){this.onError(t.id,n)}}register(t=this.url){if(!bE(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=t,this.registering=!0,new Promise((n,r)=>{const i=DC.isReactNative()?void 0:{rejectUnauthorized:!IV(t)},s=new TV(t,[],i);CV()?s.onerror=o=>{const a=o;r(this.emitError(a.error))}:s.on("error",o=>{r(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),n(s)}})}onOpen(t){t.onmessage=n=>this.onPayload(n),t.onclose=n=>this.onClose(n),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const n=typeof t.data=="string"?ro(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n),i=r.message||r.toString(),s=Sh(t,i);this.events.emit("payload",s)}parseError(t,n=this.url){return NC(t,EE(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>_E&&this.events.setMaxListeners(_E)}emitError(t){const n=this.parseError(new Error((t==null?void 0:t.message)||`WebSocket connection failed for host: ${EE(this.url)}`));return this.events.emit("register_error",n),n}};var RV={};const LC="wc",FC=2,Mm="core",Qr=`${LC}@2:${Mm}:`,$V={logger:"error"},OV={database:":memory:"},PV="crypto",SE="client_ed25519_seed",NV=Z.ONE_DAY,DV="keychain",UV="0.3",BV="messages",LV="0.3",xE=Z.SIX_HOURS,FV="publisher",jC="irn",jV="error",MC="wss://relay.walletconnect.org",MV="relayer",Et={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},zV="_subscription",zn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},HV=.1,zm="2.21.4",Fe={link_mode:"link_mode",relay:"relay"},$d={inbound:"inbound",outbound:"outbound"},qV="0.3",VV="WALLETCONNECT_CLIENT_ID",IE="WALLETCONNECT_LINK_MODE_APPS",Tn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},GV="subscription",WV="0.3",KV="pairing",QV="0.3",Ec={wc_pairingDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:0},res:{ttl:Z.ONE_DAY,prompt:!1,tag:0}}},Ps={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},lr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},YV="history",XV="0.3",JV="expirer",qn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},ZV="0.3",eG="verify-api",tG="https://verify.walletconnect.com",zC="https://verify.walletconnect.org",el=zC,nG=`${el}/v3`,rG=[tG,zC],iG="echo",sG="https://echo.walletconnect.com",$r={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},ii={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ur={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},_s={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Ss={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},_c={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},oG=.1,aG="event-client",cG=86400,lG="https://pulse.walletconnect.org/batch";function uG(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,v=0,m=0,w=p.length;m!==w&&p[m]===0;)m++,g++;for(var E=(w-m)*u+1>>>0,A=new Uint8Array(E);m!==w;){for(var T=p[m],D=0,j=E-1;(T!==0||D<v)&&j!==-1;j--,D++)T+=256*A[j]>>>0,A[j]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");v=D,m++}for(var L=E-v;L!==E&&A[L]===0;)L++;for(var C=c.repeat(g);L<E;++L)C+=e.charAt(A[L]);return C}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var v=0,m=0;p[g]===c;)v++,g++;for(var w=(p.length-g)*l+1>>>0,E=new Uint8Array(w);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var T=0,D=w-1;(A!==0||T<m)&&D!==-1;D--,T++)A+=a*E[D]>>>0,E[D]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=T,g++}if(p[g]!==" "){for(var j=w-m;j!==w&&E[j]===0;)j++;for(var L=new Uint8Array(v+(w-j)),C=v;j!==w;)L[C++]=E[j++];return L}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var dG=uG,fG=dG;const HC=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},hG=e=>new TextEncoder().encode(e),pG=e=>new TextDecoder().decode(e);class gG{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class mG{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return qC(this,t)}}class yG{constructor(t){this.decoders=t}or(t){return qC(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const qC=(e,t)=>new yG({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class wG{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new gG(t,n,r),this.decoder=new mG(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Ih=({name:e,prefix:t,encode:n,decode:r})=>new wG(e,t,n,r),ou=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=fG(n,t);return Ih({prefix:e,name:t,encode:r,decode:s=>HC(i(s))})},vG=(e,t,n,r)=>{const i={};for(let u=0;u<t.length;++u)i[t[u]]=u;let s=e.length;for(;e[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[e[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},bG=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>n;)o-=n,s+=t[i&a>>o];if(o&&(s+=t[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},Dt=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Ih({prefix:t,name:e,encode(i){return bG(i,r,n)},decode(i){return vG(i,r,n,e)}}),EG=Ih({prefix:"\0",name:"identity",encode:e=>pG(e),decode:e=>hG(e)});var _G=Object.freeze({__proto__:null,identity:EG});const SG=Dt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var xG=Object.freeze({__proto__:null,base2:SG});const IG=Dt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var AG=Object.freeze({__proto__:null,base8:IG});const CG=ou({prefix:"9",name:"base10",alphabet:"0123456789"});var TG=Object.freeze({__proto__:null,base10:CG});const kG=Dt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),RG=Dt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var $G=Object.freeze({__proto__:null,base16:kG,base16upper:RG});const OG=Dt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),PG=Dt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),NG=Dt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),DG=Dt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),UG=Dt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),BG=Dt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),LG=Dt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),FG=Dt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),jG=Dt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var MG=Object.freeze({__proto__:null,base32:OG,base32upper:PG,base32pad:NG,base32padupper:DG,base32hex:UG,base32hexupper:BG,base32hexpad:LG,base32hexpadupper:FG,base32z:jG});const zG=ou({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),HG=ou({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var qG=Object.freeze({__proto__:null,base36:zG,base36upper:HG});const VG=ou({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),GG=ou({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var WG=Object.freeze({__proto__:null,base58btc:VG,base58flickr:GG});const KG=Dt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),QG=Dt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),YG=Dt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),XG=Dt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var JG=Object.freeze({__proto__:null,base64:KG,base64pad:QG,base64url:YG,base64urlpad:XG});const VC=Array.from(""),ZG=VC.reduce((e,t,n)=>(e[n]=t,e),[]),eW=VC.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function tW(e){return e.reduce((t,n)=>(t+=ZG[n],t),"")}function nW(e){const t=[];for(const n of e){const r=eW[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const rW=Ih({prefix:"",name:"base256emoji",encode:tW,decode:nW});var iW=Object.freeze({__proto__:null,base256emoji:rW}),sW=GC,AE=128,oW=-128,aW=Math.pow(2,31);function GC(e,t,n){t=t||[],n=n||0;for(var r=n;e>=aW;)t[n++]=e&255|AE,e/=128;for(;e&oW;)t[n++]=e&255|AE,e>>>=7;return t[n]=e|0,GC.bytes=n-r+1,t}var cW=Hm,lW=128,CE=127;function Hm(e,r){var n=0,r=r||0,i=0,s=r,o,a=e.length;do{if(s>=a)throw Hm.bytes=0,new RangeError("Could not decode varint");o=e[s++],n+=i<28?(o&CE)<<i:(o&CE)*Math.pow(2,i),i+=7}while(o>=lW);return Hm.bytes=s-r,n}var uW=Math.pow(2,7),dW=Math.pow(2,14),fW=Math.pow(2,21),hW=Math.pow(2,28),pW=Math.pow(2,35),gW=Math.pow(2,42),mW=Math.pow(2,49),yW=Math.pow(2,56),wW=Math.pow(2,63),vW=function(e){return e<uW?1:e<dW?2:e<fW?3:e<hW?4:e<pW?5:e<gW?6:e<mW?7:e<yW?8:e<wW?9:10},bW={encode:sW,decode:cW,encodingLength:vW},WC=bW;const TE=(e,t,n=0)=>(WC.encode(e,t,n),t),kE=e=>WC.encodingLength(e),qm=(e,t)=>{const n=t.byteLength,r=kE(e),i=r+kE(n),s=new Uint8Array(i+n);return TE(e,s,0),TE(n,s,r),s.set(t,i),new EW(e,n,t,s)};class EW{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const KC=({name:e,code:t,encode:n})=>new _W(e,t,n);class _W{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?qm(this.code,n):n.then(r=>qm(this.code,r))}else throw Error("Unknown type, must be binary type")}}const QC=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),SW=KC({name:"sha2-256",code:18,encode:QC("SHA-256")}),xW=KC({name:"sha2-512",code:19,encode:QC("SHA-512")});var IW=Object.freeze({__proto__:null,sha256:SW,sha512:xW});const YC=0,AW="identity",XC=HC,CW=e=>qm(YC,XC(e)),TW={code:YC,name:AW,encode:XC,digest:CW};var kW=Object.freeze({__proto__:null,identity:TW});new TextEncoder,new TextDecoder;const RE={..._G,...xG,...AG,...TG,...$G,...MG,...qG,...WG,...JG,...iW};({...IW,...kW});function JC(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function RW(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?JC(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function ZC(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const $E=ZC("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Mp=ZC("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=RW(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),$W={utf8:$E,"utf-8":$E,hex:RE.base16,latin1:Mp,ascii:Mp,binary:Mp,...RE};function OW(e,t="utf8"){const n=$W[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?JC(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}var PW=Object.defineProperty,NW=(e,t,n)=>t in e?PW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tr=(e,t,n)=>NW(e,typeof t!="symbol"?t+"":t,n);class DW{constructor(t,n){this.core=t,this.logger=n,Tr(this,"keychain",new Map),Tr(this,"name",DV),Tr(this,"version",UV),Tr(this,"initialized",!1),Tr(this,"storagePrefix",Qr),Tr(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Tr(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Tr(this,"set",async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()}),Tr(this,"get",r=>{this.isInitialized();const i=this.keychain.get(r);if(typeof i>"u"){const{message:s}=J("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(s)}return i}),Tr(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=t,this.logger=sn(n,this.name)}get context(){return xn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,xm(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Im(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var UW=Object.defineProperty,BW=(e,t,n)=>t in e?UW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,At=(e,t,n)=>BW(e,typeof t!="symbol"?t+"":t,n);class LW{constructor(t,n,r){this.core=t,this.logger=n,At(this,"name",PV),At(this,"keychain"),At(this,"randomSessionIdentifier",Dm()),At(this,"initialized",!1),At(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),At(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),At(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=nb(i);return eA(s.publicKey)}),At(this,"generateKeyPair",()=>{this.isInitialized();const i=gz();return this.setPrivateKey(i.publicKey,i.privateKey)}),At(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=nb(s),a=this.randomSessionIdentifier;return await tj(a,i,NV,o)}),At(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=mz(a,s);return this.setSymKey(c,o)}),At(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||Ad(i);return await this.keychain.set(o,i),o}),At(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),At(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),At(this,"encode",async(i,s,o)=>{this.isInitialized();const a=hC(o),c=_i(s);if(zb(a))return vz(c,o==null?void 0:o.encoding);if(Mb(a)){const f=a.senderPublicKey,h=a.receiverPublicKey;i=await this.generateSharedKey(f,h)}const l=this.getSymKey(i),{type:u,senderPublicKey:d}=a;return yz({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),At(this,"decode",async(i,s,o)=>{this.isInitialized();const a=Ez(s,o);if(zb(a)){const c=bz(s,o==null?void 0:o.encoding);return ro(c)}if(Mb(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=wz({symKey:c,encoded:s,encoding:o==null?void 0:o.encoding});return ro(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),At(this,"getPayloadType",(i,s=yr)=>{const o=$l({encoded:i,encoding:s});return so(o.type)}),At(this,"getPayloadSenderPublicKey",(i,s=yr)=>{const o=$l({encoded:i,encoding:s});return o.senderPublicKey?bn(o.senderPublicKey,tn):void 0}),this.core=t,this.logger=sn(n,this.name),this.keychain=r||new DW(this.core,this.logger)}get context(){return xn(this.logger)}async setPrivateKey(t,n){return await this.keychain.set(t,n),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(SE)}catch{t=Dm(),await this.keychain.set(SE,t)}return OW(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var FW=Object.defineProperty,jW=Object.defineProperties,MW=Object.getOwnPropertyDescriptors,OE=Object.getOwnPropertySymbols,zW=Object.prototype.hasOwnProperty,HW=Object.prototype.propertyIsEnumerable,Vm=(e,t,n)=>t in e?FW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qW=(e,t)=>{for(var n in t||(t={}))zW.call(t,n)&&Vm(e,n,t[n]);if(OE)for(var n of OE(t))HW.call(t,n)&&Vm(e,n,t[n]);return e},VW=(e,t)=>jW(e,MW(t)),An=(e,t,n)=>Vm(e,typeof t!="symbol"?t+"":t,n);class GW extends Yq{constructor(t,n){super(t,n),this.logger=t,this.core=n,An(this,"messages",new Map),An(this,"messagesWithoutClientAck",new Map),An(this,"name",BV),An(this,"version",LV),An(this,"initialized",!1),An(this,"storagePrefix",Qr),An(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),An(this,"set",async(r,i,s)=>{this.isInitialized();const o=Ur(i);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(r,a),s===$d.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,VW(qW({},c),{[o]:i}))}return await this.persist(),o}),An(this,"get",r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i}),An(this,"getWithoutAck",r=>{this.isInitialized();const i={};for(const s of r){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),An(this,"has",(r,i)=>{this.isInitialized();const s=this.get(r),o=Ur(i);return typeof s[o]<"u"}),An(this,"ack",async(r,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(r);if(typeof s>"u")return;const o=Ur(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,s),await this.persist()}),An(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=sn(t,this.name),this.core=n}get context(){return xn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,xm(t))}async setRelayerMessagesWithoutClientAck(t){await this.core.storage.setItem(this.storageKeyWithoutClientAck,xm(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Im(t):void 0}async getRelayerMessagesWithoutClientAck(){const t=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof t<"u"?Im(t):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var WW=Object.defineProperty,KW=Object.defineProperties,QW=Object.getOwnPropertyDescriptors,PE=Object.getOwnPropertySymbols,YW=Object.prototype.hasOwnProperty,XW=Object.prototype.propertyIsEnumerable,Gm=(e,t,n)=>t in e?WW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qu=(e,t)=>{for(var n in t||(t={}))YW.call(t,n)&&Gm(e,n,t[n]);if(PE)for(var n of PE(t))XW.call(t,n)&&Gm(e,n,t[n]);return e},zp=(e,t)=>KW(e,QW(t)),dr=(e,t,n)=>Gm(e,typeof t!="symbol"?t+"":t,n);class JW extends Xq{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,dr(this,"events",new En.EventEmitter),dr(this,"name",FV),dr(this,"queue",new Map),dr(this,"publishTimeout",Z.toMiliseconds(Z.ONE_MINUTE)),dr(this,"initialPublishTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),dr(this,"needsTransportRestart",!1),dr(this,"publish",async(r,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:s}});const a=(s==null?void 0:s.ttl)||xE,c=bf(s),l=(s==null?void 0:s.prompt)||!1,u=(s==null?void 0:s.tag)||0,d=(s==null?void 0:s.id)||zs().toString(),f={topic:r,message:i,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}},h=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const v=({id:w})=>{f.opts.id===w&&(this.removeRequestFromQueue(w),this.relayer.events.removeListener(Et.publish,v),g(f))};this.relayer.events.on(Et.publish,v);const m=Xi(new Promise((w,E)=>{this.rpcPublish({topic:r,message:i,ttl:a,prompt:l,tag:u,id:d,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}).then(w).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),E(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await m,this.events.removeListener(Et.publish,v)}catch(w){this.queue.set(d,zp(Qu({},f),{attempt:1})),this.logger.warn(w,w==null?void 0:w.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:i,opts:s}}),await Xi(p,this.publishTimeout,h)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),dr(this,"on",(r,i)=>{this.events.on(r,i)}),dr(this,"once",(r,i)=>{this.events.once(r,i)}),dr(this,"off",(r,i)=>{this.events.off(r,i)}),dr(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.relayer=t,this.logger=sn(n,this.name),this.registerEventListeners()}get context(){return xn(this.logger)}async rpcPublish(t){var n,r,i,s;const{topic:o,message:a,ttl:c=xE,prompt:l,tag:u,id:d,attestation:f,tvf:h}=t,p={method:Nc(bf().protocol).publish,params:Qu({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:f},h),id:d};Rt((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Rt((i=p.params)==null?void 0:i.tag)&&((s=p.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(Et.publish,t),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async(t,n)=>{const r=t.attempt+1;this.queue.set(n,zp(Qu({},t),{attempt:r}));const{topic:i,message:s,opts:o,attestation:a}=t;this.logger.warn({},`Publisher: queue->publishing: ${t.opts.id}, tag: ${t.opts.tag}, attempt: ${r}`),await this.rpcPublish(zp(Qu({},t),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${t.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(mo.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Et.connection_stalled);return}this.checkQueue()}),this.relayer.on(Et.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}var ZW=Object.defineProperty,eK=(e,t,n)=>t in e?ZW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Po=(e,t,n)=>eK(e,typeof t!="symbol"?t+"":t,n);class tK{constructor(){Po(this,"map",new Map),Po(this,"set",(t,n)=>{const r=this.get(t);this.exists(t,n)||this.map.set(t,[...r,n])}),Po(this,"get",t=>this.map.get(t)||[]),Po(this,"exists",(t,n)=>this.get(t).includes(n)),Po(this,"delete",(t,n)=>{if(typeof n>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const r=this.get(t);if(!this.exists(t,n))return;const i=r.filter(s=>s!==n);if(!i.length){this.map.delete(t);return}this.map.set(t,i)}),Po(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var nK=Object.defineProperty,rK=Object.defineProperties,iK=Object.getOwnPropertyDescriptors,NE=Object.getOwnPropertySymbols,sK=Object.prototype.hasOwnProperty,oK=Object.prototype.propertyIsEnumerable,Wm=(e,t,n)=>t in e?nK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sc=(e,t)=>{for(var n in t||(t={}))sK.call(t,n)&&Wm(e,n,t[n]);if(NE)for(var n of NE(t))oK.call(t,n)&&Wm(e,n,t[n]);return e},Hp=(e,t)=>rK(e,iK(t)),ke=(e,t,n)=>Wm(e,typeof t!="symbol"?t+"":t,n);class aK extends eV{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,ke(this,"subscriptions",new Map),ke(this,"topicMap",new tK),ke(this,"events",new En.EventEmitter),ke(this,"name",GV),ke(this,"version",WV),ke(this,"pending",new Map),ke(this,"cached",[]),ke(this,"initialized",!1),ke(this,"storagePrefix",Qr),ke(this,"subscribeTimeout",Z.toMiliseconds(Z.ONE_MINUTE)),ke(this,"initialSubscribeTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),ke(this,"clientId"),ke(this,"batchSubscribeTopicsLimit",500),ke(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),ke(this,"subscribe",async(r,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{const s=bf(i),o={topic:r,relay:s,transportType:i==null?void 0:i.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),ke(this,"unsubscribe",async(r,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)}),ke(this,"isSubscribed",r=>new Promise(i=>{i(this.topicMap.topics.includes(r))})),ke(this,"isKnownTopic",r=>new Promise(i=>{i(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(s=>s.topic===r))})),ke(this,"on",(r,i)=>{this.events.on(r,i)}),ke(this,"once",(r,i)=>{this.events.once(r,i)}),ke(this,"off",(r,i)=>{this.events.off(r,i)}),ke(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),ke(this,"start",async()=>{await this.onConnect()}),ke(this,"stop",async()=>{await this.onDisconnect()}),ke(this,"restart",async()=>{await this.restore(),await this.onRestart()}),ke(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}),ke(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(mo.pulse,async()=>{await this.checkPending()}),this.events.on(Tn.created,async r=>{const i=Tn.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(Tn.deleted,async r=>{const i=Tn.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}),this.relayer=t,this.logger=sn(n,this.name),this.clientId=""}get context(){return xn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(t,n){let r=!1;try{r=this.getSubscription(t).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,n){const r=this.topicMap.get(t);await Promise.all(r.map(async i=>await this.unsubscribeById(t,i,n)))}async unsubscribeById(t,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}});try{const i=bf(r);await this.restartToComplete({topic:t,id:n,relay:i}),await this.rpcUnsubscribe(t,n,i);const s=qe("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,n,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(t,n,r){var i;(!r||(r==null?void 0:r.transportType)===Fe.relay)&&await this.restartToComplete({topic:t,id:t,relay:n});const s={method:Nc(n.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(t);if((r==null?void 0:r.transportType)===Fe.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},Z.toMiliseconds(Z.ONE_SECOND)),a;const c=new Promise(async u=>{const d=f=>{f.topic===t&&(this.events.removeListener(Tn.created,d),u(f.id))};this.events.on(Tn.created,d);try{const f=await Xi(new Promise((h,p)=>{this.relayer.request(s).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(h)}),this.initialSubscribeTimeout,`Subscribing to ${t} failed, please try again`);this.events.removeListener(Tn.created,d),u(f)}catch{}}),l=await Xi(c,this.subscribeTimeout,`Subscribing to ${t} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${t} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Et.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(t){if(!t.length)return;const n=t[0].relay,r={method:Nc(n.protocol).batchSubscribe,params:{topics:t.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Xi(new Promise(i=>{this.relayer.request(r).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Et.connection_stalled)}}async rpcBatchFetchMessages(t){if(!t.length)return;const n=t[0].relay,r={method:Nc(n.protocol).batchFetchMessages,params:{topics:t.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let i;try{i=await await Xi(new Promise((s,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Et.connection_stalled)}return i}rpcUnsubscribe(t,n,r){const i={method:Nc(r.protocol).unsubscribe,params:{topic:t,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(t,n){this.setSubscription(t,Hp(Sc({},n),{id:t})),this.pending.delete(n.topic)}onBatchSubscribe(t){t.length&&t.forEach(n=>{this.setSubscription(n.id,Sc({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(t,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,t)&&this.deleteSubscription(n,r),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:n}),this.addSubscription(t,n)}addSubscription(t,n){this.subscriptions.set(t,Sc({},n)),this.topicMap.set(n.topic,t),this.events.emit(Tn.created,n)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const n=this.subscriptions.get(t);if(!n){const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return n}deleteSubscription(t,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:n});const r=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(r.topic,t),this.events.emit(Tn.deleted,Hp(Sc({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Tn.sync)}async onRestart(){if(this.cached.length){const t=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const i=t.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Tn.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){t.length&&(await this.rpcBatchSubscribe(t),this.onBatchSubscribe(await Promise.all(t.map(async n=>Hp(Sc({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(t){if(!t.length)return;this.logger.trace(`Fetching batch messages for ${t.length} subscriptions`);const n=await this.rpcBatchFetchMessages(t);n&&n.messages&&(await BM(Z.toMiliseconds(Z.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(t){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(t),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(t){return Ur(t+await this.getClientId())}}var cK=Object.defineProperty,DE=Object.getOwnPropertySymbols,lK=Object.prototype.hasOwnProperty,uK=Object.prototype.propertyIsEnumerable,Km=(e,t,n)=>t in e?cK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,UE=(e,t)=>{for(var n in t||(t={}))lK.call(t,n)&&Km(e,n,t[n]);if(DE)for(var n of DE(t))uK.call(t,n)&&Km(e,n,t[n]);return e},be=(e,t,n)=>Km(e,typeof t!="symbol"?t+"":t,n);class dK extends Jq{constructor(t){super(t),be(this,"protocol","wc"),be(this,"version",2),be(this,"core"),be(this,"logger"),be(this,"events",new En.EventEmitter),be(this,"provider"),be(this,"messages"),be(this,"subscriber"),be(this,"publisher"),be(this,"name",MV),be(this,"transportExplicitlyClosed",!1),be(this,"initialized",!1),be(this,"connectionAttemptInProgress",!1),be(this,"relayUrl"),be(this,"projectId"),be(this,"packageName"),be(this,"bundleId"),be(this,"hasExperiencedNetworkDisruption",!1),be(this,"pingTimeout"),be(this,"heartBeatTimeout",Z.toMiliseconds(Z.THIRTY_SECONDS+Z.FIVE_SECONDS)),be(this,"reconnectTimeout"),be(this,"connectPromise"),be(this,"reconnectInProgress",!1),be(this,"requestsInFlight",[]),be(this,"connectTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),be(this,"request",async n=>{var r,i;this.logger.debug("Publishing Request Payload");const s=n.id||zs().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${s}:${((i=n.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),be(this,"resetPingTimeout",()=>{mf()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),be(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),be(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Et.connect)}),be(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),be(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Et.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),be(this,"registerProviderListeners",()=>{this.provider.on(zn.payload,this.onPayloadHandler),this.provider.on(zn.connect,this.onConnectHandler),this.provider.on(zn.disconnect,this.onDisconnectHandler),this.provider.on(zn.error,this.onProviderErrorHandler)}),this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?sn(t.logger,this.name):iu(Eh({level:t.logger||jV})),this.messages=new GW(this.logger,t.core),this.subscriber=new aK(this,this.logger),this.publisher=new JW(this,this.logger),this.relayUrl=(t==null?void 0:t.relayUrl)||MC,this.projectId=t.projectId,EM()?this.packageName=lb():_M()&&(this.bundleId=lb()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(t=>this.logger.warn(t,t==null?void 0:t.message))}get context(){return xn(this.logger)}get connected(){var t,n,r;return((r=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var t,n,r;return((r=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(t,n,r){this.isInitialized(),await this.publisher.publish(t,n,r),await this.recordMessageEvent({topic:t,message:n,publishedAt:Date.now(),transportType:Fe.relay},$d.outbound)}async subscribe(t,n){var r,i,s;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(i=n==null?void 0:n.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(t))==null?void 0:s[0])||"",c;const l=u=>{u.topic===t&&(this.subscriber.off(Tn.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Tn.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(t,UE({internal:{throwOnFailedPublish:o}},n)).catch(f=>{o&&d(f)})||a,u()})]),a}async unsubscribe(t,n){this.isInitialized(),await this.subscriber.unsubscribe(t,n)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Xi(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(t){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(t).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(t){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=t||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Zb())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(t){if((t==null?void 0:t.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=t.sort((r,i)=>r.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(t,n){const{topic:r}=t;if(!n.sessionExists){const i=ft(Z.FIVE_MINUTES),s={topic:r,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,s)}this.events.emit(Et.message,t),await this.recordMessageEvent(t,$d.inbound)}async connect(t){await this.confirmOnlineStateOrThrow(),t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to connect"))};this.provider.once(zn.disconnect,s),await Xi(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(zn.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(zn.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(zn.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const i=r;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Z.toMiliseconds(n*1))),n++}}startPingTimeout(){var t,n,r,i,s;if(mf())try{(n=(t=this.provider)==null?void 0:t.connection)!=null&&n.socket&&((s=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new rr(new kV(CM({sdkVersion:zm,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(t,n){const{topic:r,message:i}=t;await this.messages.set(r,i,n)}async shouldIgnoreMessageEvent(t){const{topic:n,message:r}=t;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const i=this.messages.has(n,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),aw(t)){if(!t.method.endsWith(zV))return;const n=t.params,{topic:r,message:i,publishedAt:s,attestation:o}=n.data,a={topic:r,message:i,publishedAt:s,transportType:Fe.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(UE({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(t),await this.onMessageEvent(a)}else xh(t)&&this.events.emit(Et.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(await this.recordMessageEvent(t,$d.inbound),this.events.emit(Et.message,t))}async acknowledgePayload(t){const n=_h(t.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(zn.payload,this.onPayloadHandler),this.provider.off(zn.connect,this.onConnectHandler),this.provider.off(zn.disconnect,this.onDisconnectHandler),this.provider.off(zn.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let t=await Zb();pH(async n=>{t!==n&&(t=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(mo.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&yH())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Et.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(t=>this.logger.error(t,t==null?void 0:t.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Z.toMiliseconds(HV)))))}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function fK(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function BE(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function LE(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const hK="[object RegExp]",pK="[object String]",gK="[object Number]",mK="[object Boolean]",FE="[object Arguments]",yK="[object Symbol]",wK="[object Date]",vK="[object Map]",bK="[object Set]",EK="[object Array]",_K="[object Function]",SK="[object ArrayBuffer]",qp="[object Object]",xK="[object Error]",IK="[object DataView]",AK="[object Uint8Array]",CK="[object Uint8ClampedArray]",TK="[object Uint16Array]",kK="[object Uint32Array]",RK="[object BigUint64Array]",$K="[object Int8Array]",OK="[object Int16Array]",PK="[object Int32Array]",NK="[object BigInt64Array]",DK="[object Float32Array]",UK="[object Float64Array]";function BK(){}function jE(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype||Object.getPrototypeOf(t)===null?Object.prototype.toString.call(e)==="[object Object]":!1}function LK(e,t,n){return Dc(e,t,void 0,void 0,void 0,void 0,n)}function Dc(e,t,n,r,i,s,o){const a=o(e,t,n,r,i,s);if(a!==void 0)return a;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return e===t;case"number":return e===t||Object.is(e,t);case"function":return e===t;case"object":return tl(e,t,s,o)}return tl(e,t,s,o)}function tl(e,t,n,r){if(Object.is(e,t))return!0;let i=LE(e),s=LE(t);if(i===FE&&(i=qp),s===FE&&(s=qp),i!==s)return!1;switch(i){case pK:return e.toString()===t.toString();case gK:{const c=e.valueOf(),l=t.valueOf();return fK(c,l)}case mK:case wK:case yK:return Object.is(e.valueOf(),t.valueOf());case hK:return e.source===t.source&&e.flags===t.flags;case _K:return e===t}n=n??new Map;const o=n.get(e),a=n.get(t);if(o!=null&&a!=null)return o===t;n.set(e,t),n.set(t,e);try{switch(i){case vK:{if(e.size!==t.size)return!1;for(const[c,l]of e.entries())if(!t.has(c)||!Dc(l,t.get(c),c,e,t,n,r))return!1;return!0}case bK:{if(e.size!==t.size)return!1;const c=Array.from(e.values()),l=Array.from(t.values());for(let u=0;u<c.length;u++){const d=c[u],f=l.findIndex(h=>Dc(d,h,void 0,e,t,n,r));if(f===-1)return!1;l.splice(f,1)}return!0}case EK:case AK:case CK:case TK:case kK:case RK:case $K:case OK:case PK:case NK:case DK:case UK:{if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let c=0;c<e.length;c++)if(!Dc(e[c],t[c],c,e,t,n,r))return!1;return!0}case SK:return e.byteLength!==t.byteLength?!1:tl(new Uint8Array(e),new Uint8Array(t),n,r);case IK:return e.byteLength!==t.byteLength||e.byteOffset!==t.byteOffset?!1:tl(new Uint8Array(e),new Uint8Array(t),n,r);case xK:return e.name===t.name&&e.message===t.message;case qp:{if(!(tl(e.constructor,t.constructor,n,r)||jE(e)&&jE(t)))return!1;const c=[...Object.keys(e),...BE(e)],l=[...Object.keys(t),...BE(t)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],f=e[d];if(!Object.hasOwn(t,d))return!1;const h=t[d];if(!Dc(f,h,d,e,t,n,r))return!1}return!0}default:return!1}}finally{n.delete(e),n.delete(t)}}function FK(e,t){return LK(e,t,BK)}var jK=Object.defineProperty,ME=Object.getOwnPropertySymbols,MK=Object.prototype.hasOwnProperty,zK=Object.prototype.propertyIsEnumerable,Qm=(e,t,n)=>t in e?jK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zE=(e,t)=>{for(var n in t||(t={}))MK.call(t,n)&&Qm(e,n,t[n]);if(ME)for(var n of ME(t))zK.call(t,n)&&Qm(e,n,t[n]);return e},an=(e,t,n)=>Qm(e,typeof t!="symbol"?t+"":t,n);class wo extends Zq{constructor(t,n,r,i=Qr,s=void 0){super(t,n,r,i),this.core=t,this.logger=n,this.name=r,an(this,"map",new Map),an(this,"version",qV),an(this,"cached",[]),an(this,"initialized",!1),an(this,"getKey"),an(this,"storagePrefix",Qr),an(this,"recentlyDeleted",[]),an(this,"recentlyDeletedLimit",200),an(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Rt(o)?this.map.set(this.getKey(o),o):Vz(o)?this.map.set(o.id,o):Gz(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),an(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),an(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),an(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>FK(a[c],o[c]))):this.values)),an(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=zE(zE({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),an(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=sn(n,this.name),this.storagePrefix=i,this.getKey=s}get context(){return xn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const n=this.map.get(t);if(!n){if(this.recentlyDeleted.includes(t)){const{message:i}=J("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${t}`);throw this.logger.error(i),new Error(i)}const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var HK=Object.defineProperty,qK=(e,t,n)=>t in e?HK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ge=(e,t,n)=>qK(e,typeof t!="symbol"?t+"":t,n);class VK{constructor(t,n){this.core=t,this.logger=n,ge(this,"name",KV),ge(this,"version",QV),ge(this,"events",new Gf),ge(this,"pairings"),ge(this,"initialized",!1),ge(this,"storagePrefix",Qr),ge(this,"ignoredPayloadTypes",[pi]),ge(this,"registeredMethods",[]),ge(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),ge(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),ge(this,"create",async r=>{this.isInitialized();const i=Dm(),s=await this.core.crypto.setSymKey(i),o=ft(Z.FIVE_MINUTES),a={protocol:jC},c={topic:s,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=qb({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(Ps.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:r==null?void 0:r.transportType}),{topic:s,uri:l}}),ge(this,"pair",async r=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[$r.pairing_started]}});this.isValidPair(r,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=Hb(r.uri);i.props.properties.topic=s,i.addTrace($r.pairing_uri_validation_success),i.addTrace($r.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace($r.existing_pairing),u.active)throw i.setError(ii.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace($r.pairing_not_expired)}const d=c||ft(Z.FIVE_MINUTES),f={topic:s,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(s,d),await this.pairings.set(s,f),i.addTrace($r.store_new_pairing),r.activatePairing&&await this.activate({topic:s}),this.events.emit(Ps.create,f),i.addTrace($r.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace($r.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(ii.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(h){throw i.setError(ii.subscribe_pairing_topic_failure),h}return i.addTrace($r.subscribe_pairing_topic_success),f}),ge(this,"activate",async({topic:r})=>{this.isInitialized();const i=ft(Z.FIVE_MINUTES);this.core.expirer.set(r,i),await this.pairings.update(r,{active:!0,expiry:i})}),ge(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=r;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Rs();this.events.once(Se("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),ge(this,"updateExpiry",async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})}),ge(this,"updateMetadata",async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})}),ge(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),ge(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",qe("USER_DISCONNECTED")),await this.deletePairing(i))}),ge(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(i);return qb({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),ge(this,"sendRequest",async(r,i,s)=>{const o=Ji(i,s),a=await this.core.crypto.encode(r,o),c=Ec[i].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),ge(this,"sendResult",async(r,i,s)=>{const o=_h(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,l=Ec[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),ge(this,"sendError",async(r,i,s)=>{const o=Sh(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,l=Ec[c]?Ec[c].res:Ec.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),ge(this,"deletePairing",async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,qe("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])}),ge(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(i=>zi(i.expiry));await Promise.all(r.map(i=>this.deletePairing(i.topic)))}),ge(this,"onRelayEventRequest",async r=>{const{topic:i,payload:s}=r;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),ge(this,"onRelayEventResponse",async r=>{const{topic:i,payload:s}=r,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),ge(this,"onPairingPingRequest",async(r,i)=>{const{id:s}=i;try{this.isValidPing({topic:r}),await this.sendResult(s,r,!0),this.events.emit(Ps.ping,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),ge(this,"onPairingPingResponse",(r,i)=>{const{id:s}=i;setTimeout(()=>{Nr(i)?this.events.emit(Se("pairing_ping",s),{}):Gn(i)&&this.events.emit(Se("pairing_ping",s),{error:i.error})},500)}),ge(this,"onPairingDeleteRequest",async(r,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Ps.delete,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),ge(this,"onUnknownRpcMethodRequest",async(r,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=qe("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,r,a),this.logger.error(a)}catch(a){await this.sendError(s,r,a),this.logger.error(a)}}),ge(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(qe("WC_METHOD_UNSUPPORTED",r))}),ge(this,"isValidPair",(r,i)=>{var s;if(!dn(r)){const{message:a}=J("MISSING_OR_INVALID",`pair() params: ${r}`);throw i.setError(ii.malformed_pairing_uri),new Error(a)}if(!qz(r.uri)){const{message:a}=J("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw i.setError(ii.malformed_pairing_uri),new Error(a)}const o=Hb(r==null?void 0:r.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=J("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(ii.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=J("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(ii.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Z.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(ii.pairing_expired);const{message:a}=J("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),ge(this,"isValidPing",async r=>{if(!dn(r)){const{message:s}=J("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),ge(this,"isValidDisconnect",async r=>{if(!dn(r)){const{message:s}=J("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),ge(this,"isValidPairingTopic",async r=>{if(!it(r,!1)){const{message:i}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(i)}if(!this.pairings.keys.includes(r)){const{message:i}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(i)}if(zi(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:i}=J("EXPIRED",`pairing topic: ${r}`);throw new Error(i)}}),this.core=t,this.logger=sn(n,this.name),this.pairings=new wo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return xn(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(Et.message,async t=>{const{topic:n,message:r,transportType:i}=t;if(this.pairings.keys.includes(n)&&i!==Fe.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const s=await this.core.crypto.decode(n,r);aw(s)?(this.core.history.set(n,s),await this.onRelayEventRequest({topic:n,payload:s})):xh(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:n,payload:s}),this.core.history.delete(n,s.id)),await this.core.relayer.messages.ack(n,r)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(qn.expired,async t=>{const{topic:n}=SA(t.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Ps.expire,{topic:n}))})}}var GK=Object.defineProperty,WK=(e,t,n)=>t in e?GK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ct=(e,t,n)=>WK(e,typeof t!="symbol"?t+"":t,n);class KK extends Qq{constructor(t,n){super(t,n),this.core=t,this.logger=n,Ct(this,"records",new Map),Ct(this,"events",new En.EventEmitter),Ct(this,"name",YV),Ct(this,"version",XV),Ct(this,"cached",[]),Ct(this,"initialized",!1),Ct(this,"storagePrefix",Qr),Ct(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ct(this,"set",(r,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:s,expiry:ft(Z.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(lr.created,o)}),Ct(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=Gn(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.persist(),this.events.emit(lr.updated,i))}),Ct(this,"get",async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i))),Ct(this,"delete",(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===r){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(lr.deleted,s)}}),this.persist()}),Ct(this,"exists",async(r,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===r:!1)),Ct(this,"on",(r,i)=>{this.events.on(r,i)}),Ct(this,"once",(r,i)=>{this.events.once(r,i)}),Ct(this,"off",(r,i)=>{this.events.off(r,i)}),Ct(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=sn(n,this.name)}get context(){return xn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Ji(n.request.method,n.request.params,n.id),chainId:n.chainId};return t.push(r)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const n=this.records.get(t);if(!n){const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(lr.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(lr.created,t=>{const n=lr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.events.on(lr.updated,t=>{const n=lr.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.events.on(lr.deleted,t=>{const n=lr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t})}),this.core.heartbeat.on(mo.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let t=!1;this.records.forEach(n=>{Z.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(lr.deleted,n,!1),t=!0)}),t&&this.persist()}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var QK=Object.defineProperty,YK=(e,t,n)=>t in e?QK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ht=(e,t,n)=>YK(e,typeof t!="symbol"?t+"":t,n);class XK extends tV{constructor(t,n){super(t,n),this.core=t,this.logger=n,Ht(this,"expirations",new Map),Ht(this,"events",new En.EventEmitter),Ht(this,"name",JV),Ht(this,"version",ZV),Ht(this,"cached",[]),Ht(this,"initialized",!1),Ht(this,"storagePrefix",Qr),Ht(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ht(this,"has",r=>{try{const i=this.formatTarget(r);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Ht(this,"set",(r,i)=>{this.isInitialized();const s=this.formatTarget(r),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(qn.created,{target:s,expiration:o})}),Ht(this,"get",r=>{this.isInitialized();const i=this.formatTarget(r);return this.getExpiration(i)}),Ht(this,"del",r=>{if(this.isInitialized(),this.has(r)){const i=this.formatTarget(r),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(qn.deleted,{target:i,expiration:s})}}),Ht(this,"on",(r,i)=>{this.events.on(r,i)}),Ht(this,"once",(r,i)=>{this.events.once(r,i)}),Ht(this,"off",(r,i)=>{this.events.off(r,i)}),Ht(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=sn(n,this.name)}get context(){return xn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return TM(t);if(typeof t=="number")return kM(t);const{message:n}=J("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(n)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(qn.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const n=this.expirations.get(t);if(!n){const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(t,n){const{expiry:r}=n;Z.toMiliseconds(r)-Date.now()<=0&&this.expire(t,n)}expire(t,n){this.expirations.delete(t),this.events.emit(qn.expired,{target:t,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,n)=>this.checkExpiry(n,t))}registerEventListeners(){this.core.heartbeat.on(mo.pulse,()=>this.checkExpirations()),this.events.on(qn.created,t=>{const n=qn.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(qn.expired,t=>{const n=qn.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(qn.deleted,t=>{const n=qn.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}}var JK=Object.defineProperty,ZK=(e,t,n)=>t in e?JK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rt=(e,t,n)=>ZK(e,typeof t!="symbol"?t+"":t,n);class eQ extends nV{constructor(t,n,r){super(t,n,r),this.core=t,this.logger=n,this.store=r,rt(this,"name",eG),rt(this,"abortController"),rt(this,"isDevEnv"),rt(this,"verifyUrlV3",nG),rt(this,"storagePrefix",Qr),rt(this,"version",FC),rt(this,"publicKey"),rt(this,"fetchPromise"),rt(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Z.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),rt(this,"register",async i=>{if(!Va()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=to(),u=this.startAbortTimer(Z.ONE_SECOND*5),d=await new Promise((f,h)=>{const p=()=>{window.removeEventListener("message",v),l.body.removeChild(g),h("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const v=m=>{if(m.data&&typeof m.data=="string")try{const w=JSON.parse(m.data);if(w.type==="verify_attestation"){if(_m(w.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",v),f(w.attestation===null?"":w.attestation)}}catch(w){this.logger.warn(w)}};l.body.appendChild(g),window.addEventListener("message",v,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),rt(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(_m(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,c)}),rt(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(Z.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),rt(this,"getVerifyUrl",i=>{let s=i||el;return rG.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${el}`),s=el),s}),rt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(Z.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),rt(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),rt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),rt(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),rt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),rt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),rt(this,"validateAttestation",(i,s)=>{const o=Sz(i,s.publicKey),a={hasExpired:Z.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=sn(n,this.name),this.abortController=new AbortController,this.isDevEnv=M0(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return xn(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Z.toMiliseconds(t))}}var tQ=Object.defineProperty,nQ=(e,t,n)=>t in e?tQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,HE=(e,t,n)=>nQ(e,typeof t!="symbol"?t+"":t,n);class rQ extends rV{constructor(t,n){super(t,n),this.projectId=t,this.logger=n,HE(this,"context",iG),HE(this,"registerDeviceToken",async r=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=r,c=`${sG}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=sn(n,this.context)}}var iQ=Object.defineProperty,qE=Object.getOwnPropertySymbols,sQ=Object.prototype.hasOwnProperty,oQ=Object.prototype.propertyIsEnumerable,Ym=(e,t,n)=>t in e?iQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xc=(e,t)=>{for(var n in t||(t={}))sQ.call(t,n)&&Ym(e,n,t[n]);if(qE)for(var n of qE(t))oQ.call(t,n)&&Ym(e,n,t[n]);return e},yt=(e,t,n)=>Ym(e,typeof t!="symbol"?t+"":t,n);class aQ extends iV{constructor(t,n,r=!0){super(t,n,r),this.core=t,this.logger=n,yt(this,"context",aG),yt(this,"storagePrefix",Qr),yt(this,"storageVersion",oG),yt(this,"events",new Map),yt(this,"shouldPersist",!1),yt(this,"init",async()=>{if(!M0())try{const i={eventId:db(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:EA(this.core.relayer.protocol,this.core.relayer.version,zm)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),yt(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=db(),u=this.core.projectId||"",d=Date.now(),f=xc({eventId:l,timestamp:d,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,f),this.shouldPersist=!0),f}),yt(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return xc(xc({},a),this.setMethods(a.eventId))}),yt(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),yt(this,"setEventListeners",()=>{this.core.heartbeat.on(mo.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{Z.fromMiliseconds(Date.now())-Z.fromMiliseconds(i.timestamp)>cG&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),yt(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),yt(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),yt(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),yt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),yt(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,xc(xc({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),yt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),yt(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${lG}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${zm}${s}`,{method:"POST",body:JSON.stringify(i)})}),yt(this,"getAppDomain",()=>bA().url),this.logger=sn(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var cQ=Object.defineProperty,VE=Object.getOwnPropertySymbols,lQ=Object.prototype.hasOwnProperty,uQ=Object.prototype.propertyIsEnumerable,Xm=(e,t,n)=>t in e?cQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,GE=(e,t)=>{for(var n in t||(t={}))lQ.call(t,n)&&Xm(e,n,t[n]);if(VE)for(var n of VE(t))uQ.call(t,n)&&Xm(e,n,t[n]);return e},Pe=(e,t,n)=>Xm(e,typeof t!="symbol"?t+"":t,n);let dQ=class eT extends Vq{constructor(t){var n;super(t),Pe(this,"protocol",LC),Pe(this,"version",FC),Pe(this,"name",Mm),Pe(this,"relayUrl"),Pe(this,"projectId"),Pe(this,"customStoragePrefix"),Pe(this,"events",new En.EventEmitter),Pe(this,"logger"),Pe(this,"heartbeat"),Pe(this,"relayer"),Pe(this,"crypto"),Pe(this,"storage"),Pe(this,"history"),Pe(this,"expirer"),Pe(this,"pairing"),Pe(this,"verify"),Pe(this,"echoClient"),Pe(this,"linkModeSupportedApps"),Pe(this,"eventClient"),Pe(this,"initialized",!1),Pe(this,"logChunkController"),Pe(this,"on",(a,c)=>this.events.on(a,c)),Pe(this,"once",(a,c)=>this.events.once(a,c)),Pe(this,"off",(a,c)=>this.events.off(a,c)),Pe(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Pe(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Fe.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(t==null?void 0:t.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||MC,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const i=Eh({level:typeof(t==null?void 0:t.logger)=="string"&&t.logger?t.logger:$V.logger,name:Mm}),{logger:s,chunkLoggerController:o}=zq({opts:i,maxSizeInBytes:t==null?void 0:t.maxLogBlobSizeInBytes,loggerOverride:t==null?void 0:t.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=sn(s,this.name),this.heartbeat=new NH,this.crypto=new LW(this,this.logger,t==null?void 0:t.keychain),this.history=new KK(this,this.logger),this.expirer=new XK(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new pq(GE(GE({},OV),t==null?void 0:t.storageOptions)),this.relayer=new dK({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new VK(this,this.logger),this.verify=new eQ(this,this.logger,this.storage),this.echoClient=new rQ(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new aQ(this,this.logger,t==null?void 0:t.telemetryEnabled),this.setGlobalCore(this)}static async init(t){const n=new eT(t);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(VV,r),n}get context(){return xn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var t;return(t=this.logChunkController)==null?void 0:t.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(t){this.linkModeSupportedApps.includes(t)||(this.linkModeSupportedApps.push(t),await this.storage.setItem(IE,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(IE)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}getGlobalCore(t=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${t}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(t){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=t.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=t}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&RV.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const fQ=dQ,tT="wc",nT=2,rT="client",cw=`${tT}@${nT}:${rT}:`,Vp={name:rT,logger:"error"},WE="WALLETCONNECT_DEEPLINK_CHOICE",hQ="proposal",KE="Proposal expired",pQ="session",No=Z.SEVEN_DAYS,gQ="engine",wt={wc_sessionPropose:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Z.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Z.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1119}}},Gp={min:Z.FIVE_MINUTES,max:Z.SEVEN_DAYS},kr={idle:"IDLE",active:"ACTIVE"},mQ={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},yQ="request",wQ=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],vQ="wc",bQ="auth",EQ="authKeys",_Q="pairingTopics",SQ="requests",Ah=`${vQ}@${1.5}:${bQ}:`,Od=`${Ah}:PUB_KEY`;var xQ=Object.defineProperty,IQ=Object.defineProperties,AQ=Object.getOwnPropertyDescriptors,QE=Object.getOwnPropertySymbols,CQ=Object.prototype.hasOwnProperty,TQ=Object.prototype.propertyIsEnumerable,Jm=(e,t,n)=>t in e?xQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Be=(e,t)=>{for(var n in t||(t={}))CQ.call(t,n)&&Jm(e,n,t[n]);if(QE)for(var n of QE(t))TQ.call(t,n)&&Jm(e,n,t[n]);return e},cn=(e,t)=>IQ(e,AQ(t)),Y=(e,t,n)=>Jm(e,typeof t!="symbol"?t+"":t,n);class kQ extends cV{constructor(t){super(t),Y(this,"name",gQ),Y(this,"events",new Gf),Y(this,"initialized",!1),Y(this,"requestQueue",{state:kr.idle,queue:[]}),Y(this,"sessionRequestQueue",{state:kr.idle,queue:[]}),Y(this,"emittedSessionRequests",new LM({limit:500})),Y(this,"requestQueueDelay",Z.ONE_SECOND),Y(this,"expectedPairingMethodMap",new Map),Y(this,"recentlyDeletedMap",new Map),Y(this,"recentlyDeletedLimit",200),Y(this,"relayMessageCache",[]),Y(this,"pendingSessions",new Map),Y(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(wt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Z.toMiliseconds(this.requestQueueDelay)))}),Y(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=cn(Be({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=Fz(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=i,d,f=!1;try{if(u){const D=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),f=D.active}}catch(D){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),D}if(!u||!f){const{topic:D,uri:j}=await this.client.core.pairing.create();u=D,d=j}if(!u){const{message:D}=J("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(D)}const h=await this.client.core.crypto.generateKeyPair(),p=wt.wc_sessionPropose.req.ttl||Z.FIVE_MINUTES,g=ft(p),v=cn(Be(Be({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:jC}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Pr()}),m=Se("session_connect",v.id),{reject:w,resolve:E,done:A}=Rs(p,KE),T=({id:D})=>{D===v.id&&(this.client.events.off("proposal_expire",T),this.pendingSessions.delete(v.id),this.events.emit(m,{error:{message:KE,code:0}}))};return this.client.events.on("proposal_expire",T),this.events.once(m,({error:D,session:j})=>{this.client.events.off("proposal_expire",T),D?w(D):j&&E(j)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:v,throwOnFailedPublish:!0,clientRpcId:v.id}),await this.setProposal(v.id,v),{uri:d,approval:A}}),Y(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),Y(this,"approve",async n=>{var r,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[ur.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(C){throw o.setError(_s.no_internet_connection),C}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(C){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(_s.proposal_not_found),C}try{await this.isValidApprove(n)}catch(C){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(_s.session_approve_namespace_validation_failure),C}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:f}=n,h=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:v,optionalNamespaces:m}=h;let w=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:p});w||(w=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:ur.session_approve_started,properties:{topic:p,trace:[ur.session_approve_started,ur.session_namespaces_validation_success]}}));const E=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,T=await this.client.core.crypto.generateSharedKey(E,A),D=Be(Be(Be({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:E,metadata:this.client.metadata},expiry:ft(No)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),j=Fe.relay;w.addTrace(ur.subscribing_session_topic);try{await this.client.core.relayer.subscribe(T,{transportType:j})}catch(C){throw w.setError(_s.subscribe_session_topic_failure),C}w.addTrace(ur.subscribe_session_topic_success);const L=cn(Be({},D),{topic:T,requiredNamespaces:v,optionalNamespaces:m,pairingTopic:p,acknowledged:!1,self:D.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:E,transportType:Fe.relay});await this.client.session.set(T,L),w.addTrace(ur.store_session);try{w.addTrace(ur.publishing_session_settle),await this.sendRequest({topic:T,method:"wc_sessionSettle",params:D,throwOnFailedPublish:!0}).catch(C=>{throw w==null||w.setError(_s.session_settle_publish_failure),C}),w.addTrace(ur.session_settle_publish_success),w.addTrace(ur.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:E},throwOnFailedPublish:!0}).catch(C=>{throw w==null||w.setError(_s.session_approve_publish_failure),C}),w.addTrace(ur.session_approve_publish_success)}catch(C){throw this.client.logger.error(C),this.client.session.delete(T,qe("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(T),C}return this.client.core.eventClient.deleteEvent({eventId:w.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(T,ft(No)),{topic:T,acknowledged:()=>Promise.resolve(this.client.session.get(T))}}),Y(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:i}=n;let s;try{s=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}s&&await this.sendError({id:r,topic:s,error:i,rpcOpts:wt.wc_sessionPropose.reject}),await this.deleteProposal(r)}),Y(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:i}=n,{done:s,resolve:o,reject:a}=Rs(),c=Pr(),l=zs().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Se("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:i}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:s}}),Y(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,i=Pr(),{done:s,resolve:o,reject:a}=Rs();return this.events.once(Se("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,ft(No)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),Y(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(v){throw this.client.logger.error("request() -> isValidRequest() failed"),v}const{chainId:r,request:i,topic:s,expiry:o=wt.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(s);(a==null?void 0:a.transportType)===Fe.relay&&await this.confirmOnlineStateOrThrow();const c=Pr(),l=zs().toString(),{done:u,resolve:d,reject:f}=Rs(o,"Request expired. Please try again.");this.events.once(Se("session_request",c),({error:v,result:m})=>{v?f(v):d(m)});const h="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:h,params:{request:cn(Be({},i),{expiryTimestamp:ft(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(v=>f(v)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),await u();const g={request:cn(Be({},i),{expiryTimestamp:ft(o)}),chainId:r};return await Promise.all([new Promise(async v=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:h,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(m=>f(m)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),v()}),new Promise(async v=>{var m;if(!((m=a.sessionConfig)!=null&&m.disableDeepLink)){const w=await PM(this.client.core.storage,WE);await RM({id:c,topic:s,wcDeepLink:w})}v()}),u()]).then(v=>v[2])}),Y(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:i}=n,{id:s}=i,o=this.client.session.get(r);o.transportType===Fe.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Nr(i)?await this.sendResult({id:s,topic:r,result:i.result,throwOnFailedPublish:!0,appLink:a}):Gn(i)&&await this.sendError({id:s,topic:r,error:i.error,appLink:a}),this.cleanupAfterResponse(n)}),Y(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:r}=n;if(this.client.session.keys.includes(r)){const i=Pr(),s=zs().toString(),{done:o,resolve:a,reject:c}=Rs();this.events.once(Se("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),Y(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:i,chainId:s}=n,o=zs().toString(),a=Pr();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),Y(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:qe("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:i}=J("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(i)}}),Y(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>zz(r,n)))),Y(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Y(this,"authenticate",async(n,r)=>{var i;this.isInitialized(),this.isValidAuthenticate(n);const s=r&&this.client.core.linkModeSupportedApps.includes(r)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?Fe.link_mode:Fe.relay;o===Fe.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:f,exp:h,nbf:p,methods:g=[],expiry:v}=n,m=[...n.resources||[]],{topic:w,uri:E}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:E}});const A=await this.client.core.crypto.generateKeyPair(),T=Ad(A);if(await Promise.all([this.client.auth.authKeys.set(Od,{responseTopic:T,publicKey:A}),this.client.auth.pairingTopics.set(T,{topic:T,pairingTopic:w})]),await this.client.core.relayer.subscribe(T,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${w}`),g.length>0){const{namespace:$}=ba(a[0]);let P=Q7($,"request",g);Id(m)&&(P=X7(P,m.pop())),m.push(P)}const D=v&&v>wt.wc_sessionAuthenticate.req.ttl?v:wt.wc_sessionAuthenticate.req.ttl,j={authPayload:{type:f??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:h,nbf:p,resources:m},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:ft(D)},L={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},C={requiredNamespaces:{},optionalNamespaces:L,relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:ft(wt.wc_sessionPropose.req.ttl),id:Pr()},{done:U,resolve:B,reject:F}=Rs(D,"Request expired"),q=Pr(),G=Se("session_connect",C.id),S=Se("session_request",q),x=async({error:$,session:P})=>{this.events.off(S,O),$?F($):P&&B({session:P})},O=async $=>{var P,M,W;if(await this.deletePendingAuthRequest(q,{message:"fulfilled",code:0}),$.error){const ce=qe("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return $.error.code===ce.code?void 0:(this.events.off(G,x),F($.error.message))}await this.deleteProposal(C.id),this.events.off(G,x);const{cacaos:ee,responder:Q}=$.result,te=[],se=[];for(const ce of ee){await _b({cacao:ce,projectId:this.client.core.projectId})||(this.client.logger.error(ce,"Signature verification failed"),F(qe("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ze}=ce,ut=Id(ze.resources),xr=[Am(ze.iss)],sr=yf(ze.iss);if(ut){const Mn=Sb(ut),Qa=xb(ut);te.push(...Mn),xr.push(...Qa)}for(const Mn of xr)se.push(`${Mn}:${sr}`)}const ue=await this.client.core.crypto.generateSharedKey(A,Q.publicKey);let de;te.length>0&&(de={topic:ue,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:Q,controller:Q.publicKey,expiry:ft(No),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:Kb([...new Set(te)],[...new Set(se)]),transportType:o},await this.client.core.relayer.subscribe(ue,{transportType:o}),await this.client.session.set(ue,de),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:Q.metadata}),de=this.client.session.get(ue)),(P=this.client.metadata.redirect)!=null&&P.linkMode&&(M=Q.metadata.redirect)!=null&&M.linkMode&&(W=Q.metadata.redirect)!=null&&W.universal&&r&&(this.client.core.addLinkModeSupportedApp(Q.metadata.redirect.universal),this.client.session.update(ue,{transportType:Fe.link_mode})),B({auths:ee,session:de})};this.events.once(G,x),this.events.once(S,O);let R;try{if(s){const $=Ji("wc_sessionAuthenticate",j,q);this.client.core.history.set(w,$);const P=await this.client.core.crypto.encode("",$,{type:nu,encoding:Ki});R=qu(r,w,P)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:j,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:q}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:C,expiry:wt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:C.id})])}catch($){throw this.events.off(G,x),this.events.off(S,O),$}return await this.setProposal(C.id,C),await this.setAuthRequest(q,{request:cn(Be({},j),{verifyContext:{}}),pairingTopic:w,transportType:o}),{uri:R??E,response:U}}),Y(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:i}=n,s=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Ss.authenticated_session_approve_started]}});try{this.isInitialized()}catch(v){throw s.setError(_c.no_internet_connection),v}const o=this.getPendingAuthRequest(r);if(!o)throw s.setError(_c.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Fe.relay;a===Fe.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Ad(c),d={type:pi,receiverPublicKey:c,senderPublicKey:l},f=[],h=[];for(const v of i){if(!await _b({cacao:v,projectId:this.client.core.projectId})){s.setError(_c.invalid_cacao);const T=qe("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:T,encodeOpts:d}),new Error(T.message)}s.addTrace(Ss.cacaos_verified);const{p:m}=v,w=Id(m.resources),E=[Am(m.iss)],A=yf(m.iss);if(w){const T=Sb(w),D=xb(w);f.push(...T),E.push(...D)}for(const T of E)h.push(`${T}:${A}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(Ss.create_authenticated_session_topic);let g;if((f==null?void 0:f.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:ft(No),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Kb([...new Set(f)],[...new Set(h)]),transportType:a},s.addTrace(Ss.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(v){throw s.setError(_c.subscribe_authenticated_session_topic_failure),v}s.addTrace(Ss.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),s.addTrace(Ss.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(Ss.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(v){throw s.setError(_c.authenticated_session_approve_publish_failure),v}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:g}}),Y(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:i}=n,s=this.getPendingAuthRequest(r);if(!s)throw new Error(`Could not find pending auth request with id ${r}`);s.transportType===Fe.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Ad(o),l={type:pi,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:i,encodeOpts:l,rpcOpts:wt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),Y(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:i}=n;return LA(r,i)}),Y(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),Y(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&s.topic&&s.topic!==r.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),Y(this,"deleteSession",async n=>{var r;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,qe("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(WE).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,qe("USER_DISCONNECTED"))}),i===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=kr.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),Y(this,"deleteProposal",async(n,r)=>{if(r)try{const i=this.client.proposal.get(n),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(_s.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,qe("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),Y(this,"deletePendingSessionRequest",async(n,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==n),i&&(this.sessionRequestQueue.state=kr.idle,this.client.events.emit("session_request_expire",{id:n}))}),Y(this,"deletePendingAuthRequest",async(n,r,i=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)])}),Y(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),Y(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,ft(wt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),Y(this,"setAuthRequest",async(n,r)=>{const{request:i,pairingTopic:s,transportType:o=Fe.relay}=r;this.client.core.expirer.set(n,i.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:n,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),Y(this,"setPendingSessionRequest",async n=>{const{id:r,topic:i,params:s,verifyContext:o}=n,a=s.request.expiryTimestamp||ft(wt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:i,params:s,verifyContext:o})}),Y(this,"sendRequest",async n=>{const{topic:r,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,f=Ji(i,s,c);let h;const p=!!u;try{const m=p?Ki:yr;h=await this.client.core.crypto.encode(r,f,{encoding:m})}catch(m){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),m}let g;if(wQ.includes(i)){const m=Ur(JSON.stringify(f)),w=Ur(h);g=await this.client.core.verify.register({id:w,decryptedId:m})}const v=wt[i].req;if(v.attestation=g,o&&(v.ttl=o),a&&(v.id=a),this.client.core.history.set(r,f),p){const m=qu(u,r,h);await global.Linking.openURL(m,this.client.name)}else{const m=wt[i].req;o&&(m.ttl=o),a&&(m.id=a),m.tvf=cn(Be({},d),{correlationId:f.id}),l?(m.internal=cn(Be({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,h,m)):this.client.core.relayer.publish(r,h,m).catch(w=>this.client.logger.error(w))}return f.id}),Y(this,"sendResult",async n=>{const{id:r,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=_h(r,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Ki:yr;u=await this.client.core.crypto.encode(i,l,cn(Be({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),p}let f,h;try{f=await this.client.core.history.get(i,r);const p=f.request;try{h=this.getTVFParams(r,p.params,s)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${r}) failed`),p}if(d){const p=qu(c,i,u);await global.Linking.openURL(p,this.client.name)}else{const p=f.request.method,g=wt[p].res;g.tvf=cn(Be({},h),{correlationId:r}),o?(g.internal=cn(Be({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,g)):this.client.core.relayer.publish(i,u,g).catch(v=>this.client.logger.error(v))}await this.client.core.history.resolve(l)}),Y(this,"sendError",async n=>{const{id:r,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=Sh(r,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const h=d?Ki:yr;u=await this.client.core.crypto.encode(i,l,cn(Be({},o||{}),{encoding:h}))}catch(h){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),h}let f;try{f=await this.client.core.history.get(i,r)}catch(h){throw this.client.logger.error(`sendError() -> history.get(${i}, ${r}) failed`),h}if(d){const h=qu(c,i,u);await global.Linking.openURL(h,this.client.name)}else{const h=f.request.method,p=a||wt[h].res;this.client.core.relayer.publish(i,u,p)}await this.client.core.history.resolve(l)}),Y(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(i=>{let s=!1;zi(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&n.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{zi(i.expiryTimestamp)&&r.push(i.id)}),await Promise.all([...n.map(i=>this.deleteSession({topic:i})),...r.map(i=>this.deleteProposal(i))])}),Y(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),Y(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),Y(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===kr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=kr.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=kr.idle}),Y(this,"processRequest",async n=>{const{topic:r,payload:i,attestation:s,transportType:o,encryptedId:a}=n,c=i.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,i);case"wc_sessionPing":return await this.onSessionPingRequest(r,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),Y(this,"onRelayEventResponse",async n=>{const{topic:r,payload:i,transportType:s}=n,o=(await this.client.core.history.get(r,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Y(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:i}=J("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),Y(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:i}=n,s=this.expectedPairingMethodMap.get(r);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Y(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:i,attestation:s,encryptedId:o}=n,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(ii.proposal_listener_not_found)),this.isValidConnect(Be({},i.params));const u=a.expiryTimestamp||ft(wt.wc_sessionPropose.req.ttl),d=Be({id:c,pairingTopic:r,expiryTimestamp:u,attestation:s,encryptedId:o},a);await this.setProposal(c,d);const f=await this.getVerifyContext({attestationId:s,hash:Ur(JSON.stringify(i)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace($r.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:f})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:wt.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),Y(this,"onSessionProposeResponse",async(n,r,i)=>{const{id:s}=r;if(Nr(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:n,proposalId:s,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Gn(r)){await this.deleteProposal(s);const o=Se("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),Y(this,"onSessionSettleRequest",async(n,r)=>{const{id:i,params:s}=r;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:f}=r.params,h=[...this.pendingSessions.values()].find(v=>v.sessionTopic===n);if(!h)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(h.proposalId),g=cn(Be(Be(Be({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:h.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:h.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{transportType:Fe.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:h.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Se("session_connect",h.proposalId),{session:g}),this.pendingSessions.delete(h.proposalId),this.deleteProposal(h.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),Y(this,"onSessionSettleResponse",async(n,r)=>{const{id:i}=r;Nr(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Se("session_approve",i),{})):Gn(r)&&(await this.client.session.delete(n,qe("USER_DISCONNECTED")),this.events.emit(Se("session_approve",i),{error:r.error}))}),Y(this,"onSessionUpdateRequest",async(n,r)=>{const{params:i,id:s}=r;try{const o=`${n}_session_update`,a=bc.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:n,error:qe("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Be({topic:n},i));try{bc.set(o,s),await this.client.session.update(n,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:n,result:!0})}catch(c){throw bc.delete(o),c}this.client.events.emit("session_update",{id:s,topic:n,params:i})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),Y(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),Y(this,"onSessionUpdateResponse",(n,r)=>{const{id:i}=r,s=Se("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Nr(r)?this.events.emit(Se("session_update",i),{}):Gn(r)&&this.events.emit(Se("session_update",i),{error:r.error})}),Y(this,"onSessionExtendRequest",async(n,r)=>{const{id:i}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,ft(No)),await this.sendResult({id:i,topic:n,result:!0}),this.client.events.emit("session_extend",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),Y(this,"onSessionExtendResponse",(n,r)=>{const{id:i}=r,s=Se("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Nr(r)?this.events.emit(Se("session_extend",i),{}):Gn(r)&&this.events.emit(Se("session_extend",i),{error:r.error})}),Y(this,"onSessionPingRequest",async(n,r)=>{const{id:i}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),Y(this,"onSessionPingResponse",(n,r)=>{const{id:i}=r,s=Se("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);Nr(r)?this.events.emit(Se("session_ping",i),{}):Gn(r)&&this.events.emit(Se("session_ping",i),{error:r.error})},500)}),Y(this,"onSessionDeleteRequest",async(n,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(Et.publish,async()=>{s(await this.deleteSession({topic:n,id:i}))})}),this.sendResult({id:i,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:qe("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),Y(this,"onSessionRequest",async n=>{var r,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:f}=a;try{await this.isValidRequest(Be({topic:o},f));const h=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Ur(JSON.stringify(Ji("wc_sessionRequest",f,d))),encryptedId:l,metadata:h.peer.metadata,transportType:u}),g={id:d,topic:o,params:f,verifyContext:p};await this.setPendingSessionRequest(g),u===Fe.link_mode&&(r=h.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((i=h.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(h){await this.sendError({id:d,topic:o,error:h}),this.client.logger.error(h)}}),Y(this,"onSessionRequestResponse",(n,r)=>{const{id:i}=r,s=Se("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Nr(r)?this.events.emit(Se("session_request",i),{result:r.result}):Gn(r)&&this.events.emit(Se("session_request",i),{error:r.error})}),Y(this,"onSessionEventRequest",async(n,r)=>{const{id:i,params:s}=r;try{const o=`${n}_session_event_${s.event.name}`,a=bc.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Be({topic:n},s)),this.client.events.emit("session_event",{id:i,topic:n,params:s}),bc.set(o,i)}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),Y(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:i}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Nr(r)?this.events.emit(Se("session_request",i),{result:r.result}):Gn(r)&&this.events.emit(Se("session_request",i),{error:r.error})}),Y(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=s.params,f=await this.getVerifyContext({attestationId:o,hash:Ur(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),h={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:f,expiryTimestamp:d};await this.setAuthRequest(s.id,{request:h,pairingTopic:i,transportType:c}),c===Fe.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:f})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(s.params.requester.metadata,c),h={type:pi,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:h,rpcOpts:wt.wc_sessionAuthenticate.autoReject,appLink:f})}}),Y(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),Y(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=kr.idle,this.processSessionRequestQueue()},Z.toMiliseconds(this.requestQueueDelay))}),Y(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===n&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=Se("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Se("session_request",s.request.id),{error:r})})}),Y(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===kr.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),Y(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=kr.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),Y(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(i=>i.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Ji("wc_sessionPropose",cn(Be({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),Y(this,"isValidConnect",async n=>{if(!dn(n)){const{message:l}=J("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Rt(r)||await this.isValidPairingTopic(r),!eH(c)){const{message:l}=J("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Rt(i)&&qr(i)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(i,"requiredNamespaces")}if(!Rt(s)&&qr(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Rt(o)||this.validateSessionProps(o,"sessionProperties"),!Rt(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),Y(this,"validateNamespaces",(n,r)=>{const i=Zz(n,"connect()",r);if(i)throw new Error(i.message)}),Y(this,"isValidApprove",async n=>{if(!dn(n))throw new Error(J("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=Up(i,"approve()");if(l)throw new Error(l.message);const u=Xb(c.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!it(s,!0)){const{message:d}=J("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}if(Rt(o)||this.validateSessionProps(o,"sessionProperties"),!Rt(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(i));if(!Object.keys(a).every(f=>d.has(f.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),Y(this,"isValidReject",async n=>{if(!dn(n)){const{message:s}=J("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(s)}const{id:r,reason:i}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!nH(i)){const{message:s}=J("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),Y(this,"isValidSessionSettleRequest",n=>{if(!dn(n)){const{message:l}=J("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:i,namespaces:s,expiry:o}=n;if(!gC(r)){const{message:l}=J("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=Wz(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Up(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(zi(o)){const{message:l}=J("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),Y(this,"isValidUpdate",async n=>{if(!dn(n)){const{message:c}=J("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:i}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const s=this.client.session.get(r),o=Up(i,"update()");if(o)throw new Error(o.message);const a=Xb(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),Y(this,"isValidExtend",async n=>{if(!dn(n)){const{message:i}=J("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(i)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),Y(this,"isValidRequest",async n=>{if(!dn(n)){const{message:c}=J("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:i,chainId:s,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!Yb(a,s)){const{message:c}=J("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!rH(i)){const{message:c}=J("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!oH(a,s,i.method)){const{message:c}=J("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!uH(o,Gp)){const{message:c}=J("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Gp.min} and ${Gp.max}`);throw new Error(c)}}),Y(this,"isValidRespond",async n=>{var r;if(!dn(n)){const{message:o}=J("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:i,response:s}=n;try{await this.isValidSessionTopic(i)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!iH(s)){const{message:o}=J("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),Y(this,"isValidPing",async n=>{if(!dn(n)){const{message:i}=J("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Y(this,"isValidEmit",async n=>{if(!dn(n)){const{message:a}=J("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:i,chainId:s}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!Yb(o,s)){const{message:a}=J("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!sH(i)){const{message:a}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!aH(o,s,i.name)){const{message:a}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),Y(this,"isValidDisconnect",async n=>{if(!dn(n)){const{message:i}=J("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Y(this,"isValidAuthenticate",n=>{const{chains:r,uri:i,domain:s,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!it(i,!1))throw new Error("uri is required parameter");if(!it(s,!1))throw new Error("domain is required parameter");if(!it(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>ba(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=ba(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Y(this,"getVerifyContext",async n=>{const{attestationId:r,hash:i,encryptedId:s,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||el,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Fe.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),Y(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((i,s)=>{if(i==null){const{message:o}=J("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${i} for key ${Object.keys(n)[s]}`);throw new Error(o)}})}),Y(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),Y(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),Y(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:i}=J("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(i)}}),Y(this,"isLinkModeEnabled",(n,r)=>{var i,s,o,a,c,l,u,d,f;return!n||r!==Fe.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((f=n==null?void 0:n.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Y(this,"getAppLinkIfEnabled",(n,r)=>{var i;return this.isLinkModeEnabled(n,r)?(i=n==null?void 0:n.redirect)==null?void 0:i.universal:void 0}),Y(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=ub(n,"topic")||"",i=decodeURIComponent(ub(n,"wc_ev")||""),s=this.client.session.keys.includes(r);s&&this.client.session.update(r,{transportType:Fe.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:i,sessionExists:s})}),Y(this,"registerLinkModeListeners",async()=>{var n;if(M0()||ws()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await r.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),Y(this,"getTVFParams",(n,r,i)=>{var s,o,a;if(!((s=r.request)!=null&&s.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,i);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),Y(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const i=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),Y(this,"extractTxHashesFromResult",(n,r)=>{var i;try{if(!r)return[];const s=n.method,o=mQ[s];if(s==="sui_signTransaction")return[P7(r.transactionBytes)];if(s==="near_signTransaction")return[wb(r)];if(s==="near_signTransactions")return r.map(c=>wb(c));if(s==="xrpl_signTransactionFor"||s==="xrpl_signTransaction")return[(i=r.tx_json)==null?void 0:i.hash];if(s==="polkadot_signTransaction")return[IH({transaction:n.params.transactionPayload,signature:r.signature})];if(s==="algo_signTxn")return gi(r)?r.map(c=>vb(c)):[vb(r)];if(s==="cosmos_signDirect")return[D7(r)];if(typeof r=="string")return[r];const a=r[o.key];if(gi(a))return s==="solana_signAllTransactions"?a.map(c=>O7(c)):a;if(typeof a=="string")return[a]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const t=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(t);for(const[r,i]of Object.entries(n))for(const s of i)try{await this.onProviderMessageEvent({topic:r,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${s}`)}}catch(t){this.client.logger.warn("processPendingMessageEvents failed",t)}}isInitialized(){if(!this.initialized){const{message:t}=J("NOT_INITIALIZED",this.name);throw new Error(t)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Et.message,t=>{this.onProviderMessageEvent(t)})}async onRelayMessage(t){const{topic:n,message:r,attestation:i,transportType:s}=t,{publicKey:o}=this.client.auth.authKeys.keys.includes(Od)?this.client.auth.authKeys.get(Od):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:s===Fe.link_mode?Ki:yr});aw(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:i,transportType:s,encryptedId:Ur(r)})):xh(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:s}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(qn.expired,async t=>{const{topic:n,id:r}=SA(t.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,J("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,J("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Ps.create,t=>this.onPairingCreated(t)),this.client.core.pairing.events.on(Ps.delete,t=>{this.addToRecentlyDeleted(t.topic,"pairing")})}isValidPairingTopic(t){if(!it(t,!1)){const{message:n}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:n}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(n)}if(zi(this.client.core.pairing.pairings.get(t).expiry)){const{message:n}=J("EXPIRED",`pairing topic: ${t}`);throw new Error(n)}}async isValidSessionTopic(t){if(!it(t,!1)){const{message:n}=J("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(n)}if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){const{message:n}=J("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(n)}if(zi(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:n}=J("EXPIRED",`session topic: ${t}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(t)){const{message:n}=J("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(n)}}async isValidSessionOrPairingTopic(t){if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(it(t,!1)){const{message:n}=J("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(n)}else{const{message:n}=J("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(n)}}async isValidProposalId(t){if(!tH(t)){const{message:n}=J("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(n)}if(!this.client.proposal.keys.includes(t)){const{message:n}=J("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(n)}if(zi(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:n}=J("EXPIRED",`proposal id: ${t}`);throw new Error(n)}}}class RQ extends wo{constructor(t,n){super(t,n,hQ,cw),this.core=t,this.logger=n}}let $Q=class extends wo{constructor(t,n){super(t,n,pQ,cw),this.core=t,this.logger=n}};class OQ extends wo{constructor(t,n){super(t,n,yQ,cw,r=>r.id),this.core=t,this.logger=n}}class PQ extends wo{constructor(t,n){super(t,n,EQ,Ah,()=>Od),this.core=t,this.logger=n}}class NQ extends wo{constructor(t,n){super(t,n,_Q,Ah),this.core=t,this.logger=n}}class DQ extends wo{constructor(t,n){super(t,n,SQ,Ah,r=>r.id),this.core=t,this.logger=n}}var UQ=Object.defineProperty,BQ=(e,t,n)=>t in e?UQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wp=(e,t,n)=>BQ(e,typeof t!="symbol"?t+"":t,n);class LQ{constructor(t,n){this.core=t,this.logger=n,Wp(this,"authKeys"),Wp(this,"pairingTopics"),Wp(this,"requests"),this.authKeys=new PQ(this.core,this.logger),this.pairingTopics=new NQ(this.core,this.logger),this.requests=new DQ(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var FQ=Object.defineProperty,jQ=(e,t,n)=>t in e?FQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,me=(e,t,n)=>jQ(e,typeof t!="symbol"?t+"":t,n);let MQ=class iT extends aV{constructor(t){super(t),me(this,"protocol",tT),me(this,"version",nT),me(this,"name",Vp.name),me(this,"metadata"),me(this,"core"),me(this,"logger"),me(this,"events",new En.EventEmitter),me(this,"engine"),me(this,"session"),me(this,"proposal"),me(this,"pendingRequest"),me(this,"auth"),me(this,"signConfig"),me(this,"on",(r,i)=>this.events.on(r,i)),me(this,"once",(r,i)=>this.events.once(r,i)),me(this,"off",(r,i)=>this.events.off(r,i)),me(this,"removeListener",(r,i)=>this.events.removeListener(r,i)),me(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),me(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"update",async r=>{try{return await this.engine.update(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"request",async r=>{try{return await this.engine.request(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"find",r=>{try{return this.engine.find(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),me(this,"authenticate",async(r,i)=>{try{return await this.engine.authenticate(r,i)}catch(s){throw this.logger.error(s.message),s}}),me(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),me(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),this.name=(t==null?void 0:t.name)||Vp.name,this.metadata=xM(t==null?void 0:t.metadata),this.signConfig=t==null?void 0:t.signConfig;const n=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:iu(Eh({level:(t==null?void 0:t.logger)||Vp.logger}));this.core=(t==null?void 0:t.core)||new fQ(t),this.logger=sn(n,this.name),this.session=new $Q(this.core,this.logger),this.proposal=new RQ(this.core,this.logger),this.pendingRequest=new OQ(this.core,this.logger),this.engine=new kQ(this),this.auth=new LQ(this.core,this.logger)}static async init(t){const n=new iT(t);return await n.initialize(),n}get context(){return xn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}};var Zm={exports:{}};(function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Xt<"u"&&Xt,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof Xt<"u"&&Xt||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(S){return S&&DataView.prototype.isPrototypeOf(S)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(S){return S&&u.indexOf(Object.prototype.toString.call(S))>-1};function f(S){if(typeof S!="string"&&(S=String(S)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(S)||S==="")throw new TypeError('Invalid character in header field name: "'+S+'"');return S.toLowerCase()}function h(S){return typeof S!="string"&&(S=String(S)),S}function p(S){var x={next:function(){var O=S.shift();return{done:O===void 0,value:O}}};return c.iterable&&(x[Symbol.iterator]=function(){return x}),x}function g(S){this.map={},S instanceof g?S.forEach(function(x,O){this.append(O,x)},this):Array.isArray(S)?S.forEach(function(x){if(x.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+x.length);this.append(x[0],x[1])},this):S&&Object.getOwnPropertyNames(S).forEach(function(x){this.append(x,S[x])},this)}g.prototype.append=function(S,x){S=f(S),x=h(x);var O=this.map[S];this.map[S]=O?O+", "+x:x},g.prototype.delete=function(S){delete this.map[f(S)]},g.prototype.get=function(S){return S=f(S),this.has(S)?this.map[S]:null},g.prototype.has=function(S){return this.map.hasOwnProperty(f(S))},g.prototype.set=function(S,x){this.map[f(S)]=h(x)},g.prototype.forEach=function(S,x){for(var O in this.map)this.map.hasOwnProperty(O)&&S.call(x,this.map[O],O,this)},g.prototype.keys=function(){var S=[];return this.forEach(function(x,O){S.push(O)}),p(S)},g.prototype.values=function(){var S=[];return this.forEach(function(x){S.push(x)}),p(S)},g.prototype.entries=function(){var S=[];return this.forEach(function(x,O){S.push([O,x])}),p(S)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function v(S){if(!S._noBody){if(S.bodyUsed)return Promise.reject(new TypeError("Already read"));S.bodyUsed=!0}}function m(S){return new Promise(function(x,O){S.onload=function(){x(S.result)},S.onerror=function(){O(S.error)}})}function w(S){var x=new FileReader,O=m(x);return x.readAsArrayBuffer(S),O}function E(S){var x=new FileReader,O=m(x),R=/charset=([A-Za-z0-9_-]+)/.exec(S.type),$=R?R[1]:"utf-8";return x.readAsText(S,$),O}function A(S){for(var x=new Uint8Array(S),O=new Array(x.length),R=0;R<x.length;R++)O[R]=String.fromCharCode(x[R]);return O.join("")}function T(S){if(S.slice)return S.slice(0);var x=new Uint8Array(S.byteLength);return x.set(new Uint8Array(S)),x.buffer}function D(){return this.bodyUsed=!1,this._initBody=function(S){this.bodyUsed=this.bodyUsed,this._bodyInit=S,S?typeof S=="string"?this._bodyText=S:c.blob&&Blob.prototype.isPrototypeOf(S)?this._bodyBlob=S:c.formData&&FormData.prototype.isPrototypeOf(S)?this._bodyFormData=S:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)?this._bodyText=S.toString():c.arrayBuffer&&c.blob&&l(S)?(this._bodyArrayBuffer=T(S.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(S)||d(S))?this._bodyArrayBuffer=T(S):this._bodyText=S=Object.prototype.toString.call(S):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof S=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var S=v(this);if(S)return S;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var S=v(this);return S||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var S=v(this);if(S)return S;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(U)}),this.json=function(){return this.text().then(JSON.parse)},this}var j=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function L(S){var x=S.toUpperCase();return j.indexOf(x)>-1?x:S}function C(S,x){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');x=x||{};var O=x.body;if(S instanceof C){if(S.bodyUsed)throw new TypeError("Already read");this.url=S.url,this.credentials=S.credentials,x.headers||(this.headers=new g(S.headers)),this.method=S.method,this.mode=S.mode,this.signal=S.signal,!O&&S._bodyInit!=null&&(O=S._bodyInit,S.bodyUsed=!0)}else this.url=String(S);if(this.credentials=x.credentials||this.credentials||"same-origin",(x.headers||!this.headers)&&(this.headers=new g(x.headers)),this.method=L(x.method||this.method||"GET"),this.mode=x.mode||this.mode||null,this.signal=x.signal||this.signal||function(){if("AbortController"in a){var P=new AbortController;return P.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&O)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(O),(this.method==="GET"||this.method==="HEAD")&&(x.cache==="no-store"||x.cache==="no-cache")){var R=/([?&])_=[^&]*/;if(R.test(this.url))this.url=this.url.replace(R,"$1_="+new Date().getTime());else{var $=/\?/;this.url+=($.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})};function U(S){var x=new FormData;return S.trim().split("&").forEach(function(O){if(O){var R=O.split("="),$=R.shift().replace(/\+/g," "),P=R.join("=").replace(/\+/g," ");x.append(decodeURIComponent($),decodeURIComponent(P))}}),x}function B(S){var x=new g,O=S.replace(/\r?\n[\t ]+/g," ");return O.split("\r").map(function(R){return R.indexOf(`
`)===0?R.substr(1,R.length):R}).forEach(function(R){var $=R.split(":"),P=$.shift().trim();if(P){var M=$.join(":").trim();try{x.append(P,M)}catch(W){console.warn("Response "+W.message)}}}),x}D.call(C.prototype);function F(S,x){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(x||(x={}),this.type="default",this.status=x.status===void 0?200:x.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=x.statusText===void 0?"":""+x.statusText,this.headers=new g(x.headers),this.url=x.url||"",this._initBody(S)}D.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},F.error=function(){var S=new F(null,{status:200,statusText:""});return S.ok=!1,S.status=0,S.type="error",S};var q=[301,302,303,307,308];F.redirect=function(S,x){if(q.indexOf(x)===-1)throw new RangeError("Invalid status code");return new F(null,{status:x,headers:{location:S}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(x,O){this.message=x,this.name=O;var R=Error(x);this.stack=R.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function G(S,x){return new Promise(function(O,R){var $=new C(S,x);if($.signal&&$.signal.aborted)return R(new o.DOMException("Aborted","AbortError"));var P=new XMLHttpRequest;function M(){P.abort()}P.onload=function(){var Q={statusText:P.statusText,headers:B(P.getAllResponseHeaders()||"")};$.url.indexOf("file://")===0&&(P.status<200||P.status>599)?Q.status=200:Q.status=P.status,Q.url="responseURL"in P?P.responseURL:Q.headers.get("X-Request-URL");var te="response"in P?P.response:P.responseText;setTimeout(function(){O(new F(te,Q))},0)},P.onerror=function(){setTimeout(function(){R(new TypeError("Network request failed"))},0)},P.ontimeout=function(){setTimeout(function(){R(new TypeError("Network request timed out"))},0)},P.onabort=function(){setTimeout(function(){R(new o.DOMException("Aborted","AbortError"))},0)};function W(Q){try{return Q===""&&a.location.href?a.location.href:Q}catch{return Q}}if(P.open($.method,W($.url),!0),$.credentials==="include"?P.withCredentials=!0:$.credentials==="omit"&&(P.withCredentials=!1),"responseType"in P&&(c.blob?P.responseType="blob":c.arrayBuffer&&(P.responseType="arraybuffer")),x&&typeof x.headers=="object"&&!(x.headers instanceof g||a.Headers&&x.headers instanceof a.Headers)){var ee=[];Object.getOwnPropertyNames(x.headers).forEach(function(Q){ee.push(f(Q)),P.setRequestHeader(Q,h(x.headers[Q]))}),$.headers.forEach(function(Q,te){ee.indexOf(te)===-1&&P.setRequestHeader(te,Q)})}else $.headers.forEach(function(Q,te){P.setRequestHeader(te,Q)});$.signal&&($.signal.addEventListener("abort",M),P.onreadystatechange=function(){P.readyState===4&&$.signal.removeEventListener("abort",M)}),P.send(typeof $._bodyInit>"u"?null:$._bodyInit)})}return G.polyfill=!0,a.fetch||(a.fetch=G,a.Headers=g,a.Request=C,a.Response=F),o.Headers=g,o.Request=C,o.Response=F,o.fetch=G,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t})(Zm,Zm.exports);var zQ=Zm.exports;const YE=Ul(zQ);var HQ=Object.defineProperty,qQ=Object.defineProperties,VQ=Object.getOwnPropertyDescriptors,XE=Object.getOwnPropertySymbols,GQ=Object.prototype.hasOwnProperty,WQ=Object.prototype.propertyIsEnumerable,JE=(e,t,n)=>t in e?HQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ZE=(e,t)=>{for(var n in t||(t={}))GQ.call(t,n)&&JE(e,n,t[n]);if(XE)for(var n of XE(t))WQ.call(t,n)&&JE(e,n,t[n]);return e},e2=(e,t)=>qQ(e,VQ(t));const KQ={Accept:"application/json","Content-Type":"application/json"},QQ="POST",t2={headers:KQ,method:QQ},n2=10;let Sr=class{constructor(t,n=!1){if(this.url=t,this.disableProviderPing=n,this.events=new En.EventEmitter,this.isAvailable=!1,this.registering=!1,!vE(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t){this.isAvailable||await this.register();try{const n=_i(t),r=await(await YE(this.url,e2(ZE({},t2),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(t.id,n)}}async register(t=this.url){if(!vE(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));r()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const n=_i({id:1,jsonrpc:"2.0",method:"test",params:[]});await YE(t,e2(ZE({},t2),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const n=typeof t.data=="string"?ro(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n),i=r.message||r.toString(),s=Sh(t,i);this.events.emit("payload",s)}parseError(t,n=this.url){return NC(t,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>n2&&this.events.setMaxListeners(n2)}};const r2="error",YQ="wss://relay.walletconnect.org",XQ="wc",JQ="universal_provider",Yu=`${XQ}@2:${JQ}:`,sT="https://rpc.walletconnect.org/v1/",Qo="generic",ZQ=`${sT}bundler`,ir={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function lw(e){return e==null||typeof e!="object"&&typeof e!="function"}function oT(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function aT(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const eY="[object RegExp]",cT="[object String]",lT="[object Number]",uT="[object Boolean]",dT="[object Arguments]",tY="[object Symbol]",nY="[object Date]",rY="[object Map]",iY="[object Set]",sY="[object Array]",oY="[object ArrayBuffer]",aY="[object Object]",cY="[object DataView]",lY="[object Uint8Array]",uY="[object Uint8ClampedArray]",dY="[object Uint16Array]",fY="[object Uint32Array]",hY="[object Int8Array]",pY="[object Int16Array]",gY="[object Int32Array]",mY="[object Float32Array]",yY="[object Float64Array]";function uw(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function wY(e,t){return la(e,void 0,e,new Map,t)}function la(e,t,n,r=new Map,i=void 0){const s=i==null?void 0:i(e,t,n,r);if(s!=null)return s;if(lw(e))return e;if(r.has(e))return r.get(e);if(Array.isArray(e)){const o=new Array(e.length);r.set(e,o);for(let a=0;a<e.length;a++)o[a]=la(e[a],a,n,r,i);return Object.hasOwn(e,"index")&&(o.index=e.index),Object.hasOwn(e,"input")&&(o.input=e.input),o}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const o=new RegExp(e.source,e.flags);return o.lastIndex=e.lastIndex,o}if(e instanceof Map){const o=new Map;r.set(e,o);for(const[a,c]of e)o.set(a,la(c,a,n,r,i));return o}if(e instanceof Set){const o=new Set;r.set(e,o);for(const a of e)o.add(la(a,void 0,n,r,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(e))return e.subarray();if(uw(e)){const o=new(Object.getPrototypeOf(e)).constructor(e.length);r.set(e,o);for(let a=0;a<e.length;a++)o[a]=la(e[a],a,n,r,i);return o}if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const o=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return r.set(e,o),Ns(o,e,n,r,i),o}if(typeof File<"u"&&e instanceof File){const o=new File([e],e.name,{type:e.type});return r.set(e,o),Ns(o,e,n,r,i),o}if(e instanceof Blob){const o=new Blob([e],{type:e.type});return r.set(e,o),Ns(o,e,n,r,i),o}if(e instanceof Error){const o=new e.constructor;return r.set(e,o),o.message=e.message,o.name=e.name,o.stack=e.stack,o.cause=e.cause,Ns(o,e,n,r,i),o}if(typeof e=="object"&&vY(e)){const o=Object.create(Object.getPrototypeOf(e));return r.set(e,o),Ns(o,e,n,r,i),o}return e}function Ns(e,t,n=e,r,i){const s=[...Object.keys(t),...oT(t)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(e,a);(c==null||c.writable)&&(e[a]=la(t[a],a,n,r,i))}}function vY(e){switch(aT(e)){case dT:case sY:case oY:case cY:case uT:case nY:case mY:case yY:case hY:case pY:case gY:case rY:case lT:case aY:case eY:case iY:case cT:case tY:case lY:case uY:case dY:case fY:return!0;default:return!1}}function bY(e,t){return wY(e,(n,r,i,s)=>{if(typeof e=="object")switch(Object.prototype.toString.call(e)){case lT:case cT:case uT:{const o=new e.constructor(e==null?void 0:e.valueOf());return Ns(o,e),o}case dT:{const o={};return Ns(o,e),o.length=e.length,o[Symbol.iterator]=e[Symbol.iterator],o}default:return}})}function i2(e){return bY(e)}function s2(e){return e!==null&&typeof e=="object"&&aT(e)==="[object Arguments]"}function o2(e){return typeof e=="object"&&e!==null}function EY(){}function _Y(e){return uw(e)}function SY(e){var n;if(typeof e!="object"||e==null)return!1;if(Object.getPrototypeOf(e)===null)return!0;if(Object.prototype.toString.call(e)!=="[object Object]"){const r=e[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))!=null&&n.writable)?!1:e.toString()===`[object ${r}]`}let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function xY(e){if(lw(e))return e;if(Array.isArray(e)||uw(e)||e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);const t=Object.getPrototypeOf(e),n=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new n(e);if(e instanceof RegExp){const r=new n(e);return r.lastIndex=e.lastIndex,r}if(e instanceof DataView)return new n(e.buffer.slice(0));if(e instanceof Error){const r=new n(e.message);return r.stack=e.stack,r.name=e.name,r.cause=e.cause,r}if(typeof File<"u"&&e instanceof File)return new n([e],e.name,{type:e.type,lastModified:e.lastModified});if(typeof e=="object"){const r=Object.create(t);return Object.assign(r,e)}return e}function IY(e,...t){const n=t.slice(0,-1),r=t[t.length-1];let i=e;for(let s=0;s<n.length;s++){const o=n[s];i=ey(i,o,r,new Map)}return i}function ey(e,t,n,r){if(lw(e)&&(e=Object(e)),t==null||typeof t!="object")return e;if(r.has(t))return xY(r.get(t));if(r.set(t,e),Array.isArray(t)){t=t.slice();for(let s=0;s<t.length;s++)t[s]=t[s]??void 0}const i=[...Object.keys(t),...oT(t)];for(let s=0;s<i.length;s++){const o=i[s];let a=t[o],c=e[o];if(s2(a)&&(a={...a}),s2(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=i2(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let f=0;f<d.length;f++){const h=d[f];u[h]=c[h]}c=u}else c=[];const l=n(c,a,o,e,t,r);l!=null?e[o]=l:Array.isArray(a)||o2(c)&&o2(a)?e[o]=ey(c,a,n,r):c==null&&SY(a)?e[o]=ey({},a,n,r):c==null&&_Y(a)?e[o]=i2(a):(c===void 0||a!==void 0)&&(e[o]=a)}return e}function AY(e,...t){return IY(e,...t,EY)}var CY=Object.defineProperty,TY=Object.defineProperties,kY=Object.getOwnPropertyDescriptors,a2=Object.getOwnPropertySymbols,RY=Object.prototype.hasOwnProperty,$Y=Object.prototype.propertyIsEnumerable,c2=(e,t,n)=>t in e?CY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xu=(e,t)=>{for(var n in t||(t={}))RY.call(t,n)&&c2(e,n,t[n]);if(a2)for(var n of a2(t))$Y.call(t,n)&&c2(e,n,t[n]);return e},OY=(e,t)=>TY(e,kY(t));function Bn(e,t,n){var r;const i=ba(e);return((r=t.rpcMap)==null?void 0:r[i.reference])||`${sT}?chainId=${i.namespace}:${i.reference}&projectId=${n}`}function vo(e){return e.includes(":")?e.split(":")[1]:e}function fT(e){return e.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function PY(e,t){const n=Object.keys(t.namespaces).filter(i=>i.includes(e));if(!n.length)return[];const r=[];return n.forEach(i=>{const s=t.namespaces[i].accounts;r.push(...s)}),r}function Ju(e={},t={}){const n=l2(e),r=l2(t);return AY(n,r)}function l2(e){var t,n,r,i,s;const o={};if(!qr(e))return o;for(const[a,c]of Object.entries(e)){const l=mh(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],f=c.rpcMap||{},h=ca(a);o[h]=OY(Xu(Xu({},o[h]),c),{chains:Hr(l,(t=o[h])==null?void 0:t.chains),methods:Hr(u,(n=o[h])==null?void 0:n.methods),events:Hr(d,(r=o[h])==null?void 0:r.events)}),(qr(f)||qr(((i=o[h])==null?void 0:i.rpcMap)||{}))&&(o[h].rpcMap=Xu(Xu({},f),(s=o[h])==null?void 0:s.rpcMap))}return o}function u2(e){return e.includes(":")?e.split(":")[2]:e}function d2(e){const t={};for(const[n,r]of Object.entries(e)){const i=r.methods||[],s=r.events||[],o=r.accounts||[],a=mh(n)?[n]:r.chains?r.chains:fT(r.accounts);t[n]={chains:a,methods:i,events:s,accounts:o}}return t}function Kp(e){return typeof e=="number"?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}const hT={},_e=e=>hT[e],Qp=(e,t)=>{hT[e]=t};var NY=Object.defineProperty,f2=Object.getOwnPropertySymbols,DY=Object.prototype.hasOwnProperty,UY=Object.prototype.propertyIsEnumerable,h2=(e,t,n)=>t in e?NY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p2=(e,t)=>{for(var n in t||(t={}))DY.call(t,n)&&h2(e,n,t[n]);if(f2)for(var n of f2(t))UY.call(t,n)&&h2(e,n,t[n]);return e};const g2="eip155",BY=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],LY=e=>e&&e.startsWith("0x")?BigInt(e).toString(10):e,Yp=e=>e&&e.startsWith("0x")?e:`0x${BigInt(e).toString(16)}`,m2=e=>Object.keys(e).filter(t=>BY.includes(t)).reduce((t,n)=>(t[n]=e[n],t),{}),FY=(e,t,n)=>{const{sessionProperties:r={},scopedProperties:i={}}=e,s={};if(!qr(i)&&!qr(r))return;const o=m2(r);for(const a of n){const c=LY(a);if(!c)continue;s[Yp(c)]=o;const l=i==null?void 0:i[`${g2}:${c}`];if(l){const u=l==null?void 0:l[`${g2}:${c}:${t}`];s[Yp(c)]=p2(p2({},s[Yp(c)]),m2(u||l))}}for(const[a,c]of Object.entries(s))Object.keys(c).length===0&&delete s[a];return Object.keys(s).length>0?s:void 0};var jY=Object.defineProperty,MY=(e,t,n)=>t in e?jY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Do=(e,t,n)=>MY(e,typeof t!="symbol"?t+"":t,n);class zY{constructor(t){Do(this,"name","polkadot"),Do(this,"client"),Do(this,"httpProviders"),Do(this,"events"),Do(this,"namespace"),Do(this,"chainId"),this.namespace=t.namespace,this.events=_e("events"),this.client=_e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(ir.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=vo(n);t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||Bn(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new rr(new Sr(r,_e("disableProviderPing")))}}var HY=Object.defineProperty,qY=Object.defineProperties,VY=Object.getOwnPropertyDescriptors,y2=Object.getOwnPropertySymbols,GY=Object.prototype.hasOwnProperty,WY=Object.prototype.propertyIsEnumerable,ty=(e,t,n)=>t in e?HY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w2=(e,t)=>{for(var n in t||(t={}))GY.call(t,n)&&ty(e,n,t[n]);if(y2)for(var n of y2(t))WY.call(t,n)&&ty(e,n,t[n]);return e},v2=(e,t)=>qY(e,VY(t)),Uo=(e,t,n)=>ty(e,typeof t!="symbol"?t+"":t,n);class KY{constructor(t){Uo(this,"name","eip155"),Uo(this,"client"),Uo(this,"chainId"),Uo(this,"namespace"),Uo(this,"httpProviders"),Uo(this,"events"),this.namespace=t.namespace,this.events=_e("events"),this.client=_e("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(t);case"wallet_getCallsStatus":return await this.getCallStatus(t)}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(parseInt(t),n),this.chainId=parseInt(t),this.events.emit(ir.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,n){const r=n||Bn(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new rr(new Sr(r,_e("disableProviderPing")))}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=parseInt(vo(n));t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}async handleSwitchChain(t){var n,r;let i=t.request.params?(n=t.request.params[0])==null?void 0:n.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:i}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}async getCapabilities(t){var n,r,i,s,o;const a=(r=(n=t.request)==null?void 0:n.params)==null?void 0:r[0],c=((s=(i=t.request)==null?void 0:i.params)==null?void 0:s[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const l=this.client.session.get(t.topic),u=((o=l==null?void 0:l.sessionProperties)==null?void 0:o.capabilities)||{},d=`${a}${c.join(",")}`,f=u==null?void 0:u[d];if(f)return f;let h;try{h=FY(l,a,c)}catch(g){console.warn("Failed to extract capabilities from session",g)}if(h)return h;const p=await this.client.request(t);try{await this.client.session.update(t.topic,{sessionProperties:v2(w2({},l.sessionProperties||{}),{capabilities:v2(w2({},u||{}),{[d]:p})})})}catch(g){console.warn("Failed to update session with capabilities",g)}return p}async getCallStatus(t){var n,r;const i=this.client.session.get(t.topic),s=(n=i.sessionProperties)==null?void 0:n.bundler_name;if(s){const a=this.getBundlerUrl(t.chainId,s);try{return await this.getUserOperationReceipt(a,t)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=i.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,t)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(t.request.method))return await this.client.request(t);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(t,n){var r;const i=new URL(t),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ji("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(t,n){return`${ZQ}?projectId=${this.client.core.projectId}&chainId=${t}&bundler=${n}`}}var QY=Object.defineProperty,YY=(e,t,n)=>t in e?QY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bo=(e,t,n)=>YY(e,typeof t!="symbol"?t+"":t,n);class XY{constructor(t){Bo(this,"name","solana"),Bo(this,"client"),Bo(this,"httpProviders"),Bo(this,"events"),Bo(this,"namespace"),Bo(this,"chainId"),this.namespace=t.namespace,this.events=_e("events"),this.client=_e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(ir.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=vo(n);t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||Bn(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new rr(new Sr(r,_e("disableProviderPing")))}}var JY=Object.defineProperty,ZY=(e,t,n)=>t in e?JY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lo=(e,t,n)=>ZY(e,typeof t!="symbol"?t+"":t,n);class eX{constructor(t){Lo(this,"name","cosmos"),Lo(this,"client"),Lo(this,"httpProviders"),Lo(this,"events"),Lo(this,"namespace"),Lo(this,"chainId"),this.namespace=t.namespace,this.events=_e("events"),this.client=_e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(ir.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=vo(n);t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||Bn(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new rr(new Sr(r,_e("disableProviderPing")))}}var tX=Object.defineProperty,nX=(e,t,n)=>t in e?tX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fo=(e,t,n)=>nX(e,typeof t!="symbol"?t+"":t,n);class rX{constructor(t){Fo(this,"name","algorand"),Fo(this,"client"),Fo(this,"httpProviders"),Fo(this,"events"),Fo(this,"namespace"),Fo(this,"chainId"),this.namespace=t.namespace,this.events=_e("events"),this.client=_e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(!this.httpProviders[t]){const r=n||Bn(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.chainId=t,this.events.emit(ir.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||Bn(t,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new rr(new Sr(r,_e("disableProviderPing")))}}var iX=Object.defineProperty,sX=(e,t,n)=>t in e?iX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jo=(e,t,n)=>sX(e,typeof t!="symbol"?t+"":t,n);class oX{constructor(t){jo(this,"name","cip34"),jo(this,"client"),jo(this,"httpProviders"),jo(this,"events"),jo(this,"namespace"),jo(this,"chainId"),this.namespace=t.namespace,this.events=_e("events"),this.client=_e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(ir.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),i=vo(n);t[i]=this.createHttpProvider(i,r)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}getCardanoRPCUrl(t){const n=this.namespace.rpcMap;if(n)return n[t]}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||this.getCardanoRPCUrl(t);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new rr(new Sr(r,_e("disableProviderPing")))}}var aX=Object.defineProperty,cX=(e,t,n)=>t in e?aX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mo=(e,t,n)=>cX(e,typeof t!="symbol"?t+"":t,n);class lX{constructor(t){Mo(this,"name","elrond"),Mo(this,"client"),Mo(this,"httpProviders"),Mo(this,"events"),Mo(this,"namespace"),Mo(this,"chainId"),this.namespace=t.namespace,this.events=_e("events"),this.client=_e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(ir.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=vo(n);t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||Bn(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new rr(new Sr(r,_e("disableProviderPing")))}}var uX=Object.defineProperty,dX=(e,t,n)=>t in e?uX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zo=(e,t,n)=>dX(e,typeof t!="symbol"?t+"":t,n);class fX{constructor(t){zo(this,"name","multiversx"),zo(this,"client"),zo(this,"httpProviders"),zo(this,"events"),zo(this,"namespace"),zo(this,"chainId"),this.namespace=t.namespace,this.events=_e("events"),this.client=_e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(ir.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;const i=vo(n);t[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||Bn(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new rr(new Sr(r,_e("disableProviderPing")))}}var hX=Object.defineProperty,pX=(e,t,n)=>t in e?hX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ho=(e,t,n)=>pX(e,typeof t!="symbol"?t+"":t,n);class gX{constructor(t){Ho(this,"name","near"),Ho(this,"client"),Ho(this,"httpProviders"),Ho(this,"events"),Ho(this,"namespace"),Ho(this,"chainId"),this.namespace=t.namespace,this.events=_e("events"),this.client=_e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(this.chainId=t,!this.httpProviders[t]){const r=n||Bn(`${this.name}:${t}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(ir.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||Bn(t,this.namespace);return typeof r>"u"?void 0:new rr(new Sr(r,_e("disableProviderPing")))}}var mX=Object.defineProperty,yX=(e,t,n)=>t in e?mX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qo=(e,t,n)=>yX(e,typeof t!="symbol"?t+"":t,n);class wX{constructor(t){qo(this,"name","tezos"),qo(this,"client"),qo(this,"httpProviders"),qo(this,"events"),qo(this,"namespace"),qo(this,"chainId"),this.namespace=t.namespace,this.events=_e("events"),this.client=_e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(this.chainId=t,!this.httpProviders[t]){const r=n||Bn(`${this.name}:${t}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(ir.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(n=>{t[n]=this.createHttpProvider(n)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||Bn(t,this.namespace);return typeof r>"u"?void 0:new rr(new Sr(r))}}var vX=Object.defineProperty,bX=(e,t,n)=>t in e?vX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vo=(e,t,n)=>bX(e,typeof t!="symbol"?t+"":t,n);class EX{constructor(t){Vo(this,"name",Qo),Vo(this,"client"),Vo(this,"httpProviders"),Vo(this,"events"),Vo(this,"namespace"),Vo(this,"chainId"),this.namespace=t.namespace,this.events=_e("events"),this.client=_e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(t.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(t.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(t.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(t.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider(t.chainId).request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(ir.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var t,n;const r={};return(n=(t=this.namespace)==null?void 0:t.accounts)==null||n.forEach(i=>{const s=ba(i);r[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),r}getHttpProvider(t){const n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||Bn(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new rr(new Sr(r,_e("disableProviderPing")))}}var _X=Object.defineProperty,SX=Object.defineProperties,xX=Object.getOwnPropertyDescriptors,b2=Object.getOwnPropertySymbols,IX=Object.prototype.hasOwnProperty,AX=Object.prototype.propertyIsEnumerable,ny=(e,t,n)=>t in e?_X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zu=(e,t)=>{for(var n in t||(t={}))IX.call(t,n)&&ny(e,n,t[n]);if(b2)for(var n of b2(t))AX.call(t,n)&&ny(e,n,t[n]);return e},Xp=(e,t)=>SX(e,xX(t)),Hn=(e,t,n)=>ny(e,typeof t!="symbol"?t+"":t,n);class dw{constructor(t){Hn(this,"client"),Hn(this,"namespaces"),Hn(this,"optionalNamespaces"),Hn(this,"sessionProperties"),Hn(this,"scopedProperties"),Hn(this,"events",new Gf),Hn(this,"rpcProviders",{}),Hn(this,"session"),Hn(this,"providerOpts"),Hn(this,"logger"),Hn(this,"uri"),Hn(this,"disableProviderPing",!1),this.providerOpts=t,this.logger=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:iu(Eh({level:(t==null?void 0:t.logger)||r2})),this.disableProviderPing=(t==null?void 0:t.disableProviderPing)||!1}static async init(t){const n=new dw(t);return await n.initialize(),n}async request(t,n,r){const[i,s]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:Zu({},t),chainId:`${i}:${s}`,topic:this.session.topic,expiry:r})}sendAsync(t,n,r,i){const s=new Date().getTime();this.request(t,r,i).then(o=>n(null,_h(s,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:qe("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}async authenticate(t,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(t),await this.cleanupPendingPairings();const{uri:r,response:i}=await this.client.authenticate(t,n);r&&(this.uri=r,this.events.emit("display_uri",r));const s=await i();if(this.session=s.session,this.session){const o=d2(this.session.namespaces);this.namespaces=Ju(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}removeListener(t,n){this.events.removeListener(t,n)}off(t,n){this.events.off(t,n)}get isWalletConnect(){return!0}async pair(t){const{uri:n,approval:r}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const i=await r();this.session=i;const s=d2(i.namespaces);return this.namespaces=Ju(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(t,n){try{if(!this.session)return;const[r,i]=this.validateChain(t),s=this.getProvider(r);s.name===Qo?s.setDefaultChain(`${r}:${i}`,n):s.setDefaultChain(i,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(gi(n)){for(const r of n)t.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var t,n;if(this.client=this.providerOpts.client||await MQ.init({core:this.providerOpts.core,logger:this.providerOpts.logger||r2,relayUrl:this.providerOpts.relayUrl||YQ,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(t=this.providerOpts)==null?void 0:t.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(n=>ca(n)))];Qp("client",this.client),Qp("events",this.events),Qp("disableProviderPing",this.disableProviderPing),t.forEach(n=>{if(!this.session)return;const r=PY(n,this.session),i=fT(r),s=Ju(this.namespaces,this.optionalNamespaces),o=Xp(Zu({},s[n]),{accounts:r,chains:i});switch(n){case"eip155":this.rpcProviders[n]=new KY({namespace:o});break;case"algorand":this.rpcProviders[n]=new rX({namespace:o});break;case"solana":this.rpcProviders[n]=new XY({namespace:o});break;case"cosmos":this.rpcProviders[n]=new eX({namespace:o});break;case"polkadot":this.rpcProviders[n]=new zY({namespace:o});break;case"cip34":this.rpcProviders[n]=new oX({namespace:o});break;case"elrond":this.rpcProviders[n]=new lX({namespace:o});break;case"multiversx":this.rpcProviders[n]=new fX({namespace:o});break;case"near":this.rpcProviders[n]=new gX({namespace:o});break;case"tezos":this.rpcProviders[n]=new wX({namespace:o});break;default:this.rpcProviders[Qo]?this.rpcProviders[Qo].updateNamespace(o):this.rpcProviders[Qo]=new EX({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{var n;const{topic:r}=t;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{var n;const{params:r,topic:i}=t;if(i!==((n=this.session)==null?void 0:n.topic))return;const{event:s}=r;if(s.name==="accountsChanged"){const o=s.data;o&&gi(o)&&this.events.emit("accountsChanged",o.map(u2))}else if(s.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=ca(o),l=Kp(o)!==Kp(a)?`${c}:${Kp(a)}`:o;this.onChainChanged(l)}else this.events.emit(s.name,s.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:n})=>{var r,i;if(t!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:s}=n,o=(i=this.client)==null?void 0:i.session.get(t);this.session=Xp(Zu({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:n})}),this.client.on("session_delete",async t=>{var n;t.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",Xp(Zu({},qe("USER_DISCONNECTED")),{data:t.topic})))}),this.on(ir.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){return this.rpcProviders[t]||this.rpcProviders[Qo]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var n;this.getProvider(t).updateNamespace((n=this.session)==null?void 0:n.namespaces[t])})}setNamespaces(t){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:i,scopedProperties:s}=t;this.optionalNamespaces=Ju(n,r),this.sessionProperties=i,this.scopedProperties=s}validateChain(t){const[n,r]=(t==null?void 0:t.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>ca(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const i=ca(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}async onChainChanged(t,n=!1){if(!this.namespaces)return;const[r,i]=this.validateChain(t);if(!i)return;this.updateNamespaceChain(r,i),this.events.emit("chainChanged",i);const s=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:s,newChainId:t}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:t,previousChainId:n,newChainId:r}){var i,s;try{if(n===r)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[t])==null?void 0:s.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(u2);if(!gi(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(t,n){if(!this.namespaces)return;const r=this.namespaces[t]?t:`${t}:${n}`,i={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(t,n){var r;const i=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Yu}/${t}${i}`,n)}async getFromStore(t){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Yu}/${t}${r}`)}async deleteFromStore(t){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Yu}/${t}${r}`)}async cleanupStorage(){var t;try{if(((t=this.client)==null?void 0:t.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Yu)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}}const CX=dw;let jr=function(e){return e.FLOW_AUTHN="flow_authn",e.FLOW_PRE_AUTHZ="flow_pre_authz",e.FLOW_AUTHZ="flow_authz",e.FLOW_USER_SIGN="flow_user_sign",e}({}),pT=function(e){return e.SESSION_REQUEST="session_proposal",e.SIGNING_REQUEST="signing_request",e}({});const gT="fcl-plugin-service-walletconnect",mT="WC/RPC",TX="pre-authz";function kX(){return typeof navigator<"u"&&/android/i.test(navigator.userAgent)}function RX(){return typeof navigator<"u"&&/iPhone|iPod/.test(navigator.userAgent)}function $X(){return typeof navigator<"u"&&/iPad/.test(navigator.userAgent)}function OX(){return RX()||$X()}function Dl(){return kX()||OX()}function fw(e){if(e.startsWith("http")){const t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noreferrer noopener",t.click()}else window.open(e,"_blank")}function PX(e){var r;let{service:t,user:n}=e;return!(!Dl()||t.endpoint===jr.FLOW_AUTHN||t.endpoint===jr.FLOW_AUTHZ&&((r=n==null?void 0:n.services)!=null&&r.find(i=>i.method===mT&&i.type===TX)))}function NX(e){if(!e)return;const t=new Image;t.src=e}async function yT(e){let{provider:t,existingPairing:n}=e;const r=await fo(),i={flow:{methods:[jr.FLOW_AUTHN,jr.FLOW_PRE_AUTHZ,jr.FLOW_AUTHZ,jr.FLOW_USER_SIGN],chains:[`flow:${r}`],events:["chainChanged","accountsChanged"]}};let s;const o=new Promise((c,l)=>{const u=d=>{c(d)};t.on("display_uri",u),s=()=>{t.removeListener("display_uri",u),l(new Error("WalletConnect Session Request aborted"))}}),a=t.connect({pairingTopic:n==null?void 0:n.topic,namespaces:i}).finally(()=>{s()});return{uri:await o,approval:()=>a}}const wT=async e=>{var h,p,g,v,m,w,E;let{method:t,body:n,session:r,provider:i,isExternal:s,abortSignal:o,disableNotifications:a}=e;const[c,l,u]=DX(r),d=JSON.stringify({...n,addr:l,address:u}),f=await Promise.race([i.client.request({request:{method:t,params:[d]},chainId:c,topic:(h=i.session)==null?void 0:h.topic}),new Promise((A,T)=>{o!=null&&o.aborted&&T(new Error("WalletConnect Request aborted")),o==null||o.addEventListener("abort",()=>{T(new Error("WalletConnect Request aborted"))})})]);if(!(typeof f!="object"||f==null))switch(f.status){case"APPROVED":let A=function(T){return T.method==="WC/RPC"?{...T,params:{...T.params,...s?{externalProvider:r.topic}:{},...a?{disableNotifications:a}:{}}}:T};if(t===jr.FLOW_AUTHN){const T=(((p=f==null?void 0:f.data)==null?void 0:p.services)??[]).map(A);return{...f.data?f.data:{},services:T}}return t===jr.FLOW_PRE_AUTHZ?{...f.data,...(g=f.data)!=null&&g.proposer?{proposer:A(f.data.proposer)}:{},payer:[...(m=(v=f.data)==null?void 0:v.payer)==null?void 0:m.map(A)],authorization:[...(E=(w=f.data)==null?void 0:w.authorization)==null?void 0:E.map(A)]}:f.data;case"DECLINED":throw new Error(`Declined: ${f.reason||"No reason supplied"}`);case"REDIRECT":return f.data;default:throw new Error("Declined: No reason supplied")}};function DX(e){const[t,n,r]=Object.values(e.namespaces).map(o=>o.accounts).flat().filter(o=>o.startsWith("flow:"))[0].split(":");return[`${t}:${n}`,r,r]}var UX='*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.14 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{-webkit-text-size-adjust:100%;font-feature-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-feature-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.fixed{position:fixed}.bottom-3{bottom:.75rem}.left-3{left:.75rem}.right-3{right:.75rem}.z-\\[2147483647\\]{z-index:2147483647}.mx-auto{margin-left:auto;margin-right:auto}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.mt-1{margin-top:.25rem}.flex{display:flex}.inline-flex{display:inline-flex}.h-10{height:2.5rem}.h-5{height:1.25rem}.w-10{width:2.5rem}.w-5{width:1.25rem}.max-w-sm{max-width:24rem}.grow{flex-grow:1}@keyframes slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slideUp{animation:slideUp .2s ease-out forwards}.self-start{align-self:flex-start}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.border{border-width:1px}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235/var(--tw-border-opacity))}.border-transparent{border-color:transparent}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.p-0{padding:0}.p-2{padding:.5rem}.p-4{padding:1rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-medium{font-weight:500}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity))}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:text-gray-500:hover{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.focus\\:border-transparent:focus{border-color:transparent}.focus\\:ring-0:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.dark\\:border-gray-600:is(.dark *){--tw-border-opacity:1;border-color:rgb(75 85 99/var(--tw-border-opacity))}.dark\\:bg-gray-700:is(.dark *){--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity))}.dark\\:text-gray-100:is(.dark *){--tw-text-opacity:1;color:rgb(243 244 246/var(--tw-text-opacity))}.dark\\:text-gray-200:is(.dark *){--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.dark\\:text-gray-300:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}.dark\\:hover\\:text-gray-300:hover:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}@media (min-width:768px){.md\\:bottom-4{bottom:1rem}.md\\:left-auto{left:auto}.md\\:right-4{right:1rem}.md\\:self-start{align-self:flex-start}}';function BX(e){let{title:t,message:n,icon:r,onClick:i,onDismiss:s,animate:o}=e;return Rr("div",{className:`fixed bottom-3 left-3 right-3 mx-auto z-[2147483647] flex max-w-sm
        overflow-hidden rounded-lg border border-gray-200 bg-white p-4 shadow-lg
        md:bottom-4 md:left-auto md:right-4 dark:bg-gray-700 dark:border-gray-600
        ${o?"animate-slideUp":""}`,role:"alert",onClick:a=>{i&&(a.stopPropagation(),i==null||i())},children:[r&&Rr("img",{className:"h-10 w-10 self-center rounded-md md:self-start",src:r,alt:t}),Rr("div",{className:"ml-3 grow",children:[Rr("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t}),Rr("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-300",children:n})]}),Rr("button",{className:`ml-2 inline-flex rounded-full text-gray-400 hover:text-gray-500 focus:ring-0
          dark:text-gray-200 dark:hover:text-gray-300 ${Dl()?"self-center p-2":"self-start p-0 bg-transparent border-transparent focus:border-transparent"}`,onClick:a=>{a.stopPropagation(),s==null||s()},children:[Rr("span",{className:"sr-only",children:"Close"}),Rr("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Rr("path",{fillRule:"evenodd",d:"M14.354 5.646a.5.5 0 00-.708 0L10 9.293 5.354 4.646a.5.5 0 00-.708.708L9.293 10l-4.647 4.646a.5.5 0 00.708.708L10 10.707l4.646 4.647a.5.5 0 00.708-.708L10.707 10l4.647-4.646a.5.5 0 000-.708z"})})]})]})}let Ic=null,LX=0,Go=null;function FX(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=document.createElement("div");t.appendChild(n),document.body.appendChild(e);const r=document.createElement("style");r.textContent=UX,t.appendChild(r);const i=window.matchMedia("(prefers-color-scheme: dark)"),s=()=>{n.classList.toggle("dark",i.matches)};return i.addEventListener("change",s),s(),n}function jX(e){let{title:t,message:n,icon:r,onClick:i,onDismiss:s,debounceDelay:o=0}=e;Ic||(Ic=FX());const a=!Go;Go&&(clearTimeout(Go),Go=null),iE(Rr(BX,{title:t,message:n,icon:r,onClick:i,onDismiss:()=>{s==null||s(),c()},animate:a},LX++),Ic);function c(){Ic&&iE(null,Ic)}return{dismiss:()=>{Go=setTimeout(()=>{Go=null,c()},o)}}}var MX="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3e%3c!--!Font Awesome Free 6.7.1 by %40fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons%2c Inc.--%3e%3cpath d='M16 64C16 28.7 44.7 0 80 0L304 0c35.3 0 64 28.7 64 64l0 384c0 35.3-28.7 64-64 64L80 512c-35.3 0-64-28.7-64-64L16 64zM224 448a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM304 64L80 64l0 320 224 0 0-320z'/%3e%3c/svg%3e";function zX(e){const t=new Set;let n=e;return{subscribe:o=>(t.add(o),()=>{t.delete(o)}),setState:o=>{n=o,t.forEach(a=>a(n))},getState:()=>n}}let ed=zX({});const HX=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{wcRequestHook:null,pairingModalOverride:null,disableNotifications:!1};return{name:gT,f_type:"ServicePlugin",type:"discovery-service",serviceStrategy:{method:mT,exec:qX(e,t,ZI(()=>import("./index-B3DVg14U.js").then(n=>n.i),[]).then(n=>n.WalletConnectModal))},services:[]}},qX=(e,t,n)=>async r=>{var j,L,C,U,B,F;let{service:i,body:s,opts:o,abortSignal:a,user:c}=r;NX((j=i.provider)==null?void 0:j.icon);const{wcRequestHook:l,pairingModalOverride:u,disableNotifications:d}=t,f=((L=i.params)==null?void 0:L.disableNotifications)??d,h=await WX({provider:e,externalProviderOrTopic:(C=i.params)==null?void 0:C.externalProvider});V(!!h,"WalletConnect is not initialized");const{provider:p,isExternal:g}=h;let v=p.session??null,m;const w=i.endpoint,E=D(i);if(v!=null&&v.topic&&(v==null?void 0:v.topic)===((U=i.params)==null?void 0:U.externalProvider)&&w===jr.FLOW_AUTHN)return c;v==null&&(v=await new Promise((q,G)=>{function S(){G("Declined: Externally Halted")}VX(n)({service:i,onClose:S,appLink:E,provider:p,method:w,pairing:m,wcRequestHook:l,pairingModalOverride:u,abortSignal:a}).then(q,G)})),l&&l instanceof Function&&l({type:pT.SIGNING_REQUEST,method:w,service:i,session:v??null,pairing:null,uri:null}),PX({service:i,user:c})&&fw(E);const A=((B=v==null?void 0:v.sessionProperties)==null?void 0:B["fclWc.disableNotificationsOnMobile"])==="true",T=!f&&!A?GX({user:c,service:i}):null;return await wT({method:w,body:s,session:v,provider:p,abortSignal:a,isExternal:g,disableNotifications:(F=i.params)==null?void 0:F.disableNotifications}).finally(()=>T==null?void 0:T.dismiss());function D(q){let{uid:G}=q;return G&&/^(ftp|http|https):\/\/[^ "]+$/.test(G)||we({title:"WalletConnect Service Warning",message:`service.uid should be a valid universal link url. Found: ${G}`,level:$e.warn}),G}};function VX(e){return async t=>{let{service:n,onClose:r,appLink:i,provider:s,method:o,pairing:a,wcRequestHook:c,pairingModalOverride:l,abortSignal:u}=t;const d=s.providerOpts.projectId;V(!!d,"Cannot establish connection, WalletConnect projectId is undefined");let f=null,h=null;try{const{uri:p,approval:g}=await yT({provider:s,existingPairing:a});if(c&&c instanceof Function&&c({type:pT.SESSION_REQUEST,method:o,service:n,session:null,pairing:a??null,uri:p??null}),Dl()){const m=new URLSearchParams({uri:p}).toString();let w=a==null?i+"?"+m:i;fw(w)}else if(!a)if(l)l(p,r);else{h=new(await e)({projectId:d}),h.openModal({uri:p,onClose:r});const m=h.subscribeModal(w=>{w.open===!1&&(r==null||r(),m())})}const v=await Promise.race([g(),new Promise((m,w)=>{u!=null&&u.aborted&&w(new Error("Session request aborted")),u==null||u.addEventListener("abort",()=>{w(new Error("Session request aborted"))})})]);if(v==null)throw new Error("Session request failed");return v}catch(p){throw p instanceof Error&&we({title:`${p.name} Error establishing WalletConnect session`,message:`
          ${p.message}
          uri: ${f}
        `,level:$e.error}),r(),p}finally{h==null||h.closeModal()}}}function GX(e){var s;let{service:t,user:n}=e;const r=(s=n==null?void 0:n.services)==null?void 0:s.find(o=>o.type==="authn"),i=(r==null?void 0:r.provider)||t.provider;return jX({title:(i==null?void 0:i.name)||"Mobile Wallet",message:Dl()?"Tap to view request in app":"Pending request on your mobile device",icon:(i==null?void 0:i.icon)||MX,onClick:Dl()&&t.uid?()=>fw(t.uid):void 0,debounceDelay:t.type==="pre-authz"?500:0})}async function WX(e){var s;let{provider:t,externalProviderOrTopic:n}=e;if(!n){const o=await t;return o?{provider:o,isExternal:!1}:null}if(typeof n!="string"){const o=(s=n.session)==null?void 0:s.topic;if(!o)throw new Error("Cannot resolve provider: UniversalProvider is not initialized");return ed.setState({[o]:n}),{provider:n,isExternal:!0}}const r=n;if(r){let o=ed.getState()[r];if(!o){let a,c;o=await new Promise((l,u)=>{a=ed.subscribe(()=>{const d=ed.getState()[r];d&&l(d)}),c=setTimeout(()=>{u(new Error(`Provider for external topic ${r} not found after 5 seconds`))},5e3)}).finally(()=>{clearTimeout(c),a()})}return{provider:o,isExternal:!0}}const i=await t;return i?{provider:i,isExternal:!1}:null}const KX="wss://relay.walletconnect.com",QX="debug";let Uc=Promise.resolve(null);const YX=async e=>{let{projectId:t,metadata:n}=e;V(t!=null,"FCL Wallet Connect Error: WalletConnect projectId is required");try{return CX.init({logger:QX,relayUrl:KX,projectId:t,metadata:n})}catch(r){throw r instanceof Error&&we({title:`${r.name} fcl-wc Init Client`,message:r.message,level:$e.error}),r}},XX=e=>{const{FclWcServicePlugin:t,providerPromise:n}=JX(e);return q4.authn.update(),{FclWcServicePlugin:t,providerPromise:n}},JX=e=>{if(typeof window>"u")throw new Error("FCL Wallet Connect Plugin can only be initialized in the browser");return Uc=Uc.catch(()=>null).then(n=>n||YX({projectId:e.projectId,metadata:e.metadata})).catch(n=>{throw we({title:"WalletConnect Client Initialization Error",message:n.message?n.message:n,level:$e.error}),n}),{FclWcServicePlugin:HX(Uc,e),providerPromise:Uc}};async function vT(){return Uc.then(e=>{if(!e)throw new Error("WalletConnect client not initialized");return e})}const bT="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",ZX=bT.length;function hw(){let e="",t=32;for(;t--;)e+=bT[Math.random()*ZX|0];return e}const eJ=globalThis.AbortController||require("abort-controller");function tJ(e){const t=new eJ;return e!=null&&e.aborted&&t.abort(),e==null||e.addEventListener("abort",()=>t.abort()),t}let Jp=function(e){return e.NOTIFY_QRCODE_CONNECTING="notifyQrCodeConnecting",e.NOTIFY_QRCODE_CONNECTED="notifyQrCodeConnected",e.NOTIFY_QRCODE_ERROR="notifyQrCodeError",e}({}),E2=function(e){return e.REQUEST_WALLETCONNECT_QRCODE="requestWalletConnectQrCode",e.EXEC_SERVICE="execService",e}({});const _2="APPROVED",nJ=e=>{let{onExecResult:t,execStrategyOpts:n,execStrategyArgs:r,abortSignal:i}=e;return async s=>{var a;let{service:o}=s;try{const c=await nh({...n,service:o,config:n.config,abortSignal:i},...r.slice(1));if((((a=Kr(c))==null?void 0:a.status)||_2)===_2)return t(c),null;throw new Error((c==null?void 0:c.reason)||"Service was declined")}catch(c){throw new Error((c==null?void 0:c.message)||"Service execution failed")}}},rJ=e=>{let{rpc:t,onExecResult:n,authnBody:r,abortSignal:i}=e;const s=iJ({rpc:t,authnBody:r});return async o=>{if(i.aborted)throw new Error("Handler has been terminated");const a=await vT(),{uri:c,approval:l}=await yT({provider:a});return s({uri:c,approval:l,onExecResult:n}),{uri:c}}};function iJ(e){let{rpc:t,authnBody:n}=e;return r=>{let{uri:i,approval:s,onExecResult:o}=r;setTimeout(async()=>{try{const a=await vT(),c=await s();t.notify(Jp.NOTIFY_QRCODE_CONNECTING,{uri:i});const l=await wT({method:jr.FLOW_AUTHN,body:n,session:c,provider:a});t.notify(Jp.NOTIFY_QRCODE_CONNECTED,{uri:i}),o(l)}catch(a){t.notify(Jp.NOTIFY_QRCODE_ERROR,{uri:i,error:a==null?void 0:a.message})}},0)}}function sJ(e){let{onExecResult:t,body:n,opts:r,args:i,abortSignal:s}=e;const o=new C6({notifications:[]});return o.on(E2.REQUEST_WALLETCONNECT_QRCODE,rJ({rpc:o,onExecResult:t,authnBody:n,abortSignal:s})),o.on(E2.EXEC_SERVICE,nJ({onExecResult:t,execStrategyOpts:r,execStrategyArgs:i,abortSignal:s})),{connect:o.connect.bind(o),receive:o.receive.bind(o)}}async function oJ(e){let{customRpc:t,opts:n,args:r,abortSignal:i}=e;const s={...n.config,client:{...n.config.client,discoveryRpcEnabled:!0}};return nh({...n,config:s,customRpc:t,abortSignal:i},...r.slice(1))}const S2="authn";async function aJ(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r]=t,{body:i,abortSignal:s,service:o}=r;if((o==null?void 0:o.type)!==S2)return console.error(`ERROR: Invalid service type for FCL Discovery execStrategyHook, expected "${S2}" but got "${o==null?void 0:o.type}"`),nh(...t);const a=tJ(s);let c;const l=new Promise(async(u,d)=>{const f=sJ({onExecResult:u,body:i,opts:r,args:t,abortSignal:a.signal});c=oJ({customRpc:f,opts:r,args:t,abortSignal:a.signal}).then(u,d)});return await l.catch(()=>{}),await Promise.race([new Promise(u=>setTimeout(u,1e3)),c]).catch(()=>{}),a.abort(),l}const td="FCL_IFRAME",cJ=`
  position:fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  height: 100%;
  width: 100vw;
  display:block;
  background:rgba(0,0,0,0.25);
  z-index: 2147483647;
  box-sizing: border-box;
  color-scheme: light;
`;function ET(e){V(!document.getElementById(td),"Attempt at triggering multiple Frames",{src:e});const t=document.createElement("iframe");t.src=e,t.id=td,t.allow="usb *; hid *; clipboard-write",t.frameBorder="0",t.style.cssText=cJ,document.body.append(t);const n=()=>{document.getElementById(td)&&document.getElementById(td).remove()};return[t.contentWindow,n]}const lJ="FCL_POP";let Cn=null,x2=null;function uJ(e,t,n,r,i){const s=n.top.outerHeight/2+n.top.screenY-i/2,o=n.top.outerWidth/2+n.top.screenX-r/2,a=n.open(e,t,`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${r}, height=${i}, top=${s}, left=${o}`);if(!a)throw new Error("Popup failed to open (was it blocked by a popup blocker?)");return a}function _T(e){return Cn==null||Cn!=null&&Cn.closed?Cn=uJ(e,lJ,window,640,770):(x2!==e&&Cn.location.replace(e),Cn.focus()),x2=e,[Cn,()=>{Cn&&!Cn.closed&&Cn.close(),Cn=null}]}let ln=null,I2=null;function ST(e){if(ln==null||ln!=null&&ln.closed){if(ln=window.open(e,"_blank"),!ln)throw new Error("Tab failed to open (was it blocked by the browser?)")}else I2!==e&&ln.location.replace(e),ln.focus();return I2=e,[ln,()=>{ln&&!ln.closed&&ln.close(),ln=null}]}const dJ=()=>({"discovery.wallet.method.default":"IFRAME/RPC"}),xs=()=>{};function fJ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:xs,close:xs};const n=t.onClose||xs,r=t.onMessage||xs,i=t.onReady||xs,s=t.onResponse||xs,o=t.onCustomRpc||xs;let a,c;const l=ih({close:u,send:d,onReady:i,onResponse:s,onMessage:r,onCustomRpc:o,getSource:()=>a});return window.addEventListener("message",l),[a,c]=ET(Kl(e)),{send:d,close:u};function u(){try{window.removeEventListener("message",l),c(),n()}catch(f){console.error("Frame Close Error",f)}}function d(f){try{a.postMessage(JSON.parse(JSON.stringify(f||{})),"*")}catch(h){console.error("Frame Send Error",f,h)}}}const oo="1.19.0";function hJ(e){let{service:t,body:n,config:r,customRpc:i,abortSignal:s,opts:o}=e;return new Promise((a,c)=>{const l=hw(),u=o.includeOlderJsonRpcCall,{close:d}=fJ(t,{async onReady(f,h){let{send:p}=h;try{p({type:"FCL:VIEW:READY:RESPONSE",fclVersion:oo,body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),p({fclVersion:oo,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),u&&p({jsonrpc:"2.0",id:l,method:"fcl:sign",params:[n,t.params],deprecated:{message:"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),i==null||i.connect({send:g=>{p({type:"FCL:VIEW:CUSTOM_RPC",payload:g})}})}catch(g){throw g}},onResponse(f,h){let{close:p}=h;try{if(typeof f.data!="object")return;const g=Kr(f.data);switch(g.status){case"APPROVED":a(g.data),p();break;case"DECLINED":c(`Declined: ${g.reason||"No reason supplied"}`),p();break;case"REDIRECT":a(g),p();break;default:c("Declined: No reason supplied"),p();break}}catch(g){throw console.error("execIframeRPC onResponse error",g),g}},onMessage(f,h){let{close:p}=h;try{if(typeof f.data!="object"||f.data.jsonrpc!=="2.0"||f.data.id!==l)return;const g=Kr(f.data.result);switch(g.status){case"APPROVED":a(g.data),p();break;case"DECLINED":c(`Declined: ${g.reason||"No reason supplied"}`),p();break;case"REDIRECT":a(g),p();break;default:c("Declined: No reason supplied"),p();break}}catch(g){throw console.error("execIframeRPC onMessage error",g),g}},onClose(){c("Declined: Externally Halted")},onCustomRpc(f){i==null||i.receive(f)}});s&&(s.aborted&&(c("Declined: Aborted"),d()),s.addEventListener("abort",()=>{c("Declined: Aborted"),d()}))})}const Is=()=>{};function pJ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Is,close:Is};const n=t.onClose||Is,r=t.onMessage||Is,i=t.onReady||Is,s=t.onResponse||Is,o=t.onCustomRpc||Is;let a,c;const l=ih({close:d,send:f,onReady:i,onResponse:s,onMessage:r,onCustomRpc:o,getSource:()=>a});window.addEventListener("message",l),[a,c]=_T(Kl(e));const u=setInterval(function(){a&&a.closed&&d()},500);return{send:f,close:d};function d(){try{window.removeEventListener("message",l),clearInterval(u),c(),n()}catch(h){console.error("Popup Close Error",h)}}function f(h){try{a.postMessage(JSON.parse(JSON.stringify(h||{})),"*")}catch(p){console.error("Popup Send Error",h,p)}}}function gJ(e){let{service:t,body:n,config:r,abortSignal:i,customRpc:s,opts:o}=e;return new Promise((a,c)=>{const l=hw(),{redir:u,includeOlderJsonRpcCall:d}=o,{close:f}=pJ(t,{customRpc:s,async onReady(h,p){let{send:g}=p;try{g({fclVersion:oo,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),g({fclVersion:oo,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),d&&g({jsonrpc:"2.0",id:l,method:"fcl:sign",params:[n,t.params]}),s==null||s.connect({send:v=>{g({type:"FCL:VIEW:CUSTOM_RPC",payload:v})}})}catch(v){throw v}},onResponse(h,p){let{close:g}=p;try{if(typeof h.data!="object")return;const v=Kr(h.data);switch(v.status){case"APPROVED":a(v.data),!u&&g();break;case"DECLINED":c(`Declined: ${v.reason||"No reason supplied"}`),g();break;case"REDIRECT":a(v),g();break;default:c("Declined: No reason supplied"),g();break}}catch(v){throw console.error("execPopRPC onResponse error",v),v}},onMessage(h,p){let{close:g}=p;try{if(typeof h.data!="object"||h.data.jsonrpc!=="2.0"||h.data.id!==l)return;const v=Kr(h.data.result);switch(v.status){case"APPROVED":a(v.data),!u&&g();break;case"DECLINED":c(`Declined: ${v.reason||"No reason supplied"}`),g();break;case"REDIRECT":a(v),g();break;default:c("Declined: No reason supplied"),g();break}}catch(v){throw console.error("execPopRPC onMessage error",v),v}},onClose(){c("Declined: Externally Halted")},onCustomRpc(h){s==null||s.receive(h)}});i&&(i.aborted&&(c("Declined: Aborted"),f()),i.addEventListener("abort",()=>{c("Declined: Aborted"),f()}))})}const As=()=>{};function mJ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:As,close:As};const n=t.onClose||As,r=t.onMessage||As,i=t.onReady||As,s=t.onResponse||As,o=t.onCustomRpc||As;let a,c;const l=ih({close:d,send:f,onReady:i,onResponse:s,onMessage:r,onCustomRpc:o,getSource:()=>a});window.addEventListener("message",l),[a,c]=ST(Kl(e));const u=setInterval(function(){a&&a.closed&&d()},500);return{send:f,close:d};function d(){try{window.removeEventListener("message",l),clearInterval(u),c(),n()}catch(h){console.error("Tab Close Error",h)}}function f(h){try{a.postMessage(JSON.parse(JSON.stringify(h||{})),"*")}catch(p){console.error("Tab Send Error",h,p)}}}function yJ(e){let{service:t,body:n,config:r,abortSignal:i,customRpc:s,opts:o}=e;return new Promise((a,c)=>{const l=hw(),{redir:u,includeOlderJsonRpcCall:d}=o,{close:f}=mJ(t,{customRpc:s,async onReady(h,p){let{send:g}=p;try{g({fclVersion:oo,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),g({fclVersion:oo,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),d&&g({jsonrpc:"2.0",id:l,method:"fcl:sign",params:[n,t.params]}),s==null||s.connect({send:v=>{g({type:"FCL:VIEW:CUSTOM_RPC",payload:v})}})}catch(v){throw v}},onResponse(h,p){let{close:g}=p;try{if(typeof h.data!="object")return;const v=Kr(h.data);switch(v.status){case"APPROVED":a(v.data),!u&&g();break;case"DECLINED":c(`Declined: ${v.reason||"No reason supplied"}`),g();break;case"REDIRECT":a(v),g();break;default:c("Declined: No reason supplied"),g();break}}catch(v){throw console.error("execPopRPC onResponse error",v),v}},onMessage(h,p){let{close:g}=p;try{if(typeof h.data!="object"||h.data.jsonrpc!=="2.0"||h.data.id!==l)return;const v=Kr(h.data.result);switch(v.status){case"APPROVED":a(v.data),!u&&g();break;case"DECLINED":c(`Declined: ${v.reason||"No reason supplied"}`),g();break;case"REDIRECT":a(v),g();break;default:c("Declined: No reason supplied"),g();break}}catch(v){throw console.error("execPopRPC onMessage error",v),v}},onClose(){c("Declined: Externally Halted")},onCustomRpc(h){s==null||s.receive(h)}});i&&(i.aborted&&(f(),c("Declined: Aborted")),i.addEventListener("abort",()=>{f(),c("Declined: Aborted")}))})}const Cs=()=>{};function wJ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return{send:Cs,close:Cs};const n=t.onClose||Cs,r=t.onMessage||Cs,i=t.onReady||Cs,s=t.onResponse||Cs,o=t.onCustomRpc||Cs,a=ih({close:c,send:l,onReady:i,onResponse:s,onMessage:r,onCustomRpc:o});return window.addEventListener("message",a),l({service:e}),{send:l,close:c};function c(){try{window.removeEventListener("message",a),n()}catch(u){console.error("Ext Close Error",u)}}function l(u){try{window&&window.postMessage(JSON.parse(JSON.stringify(u||{})),"*")}catch(d){console.error("Ext Send Error",u,d)}}}function vJ(e){let{service:t,body:n,config:r,abortSignal:i,customRpc:s,opts:o}=e;return new Promise((a,c)=>{const{close:l}=wJ(t,{async onReady(u,d){let{send:f}=d;try{f({fclVersion:oo,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),s==null||s.connect({send:h=>{f({type:"FCL:VIEW:CUSTOM_RPC",body:h})}})}catch(h){throw h}},onResponse(u,d){let{close:f}=d;try{if(typeof u.data!="object")return;const h=Kr(u.data);switch(h.status){case"APPROVED":a(h.data),f();break;case"DECLINED":c(`Declined: ${h.reason||"No reason supplied"}`),f();break;case"REDIRECT":a(h),f();break;default:c("Declined: No reason supplied"),f();break}}catch(h){throw console.error("execExtRPC onResponse error",h),h}},onClose(){c("Declined: Externally Halted")},onCustomRpc(u){s==null||s.receive(u)}});i&&(i.aborted&&(l(),c("Declined: Aborted")),i.addEventListener("abort",()=>{l(),c("Declined: Aborted")}))})}const A2=()=>{throw new Error("Strategy util has not been implemented on this platform")},bJ={"VIEW/IFRAME":ET,"VIEW/POP":_T,"VIEW/TAB":ST,"VIEW/MOBILE_BROWSER":A2,"VIEW/DEEPLINK":A2};async function C2(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{serviceEndpoint:()=>{}};const{serviceEndpoint:n}=t;try{return bJ[e.method](n(e),t)}catch(r){throw console.error("execLocal({service, opts = {}})",r,{service:e,opts:t}),r}}const EJ={[On["HTTP/RPC"]]:fv(C2),[On["HTTP/POST"]]:fv(C2),[On["IFRAME/RPC"]]:hJ,[On["POP/RPC"]]:gJ,[On["TAB/RPC"]]:yJ,[On["EXT/RPC"]]:vJ},_J=()=>typeof window>"u",SJ=e=>{if(e==null)return null;try{return JSON.parse(e)}catch{return null}},xJ={can:!_J()&&!!window.localStorage,get:async e=>SJ(localStorage.getItem(e)),put:async(e,t)=>localStorage.setItem(e,JSON.stringify(t))},IJ=typeof window>"u",AJ=e=>{const t=e["app.detail.title"],n=e["app.detail.icon"],r=e["app.detail.description"],i=e["app.detail.url"];return{name:t??document.title,description:r??"",url:i??window.location.origin,icons:n?[n]:[]}};function CJ(){if(IJ)return;let e=null,t=!1;ie.subscribe(async n=>{const r={"walletconnect.projectId":n["walletconnect.projectId"],"walletconnect.disableNotifications":n["walletconnect.disableNotifications"],"app.detail.title":n["app.detail.title"],"app.detail.icon":n["app.detail.icon"],"app.detail.description":n["app.detail.description"],"app.detail.url":n["app.detail.url"]},i=r["walletconnect.projectId"],s=r["walletconnect.disableNotifications"],o=e;if(e=JSON.stringify(r,null,2),t){o!==e&&console.warn(`FCL WalletConnect Plugin has been already loaded with different configuration. It is not possible to change the configuration after the plugin has been loaded.

Previous configuration:
${o}

Current configuration:
${e}`);return}if(!!!i)return;if(V(!!i,"FCL Configuration value for 'walletconnect.projectId' is required"),cv.getPlugins().has(gT)){t||console.warn("It seems like the FCL WalletConnect plugins has been already loaded manually. This is no longer necessary, please see the documentation for more information."),t=!0;return}t=!0;const{FclWcServicePlugin:c}=XX({projectId:i,metadata:AJ(r),disableNotifications:s});cv.add([c])})}const TJ={execStrategy:aJ},Vt=XI({platform:"web",discovery:TJ,getStorageProvider:async()=>await ie.get("fcl.storage")||xJ}),ry=S6(Vt),pw=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Vt().authenticate(e)},kJ=()=>Vt().unauthenticate();Vt().authorization;ie(dJ());qI({coreStrategies:EJ});CJ();const Ea={TEST_CONTRACT:`
    access(all) fun main(): UInt64 {
        return getCurrentBlock().height
    }
  `,GET_ACCOUNT_BALANCE:`
    import FlowToken from 0x0ae53cb6e3f42a79

    access(all) fun main(address: Address): UFix64 {
        let account = getAccount(address)
        
        if let balanceRef = account.capabilities.borrow<&{FlowToken.Balance}>(/public/flowTokenBalance) {
            return balanceRef.balance
        }
        
        return 0.0
    }
  `,GET_BLOCK_INFO:`
    access(all) struct BlockInfo {
        access(all) let height: UInt64
        access(all) let timestamp: UFix64
        
        init(height: UInt64, timestamp: UFix64) {
            self.height = height
            self.timestamp = timestamp
        }
    }

    access(all) fun main(): BlockInfo {
        let block = getCurrentBlock()
        return BlockInfo(height: block.height, timestamp: block.timestamp)
    }
  `,GET_QUOTE_NFTS:`
    import QuoteNFT from 0xf8d6e0586b0a20c7
    import NonFungibleToken from 0xf8d6e0586b0a20c7
    import MetadataViews from 0xf8d6e0586b0a20c7

    access(all) struct QuoteNFTData {
        access(all) let id: UInt64
        access(all) let quote: String
        access(all) let author: String
        access(all) let artwork: String
        access(all) let dateCreated: UFix64

        init(id: UInt64, quote: String, author: String, artwork: String, dateCreated: UFix64) {
            self.id = id
            self.quote = quote
            self.author = author
            self.artwork = artwork
            self.dateCreated = dateCreated
        }
    }

    access(all) fun main(address: Address): [QuoteNFTData] {
        let account = getAccount(address)
        
        let collectionRef = account.capabilities.borrow<&QuoteNFT.Collection>(QuoteNFT.CollectionPublicPath)
        
        if collectionRef == nil {
            return []
        }
        
        let ids = collectionRef!.getIDs()
        let nfts: [QuoteNFTData] = []
        
        for id in ids {
            if let nft = collectionRef!.borrowQuoteNFT(id: id) {
                nfts.append(QuoteNFTData(
                    id: nft.id,
                    quote: nft.quote,
                    author: nft.author,
                    artwork: nft.artwork,
                    dateCreated: nft.dateCreated
                ))
            }
        }
        
        return nfts
    }
  `,CHECK_ACCOUNT_SETUP:`
    import QuoteNFT from 0xf8d6e0586b0a20c7

    access(all) fun main(address: Address): Bool {
        let account = getAccount(address)
                 return account.capabilities.get<&QuoteNFT.Collection>(QuoteNFT.CollectionPublicPath).check()
    }
  `},iy={SIMPLE_TRANSACTION:`
    transaction(message: String) {
        prepare(signer: auth(Storage) &Account) {
            log("Transaction executed by: ".concat(signer.address.toString()))
            log("Message: ".concat(message))
        }
        
        execute {
            log("Simple transaction completed successfully!")
        }
    }
  `,SETUP_ACCOUNT:`
    import QuoteNFT from 0xf8d6e0586b0a20c7
    import NonFungibleToken from 0xf8d6e0586b0a20c7
    import MetadataViews from 0xf8d6e0586b0a20c7

    transaction {
        prepare(signer: auth(Storage, Capabilities) &Account) {
            // Check if the account already has a collection
            if signer.storage.borrow<&QuoteNFT.Collection>(from: QuoteNFT.CollectionStoragePath) == nil {
                // Create a new empty collection with the NFT type
                let collection <- QuoteNFT.createEmptyCollection(nftType: Type<@QuoteNFT.NFT>()) as! @QuoteNFT.Collection
                
                // Save it to the account
                signer.storage.save(<-collection, to: QuoteNFT.CollectionStoragePath)
                
                                 // Create a public capability for the collection
                 signer.capabilities.publish(
                     signer.capabilities.storage.issue<&QuoteNFT.Collection>(QuoteNFT.CollectionStoragePath),
                     at: QuoteNFT.CollectionPublicPath
                 )
                
                log("Account setup complete - ready to receive QuoteNFTs!")
            } else {
                log("Account already set up for QuoteNFTs")
            }
        }
    }
  `,MINT_QUOTE_NFT:`
    import QuoteNFT from 0xf8d6e0586b0a20c7
    import NonFungibleToken from 0xf8d6e0586b0a20c7
    import MetadataViews from 0xf8d6e0586b0a20c7

    transaction(quote: String, author: String, artwork: String) {
        
        let recipient: &QuoteNFT.Collection

        prepare(signer: auth(Storage) &Account) {
            // Get the recipient's collection reference (signer's account)
            self.recipient = signer.capabilities.borrow<&QuoteNFT.Collection>(QuoteNFT.CollectionPublicPath)
                ?? panic("Could not borrow receiver reference")
        }

        execute {
            // Use the contract's public mint function
            let newID = QuoteNFT.publicMintNFT(
                recipient: self.recipient,
                quote: quote,
                author: author,
                artwork: artwork
            )

            log("Minted QuoteNFT with ID: ".concat(newID.toString()))
            log("Quote: \\"".concat(quote).concat("\\" by ").concat(author))
        }
    }
  `};function RJ(){const[e,t]=H.useState({loggedIn:null}),[n,r]=H.useState(""),[i,s]=H.useState(null),[o,a]=H.useState(null),[c,l]=H.useState(null),[u,d]=H.useState(""),[f,h]=H.useState(!1);H.useEffect(()=>{const E=Vt.subscribe(t);return()=>E()},[]);const p=async()=>{r("Connecting to wallet...");try{await pw(),r(" Connected to wallet!")}catch(E){console.error("Authentication error:",E),r(` Authentication failed: ${E.message}`)}},g=()=>{kJ(),r("Disconnected from wallet"),s(null),a(null),l(null)},v=async()=>{h(!0);try{r("Testing basic Flow functionality...");const E=await Vs({cadence:Ea.TEST_CONTRACT});s(E);const A=await Vs({cadence:Ea.GET_BLOCK_INFO});a(A),e.loggedIn&&e.addr&&l("Connected"),r(" All Flow tests completed successfully!")}catch(E){console.error("Test error:",E),r(` Test failed: ${E.message}`)}finally{h(!1)}},m=async()=>{if(!e.loggedIn){r(" Please connect wallet first");return}h(!0),d("Preparing transaction...");try{const E=await ry({cadence:iy.SIMPLE_TRANSACTION,args:(T,D)=>[T("Hello from Quote NFT Generator!",D.String)],proposer:Vt,payer:Vt,authorizations:[Vt],limit:100});d(`Transaction sent! ID: ${E}`),console.log("Transaction ID:",E);const A=Ei(E).subscribe(T=>{d(`Transaction ${T.status} - ${T.statusString}`),T.status===4?(d(" Transaction completed successfully!"),A()):T.status===-1&&(d(" Transaction failed!"),A())})}catch(E){console.error("Transaction error:",E),d(` Transaction failed: ${E.message}`)}finally{h(!1)}},w=E=>E===null?"Not loaded":E==="Connected"?"Wallet Connected ":`${parseFloat(E).toFixed(2)} FLOW`;return _.jsxs("div",{className:"page",children:[_.jsx("h1",{className:"page-title",children:" Flow Blockchain Demo"}),_.jsx("p",{className:"page-subtitle",children:"Experience real blockchain interaction with Flow testnet. Connect your wallet, query blockchain data, and send transactions."}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Wallet Connection"}),e.loggedIn?_.jsxs("div",{className:"wallet-status wallet-connected",children:[_.jsxs("p",{children:[" ",_.jsx("strong",{children:"Wallet Connected"})]}),_.jsxs("div",{className:"wallet-address",children:["Address: ",e.addr]}),_.jsx("button",{onClick:g,className:"btn btn-secondary",children:"Disconnect Wallet"})]}):_.jsxs("div",{className:"wallet-status",children:[_.jsx("p",{children:"Connect your Flow wallet to interact with the blockchain"}),_.jsx("button",{onClick:p,className:"btn btn-primary",children:" Connect Wallet"})]}),n&&_.jsx("div",{className:"status-message",children:n})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Blockchain Data"}),_.jsx("p",{children:"Query real-time data from the Flow blockchain"}),_.jsx("button",{onClick:v,className:"btn btn-primary",disabled:f,style:{marginBottom:"2rem"},children:f?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"spinner"}),"Testing..."]}):" Test Flow Connection"}),_.jsxs("div",{className:"cards-grid",children:[i&&_.jsxs("div",{className:"result-box",children:[_.jsx("h3",{children:"Current Block Height"}),_.jsx("p",{className:"result-value",children:i.toString()})]}),o&&_.jsxs("div",{className:"result-box",children:[_.jsx("h3",{children:"Block Information"}),_.jsxs("p",{children:[_.jsx("strong",{children:"Height:"})," ",o.height.toString()]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Timestamp:"})," ",new Date(o.timestamp*1e3).toLocaleString()]})]}),e.loggedIn&&c!==null&&_.jsxs("div",{className:"result-box",children:[_.jsx("h3",{children:"Wallet Status"}),_.jsx("p",{className:"result-value",children:w(c)})]})]})]}),e.loggedIn&&_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Transaction Demo"}),_.jsx("p",{children:"Send a simple transaction to the Flow blockchain"}),_.jsx("button",{onClick:m,className:"btn btn-primary",disabled:f,style:{marginBottom:"1rem"},children:f?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"spinner"}),"Sending..."]}):" Send Test Transaction"}),u&&_.jsx("div",{className:"status-message",children:u})]}),_.jsxs("div",{className:"cards-grid",children:[_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Flow Testnet"}),_.jsx("p",{children:"This demo connects to Flow's testnet environment, allowing safe testing without real assets."})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" FCL Library"}),_.jsx("p",{children:"Using Flow Client Library (FCL) for seamless wallet integration and blockchain interaction."})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Cadence Scripts"}),_.jsx("p",{children:"Scripts and transactions written in Cadence, Flow's resource-oriented smart contract language."})]})]}),_.jsxs("div",{className:"card",style:{marginTop:"2rem",background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)"},children:[_.jsx("h3",{children:" What This Demonstrates"}),_.jsxs("ul",{className:"features-list",style:{textAlign:"left",marginTop:"1rem"},children:[_.jsx("li",{children:"Wallet connection using FCL (Flow Client Library)"}),_.jsx("li",{children:"Reading blockchain data (block height, timestamps)"}),_.jsx("li",{children:"Account balance queries"}),_.jsx("li",{children:"Simple transaction execution and monitoring"}),_.jsx("li",{children:"Error handling and user feedback"}),_.jsx("li",{children:"Real-time blockchain state updates"})]})]})]})}class nd{static generateUniqueArtwork(t,n){const r=this.advancedHash(t+n),i=this.extractAdvancedParams(r);return this.createAdvancedSVG(i,t,n)}static advancedHash(t){let n=0,r=0;for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);n=(n<<5)-n+s,n=n&n,r=(r<<3)+r+s,r=r&r}return{primary:Math.abs(n),secondary:Math.abs(r),combined:Math.abs(n+r)}}static extractAdvancedParams(t){const{primary:n,secondary:r,combined:i}=t;return{primaryHue:n%360,secondaryHue:(n+120+r%60)%360,tertiaryHue:(n+240+i%60)%360,bgColor1:`hsl(${n%360}, ${40+n%40}%, ${15+n%15}%)`,bgColor2:`hsl(${(n+60)%360}, ${30+r%40}%, ${25+r%20}%)`,bgColor3:`hsl(${(n+180)%360}, ${20+i%30}%, ${35+i%15}%)`,accentColor1:`hsl(${(n+30)%360}, ${70+n%30}%, ${55+n%25}%)`,accentColor2:`hsl(${(r+90)%360}, ${60+r%30}%, ${45+r%30}%)`,accentColor3:`hsl(${(i+150)%360}, ${80+i%20}%, ${65+i%20}%)`,textColor:n%3===0?"#ffffff":n%3===1?"#f8f9fa":"#e9ecef",textShadowColor:`hsl(${n%360}, 50%, 10%)`,patternType:n%8,geometricComplexity:2+r%6,shapeCount:5+n%12,shapeVariety:r%5,rotation:n%360,secondaryRotation:r%360,scale:.7+n%60/100,skew:-15+r%30,animationDuration:4+n%8,animationDelay:r%3*.5,pulseIntensity:.2+i%30/100,noiseIntensity:.1+n%20/100,blurRadius:1+r%4,glowIntensity:.3+i%40/100,textureType:i%4,depthLayers:3+n%4,parallaxOffset:5+r%15,brushStrokeWidth:1+n%4,organicFlow:r%100/100,symmetryLevel:i%3}}static createAdvancedSVG(t,n,r){const o=this.formatQuoteText(n);return`
      <svg width="500" height="500" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
        <defs>
          ${this.createAdvancedGradients(t)}
          ${this.createAdvancedPatterns(t)}
          ${this.createAdvancedFilters(t)}
          ${this.createClipPaths(t)}
          ${this.createTextures(t)}
        </defs>
        
        <!-- Multi-layer background -->
        ${this.createLayeredBackground(t)}
        
        <!-- Geometric art layer -->
        ${this.createGeometricArt(t)}
        
        <!-- Organic flow elements -->
        ${this.createOrganicElements(t)}
        
        <!-- Decorative frame -->
        ${this.createDecorativeFrame(t)}
        
        <!-- Quote text with advanced typography -->
        ${this.createAdvancedQuoteText(t,o,500,500)}
        
        <!-- Author with artistic styling -->
        ${this.createStylizedAuthor(t,r,500,500)}
        
        <!-- NFT branding with artistic integration -->
        ${this.createArtisticBranding(t,500,500)}
        
        <!-- Final overlay effects -->
        ${this.createFinalOverlays(t)}
      </svg>
    `}static formatQuoteText(t){if(t.length<=100)return t;const n=t.split(" ");let r="",i=0;for(const s of n){if(i+s.length+1>97){r+="...";break}r+=(r?" ":"")+s,i+=s.length+1}return r}static createAdvancedGradients(t){return`
      <!-- Multi-stop background gradient -->
      <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:${t.bgColor1};stop-opacity:1" />
        <stop offset="50%" style="stop-color:${t.bgColor2};stop-opacity:0.9" />
        <stop offset="100%" style="stop-color:${t.bgColor3};stop-opacity:1" />
      </linearGradient>
      
      <!-- Radial gradient for depth -->
      <radialGradient id="depthGradient" cx="50%" cy="30%" r="80%">
        <stop offset="0%" style="stop-color:${t.accentColor1};stop-opacity:0.4" />
        <stop offset="70%" style="stop-color:${t.accentColor2};stop-opacity:0.2" />
        <stop offset="100%" style="stop-color:${t.bgColor1};stop-opacity:0.1" />
      </radialGradient>
      
      <!-- Artistic accent gradients -->
      <linearGradient id="accentGradient1" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" style="stop-color:${t.accentColor1};stop-opacity:0.8" />
        <stop offset="50%" style="stop-color:${t.accentColor2};stop-opacity:0.6" />
        <stop offset="100%" style="stop-color:${t.accentColor3};stop-opacity:0.4" />
      </linearGradient>
      
      <radialGradient id="accentGradient2" cx="30%" cy="70%" r="60%">
        <stop offset="0%" style="stop-color:${t.accentColor2};stop-opacity:0.7" />
        <stop offset="100%" style="stop-color:${t.accentColor1};stop-opacity:0.2" />
      </radialGradient>
      
      <!-- Text gradient for premium feel -->
      <linearGradient id="textGradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:${t.textColor};stop-opacity:1" />
        <stop offset="100%" style="stop-color:${t.accentColor1};stop-opacity:0.9" />
      </linearGradient>
      
      <!-- Shimmer effect -->
      <linearGradient id="shimmer" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" style="stop-color:transparent;stop-opacity:0" />
        <stop offset="50%" style="stop-color:${t.accentColor3};stop-opacity:0.6" />
        <stop offset="100%" style="stop-color:transparent;stop-opacity:0" />
        <animateTransform attributeName="gradientTransform" type="translate" 
                         values="-100 0;100 0;-100 0" dur="${t.animationDuration}s" repeatCount="indefinite"/>
      </linearGradient>
    `}static createAdvancedPatterns(t){const n=[];switch(t.patternType){case 0:n.push(`
          <pattern id="pattern" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
            <circle cx="30" cy="30" r="15" fill="none" stroke="${t.accentColor1}" 
                    stroke-width="2" opacity="0.3"/>
            <circle cx="30" cy="30" r="8" fill="${t.accentColor2}" opacity="0.2"/>
            <circle cx="15" cy="15" r="4" fill="${t.accentColor3}" opacity="0.4"/>
            <circle cx="45" cy="45" r="4" fill="${t.accentColor3}" opacity="0.4"/>
          </pattern>
        `);break;case 1:n.push(`
          <pattern id="pattern" x="0" y="0" width="80" height="80" patternUnits="userSpaceOnUse">
            <g transform="translate(40,40)">
              <polygon points="0,-20 12,-6 20,0 12,6 0,20 -12,6 -20,0 -12,-6" 
                       fill="${t.accentColor1}" opacity="0.2"/>
              <polygon points="0,-12 7,-4 12,0 7,4 0,12 -7,4 -12,0 -7,-4" 
                       fill="${t.accentColor2}" opacity="0.3"/>
              <circle cx="0" cy="0" r="6" fill="${t.accentColor3}" opacity="0.4"/>
            </g>
          </pattern>
        `);break;case 2:n.push(`
          <pattern id="pattern" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse">
            <path d="M0,50 Q25,20 50,50 T100,50" stroke="${t.accentColor1}" 
                  stroke-width="3" fill="none" opacity="0.2"/>
            <path d="M0,25 Q50,5 100,25" stroke="${t.accentColor2}" 
                  stroke-width="2" fill="none" opacity="0.3"/>
            <path d="M0,75 Q50,95 100,75" stroke="${t.accentColor3}" 
                  stroke-width="1" fill="none" opacity="0.4"/>
          </pattern>
        `);break;case 3:n.push(`
          <pattern id="pattern" x="0" y="0" width="70" height="70" patternUnits="userSpaceOnUse">
            <g transform="translate(35,35)">
              <polygon points="0,-25 15,-8 25,0 15,8 0,25 -15,8 -25,0 -15,-8" 
                       fill="none" stroke="${t.accentColor1}" stroke-width="1" opacity="0.3"/>
              <polygon points="0,-15 9,-5 15,0 9,5 0,15 -9,5 -15,0 -9,-5" 
                       fill="${t.accentColor2}" opacity="0.15"/>
              <line x1="-25" y1="0" x2="25" y2="0" stroke="${t.accentColor3}" 
                    stroke-width="0.5" opacity="0.4"/>
              <line x1="0" y1="-25" x2="0" y2="25" stroke="${t.accentColor3}" 
                    stroke-width="0.5" opacity="0.4"/>
            </g>
          </pattern>
        `);break;case 4:n.push(`
          <pattern id="pattern" x="0" y="0" width="50" height="100" patternUnits="userSpaceOnUse">
            <polygon points="25,0 40,20 25,40 10,20" fill="${t.accentColor1}" opacity="0.2"/>
            <polygon points="25,50 40,70 25,90 10,70" fill="${t.accentColor2}" opacity="0.25"/>
            <rect x="20" y="15" width="10" height="10" fill="${t.accentColor3}" opacity="0.3"/>
            <rect x="20" y="65" width="10" height="10" fill="${t.accentColor3}" opacity="0.3"/>
          </pattern>
        `);break;case 5:n.push(`
          <pattern id="pattern" x="0" y="0" width="90" height="90" patternUnits="userSpaceOnUse">
            <g transform="translate(45,45)">
              <path d="M-20,-20 L20,-20 L30,0 L20,20 L-20,20 L-30,0 Z" 
                    fill="none" stroke="${t.accentColor1}" stroke-width="2" opacity="0.3"/>
              <circle cx="0" cy="0" r="12" fill="none" stroke="${t.accentColor2}" 
                      stroke-width="1" opacity="0.4"/>
              <polygon points="0,-8 4,-4 8,0 4,4 0,8 -4,4 -8,0 -4,-4" 
                       fill="${t.accentColor3}" opacity="0.5"/>
            </g>
          </pattern>
        `);break;case 6:n.push(`
          <pattern id="pattern" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
            <rect x="10" y="10" width="40" height="40" fill="none" 
                  stroke="${t.accentColor1}" stroke-width="1" opacity="0.3"/>
            <rect x="20" y="20" width="20" height="20" fill="${t.accentColor2}" opacity="0.2"/>
            <circle cx="15" cy="15" r="3" fill="${t.accentColor3}" opacity="0.6"/>
            <circle cx="45" cy="15" r="3" fill="${t.accentColor3}" opacity="0.6"/>
            <circle cx="15" cy="45" r="3" fill="${t.accentColor3}" opacity="0.6"/>
            <circle cx="45" cy="45" r="3" fill="${t.accentColor3}" opacity="0.6"/>
            <line x1="15" y1="15" x2="45" y2="45" stroke="${t.accentColor1}" 
                  stroke-width="0.5" opacity="0.4"/>
            <line x1="45" y1="15" x2="15" y2="45" stroke="${t.accentColor1}" 
                  stroke-width="0.5" opacity="0.4"/>
          </pattern>
        `);break;default:n.push(`
          <pattern id="pattern" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
            <circle cx="20" cy="20" r="6" fill="${t.accentColor1}" opacity="0.3"/>
            <circle cx="20" cy="20" r="3" fill="${t.accentColor2}" opacity="0.4"/>
            <circle cx="10" cy="10" r="2" fill="${t.accentColor3}" opacity="0.5"/>
            <circle cx="30" cy="10" r="2" fill="${t.accentColor3}" opacity="0.5"/>
            <circle cx="10" cy="30" r="2" fill="${t.accentColor3}" opacity="0.5"/>
            <circle cx="30" cy="30" r="2" fill="${t.accentColor3}" opacity="0.5"/>
          </pattern>
        `)}return n.join("")}static createAdvancedFilters(t){return`
      <!-- Enhanced glow effect -->
      <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
        <feGaussianBlur stdDeviation="${t.blurRadius}" result="coloredBlur"/>
        <feMerge>
          <feMergeNode in="coloredBlur"/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
      
      <!-- Artistic blur for depth -->
      <filter id="softBlur" x="-20%" y="-20%" width="140%" height="140%">
        <feGaussianBlur stdDeviation="2" result="blur"/>
        <feColorMatrix in="blur" type="matrix" 
                      values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 0.7 0"/>
      </filter>
      
      <!-- Emboss effect -->
      <filter id="emboss" x="-20%" y="-20%" width="140%" height="140%">
        <feConvolveMatrix order="3" kernelMatrix="1 1 0 1 0 -1 0 -1 -1"/>
        <feColorMatrix type="saturate" values="0"/>
        <feOffset dx="2" dy="2"/>
        <feFlood flood-color="${t.accentColor1}" flood-opacity="0.3"/>
        <feComposite operator="over"/>
      </filter>
      
      <!-- Noise texture -->
      <filter id="noise" x="0%" y="0%" width="100%" height="100%">
        <feTurbulence baseFrequency="${t.noiseIntensity}" numOctaves="3" 
                     seed="${t.rotation}" stitchTiles="stitch"/>
        <feColorMatrix type="saturate" values="0"/>
        <feComponentTransfer>
          <feFuncA type="discrete" tableValues="0 0.1 0.2 0.1 0"/>
        </feComponentTransfer>
        <feComposite operator="multiply"/>
      </filter>
      
      <!-- Artistic distortion -->
      <filter id="distort" x="-20%" y="-20%" width="140%" height="140%">
        <feTurbulence baseFrequency="0.02" numOctaves="2" result="turbulence"/>
        <feDisplacementMap in="SourceGraphic" in2="turbulence" scale="5"/>
      </filter>
      
      <!-- Metallic sheen -->
      <filter id="metallic" x="-50%" y="-50%" width="200%" height="200%">
        <feGaussianBlur stdDeviation="1" result="blur"/>
        <feSpecularLighting result="specOut" lighting-color="${t.accentColor3}" 
                           specularConstant="2" specularExponent="20">
          <fePointLight x="250" y="150" z="200"/>
        </feSpecularLighting>
        <feComposite in="specOut" in2="SourceAlpha" operator="in"/>
        <feComposite in="SourceGraphic" operator="over"/>
      </filter>
    `}static createClipPaths(t){return`
      <!-- Artistic clipping paths -->
      <clipPath id="organicClip">
        <path d="M50,50 Q150,20 250,50 T450,50 Q450,150 400,250 Q350,350 250,350 Q150,350 100,250 Q50,150 50,50 Z"/>
      </clipPath>
      
      <clipPath id="geometricClip">
        <polygon points="100,100 400,100 450,200 400,400 100,400 50,200"/>
      </clipPath>
      
      <clipPath id="frameClip">
        <rect x="20" y="20" width="460" height="460" rx="40" ry="40"/>
      </clipPath>
    `}static createTextures(t){const n=[];switch(t.textureType){case 0:n.push(`
          <pattern id="paperTexture" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse">
            <rect width="100" height="100" fill="${t.bgColor1}"/>
            <circle cx="20" cy="30" r="1" fill="${t.accentColor1}" opacity="0.1"/>
            <circle cx="70" cy="60" r="1.5" fill="${t.accentColor2}" opacity="0.08"/>
            <circle cx="40" cy="80" r="0.8" fill="${t.accentColor3}" opacity="0.12"/>
            <circle cx="85" cy="20" r="1.2" fill="${t.accentColor1}" opacity="0.09"/>
          </pattern>
        `);break;case 1:n.push(`
          <pattern id="canvasTexture" x="0" y="0" width="50" height="50" patternUnits="userSpaceOnUse">
            <rect width="50" height="50" fill="${t.bgColor2}"/>
            <line x1="0" y1="10" x2="50" y2="10" stroke="${t.accentColor1}" 
                  stroke-width="0.3" opacity="0.15"/>
            <line x1="0" y1="20" x2="50" y2="20" stroke="${t.accentColor1}" 
                  stroke-width="0.3" opacity="0.15"/>
            <line x1="0" y1="30" x2="50" y2="30" stroke="${t.accentColor1}" 
                  stroke-width="0.3" opacity="0.15"/>
            <line x1="0" y1="40" x2="50" y2="40" stroke="${t.accentColor1}" 
                  stroke-width="0.3" opacity="0.15"/>
            <line x1="10" y1="0" x2="10" y2="50" stroke="${t.accentColor2}" 
                  stroke-width="0.3" opacity="0.1"/>
            <line x1="20" y1="0" x2="20" y2="50" stroke="${t.accentColor2}" 
                  stroke-width="0.3" opacity="0.1"/>
            <line x1="30" y1="0" x2="30" y2="50" stroke="${t.accentColor2}" 
                  stroke-width="0.3" opacity="0.1"/>
            <line x1="40" y1="0" x2="40" y2="50" stroke="${t.accentColor2}" 
                  stroke-width="0.3" opacity="0.1"/>
          </pattern>
        `);break;case 2:n.push(`
          <pattern id="marbleTexture" x="0" y="0" width="200" height="200" patternUnits="userSpaceOnUse">
            <rect width="200" height="200" fill="${t.bgColor3}"/>
            <path d="M0,100 Q50,80 100,100 T200,100" stroke="${t.accentColor1}" 
                  stroke-width="3" fill="none" opacity="0.2"/>
            <path d="M0,120 Q80,90 160,120 T200,120" stroke="${t.accentColor2}" 
                  stroke-width="2" fill="none" opacity="0.15"/>
            <path d="M0,80 Q120,110 200,80" stroke="${t.accentColor3}" 
                  stroke-width="1" fill="none" opacity="0.25"/>
          </pattern>
        `);break;default:n.push(`
          <pattern id="silkTexture" x="0" y="0" width="150" height="150" patternUnits="userSpaceOnUse">
            <rect width="150" height="150" fill="${t.bgColor1}"/>
            <ellipse cx="75" cy="75" rx="60" ry="30" fill="none" 
                     stroke="${t.accentColor1}" stroke-width="1" opacity="0.1"/>
            <ellipse cx="75" cy="75" rx="40" ry="20" fill="none" 
                     stroke="${t.accentColor2}" stroke-width="0.5" opacity="0.15"/>
            <ellipse cx="75" cy="75" rx="20" ry="10" fill="${t.accentColor3}" opacity="0.08"/>
          </pattern>
        `)}return n.join("")}static createLayeredBackground(t){return`
      <!-- Base background -->
      <rect width="100%" height="100%" fill="url(#bgGradient)"/>
      
      <!-- Texture layer -->
      <rect width="100%" height="100%" fill="url(#${["paperTexture","canvasTexture","marbleTexture","silkTexture"][t.textureType]})" 
            opacity="0.4"/>
      
      <!-- Depth gradient -->
      <rect width="100%" height="100%" fill="url(#depthGradient)"/>
      
      <!-- Pattern layer with rotation -->
      <rect width="100%" height="100%" fill="url(#pattern)" 
            transform="rotate(${t.rotation} 250 250)" opacity="0.6"/>
      
      <!-- Secondary pattern layer -->
      <rect width="100%" height="100%" fill="url(#pattern)" 
            transform="rotate(${t.secondaryRotation} 250 250) scale(${t.scale})" 
            opacity="0.3"/>
    `}static createGeometricArt(t){const n=[];for(let r=0;r<t.geometricComplexity;r++){const i=360/t.geometricComplexity*r,s=100+r*30,o=250+Math.cos(i*Math.PI/180)*s,a=250+Math.sin(i*Math.PI/180)*s;if(t.shapeVariety===0){const c=3+r%6,l=[];for(let u=0;u<c;u++){const d=360/c*u,f=o+Math.cos(d*Math.PI/180)*20,h=a+Math.sin(d*Math.PI/180)*20;l.push(`${f},${h}`)}n.push(`
          <polygon points="${l.join(" ")}" 
                   fill="${t.accentColor1}" 
                   opacity="0.3" 
                   filter="url(#glow)"
                   transform="rotate(${i+t.rotation} ${o} ${a})">
            <animateTransform attributeName="transform" type="rotate" 
                             values="${i};${i+360};${i}" 
                             dur="${t.animationDuration}s" repeatCount="indefinite"/>
          </polygon>
        `)}else t.shapeVariety===1?n.push(`
          <circle cx="${o}" cy="${a}" r="${15+r*3}" 
                  fill="none" 
                  stroke="${t.accentColor2}" 
                  stroke-width="${t.brushStrokeWidth}"
                  opacity="0.4"
                  filter="url(#glow)">
            <animate attributeName="r" 
                     values="${15+r*3};${25+r*3};${15+r*3}" 
                     dur="${t.animationDuration}s" repeatCount="indefinite"/>
            <animate attributeName="opacity" 
                     values="0.4;0.8;0.4" 
                     dur="${t.animationDuration}s" repeatCount="indefinite"/>
          </circle>
        `):n.push(`
          <path d="M${o},${a} Q${o+30},${a-30} ${o+60},${a} T${o+120},${a}" 
                stroke="${t.accentColor3}" 
                stroke-width="${t.brushStrokeWidth*2}" 
                fill="none" 
                opacity="0.5"
                filter="url(#glow)">
            <animate attributeName="stroke-width" 
                     values="${t.brushStrokeWidth*2};${t.brushStrokeWidth*4};${t.brushStrokeWidth*2}" 
                     dur="${t.animationDuration}s" repeatCount="indefinite"/>
          </path>
        `)}return n.join("")}static createOrganicElements(t){const n=[];if(t.organicFlow>.3){n.push(`
        <path d="M50,250 Q150,150 250,250 T450,250" 
              stroke="${t.accentColor1}" 
              stroke-width="${t.brushStrokeWidth*3}" 
              fill="none" 
              opacity="0.3"
              filter="url(#softBlur)">
          <animate attributeName="d" 
                   values="M50,250 Q150,150 250,250 T450,250;M50,250 Q150,350 250,250 T450,250;M50,250 Q150,150 250,250 T450,250" 
                   dur="${t.animationDuration*2}s" repeatCount="indefinite"/>
        </path>
      `);for(let r=0;r<3;r++){const i=100+r*150,s=100+r*100;n.push(`
          <ellipse cx="${i}" cy="${s}" rx="${20+r*10}" ry="${15+r*8}" 
                   fill="${t.accentColor2}" 
                   opacity="0.2"
                   filter="url(#softBlur)"
                   transform="rotate(${t.rotation+r*45} ${i} ${s})">
            <animateTransform attributeName="transform" type="rotate" 
                             values="${t.rotation+r*45};${t.rotation+r*45+360};${t.rotation+r*45}" 
                             dur="${t.animationDuration*3}s" repeatCount="indefinite"/>
          </ellipse>
        `)}}return n.join("")}static createDecorativeFrame(t){return`
      <!-- Outer decorative border -->
      <rect x="10" y="10" width="480" height="480" 
            fill="none" 
            stroke="url(#accentGradient1)" 
            stroke-width="3" 
            rx="20" ry="20" 
            opacity="0.6"/>
      
      <!-- Inner decorative border -->
      <rect x="20" y="20" width="460" height="460" 
            fill="none" 
            stroke="url(#accentGradient2)" 
            stroke-width="1" 
            rx="15" ry="15" 
            opacity="0.4"/>
      
      <!-- Corner decorations -->
      <g opacity="0.5">
        <!-- Top-left corner -->
        <path d="M30,30 L60,30 L60,35 L35,35 L35,60 L30,60 Z" 
              fill="${t.accentColor1}"/>
        
        <!-- Top-right corner -->
        <path d="M470,30 L440,30 L440,35 L465,35 L465,60 L470,60 Z" 
              fill="${t.accentColor1}"/>
        
        <!-- Bottom-left corner -->
        <path d="M30,470 L60,470 L60,465 L35,465 L35,440 L30,440 Z" 
              fill="${t.accentColor1}"/>
        
        <!-- Bottom-right corner -->
        <path d="M470,470 L440,470 L440,465 L465,465 L465,440 L470,440 Z" 
              fill="${t.accentColor1}"/>
      </g>
      
      <!-- Decorative elements along the frame -->
      <g opacity="0.4">
        <circle cx="250" cy="25" r="5" fill="${t.accentColor2}"/>
        <circle cx="25" cy="250" r="5" fill="${t.accentColor2}"/>
        <circle cx="475" cy="250" r="5" fill="${t.accentColor2}"/>
        <circle cx="250" cy="475" r="5" fill="${t.accentColor2}"/>
      </g>
    `}static createAdvancedQuoteText(t,n,r,i){const s=n.length>60?16:n.length>40?18:20;return`
      <!-- Quote text background -->
      <rect x="50" y="120" width="400" height="160" 
            fill="${t.accentColor1}" 
            opacity="0.1" 
            rx="15" ry="15"
            filter="url(#softBlur)"/>
      
      <!-- Main quote text -->
      <foreignObject x="60" y="130" width="380" height="140">
        <div xmlns="http://www.w3.org/1999/xhtml" style="
          font-family: 'Georgia', 'Times New Roman', serif;
          font-size: ${s}px;
          line-height: 1.5;
          color: ${t.textColor};
          text-align: center;
          padding: 20px;
          text-shadow: 2px 2px 4px ${t.textShadowColor};
          font-weight: 400;
          letter-spacing: 0.5px;
        ">
          <span style="font-size: 1.5em; color: ${t.accentColor1}; opacity: 0.7;">"</span>${n}<span style="font-size: 1.5em; color: ${t.accentColor1}; opacity: 0.7;">"</span>
        </div>
      </foreignObject>
      
      <!-- Decorative quote marks -->
      <text x="70" y="150" font-family="Georgia, serif" font-size="40" 
            fill="${t.accentColor2}" opacity="0.3" font-weight="bold">"</text>
      <text x="430" y="250" font-family="Georgia, serif" font-size="40" 
            fill="${t.accentColor2}" opacity="0.3" font-weight="bold">"</text>
    `}static createStylizedAuthor(t,n,r,i){return`
      <!-- Author background accent -->
      <rect x="150" y="300" width="200" height="40" 
            fill="url(#accentGradient1)" 
            opacity="0.15" 
            rx="20" ry="20"/>
      
      <!-- Author text -->
      <text x="250" y="325" 
            font-family="Georgia, serif" 
            font-size="18" 
            font-style="italic" 
            fill="${t.textColor}" 
            text-anchor="middle"
            opacity="0.9"
            filter="url(#glow)">
         ${n}
      </text>
      
      <!-- Decorative line under author -->
      <line x1="180" y1="335" x2="320" y2="335" 
            stroke="${t.accentColor2}" 
            stroke-width="1" 
            opacity="0.5"/>
    `}static createArtisticBranding(t,n,r){return`
      <!-- NFT branding background -->
      <rect x="200" y="380" width="100" height="30" 
            fill="url(#accentGradient2)" 
            opacity="0.2" 
            rx="15" ry="15"/>
      
      <!-- NFT indicator with artistic styling -->
      <text x="250" y="400" 
            font-family="Arial, sans-serif" 
            font-size="14" 
            fill="${t.accentColor1}" 
            text-anchor="middle" 
            font-weight="bold"
            opacity="0.8"
            filter="url(#glow)">
         QUOTE NFT 
      </text>
      
      <!-- Shimmer effect overlay -->
      <rect x="200" y="380" width="100" height="30" 
            fill="url(#shimmer)" 
            rx="15" ry="15"/>
    `}static createFinalOverlays(t){return`
      <!-- Noise overlay for texture -->
      <rect width="100%" height="100%" 
            fill="url(#noise)" 
            opacity="0.03"/>
      
      <!-- Vignette effect -->
      <rect width="100%" height="100%" 
            fill="url(#depthGradient)" 
            opacity="0.1"/>
      
      <!-- Subtle overall glow -->
      <rect width="100%" height="100%" 
            fill="none" 
            stroke="${t.accentColor1}" 
            stroke-width="1" 
            opacity="0.2"
            filter="url(#glow)"/>
    `}static generateArtworkDataURL(t,n){const r=this.generateUniqueArtwork(t,n),i=new Blob([r],{type:"image/svg+xml"});return URL.createObjectURL(i)}static downloadArtwork(t,n,r="quote-nft-artwork.svg"){const i=this.generateUniqueArtwork(t,n),s=new Blob([i],{type:"image/svg+xml"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}}function T2(){const[e,t]=H.useState(null),[n,r]=H.useState(!1),[i,s]=H.useState(null),[o,a]=H.useState({loggedIn:null}),[c,l]=H.useState(!1),[u,d]=H.useState(!1),[f,h]=H.useState(""),[p,g]=H.useState([]),v=[{text:"The future belongs to those who believe in the beauty of their dreams.",author:"Eleanor Roosevelt"},{text:"It is during our darkest moments that we must focus to see the light.",author:"Aristotle"},{text:"The way to get started is to quit talking and begin doing.",author:"Walt Disney"},{text:"Your limitationit's only your imagination.",author:"Unknown"},{text:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{text:"Great things never come from comfort zones.",author:"Anonymous"},{text:"Dream it. Wish it. Do it.",author:"Unknown"},{text:"Success doesn't just find you. You have to go out and get it.",author:"Unknown"},{text:"The harder you work for something, the greater you'll feel when you achieve it.",author:"Unknown"},{text:"Dream bigger. Do bigger.",author:"Unknown"},{text:"Innovation distinguishes between a leader and a follower.",author:"Steve Jobs"},{text:"Life is what happens to you while you're busy making other plans.",author:"John Lennon"},{text:"The only impossible journey is the one you never begin.",author:"Tony Robbins"},{text:"In the middle of difficulty lies opportunity.",author:"Albert Einstein"},{text:"Success is not final, failure is not fatal: it is the courage to continue that counts.",author:"Winston Churchill"}];H.useEffect(()=>{const C=Vt.subscribe(a);return()=>C()},[]),H.useEffect(()=>{o.loggedIn&&(m(),w())},[o]);const m=async()=>{try{const C=await Vs({cadence:Ea.CHECK_ACCOUNT_SETUP,args:(U,B)=>[U(o.addr,B.Address)]});l(C)}catch(C){console.error("Error checking account setup:",C),l(!1)}},w=async()=>{try{const C=await Vs({cadence:Ea.GET_QUOTE_NFTS,args:(U,B)=>[U(o.addr,B.Address)]});g(C)}catch(C){console.error("Error loading NFTs:",C),g([])}},E=async()=>{if(!o.loggedIn){h(" Please connect wallet first");return}h("Setting up account..."),console.log("Setting up account for:",o.addr);try{const C=await ry({cadence:iy.SETUP_ACCOUNT,args:(U,B)=>[],proposer:Vt,payer:Vt,authorizations:[Vt],limit:100});h(`Account setup transaction sent: ${C}`),console.log("Transaction ID:",C),await Ei(C).onceSealed(),h(" Account setup complete!"),l(!0),setTimeout(()=>h(""),3e3)}catch(C){console.error("Account setup error:",C),h(` Setup failed: ${C.message}`)}},A=async()=>{h("Testing emulator connection...");try{const C=await Vs({cadence:Ea.TEST_CONTRACT,args:[]});h(` Connection successful! Block height: ${C}`),setTimeout(()=>h(""),3e3)}catch(C){console.error("Connection test failed:",C),h(` Connection failed: ${C.message}`)}},T=async()=>{if(!(!o.loggedIn||!e)){d(!0),h("Preparing to mint NFT...");try{const C=nd.generateUniqueArtwork(e.text,e.author),U=await ry({cadence:iy.MINT_QUOTE_NFT,args:(F,q)=>[F(e.text,q.String),F(e.author,q.String),F(C,q.String)],proposer:Vt,payer:Vt,authorizations:[Vt],limit:300});h(`NFT mint transaction sent! ID: ${U}`);const B=Ei(U).subscribe(F=>{h(`Transaction ${F.status} - ${F.statusString}`),F.status===4?(h(" NFT minted successfully!"),w(),B(),setTimeout(()=>h(""),5e3)):F.status===-1&&(h(" NFT minting failed!"),B())})}catch(C){console.error("Minting error:",C),h(` Minting failed: ${C.message}`)}finally{d(!1)}}},D=()=>{r(!0),i&&URL.revokeObjectURL(i),setTimeout(()=>{const C=Math.floor(Math.random()*v.length),U=v[C];t(U);const B=nd.generateArtworkDataURL(U.text,U.author);s(B),r(!1)},1200)},j=()=>{if(e){const C=`"${e.text}"  ${e.author}`;navigator.share?navigator.share({title:"Inspirational Quote NFT",text:C}):(navigator.clipboard.writeText(C),alert("Quote copied to clipboard!"))}},L=()=>{if(e){const C=`quote-nft-${e.author.replace(/\s+/g,"-").toLowerCase()}.svg`;nd.downloadArtwork(e.text,e.author,C)}};return H.useEffect(()=>()=>{i&&URL.revokeObjectURL(i)},[i]),_.jsx("div",{className:"page",children:_.jsxs("div",{className:"quote-generator",children:[_.jsx("h1",{className:"page-title",children:" Quote Generator"}),_.jsx("p",{className:"page-subtitle",children:"Generate inspirational quotes with unique AI-generated artwork that can be minted as NFTs on the Flow blockchain. Each quote gets its own distinctive visual design!"}),_.jsxs("div",{className:"card",style:{maxWidth:"900px",margin:"2rem auto"},children:[_.jsx("h3",{children:" Quote NFT Generator"}),_.jsx("p",{children:"Click the button below to generate a inspirational quote with unique artwork. The visual design is algorithmically generated based on the quote content, making each NFT truly unique!"}),_.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"8px",fontSize:"0.9rem"},children:[_.jsx("strong",{children:" Emulator Mode:"})," This app is configured to work with the local Flow emulator. Emulator gRPC: port 3569, REST API: port 8888, Dev wallet: port 8701.",_.jsx("div",{style:{marginTop:"0.5rem"},children:_.jsx("button",{onClick:A,className:"btn btn-outline",style:{fontSize:"0.8rem",padding:"0.25rem 0.5rem"},children:" Test Connection"})})]}),_.jsx("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:o.loggedIn?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"8px"},children:o.loggedIn?_.jsxs("div",{children:[_.jsxs("p",{style:{margin:0,color:"#059669"},children:[" Wallet connected: ",o.addr]}),!c&&_.jsxs("div",{style:{marginTop:"0.5rem"},children:[_.jsx("p",{style:{margin:0,color:"#d97706",fontSize:"0.9rem"},children:" Account not set up for NFTs"}),_.jsx("button",{onClick:E,className:"btn btn-outline",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:"Setup Account for NFTs"})]})]}):_.jsxs("div",{children:[_.jsx("p",{style:{margin:0,color:"#dc2626"},children:" Please connect your wallet to mint NFTs"}),_.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem",flexWrap:"wrap"},children:_.jsx("button",{onClick:()=>pw(),className:"btn btn-primary",style:{fontSize:"0.9rem"},children:"Connect Dev Wallet"})})]})}),f&&_.jsx("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"rgba(59, 130, 246, 0.1)",borderRadius:"8px",fontSize:"0.9rem"},children:f}),_.jsx("button",{onClick:D,className:"btn btn-primary",disabled:n,style:{marginBottom:"2rem"},children:n?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"spinner"}),"Creating Artwork..."]}):" Generate Quote NFT"}),e&&_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gap:"2rem",alignItems:"start"},children:[_.jsxs("div",{style:{minWidth:"300px"},children:[_.jsx("h4",{style:{marginBottom:"1rem",textAlign:"center"},children:" Generated NFT Artwork"}),i&&_.jsx("div",{style:{border:"3px solid #667eea",borderRadius:"12px",overflow:"hidden",boxShadow:"0 8px 25px rgba(102, 126, 234, 0.3)",background:"white"},children:_.jsx("img",{src:i,alt:"Generated NFT Artwork",style:{width:"100%",height:"auto",display:"block"}})})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"quote-display",children:[_.jsxs("div",{className:"quote-text",children:['"',e.text,'"']}),_.jsxs("div",{className:"quote-author",children:[" ",e.author]})]}),_.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[_.jsx("button",{onClick:j,className:"btn btn-secondary",children:" Share Quote"}),_.jsx("button",{onClick:L,className:"btn btn-outline",children:" Download Artwork"}),o.loggedIn&&c&&_.jsx("button",{onClick:T,className:"btn btn-primary",disabled:u,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:u?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"spinner"}),"Minting..."]}):" Mint as NFT"}),_.jsx("button",{onClick:D,className:"btn btn-outline",children:" Generate Another"})]}),_.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(102, 126, 234, 0.1)",borderRadius:"8px",fontSize:"0.9rem"},children:[_.jsx("h5",{style:{marginBottom:"0.5rem"},children:" NFT Metadata"}),_.jsxs("p",{children:[_.jsx("strong",{children:"Title:"})," Quote NFT #",nd.advancedHash(e.text).primary]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Author:"})," ",e.author]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Type:"})," Generative Quote Art"]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Dimensions:"})," 500x500 SVG"]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Uniqueness:"})," Algorithmically generated based on quote content"]})]})]})]}),!e&&_.jsxs("div",{style:{textAlign:"center",padding:"2rem",background:"rgba(102, 126, 234, 0.05)",borderRadius:"12px",border:"2px dashed rgba(102, 126, 234, 0.3)"},children:[_.jsx("h4",{children:" Ready to Create Your First Quote NFT?"}),_.jsx("p",{style:{margin:"1rem 0",color:"#666"},children:"Generate your first quote to see the unique artwork that would accompany it as an NFT!"})]})]}),_.jsxs("div",{className:"cards-grid",children:[_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Unique Artwork"}),_.jsx("p",{children:"Each quote generates completely unique SVG artwork using algorithmic design. Colors, patterns, and decorations are determined by the quote content, ensuring no two NFTs look the same."})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Deterministic Generation"}),_.jsx("p",{children:"The same quote will always generate the same artwork, ensuring consistency and authenticity. This makes the art truly tied to the quote content."})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" NFT Ready"}),_.jsx("p",{children:"Generated artwork is in SVG format, perfect for blockchain storage. Includes metadata, unique identifiers, and scalable vector graphics."})]})]}),o.loggedIn&&p.length>0&&_.jsxs("div",{className:"card",style:{marginTop:"2rem"},children:[_.jsx("h3",{children:" Your Quote NFT Collection"}),_.jsxs("p",{children:["You own ",p.length," Quote NFT",p.length!==1?"s":"",":"]}),_.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem",marginTop:"1rem"},children:p.map(C=>_.jsxs("div",{style:{border:"1px solid rgba(102, 126, 234, 0.3)",borderRadius:"8px",padding:"1rem",background:"rgba(102, 126, 234, 0.05)"},children:[_.jsxs("h5",{style:{margin:"0 0 0.5rem 0"},children:["Quote NFT #",C.id]}),_.jsxs("div",{style:{fontSize:"0.9rem",fontStyle:"italic",marginBottom:"0.5rem",lineHeight:"1.4"},children:['"',C.quote.length>60?C.quote.substring(0,57)+"...":C.quote,'"']}),_.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginBottom:"0.5rem"},children:[" ",C.author]}),_.jsxs("div",{style:{fontSize:"0.7rem",color:"#888"},children:["Minted: ",new Date(C.dateCreated*1e3).toLocaleDateString()]})]},C.id))})]}),_.jsxs("div",{className:"card",style:{marginTop:"2rem",background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)"},children:[_.jsx("h3",{children:" How It Works"}),_.jsxs("div",{className:"cards-grid",style:{marginTop:"1.5rem"},children:[_.jsxs("div",{children:[_.jsx("h4",{children:"1.  Quote Selection"}),_.jsx("p",{children:" Quote is selected from curated collection of inspirational messages"})]}),_.jsxs("div",{children:[_.jsx("h4",{children:"2.  Art Generation"}),_.jsx("p",{children:"Unique SVG artwork is created using algorithmic design based on quote hash"})]}),_.jsxs("div",{children:[_.jsx("h4",{children:"3.  Metadata Creation"}),_.jsx("p",{children:"NFT metadata is generated including title, author, and uniqueness identifiers"})]}),_.jsxs("div",{children:[_.jsx("h4",{children:"4.  NFT Minting"}),_.jsx("p",{children:"Connect wallet and mint your quote directly as an NFT on Flow blockchain"})]})]}),_.jsxs("div",{style:{marginTop:"2rem",textAlign:"center"},children:[_.jsx("h4",{children:" Live NFT Features Now Available:"}),_.jsxs("ul",{className:"features-list",style:{textAlign:"left",marginTop:"1rem",maxWidth:"600px",margin:"1rem auto"},children:[_.jsx("li",{children:" Smart contract integration for minting"}),_.jsx("li",{children:" On-chain artwork and metadata storage"}),_.jsx("li",{children:" Wallet connection for transactions"}),_.jsx("li",{children:" Collection management and viewing"}),_.jsx("li",{children:" MetadataViews compatibility"}),_.jsx("li",{children:" Marketplace integration (coming soon)"})]})]})]})]})})}function k2(){const[e,t]=H.useState({loggedIn:null}),[n,r]=H.useState([]),[i,s]=H.useState(!1),[o,a]=H.useState(""),[c,l]=H.useState(null);H.useEffect(()=>{const m=Vt.subscribe(t);return()=>m()},[]),H.useEffect(()=>{e.loggedIn?u():r([])},[e]);const u=async()=>{s(!0),a("");try{const m=await Vs({cadence:Ea.GET_QUOTE_NFTS,args:(w,E)=>[w(e.addr,E.Address)]});r(m)}catch(m){console.error("Error loading NFTs:",m),a(`Failed to load NFTs: ${m.message}`),r([])}finally{s(!1)}},d=()=>{e.loggedIn&&u()},f=m=>new Date(m*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),h=m=>{l(m)},p=()=>{l(null)},g=m=>{const w=m.artwork,E=new Blob([w],{type:"image/svg+xml"}),A=URL.createObjectURL(E),T=document.createElement("a");T.href=A,T.download=`quote-nft-${m.id}-${m.author.replace(/\s+/g,"-").toLowerCase()}.svg`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(A)},v=m=>{const w=`Check out my Quote NFT #${m.id}: "${m.quote}"  ${m.author}`;navigator.share?navigator.share({title:`Quote NFT #${m.id}`,text:w,url:window.location.href}):(navigator.clipboard.writeText(w),alert("NFT details copied to clipboard!"))};return _.jsx("div",{className:"page",children:_.jsxs("div",{className:"nft-gallery",children:[_.jsx("h1",{className:"page-title",children:" NFT Gallery"}),_.jsx("p",{className:"page-subtitle",children:"View and manage your Quote NFT collection. Each NFT represents a unique inspirational quote with algorithmically generated artwork."}),_.jsxs("div",{className:"card",style:{maxWidth:"800px",margin:"2rem auto"},children:[_.jsx("div",{style:{padding:"1rem",background:e.loggedIn?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"8px",marginBottom:"1rem"},children:e.loggedIn?_.jsxs("div",{children:[_.jsxs("p",{style:{margin:0,color:"#059669"},children:[" Wallet connected: ",e.addr]}),_.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem",alignItems:"center"},children:[_.jsx("button",{onClick:d,className:"btn btn-outline",disabled:i,children:i?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"spinner"}),"Loading..."]}):" Refresh Gallery"}),_.jsxs("span",{style:{fontSize:"0.9rem",color:"#666"},children:[n.length," NFT",n.length!==1?"s":""," found"]})]})]}):_.jsxs("div",{children:[_.jsx("p",{style:{margin:0,color:"#dc2626"},children:" Please connect your wallet to view your NFT collection"}),_.jsx("button",{onClick:()=>pw(),className:"btn btn-primary",style:{marginTop:"1rem"},children:"Connect Dev Wallet"})]})}),o&&_.jsx("div",{style:{padding:"1rem",background:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",marginBottom:"1rem",color:"#dc2626"},children:o}),e.loggedIn&&!i&&_.jsx(_.Fragment,{children:n.length>0?_.jsxs("div",{children:[_.jsx("h3",{style:{marginBottom:"1.5rem"},children:"Your Quote NFT Collection"}),_.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"2rem"},children:n.map(m=>_.jsxs("div",{className:"nft-card",style:{border:"2px solid rgba(102, 126, 234, 0.2)",borderRadius:"12px",padding:"1.5rem",background:"rgba(102, 126, 234, 0.05)",transition:"all 0.3s ease",cursor:"pointer"},onClick:()=>h(m),onMouseEnter:w=>{w.currentTarget.style.transform="translateY(-5px)",w.currentTarget.style.boxShadow="0 10px 25px rgba(102, 126, 234, 0.3)"},onMouseLeave:w=>{w.currentTarget.style.transform="translateY(0)",w.currentTarget.style.boxShadow="none"},children:[_.jsx("div",{style:{border:"2px solid #667eea",borderRadius:"8px",overflow:"hidden",marginBottom:"1rem",background:"white"},children:_.jsx("div",{dangerouslySetInnerHTML:{__html:m.artwork},style:{width:"100%",height:"200px",display:"flex",alignItems:"center",justifyContent:"center"}})}),_.jsxs("div",{children:[_.jsxs("h4",{style:{margin:"0 0 0.5rem 0",color:"#4f46e5"},children:["Quote NFT #",m.id]}),_.jsxs("div",{style:{fontSize:"0.95rem",fontStyle:"italic",marginBottom:"0.5rem",lineHeight:"1.4",color:"#374151"},children:['"',m.quote.length>80?m.quote.substring(0,77)+"...":m.quote,'"']}),_.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"0.5rem"},children:[" ",m.author]}),_.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:["Minted: ",f(m.dateCreated)]})]}),_.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem",justifyContent:"space-between"},children:[_.jsx("button",{onClick:w=>{w.stopPropagation(),v(m)},className:"btn btn-outline",style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:" Share"}),_.jsx("button",{onClick:w=>{w.stopPropagation(),g(m)},className:"btn btn-outline",style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:" Download"})]})]},m.id))})]}):_.jsxs("div",{style:{textAlign:"center",padding:"3rem 2rem",background:"rgba(102, 126, 234, 0.05)",borderRadius:"12px",border:"2px dashed rgba(102, 126, 234, 0.3)"},children:[_.jsx("h3",{children:" No NFTs Found"}),_.jsx("p",{style:{margin:"1rem 0",color:"#666"},children:"You don't have any Quote NFTs yet. Start by generating and minting your first inspirational quote!"}),_.jsx("a",{href:"/quote-generator",className:"btn btn-primary",children:" Create Your First NFT"})]})})]}),c&&_.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"2rem"},onClick:p,children:_.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"2rem",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflow:"auto"},onClick:m=>m.stopPropagation(),children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[_.jsxs("h2",{style:{margin:0,color:"#4f46e5"},children:["Quote NFT #",c.id]}),_.jsx("button",{onClick:p,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#6b7280"},children:""})]}),_.jsx("div",{style:{border:"3px solid #667eea",borderRadius:"12px",overflow:"hidden",marginBottom:"1.5rem",background:"white"},children:_.jsx("div",{dangerouslySetInnerHTML:{__html:c.artwork},style:{width:"100%",height:"300px",display:"flex",alignItems:"center",justifyContent:"center"}})}),_.jsxs("div",{style:{marginBottom:"1.5rem"},children:[_.jsxs("div",{style:{fontSize:"1.1rem",fontStyle:"italic",marginBottom:"0.5rem",lineHeight:"1.5",color:"#374151"},children:['"',c.quote,'"']}),_.jsxs("div",{style:{fontSize:"1rem",color:"#6b7280",marginBottom:"1rem"},children:[" ",c.author]})]}),_.jsxs("div",{style:{padding:"1rem",background:"rgba(102, 126, 234, 0.1)",borderRadius:"8px",marginBottom:"1.5rem"},children:[_.jsx("h4",{style:{margin:"0 0 0.5rem 0"},children:" NFT Details"}),_.jsxs("div",{style:{fontSize:"0.9rem",lineHeight:"1.6"},children:[_.jsxs("p",{children:[_.jsx("strong",{children:"Token ID:"})," ",c.id]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Author:"})," ",c.author]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Minted:"})," ",f(c.dateCreated)]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Type:"})," Generative Quote Art"]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Format:"})," SVG Vector Graphics"]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Blockchain:"})," Flow"]})]})]}),_.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[_.jsx("button",{onClick:()=>v(c),className:"btn btn-secondary",children:" Share NFT"}),_.jsx("button",{onClick:()=>g(c),className:"btn btn-outline",children:" Download Artwork"})]})]})}),_.jsxs("div",{className:"cards-grid",style:{marginTop:"3rem"},children:[_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Unique Artworks"}),_.jsx("p",{children:"Each NFT features completely unique SVG artwork generated algorithmically based on the quote content. No two NFTs will ever look the same."})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Collection Stats"}),_.jsx("p",{children:"Track your collection growth, view minting dates, and manage your inspirational quote NFTs. Each NFT is permanently stored on the Flow blockchain."})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Easy Management"}),_.jsx("p",{children:"Share your favorite quotes, download artwork, and showcase your collection. All NFTs are fully compatible with Flow NFT standards."})]})]})]})})}function $J(){return _.jsxs("div",{className:"page",children:[_.jsx("h1",{className:"page-title",children:" About This Project"}),_.jsx("p",{className:"page-subtitle",children:"Learn about the Quote NFT Generator - a project showcasing Flow blockchain development"}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Project Overview"}),_.jsx("p",{children:"The Quote NFT Generator is a demonstration dApp built for hackathons and educational purposes. It showcases the fundamental concepts of blockchain development on the Flow network, including wallet integration, smart contract interaction, and the potential for NFT creation."})]}),_.jsxs("div",{className:"cards-grid",children:[_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Flow Blockchain"}),_.jsx("p",{children:"Flow is a fast, decentralized, and developer-friendly blockchain, designed as the foundation for a new generation of games, apps, and digital assets."})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" FCL Integration"}),_.jsx("p",{children:"Flow Client Library (FCL) provides seamless wallet integration and blockchain interaction without the complexity of managing private keys."})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" React Framework"}),_.jsx("p",{children:"Built with React 18 and Vite for fast development and modern user experience, demonstrating best practices for dApp development."})]})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Technical Stack"}),_.jsxs("div",{className:"cards-grid",children:[_.jsxs("div",{style:{textAlign:"left"},children:[_.jsx("h4",{children:"Frontend"}),_.jsxs("ul",{className:"features-list",children:[_.jsx("li",{children:"React 18 with Hooks"}),_.jsx("li",{children:"React Router for navigation"}),_.jsx("li",{children:"Modern CSS with gradients"}),_.jsx("li",{children:"Responsive design"})]})]}),_.jsxs("div",{style:{textAlign:"left"},children:[_.jsx("h4",{children:"Blockchain"}),_.jsxs("ul",{className:"features-list",children:[_.jsx("li",{children:"Flow Client Library (FCL)"}),_.jsx("li",{children:"Flow Testnet integration"}),_.jsx("li",{children:"Cadence smart contracts"}),_.jsx("li",{children:"Wallet connectivity"})]})]}),_.jsxs("div",{style:{textAlign:"left"},children:[_.jsx("h4",{children:"Development"}),_.jsxs("ul",{className:"features-list",children:[_.jsx("li",{children:"Vite build tool"}),_.jsx("li",{children:"ES6 modules"}),_.jsx("li",{children:"Hot module replacement"}),_.jsx("li",{children:"Development server"})]})]})]})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Features Demonstrated"}),_.jsxs("ul",{className:"features-list",style:{textAlign:"left"},children:[_.jsx("li",{children:"Wallet connection and authentication"}),_.jsx("li",{children:"Real-time blockchain data queries"}),_.jsx("li",{children:"Transaction creation and monitoring"}),_.jsx("li",{children:"Account balance checking"}),_.jsx("li",{children:" content generation"}),_.jsx("li",{children:"Modern responsive UI/UX"}),_.jsx("li",{children:"Error handling and user feedback"}),_.jsx("li",{children:"Loading states and animations"})]})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Hackathon Requirements Met"}),_.jsxs("div",{className:"cards-grid",children:[_.jsxs("div",{className:"card",style:{background:"rgba(46, 160, 67, 0.1)",border:"2px solid rgba(46, 160, 67, 0.2)"},children:[_.jsx("h4",{children:" Consumer-Oriented"}),_.jsx("p",{children:"User-friendly interface for generating and viewing inspirational quote NFTs"})]}),_.jsxs("div",{className:"card",style:{background:"rgba(46, 160, 67, 0.1)",border:"2px solid rgba(46, 160, 67, 0.2)"},children:[_.jsx("h4",{children:" Flow Connected"}),_.jsx("p",{children:"Integrated with Flow testnet using official FCL library and standards"})]}),_.jsxs("div",{className:"card",style:{background:"rgba(46, 160, 67, 0.1)",border:"2px solid rgba(46, 160, 67, 0.2)"},children:[_.jsx("h4",{children:" Public & Free"}),_.jsx("p",{children:"Open-source demo available for anyone to use and learn from"})]}),_.jsxs("div",{className:"card",style:{background:"rgba(46, 160, 67, 0.1)",border:"2px solid rgba(46, 160, 67, 0.2)"},children:[_.jsx("h4",{children:" Original Creation"}),_.jsx("p",{children:"Built from scratch specifically for this hackathon, not a fork"})]})]})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Educational Value"}),_.jsx("p",{children:"This project serves as an excellent starting point for developers wanting to learn Flow blockchain development. It demonstrates:"}),_.jsxs("ul",{className:"features-list",style:{textAlign:"left",marginTop:"1rem"},children:[_.jsx("li",{children:"How to set up a Flow development environment"}),_.jsx("li",{children:"Wallet integration patterns with FCL"}),_.jsx("li",{children:"Cadence script and transaction basics"}),_.jsx("li",{children:"React state management for blockchain apps"}),_.jsx("li",{children:"Error handling and user experience best practices"}),_.jsx("li",{children:"Modern frontend design for dApps"})]})]}),_.jsxs("div",{className:"card",children:[_.jsx("h3",{children:" Useful Links"}),_.jsxs("div",{className:"cards-grid",children:[_.jsx("a",{href:"https://flow.com",target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline",style:{textDecoration:"none"},children:" Flow Blockchain"}),_.jsx("a",{href:"https://developers.flow.com",target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline",style:{textDecoration:"none"},children:" Developer Docs"}),_.jsx("a",{href:"https://github.com/onflow/fcl-js",target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline",style:{textDecoration:"none"},children:" FCL GitHub"}),_.jsx("a",{href:"https://testnet.flowscan.org",target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline",style:{textDecoration:"none"},children:" Testnet Explorer"})]})]})]})}const OJ={"accessNode.api":"http://localhost:8888","discovery.wallet":"http://localhost:8701/fcl/authn","app.detail.title":"Quote NFT Generator","app.detail.icon":"https://via.placeholder.com/200x200/667eea/ffffff?text=","app.detail.description":"Generate and mint inspirational quotes as NFTs on Flow","app.detail.url":"http://localhost:3000","flow.network":"emulator","0xQuoteNFT":"0xf8d6e0586b0a20c7","0xNonFungibleToken":"0xf8d6e0586b0a20c7","0xMetadataViews":"0xf8d6e0586b0a20c7"};try{ie(OJ),console.log(" FCL configured successfully with Flow emulator"),console.log(" Using QuoteNFT contract for minting"),console.log(" Connect to emulator at http://localhost:8888")}catch(e){console.error(" FCL configuration failed:",e)}function PJ(){return _.jsx(xO,{children:_.jsxs("div",{className:"app",children:[_.jsx(NO,{}),_.jsx("main",{className:"main",children:_.jsxs(eO,{children:[_.jsx(Fi,{path:"/",element:_.jsx(UO,{})}),_.jsx(Fi,{path:"/demo",element:_.jsx(RJ,{})}),_.jsx(Fi,{path:"/quotes",element:_.jsx(T2,{})}),_.jsx(Fi,{path:"/quote-generator",element:_.jsx(T2,{})}),_.jsx(Fi,{path:"/gallery",element:_.jsx(k2,{})}),_.jsx(Fi,{path:"/nft-gallery",element:_.jsx(k2,{})}),_.jsx(Fi,{path:"/about",element:_.jsx($J,{})})]})}),_.jsx(DO,{})]})})}Zp.createRoot(document.getElementById("root")).render(_.jsx(zT.StrictMode,{children:_.jsx(PJ,{})}));export{tU as H,ZI as _,$v as a,Cl as b,LJ as c,Q5 as d,d3 as e,nU as f,BJ as g,lf as h,MJ as i,jJ as j,FJ as r,f3 as t};
